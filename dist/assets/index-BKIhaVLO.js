(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function Yv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var B_={exports:{}},y0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2;function nG(){if(H2)return y0;H2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var l in s)l!=="key"&&(r[l]=s[l])}else r=s;return s=r.ref,{$$typeof:n,type:i,key:a,ref:s!==void 0?s:null,props:r}}return y0.Fragment=e,y0.jsx=t,y0.jsxs=t,y0}var G2;function iG(){return G2||(G2=1,B_.exports=nG()),B_.exports}var H=iG(),D_={exports:{}},En={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2;function sG(){if(V2)return En;V2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(Y){return Y===null||typeof Y!="object"?null:(Y=g&&Y[g]||Y["@@iterator"],typeof Y=="function"?Y:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,M={};function _(Y,oe,be){this.props=Y,this.context=oe,this.refs=M,this.updater=be||x}_.prototype.isReactComponent={},_.prototype.setState=function(Y,oe){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,oe,"setState")},_.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function S(){}S.prototype=_.prototype;function w(Y,oe,be){this.props=Y,this.context=oe,this.refs=M,this.updater=be||x}var C=w.prototype=new S;C.constructor=w,A(C,_.prototype),C.isPureReactComponent=!0;var B=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function F(Y,oe,be,_e,ue,Ue){return be=Ue.ref,{$$typeof:n,type:Y,key:oe,ref:be!==void 0?be:null,props:Ue}}function P(Y,oe){return F(Y.type,oe,void 0,void 0,void 0,Y.props)}function U(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n}function I(Y){var oe={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(be){return oe[be]})}var X=/\/+/g;function re(Y,oe){return typeof Y=="object"&&Y!==null&&Y.key!=null?I(""+Y.key):oe.toString(36)}function ee(){}function $(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(ee,ee):(Y.status="pending",Y.then(function(oe){Y.status==="pending"&&(Y.status="fulfilled",Y.value=oe)},function(oe){Y.status==="pending"&&(Y.status="rejected",Y.reason=oe)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function ae(Y,oe,be,_e,ue){var Ue=typeof Y;(Ue==="undefined"||Ue==="boolean")&&(Y=null);var Be=!1;if(Y===null)Be=!0;else switch(Ue){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(Y.$$typeof){case n:case e:Be=!0;break;case p:return Be=Y._init,ae(Be(Y._payload),oe,be,_e,ue)}}if(Be)return ue=ue(Y),Be=_e===""?"."+re(Y,0):_e,B(ue)?(be="",Be!=null&&(be=Be.replace(X,"$&/")+"/"),ae(ue,oe,be,"",function(Lt){return Lt})):ue!=null&&(U(ue)&&(ue=P(ue,be+(ue.key==null||Y&&Y.key===ue.key?"":(""+ue.key).replace(X,"$&/")+"/")+Be)),oe.push(ue)),1;Be=0;var He=_e===""?".":_e+":";if(B(Y))for(var et=0;et<Y.length;et++)_e=Y[et],Ue=He+re(_e,et),Be+=ae(_e,oe,be,Ue,ue);else if(et=v(Y),typeof et=="function")for(Y=et.call(Y),et=0;!(_e=Y.next()).done;)_e=_e.value,Ue=He+re(_e,et++),Be+=ae(_e,oe,be,Ue,ue);else if(Ue==="object"){if(typeof Y.then=="function")return ae($(Y),oe,be,_e,ue);throw oe=String(Y),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Be}function j(Y,oe,be){if(Y==null)return Y;var _e=[],ue=0;return ae(Y,_e,"","",function(Ue){return oe.call(be,Ue,ue++)}),_e}function Q(Y){if(Y._status===-1){var oe=Y._result;oe=oe(),oe.then(function(be){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=be)},function(be){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=be)}),Y._status===-1&&(Y._status=0,Y._result=oe)}if(Y._status===1)return Y._result.default;throw Y._result}var J=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function xe(){}return En.Children={map:j,forEach:function(Y,oe,be){j(Y,function(){oe.apply(this,arguments)},be)},count:function(Y){var oe=0;return j(Y,function(){oe++}),oe},toArray:function(Y){return j(Y,function(oe){return oe})||[]},only:function(Y){if(!U(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},En.Component=_,En.Fragment=t,En.Profiler=s,En.PureComponent=w,En.StrictMode=i,En.Suspense=c,En.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,En.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return N.H.useMemoCache(Y)}},En.cache=function(Y){return function(){return Y.apply(null,arguments)}},En.cloneElement=function(Y,oe,be){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var _e=A({},Y.props),ue=Y.key,Ue=void 0;if(oe!=null)for(Be in oe.ref!==void 0&&(Ue=void 0),oe.key!==void 0&&(ue=""+oe.key),oe)!L.call(oe,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&oe.ref===void 0||(_e[Be]=oe[Be]);var Be=arguments.length-2;if(Be===1)_e.children=be;else if(1<Be){for(var He=Array(Be),et=0;et<Be;et++)He[et]=arguments[et+2];_e.children=He}return F(Y.type,ue,void 0,void 0,Ue,_e)},En.createContext=function(Y){return Y={$$typeof:a,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:r,_context:Y},Y},En.createElement=function(Y,oe,be){var _e,ue={},Ue=null;if(oe!=null)for(_e in oe.key!==void 0&&(Ue=""+oe.key),oe)L.call(oe,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(ue[_e]=oe[_e]);var Be=arguments.length-2;if(Be===1)ue.children=be;else if(1<Be){for(var He=Array(Be),et=0;et<Be;et++)He[et]=arguments[et+2];ue.children=He}if(Y&&Y.defaultProps)for(_e in Be=Y.defaultProps,Be)ue[_e]===void 0&&(ue[_e]=Be[_e]);return F(Y,Ue,void 0,void 0,null,ue)},En.createRef=function(){return{current:null}},En.forwardRef=function(Y){return{$$typeof:l,render:Y}},En.isValidElement=U,En.lazy=function(Y){return{$$typeof:p,_payload:{_status:-1,_result:Y},_init:Q}},En.memo=function(Y,oe){return{$$typeof:f,type:Y,compare:oe===void 0?null:oe}},En.startTransition=function(Y){var oe=N.T,be={};N.T=be;try{var _e=Y(),ue=N.S;ue!==null&&ue(be,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(xe,J)}catch(Ue){J(Ue)}finally{N.T=oe}},En.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},En.use=function(Y){return N.H.use(Y)},En.useActionState=function(Y,oe,be){return N.H.useActionState(Y,oe,be)},En.useCallback=function(Y,oe){return N.H.useCallback(Y,oe)},En.useContext=function(Y){return N.H.useContext(Y)},En.useDebugValue=function(){},En.useDeferredValue=function(Y,oe){return N.H.useDeferredValue(Y,oe)},En.useEffect=function(Y,oe,be){var _e=N.H;if(typeof be=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return _e.useEffect(Y,oe)},En.useId=function(){return N.H.useId()},En.useImperativeHandle=function(Y,oe,be){return N.H.useImperativeHandle(Y,oe,be)},En.useInsertionEffect=function(Y,oe){return N.H.useInsertionEffect(Y,oe)},En.useLayoutEffect=function(Y,oe){return N.H.useLayoutEffect(Y,oe)},En.useMemo=function(Y,oe){return N.H.useMemo(Y,oe)},En.useOptimistic=function(Y,oe){return N.H.useOptimistic(Y,oe)},En.useReducer=function(Y,oe,be){return N.H.useReducer(Y,oe,be)},En.useRef=function(Y){return N.H.useRef(Y)},En.useState=function(Y){return N.H.useState(Y)},En.useSyncExternalStore=function(Y,oe,be){return N.H.useSyncExternalStore(Y,oe,be)},En.useTransition=function(){return N.H.useTransition()},En.version="19.1.0",En}var k2;function Vm(){return k2||(k2=1,D_.exports=sG()),D_.exports}var z=Vm();const sa=Yv(z);var N_={exports:{}},x0={},L_={exports:{}},O_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2;function rG(){return j2||(j2=1,function(n){function e(j,Q){var J=j.length;j.push(Q);e:for(;0<J;){var xe=J-1>>>1,Y=j[xe];if(0<s(Y,Q))j[xe]=Q,j[J]=Y,J=xe;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Q=j[0],J=j.pop();if(J!==Q){j[0]=J;e:for(var xe=0,Y=j.length,oe=Y>>>1;xe<oe;){var be=2*(xe+1)-1,_e=j[be],ue=be+1,Ue=j[ue];if(0>s(_e,J))ue<Y&&0>s(Ue,_e)?(j[xe]=Ue,j[ue]=J,xe=ue):(j[xe]=_e,j[be]=J,xe=be);else if(ue<Y&&0>s(Ue,J))j[xe]=Ue,j[ue]=J,xe=ue;else break e}}return Q}function s(j,Q){var J=j.sortIndex-Q.sortIndex;return J!==0?J:j.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,g=null,v=3,x=!1,A=!1,M=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function B(j){for(var Q=t(f);Q!==null;){if(Q.callback===null)i(f);else if(Q.startTime<=j)i(f),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=t(f)}}function N(j){if(M=!1,B(j),!A)if(t(c)!==null)A=!0,L||(L=!0,re());else{var Q=t(f);Q!==null&&ae(N,Q.startTime-j)}}var L=!1,F=-1,P=5,U=-1;function I(){return _?!0:!(n.unstable_now()-U<P)}function X(){if(_=!1,L){var j=n.unstable_now();U=j;var Q=!0;try{e:{A=!1,M&&(M=!1,w(F),F=-1),x=!0;var J=v;try{t:{for(B(j),g=t(c);g!==null&&!(g.expirationTime>j&&I());){var xe=g.callback;if(typeof xe=="function"){g.callback=null,v=g.priorityLevel;var Y=xe(g.expirationTime<=j);if(j=n.unstable_now(),typeof Y=="function"){g.callback=Y,B(j),Q=!0;break t}g===t(c)&&i(c),B(j)}else i(c);g=t(c)}if(g!==null)Q=!0;else{var oe=t(f);oe!==null&&ae(N,oe.startTime-j),Q=!1}}break e}finally{g=null,v=J,x=!1}Q=void 0}}finally{Q?re():L=!1}}}var re;if(typeof C=="function")re=function(){C(X)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,$=ee.port2;ee.port1.onmessage=X,re=function(){$.postMessage(null)}}else re=function(){S(X,0)};function ae(j,Q){F=S(function(){j(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var J=v;v=Q;try{return j()}finally{v=J}},n.unstable_requestPaint=function(){_=!0},n.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var J=v;v=j;try{return Q()}finally{v=J}},n.unstable_scheduleCallback=function(j,Q,J){var xe=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?xe+J:xe):J=xe,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=J+Y,j={id:p++,callback:Q,priorityLevel:j,startTime:J,expirationTime:Y,sortIndex:-1},J>xe?(j.sortIndex=J,e(f,j),t(c)===null&&j===t(f)&&(M?(w(F),F=-1):M=!0,ae(N,J-xe))):(j.sortIndex=Y,e(c,j),A||x||(A=!0,L||(L=!0,re()))),j},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(j){var Q=v;return function(){var J=v;v=Q;try{return j.apply(this,arguments)}finally{v=J}}}}(O_)),O_}var X2;function aG(){return X2||(X2=1,L_.exports=rG()),L_.exports}var U_={exports:{}},Er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2;function oG(){if(Y2)return Er;Y2=1;var n=Vm();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(c,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:c,containerInfo:f,implementation:p}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Er.createPortal=function(c,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return r(c,f,null,p)},Er.flushSync=function(c){var f=a.T,p=i.p;try{if(a.T=null,i.p=2,c)return c()}finally{a.T=f,i.p=p,i.d.f()}},Er.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},Er.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Er.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var p=f.as,g=l(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):p==="script"&&i.d.X(c,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Er.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=l(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},Er.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=l(p,f.crossOrigin);i.d.L(c,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Er.preloadModule=function(c,f){if(typeof c=="string")if(f){var p=l(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},Er.requestFormReset=function(c){i.d.r(c)},Er.unstable_batchedUpdates=function(c,f){return c(f)},Er.useFormState=function(c,f,p){return a.H.useFormState(c,f,p)},Er.useFormStatus=function(){return a.H.useHostTransitionStatus()},Er.version="19.1.0",Er}var W2;function lG(){if(W2)return U_.exports;W2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),U_.exports=oG(),U_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2;function cG(){if(q2)return x0;q2=1;var n=aG(),e=Vm(),t=lG();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var u=o,m=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(m=u.return),o=u.return;while(o)}return u.tag===3?m:null}function a(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(r(o)!==o)throw Error(i(188))}function c(o){var u=o.alternate;if(!u){if(u=r(o),u===null)throw Error(i(188));return u!==o?null:o}for(var m=o,y=u;;){var E=m.return;if(E===null)break;var R=E.alternate;if(R===null){if(y=E.return,y!==null){m=y;continue}break}if(E.child===R.child){for(R=E.child;R;){if(R===m)return l(E),o;if(R===y)return l(E),u;R=R.sibling}throw Error(i(188))}if(m.return!==y.return)m=E,y=R;else{for(var G=!1,q=E.child;q;){if(q===m){G=!0,m=E,y=R;break}if(q===y){G=!0,y=E,m=R;break}q=q.sibling}if(!G){for(q=R.child;q;){if(q===m){G=!0,m=R,y=E;break}if(q===y){G=!0,y=R,m=E;break}q=q.sibling}if(!G)throw Error(i(189))}}if(m.alternate!==y)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?o:u}function f(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=f(o),u!==null)return u;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),C=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=X&&o[X]||o["@@iterator"],typeof o=="function"?o:null)}var ee=Symbol.for("react.client.reference");function $(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ee?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case A:return"Fragment";case _:return"Profiler";case M:return"StrictMode";case N:return"Suspense";case L:return"SuspenseList";case U:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case C:return(o.displayName||"Context")+".Provider";case w:return(o._context.displayName||"Context")+".Consumer";case B:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return u=o.displayName||null,u!==null?u:$(o.type)||"Memo";case P:u=o._payload,o=o._init;try{return $(o(u))}catch{}}return null}var ae=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},xe=[],Y=-1;function oe(o){return{current:o}}function be(o){0>Y||(o.current=xe[Y],xe[Y]=null,Y--)}function _e(o,u){Y++,xe[Y]=o.current,o.current=u}var ue=oe(null),Ue=oe(null),Be=oe(null),He=oe(null);function et(o,u){switch(_e(Be,u),_e(Ue,o),_e(ue,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?p2(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=p2(u),o=m2(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}be(ue),_e(ue,o)}function Lt(){be(ue),be(Ue),be(Be)}function _t(o){o.memoizedState!==null&&_e(He,o);var u=ue.current,m=m2(u,o.type);u!==m&&(_e(Ue,o),_e(ue,m))}function jt(o){Ue.current===o&&(be(ue),be(Ue)),He.current===o&&(be(He),d0._currentValue=J)}var Ye=Object.prototype.hasOwnProperty,Ze=n.unstable_scheduleCallback,ie=n.unstable_cancelCallback,Bt=n.unstable_shouldYield,it=n.unstable_requestPaint,ft=n.unstable_now,lt=n.unstable_getCurrentPriorityLevel,Ft=n.unstable_ImmediatePriority,dt=n.unstable_UserBlockingPriority,ne=n.unstable_NormalPriority,W=n.unstable_LowPriority,Me=n.unstable_IdlePriority,ke=n.log,Qe=n.unstable_setDisableYieldValue,je=null,gt=null;function ct(o){if(typeof ke=="function"&&Qe(o),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(je,o)}catch{}}var ht=Math.clz32?Math.clz32:Tt,hn=Math.log,st=Math.LN2;function Tt(o){return o>>>=0,o===0?32:31-(hn(o)/st|0)|0}var Rt=256,St=4194304;function mt(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function me(o,u,m){var y=o.pendingLanes;if(y===0)return 0;var E=0,R=o.suspendedLanes,G=o.pingedLanes;o=o.warmLanes;var q=y&134217727;return q!==0?(y=q&~R,y!==0?E=mt(y):(G&=q,G!==0?E=mt(G):m||(m=q&~o,m!==0&&(E=mt(m))))):(q=y&~R,q!==0?E=mt(q):G!==0?E=mt(G):m||(m=y&~o,m!==0&&(E=mt(m)))),E===0?0:u!==0&&u!==E&&(u&R)===0&&(R=E&-E,m=u&-u,R>=m||R===32&&(m&4194048)!==0)?u:E}function Fe(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function rt(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function de(){var o=Rt;return Rt<<=1,(Rt&4194048)===0&&(Rt=256),o}function Ee(){var o=St;return St<<=1,(St&62914560)===0&&(St=4194304),o}function Oe(o){for(var u=[],m=0;31>m;m++)u.push(o);return u}function Xe(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function xt(o,u,m,y,E,R){var G=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var q=o.entanglements,ce=o.expirationTimes,we=o.hiddenUpdates;for(m=G&~m;0<m;){var Ke=31-ht(m),$e=1<<Ke;q[Ke]=0,ce[Ke]=-1;var Le=we[Ke];if(Le!==null)for(we[Ke]=null,Ke=0;Ke<Le.length;Ke++){var Pe=Le[Ke];Pe!==null&&(Pe.lane&=-536870913)}m&=~$e}y!==0&&vt(o,y,0),R!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=R&~(G&~u))}function vt(o,u,m){o.pendingLanes|=u,o.suspendedLanes&=~u;var y=31-ht(u);o.entangledLanes|=u,o.entanglements[y]=o.entanglements[y]|1073741824|m&4194090}function Ht(o,u){var m=o.entangledLanes|=u;for(o=o.entanglements;m;){var y=31-ht(m),E=1<<y;E&u|o[y]&u&&(o[y]|=u),m&=~E}}function vn(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Yn(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function cn(){var o=Q.p;return o!==0?o:(o=window.event,o===void 0?32:O2(o.type))}function Ui(o,u){var m=Q.p;try{return Q.p=o,u()}finally{Q.p=m}}var vi=Math.random().toString(36).slice(2),Pi="__reactFiber$"+vi,ji="__reactProps$"+vi,Xi="__reactContainer$"+vi,ks="__reactEvents$"+vi,Ca="__reactListeners$"+vi,Rs="__reactHandles$"+vi,Kt="__reactResources$"+vi,gr="__reactMarker$"+vi;function $n(o){delete o[Pi],delete o[ji],delete o[ks],delete o[Ca],delete o[Rs]}function k(o){var u=o[Pi];if(u)return u;for(var m=o.parentNode;m;){if(u=m[Xi]||m[Pi]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(o=x2(o);o!==null;){if(m=o[Pi])return m;o=x2(o)}return u}o=m,m=o.parentNode}return null}function Z(o){if(o=o[Pi]||o[Xi]){var u=o.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return o}return null}function pe(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function Re(o){var u=o[Kt];return u||(u=o[Kt]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Ne(o){o[gr]=!0}var Ge=new Set,at={};function nt(o,u){V(o,u),V(o+"Capture",u)}function V(o,u){for(at[o]=u,o=0;o<u.length;o++)Ge.add(u[o])}var se=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),le={},fe={};function ve(o){return Ye.call(fe,o)?!0:Ye.call(le,o)?!1:se.test(o)?fe[o]=!0:(le[o]=!0,!1)}function Ce(o,u,m){if(ve(u))if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+m)}}function Ve(o,u,m){if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+m)}}function We(o,u,m,y){if(y===null)o.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(u,m,""+y)}}var tt,bt;function yt(o){if(tt===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);tt=u&&u[1]||"",bt=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+o+bt}var At=!1;function Xt(o,u){if(!o||At)return"";At=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(Pe){var Le=Pe}Reflect.construct(o,[],$e)}else{try{$e.call()}catch(Pe){Le=Pe}o.call($e.prototype)}}else{try{throw Error()}catch(Pe){Le=Pe}($e=o())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(Pe){if(Pe&&Le&&typeof Pe.stack=="string")return[Pe.stack,Le.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=y.DetermineComponentFrameRoot(),G=R[0],q=R[1];if(G&&q){var ce=G.split(`
`),we=q.split(`
`);for(E=y=0;y<ce.length&&!ce[y].includes("DetermineComponentFrameRoot");)y++;for(;E<we.length&&!we[E].includes("DetermineComponentFrameRoot");)E++;if(y===ce.length||E===we.length)for(y=ce.length-1,E=we.length-1;1<=y&&0<=E&&ce[y]!==we[E];)E--;for(;1<=y&&0<=E;y--,E--)if(ce[y]!==we[E]){if(y!==1||E!==1)do if(y--,E--,0>E||ce[y]!==we[E]){var Ke=`
`+ce[y].replace(" at new "," at ");return o.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",o.displayName)),Ke}while(1<=y&&0<=E);break}}}finally{At=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?yt(m):""}function It(o){switch(o.tag){case 26:case 27:case 5:return yt(o.type);case 16:return yt("Lazy");case 13:return yt("Suspense");case 19:return yt("SuspenseList");case 0:case 15:return Xt(o.type,!1);case 11:return Xt(o.type.render,!1);case 1:return Xt(o.type,!0);case 31:return yt("Activity");default:return""}}function Ln(o){try{var u="";do u+=It(o),o=o.return;while(o);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Dt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Vt(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Nt(o){var u=Vt(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),y=""+o[u];if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,R=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return E.call(this)},set:function(G){y=""+G,R.call(this,G)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return y},setValue:function(G){y=""+G},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function ri(o){o._valueTracker||(o._valueTracker=Nt(o))}function tn(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var m=u.getValue(),y="";return o&&(y=Vt(o)?o.checked?"true":"false":o.value),o=y,o!==m?(u.setValue(o),!0):!1}function ln(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var ci=/[\n"\\]/g;function qt(o){return o.replace(ci,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function An(o,u,m,y,E,R,G,q){o.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?o.type=G:o.removeAttribute("type"),u!=null?G==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Dt(u)):o.value!==""+Dt(u)&&(o.value=""+Dt(u)):G!=="submit"&&G!=="reset"||o.removeAttribute("value"),u!=null?_i(o,G,Dt(u)):m!=null?_i(o,G,Dt(m)):y!=null&&o.removeAttribute("value"),E==null&&R!=null&&(o.defaultChecked=!!R),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.name=""+Dt(q):o.removeAttribute("name")}function yn(o,u,m,y,E,R,G,q){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(o.type=R),u!=null||m!=null){if(!(R!=="submit"&&R!=="reset"||u!=null))return;m=m!=null?""+Dt(m):"",u=u!=null?""+Dt(u):m,q||u===o.value||(o.value=u),o.defaultValue=u}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=q?o.checked:!!y,o.defaultChecked=!!y,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(o.name=G)}function _i(o,u,m){u==="number"&&ln(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function In(o,u,m,y){if(o=o.options,u){u={};for(var E=0;E<m.length;E++)u["$"+m[E]]=!0;for(m=0;m<o.length;m++)E=u.hasOwnProperty("$"+o[m].value),o[m].selected!==E&&(o[m].selected=E),E&&y&&(o[m].defaultSelected=!0)}else{for(m=""+Dt(m),u=null,E=0;E<o.length;E++){if(o[E].value===m){o[E].selected=!0,y&&(o[E].defaultSelected=!0);return}u!==null||o[E].disabled||(u=o[E])}u!==null&&(u.selected=!0)}}function ui(o,u,m){if(u!=null&&(u=""+Dt(u),u!==o.value&&(o.value=u),m==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=m!=null?""+Dt(m):""}function bs(o,u,m,y){if(u==null){if(y!=null){if(m!=null)throw Error(i(92));if(ae(y)){if(1<y.length)throw Error(i(93));y=y[0]}m=y}m==null&&(m=""),u=m}m=Dt(u),o.defaultValue=m,y=o.textContent,y===m&&y!==""&&y!==null&&(o.value=y)}function $s(o,u){if(u){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=u;return}}o.textContent=u}var Wa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Of(o,u,m){var y=u.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":y?o.setProperty(u,m):typeof m!="number"||m===0||Wa.has(u)?u==="float"?o.cssFloat=m:o[u]=(""+m).trim():o[u]=m+"px"}function Uf(o,u,m){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var E in u)y=u[E],u.hasOwnProperty(E)&&m[E]!==y&&Of(o,E,y)}else for(var R in u)u.hasOwnProperty(R)&&Of(o,R,u[R])}function Nd(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ty=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pf(o){return Ty.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Ld=null;function Od(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var vl=null,hc=null;function ag(o){var u=Z(o);if(u&&(o=u.stateNode)){var m=o[ji]||null;e:switch(o=u.stateNode,u.type){case"input":if(An(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),u=m.name,m.type==="radio"&&u!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+qt(""+u)+'"][type="radio"]'),u=0;u<m.length;u++){var y=m[u];if(y!==o&&y.form===o.form){var E=y[ji]||null;if(!E)throw Error(i(90));An(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(u=0;u<m.length;u++)y=m[u],y.form===o.form&&tn(y)}break e;case"textarea":ui(o,m.value,m.defaultValue);break e;case"select":u=m.value,u!=null&&In(o,!!m.multiple,u,!1)}}}var If=!1;function og(o,u,m){if(If)return o(u,m);If=!0;try{var y=o(u);return y}finally{if(If=!1,(vl!==null||hc!==null)&&(co(),vl&&(u=vl,o=hc,hc=vl=null,ag(u),o)))for(u=0;u<o.length;u++)ag(o[u])}}function ru(o,u){var m=o.stateNode;if(m===null)return null;var y=m[ji]||null;if(y===null)return null;m=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(i(231,u,typeof m));return m}var qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ff=!1;if(qa)try{var au={};Object.defineProperty(au,"passive",{get:function(){Ff=!0}}),window.addEventListener("test",au,au),window.removeEventListener("test",au,au)}catch{Ff=!1}var To=null,lg=null,Ud=null;function cg(){if(Ud)return Ud;var o,u=lg,m=u.length,y,E="value"in To?To.value:To.textContent,R=E.length;for(o=0;o<m&&u[o]===E[o];o++);var G=m-o;for(y=1;y<=G&&u[m-y]===E[R-y];y++);return Ud=E.slice(o,1<y?1-y:void 0)}function yl(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function ou(){return!0}function zf(){return!1}function er(o){function u(m,y,E,R,G){this._reactName=m,this._targetInst=E,this.type=y,this.nativeEvent=R,this.target=G,this.currentTarget=null;for(var q in o)o.hasOwnProperty(q)&&(m=o[q],this[q]=m?m(R):R[q]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?ou:zf,this.isPropagationStopped=zf,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ou)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ou)},persist:function(){},isPersistent:ou}),u}var xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lu=er(xl),cu=p({},xl,{view:0,detail:0}),Cy=er(cu),Co,uu,fu,hu=p({},cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gf,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==fu&&(fu&&o.type==="mousemove"?(Co=o.screenX-fu.screenX,uu=o.screenY-fu.screenY):uu=Co=0,fu=o),Co)},movementY:function(o){return"movementY"in o?o.movementY:uu}}),ug=er(hu),wy=p({},hu,{dataTransfer:0}),qS=er(wy),Bs=p({},cu,{relatedTarget:0}),Pd=er(Bs),Ry=p({},xl,{animationName:0,elapsedTime:0,pseudoElement:0}),By=er(Ry),Dy=p({},xl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Ny=er(Dy),Hf=p({},xl,{data:0}),Id=er(Hf),Ly={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fg(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Uy[o])?!!u[o]:!1}function Gf(){return fg}var Py=p({},cu,{key:function(o){if(o.key){var u=Ly[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=yl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Oy[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gf,charCode:function(o){return o.type==="keypress"?yl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?yl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),hg=er(Py),dg=p({},hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fd=er(dg),Iy=p({},cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gf}),pg=er(Iy),Fy=p({},xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),wo=er(Fy),mg=p({},hu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),KS=er(mg),zy=p({},xl,{newState:0,oldState:0}),bl=er(zy),Ro=[9,13,27,32],Vf=qa&&"CompositionEvent"in window,dc=null;qa&&"documentMode"in document&&(dc=document.documentMode);var kf=qa&&"TextEvent"in window&&!dc,jf=qa&&(!Vf||dc&&8<dc&&11>=dc),Al=" ",Ds=!1;function Xf(o,u){switch(o){case"keyup":return Ro.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gg(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Sl=!1;function Yf(o,u){switch(o){case"compositionend":return gg(u);case"keypress":return u.which!==32?null:(Ds=!0,Al);case"textInput":return o=u.data,o===Al&&Ds?null:o;default:return null}}function vg(o,u){if(Sl)return o==="compositionend"||!Vf&&Xf(o,u)?(o=cg(),Ud=lg=To=null,Sl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return jf&&u.locale!=="ko"?null:u.data;default:return null}}var zd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yg(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!zd[o.type]:u==="textarea"}function vr(o,u,m,y){vl?hc?hc.push(y):hc=[y]:vl=y,u=Fx(u,"onChange"),0<u.length&&(m=new lu("onChange","change",null,m,y),o.push({event:m,listeners:u}))}var du=null,pc=null;function Hy(o){c2(o,0)}function Wf(o){var u=pe(o);if(tn(u))return o}function Hd(o,u){if(o==="change")return u}var Gd=!1;if(qa){var Vd;if(qa){var pu="oninput"in document;if(!pu){var mu=document.createElement("div");mu.setAttribute("oninput","return;"),pu=typeof mu.oninput=="function"}Vd=pu}else Vd=!1;Gd=Vd&&(!document.documentMode||9<document.documentMode)}function Ti(){du&&(du.detachEvent("onpropertychange",Gy),pc=du=null)}function Gy(o){if(o.propertyName==="value"&&Wf(pc)){var u=[];vr(u,pc,o,Od(o)),og(Hy,u)}}function JS(o,u,m){o==="focusin"?(Ti(),du=u,pc=m,du.attachEvent("onpropertychange",Gy)):o==="focusout"&&Ti()}function Vy(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Wf(pc)}function qf(o,u){if(o==="click")return Wf(u)}function _l(o,u){if(o==="input"||o==="change")return Wf(u)}function ky(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var yr=typeof Object.is=="function"?Object.is:ky;function wa(o,u){if(yr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var m=Object.keys(o),y=Object.keys(u);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var E=m[y];if(!Ye.call(u,E)||!yr(o[E],u[E]))return!1}return!0}function xr(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function xg(o,u){var m=xr(o);o=0;for(var y;m;){if(m.nodeType===3){if(y=o+m.textContent.length,o<=u&&y>=u)return{node:m,offset:u-o};o=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=xr(m)}}function bg(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?bg(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Ag(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=ln(o.document);u instanceof o.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)o=u.contentWindow;else break;u=ln(o.document)}return u}function Kf(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var Sg=qa&&"documentMode"in document&&11>=document.documentMode,Bo=null,kd=null,Jf=null,jd=!1;function _g(o,u,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;jd||Bo==null||Bo!==ln(y)||(y=Bo,"selectionStart"in y&&Kf(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Jf&&wa(Jf,y)||(Jf=y,y=Fx(kd,"onSelect"),0<y.length&&(u=new lu("onSelect","select",null,u,m),o.push({event:u,listeners:y}),u.target=Bo)))}function Ns(o,u){var m={};return m[o.toLowerCase()]=u.toLowerCase(),m["Webkit"+o]="webkit"+u,m["Moz"+o]="moz"+u,m}var Ml={animationend:Ns("Animation","AnimationEnd"),animationiteration:Ns("Animation","AnimationIteration"),animationstart:Ns("Animation","AnimationStart"),transitionrun:Ns("Transition","TransitionRun"),transitionstart:Ns("Transition","TransitionStart"),transitioncancel:Ns("Transition","TransitionCancel"),transitionend:Ns("Transition","TransitionEnd")},Xd={},jy={};qa&&(jy=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function Do(o){if(Xd[o])return Xd[o];if(!Ml[o])return o;var u=Ml[o],m;for(m in u)if(u.hasOwnProperty(m)&&m in jy)return Xd[o]=u[m];return o}var tr=Do("animationend"),Mg=Do("animationiteration"),br=Do("animationstart"),Xy=Do("transitionrun"),No=Do("transitionstart"),gu=Do("transitioncancel"),Lo=Do("transitionend"),Yd=new Map,Zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zf.push("scrollEnd");function As(o,u){Yd.set(o,u),nt(u,[o])}var Eg=new WeakMap;function Ls(o,u){if(typeof o=="object"&&o!==null){var m=Eg.get(o);return m!==void 0?m:(u={value:o,source:u,stack:Ln(u)},Eg.set(o,u),u)}return{value:o,source:u,stack:Ln(u)}}var js=[],aa=0,Wd=0;function Qf(){for(var o=aa,u=Wd=aa=0;u<o;){var m=js[u];js[u++]=null;var y=js[u];js[u++]=null;var E=js[u];js[u++]=null;var R=js[u];if(js[u++]=null,y!==null&&E!==null){var G=y.pending;G===null?E.next=E:(E.next=G.next,G.next=E),y.pending=E}R!==0&&Tg(m,E,R)}}function El(o,u,m,y){js[aa++]=o,js[aa++]=u,js[aa++]=m,js[aa++]=y,Wd|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function qd(o,u,m,y){return El(o,u,m,y),vu(o)}function Oo(o,u){return El(o,null,null,u),vu(o)}function Tg(o,u,m){o.lanes|=m;var y=o.alternate;y!==null&&(y.lanes|=m);for(var E=!1,R=o.return;R!==null;)R.childLanes|=m,y=R.alternate,y!==null&&(y.childLanes|=m),R.tag===22&&(o=R.stateNode,o===null||o._visibility&1||(E=!0)),o=R,R=R.return;return o.tag===3?(R=o.stateNode,E&&u!==null&&(E=31-ht(m),o=R.hiddenUpdates,y=o[E],y===null?o[E]=[u]:y.push(u),u.lane=m|536870912),R):null}function vu(o){if(50<lo)throw lo=0,Nc=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Tl={};function Cg(o,u,m,y){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(o,u,m,y){return new Cg(o,u,m,y)}function $f(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Yi(o,u){var m=o.alternate;return m===null?(m=Ar(o.tag,u,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=u,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,u=o.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function wg(o,u){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,u=m.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Ss(o,u,m,y,E,R){var G=0;if(y=o,typeof o=="function")$f(o)&&(G=1);else if(typeof o=="string")G=k5(o,m,ue.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case U:return o=Ar(31,m,u,E),o.elementType=U,o.lanes=R,o;case A:return Cl(m.children,E,R,u);case M:G=8,E|=24;break;case _:return o=Ar(12,m,u,E|2),o.elementType=_,o.lanes=R,o;case N:return o=Ar(13,m,u,E),o.elementType=N,o.lanes=R,o;case L:return o=Ar(19,m,u,E),o.elementType=L,o.lanes=R,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case C:G=10;break e;case w:G=9;break e;case B:G=11;break e;case F:G=14;break e;case P:G=16,y=null;break e}G=29,m=Error(i(130,o===null?"null":typeof o,"")),y=null}return u=Ar(G,m,u,E),u.elementType=o,u.type=y,u.lanes=R,u}function Cl(o,u,m,y){return o=Ar(7,o,y,u),o.lanes=m,o}function eh(o,u,m){return o=Ar(6,o,null,u),o.lanes=m,o}function Kd(o,u,m){return u=Ar(4,o.children!==null?o.children:[],o.key,u),u.lanes=m,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var yu=[],Sr=0,th=null,xu=0,Os=[],Ur=0,wl=null,Ka=1,Ja="";function Uo(o,u){yu[Sr++]=xu,yu[Sr++]=th,th=o,xu=u}function Jd(o,u,m){Os[Ur++]=Ka,Os[Ur++]=Ja,Os[Ur++]=wl,wl=o;var y=Ka;o=Ja;var E=32-ht(y)-1;y&=~(1<<E),m+=1;var R=32-ht(u)+E;if(30<R){var G=E-E%5;R=(y&(1<<G)-1).toString(32),y>>=G,E-=G,Ka=1<<32-ht(u)+E|m<<E|y,Ja=R+o}else Ka=1<<R|m<<E|y,Ja=o}function Rg(o){o.return!==null&&(Uo(o,1),Jd(o,1,0))}function Bg(o){for(;o===th;)th=yu[--Sr],yu[Sr]=null,xu=yu[--Sr],yu[Sr]=null;for(;o===wl;)wl=Os[--Ur],Os[Ur]=null,Ja=Os[--Ur],Os[Ur]=null,Ka=Os[--Ur],Os[Ur]=null}var nr=null,Ri=null,Wn=!1,oa=null,Pr=!1,Zd=Error(i(519));function Rl(o){var u=Error(i(418,""));throw mc(Ls(u,o)),Zd}function Yy(o){var u=o.stateNode,m=o.type,y=o.memoizedProps;switch(u[Pi]=o,u[ji]=y,m){case"dialog":On("cancel",u),On("close",u);break;case"iframe":case"object":case"embed":On("load",u);break;case"video":case"audio":for(m=0;m<o0.length;m++)On(o0[m],u);break;case"source":On("error",u);break;case"img":case"image":case"link":On("error",u),On("load",u);break;case"details":On("toggle",u);break;case"input":On("invalid",u),yn(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),ri(u);break;case"select":On("invalid",u);break;case"textarea":On("invalid",u),bs(u,y.value,y.defaultValue,y.children),ri(u)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||u.textContent===""+m||y.suppressHydrationWarning===!0||d2(u.textContent,m)?(y.popover!=null&&(On("beforetoggle",u),On("toggle",u)),y.onScroll!=null&&On("scroll",u),y.onScrollEnd!=null&&On("scrollend",u),y.onClick!=null&&(u.onclick=zx),u=!0):u=!1,u||Rl(o)}function Dg(o){for(nr=o.return;nr;)switch(nr.tag){case 5:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:nr=nr.return}}function Ra(o){if(o!==nr)return!1;if(!Wn)return Dg(o),Wn=!0,!1;var u=o.tag,m;if((m=u!==3&&u!==27)&&((m=u===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||g_(o.type,o.memoizedProps)),m=!m),m&&Ri&&Rl(o),Dg(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8)if(m=o.data,m==="/$"){if(u===0){Ri=Ko(o.nextSibling);break e}u--}else m!=="$"&&m!=="$!"&&m!=="$?"||u++;o=o.nextSibling}Ri=null}}else u===27?(u=Ri,ju(o.type)?(o=b_,b_=null,Ri=o):Ri=u):Ri=nr?Ko(o.stateNode.nextSibling):null;return!0}function bu(){Ri=nr=null,Wn=!1}function ei(){var o=oa;return o!==null&&(Zt===null?Zt=o:Zt.push.apply(Zt,o),oa=null),o}function mc(o){oa===null?oa=[o]:oa.push(o)}var Ng=oe(null),Bl=null,Po=null;function Dl(o,u,m){_e(Ng,u._currentValue),u._currentValue=m}function Io(o){o._currentValue=Ng.current,be(Ng)}function Lg(o,u,m){for(;o!==null;){var y=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),o===m)break;o=o.return}}function nh(o,u,m,y){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var R=E.dependencies;if(R!==null){var G=E.child;R=R.firstContext;e:for(;R!==null;){var q=R;R=E;for(var ce=0;ce<u.length;ce++)if(q.context===u[ce]){R.lanes|=m,q=R.alternate,q!==null&&(q.lanes|=m),Lg(R.return,m,o),y||(G=null);break e}R=q.next}}else if(E.tag===18){if(G=E.return,G===null)throw Error(i(341));G.lanes|=m,R=G.alternate,R!==null&&(R.lanes|=m),Lg(G,m,o),G=null}else G=E.child;if(G!==null)G.return=E;else for(G=E;G!==null;){if(G===o){G=null;break}if(E=G.sibling,E!==null){E.return=G.return,G=E;break}G=G.return}E=G}}function la(o,u,m,y){o=null;for(var E=u,R=!1;E!==null;){if(!R){if((E.flags&524288)!==0)R=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var G=E.alternate;if(G===null)throw Error(i(387));if(G=G.memoizedProps,G!==null){var q=E.type;yr(E.pendingProps.value,G.value)||(o!==null?o.push(q):o=[q])}}else if(E===He.current){if(G=E.alternate,G===null)throw Error(i(387));G.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(d0):o=[d0])}E=E.return}o!==null&&nh(u,o,m,y),u.flags|=262144}function ih(o){for(o=o.firstContext;o!==null;){if(!yr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Za(o){Bl=o,Po=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ii(o){return Qd(Bl,o)}function sh(o,u){return Bl===null&&Za(o),Qd(o,u)}function Qd(o,u){var m=u._currentValue;if(u={context:u,memoizedValue:m,next:null},Po===null){if(o===null)throw Error(i(308));Po=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Po=Po.next=u;return m}var Og=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(m,y){o.push(y)}};this.abort=function(){u.aborted=!0,o.forEach(function(m){return m()})}},ZS=n.unstable_scheduleCallback,Wy=n.unstable_NormalPriority,is={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $d(){return{controller:new Og,data:new Map,refCount:0}}function Au(o){o.refCount--,o.refCount===0&&ZS(Wy,function(){o.controller.abort()})}var Su=null,rh=0,dn=0,_u=null;function Ir(o,u){if(Su===null){var m=Su=[];rh=0,dn=o_(),_u={status:"pending",value:void 0,then:function(y){m.push(y)}}}return rh++,u.then(ep,ep),u}function ep(){if(--rh===0&&Su!==null){_u!==null&&(_u.status="fulfilled");var o=Su;Su=null,dn=0,_u=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function QS(o,u){var m=[],y={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return o.then(function(){y.status="fulfilled",y.value=u;for(var E=0;E<m.length;E++)(0,m[E])(u)},function(E){for(y.status="rejected",y.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),y}var ah=j.S;j.S=function(o,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Ir(o,u),ah!==null&&ah(o,u)};var ca=oe(null);function Nl(){var o=ca.current;return o!==null?o:un.pooledCache}function oh(o,u){u===null?_e(ca,ca.current):_e(ca,u.pool)}function tp(){var o=Nl();return o===null?null:{parent:is._currentValue,pool:o}}var lh=Error(i(460)),Ug=Error(i(474)),Ba=Error(i(542)),ch={then:function(){}};function np(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Mu(){}function ip(o,u,m){switch(m=o[m],m===void 0?o.push(u):m!==u&&(u.then(Mu,Mu),u=m),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,qy(o),o;default:if(typeof u.status=="string")u.then(Mu,Mu);else{if(o=un,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(y){if(u.status==="pending"){var E=u;E.status="fulfilled",E.value=y}},function(y){if(u.status==="pending"){var E=u;E.status="rejected",E.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,qy(o),o}throw ua=u,lh}}var ua=null;function Pg(){if(ua===null)throw Error(i(459));var o=ua;return ua=null,o}function qy(o){if(o===lh||o===Ba)throw Error(i(483))}var Fo=!1;function Ig(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nn(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Qa(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function zo(o,u,m){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(ti&2)!==0){var E=y.pending;return E===null?u.next=u:(u.next=E.next,E.next=u),y.pending=u,u=vu(o),Tg(o,null,m),u}return El(o,y,u,m),vu(o)}function gc(o,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194048)!==0)){var y=u.lanes;y&=o.pendingLanes,m|=y,u.lanes=m,Ht(o,m)}}function Eu(o,u){var m=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var E=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var G={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};R===null?E=R=G:R=R.next=G,m=m.next}while(m!==null);R===null?E=R=u:R=R.next=u}else E=R=u;m={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:R,shared:y.shared,callbacks:y.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=u}var Fg=!1;function uh(){if(Fg){var o=_u;if(o!==null)throw o}}function Tu(o,u,m,y){Fg=!1;var E=o.updateQueue;Fo=!1;var R=E.firstBaseUpdate,G=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var ce=q,we=ce.next;ce.next=null,G===null?R=we:G.next=we,G=ce;var Ke=o.alternate;Ke!==null&&(Ke=Ke.updateQueue,q=Ke.lastBaseUpdate,q!==G&&(q===null?Ke.firstBaseUpdate=we:q.next=we,Ke.lastBaseUpdate=ce))}if(R!==null){var $e=E.baseState;G=0,Ke=we=ce=null,q=R;do{var Le=q.lane&-536870913,Pe=Le!==q.lane;if(Pe?(Yt&Le)===Le:(y&Le)===Le){Le!==0&&Le===dn&&(Fg=!0),Ke!==null&&(Ke=Ke.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var rn=o,$t=q;Le=u;var Si=m;switch($t.tag){case 1:if(rn=$t.payload,typeof rn=="function"){$e=rn.call(Si,$e,Le);break e}$e=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=$t.payload,Le=typeof rn=="function"?rn.call(Si,$e,Le):rn,Le==null)break e;$e=p({},$e,Le);break e;case 2:Fo=!0}}Le=q.callback,Le!==null&&(o.flags|=64,Pe&&(o.flags|=8192),Pe=E.callbacks,Pe===null?E.callbacks=[Le]:Pe.push(Le))}else Pe={lane:Le,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Ke===null?(we=Ke=Pe,ce=$e):Ke=Ke.next=Pe,G|=Le;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;Pe=q,q=Pe.next,Pe.next=null,E.lastBaseUpdate=Pe,E.shared.pending=null}}while(!0);Ke===null&&(ce=$e),E.baseState=ce,E.firstBaseUpdate=we,E.lastBaseUpdate=Ke,R===null&&(E.shared.lanes=0),Fa|=G,o.lanes=G,o.memoizedState=$e}}function Cu(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function Ky(o,u){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)Cu(m[o],u)}var wu=oe(null),sp=oe(0);function Jy(o,u){o=ga,_e(sp,o),_e(wu,u),ga=o|u.baseLanes}function zg(){_e(sp,ga),_e(wu,wu.current)}function fh(){ga=sp.current,be(wu),be(sp)}var Ho=0,pn=null,ai=null,ss=null,rp=!1,Ll=!1,ir=!1,cs=0,fa=0,Us=null,Zy=0;function Wi(){throw Error(i(321))}function Xs(o,u){if(u===null)return!1;for(var m=0;m<u.length&&m<o.length;m++)if(!yr(o[m],u[m]))return!1;return!0}function Go(o,u,m,y,E,R){return Ho=R,pn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,j.H=o===null||o.memoizedState===null?pp:t0,ir=!1,R=m(y,E),ir=!1,Ll&&(R=$y(u,m,y,E)),Qy(o),R}function Qy(o){j.H=ph;var u=ai!==null&&ai.next!==null;if(Ho=0,ss=ai=pn=null,rp=!1,fa=0,Us=null,u)throw Error(i(300));o===null||_s||(o=o.dependencies,o!==null&&ih(o)&&(_s=!0))}function $y(o,u,m,y){pn=o;var E=0;do{if(Ll&&(Us=null),fa=0,Ll=!1,25<=E)throw Error(i(301));if(E+=1,ss=ai=null,o.updateQueue!=null){var R=o.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}j.H=Ex,R=u(m,y)}while(Ll);return R}function $S(){var o=j.H,u=o.useState()[0];return u=typeof u.then=="function"?Da(u):u,o=o.useState()[0],(ai!==null?ai.memoizedState:null)!==o&&(pn.flags|=1024),u}function Hg(){var o=cs!==0;return cs=0,o}function ap(o,u,m){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~m}function Gg(o){if(rp){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}rp=!1}Ho=0,ss=ai=pn=null,Ll=!1,fa=cs=0,Us=null}function sr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ss===null?pn.memoizedState=ss=o:ss=ss.next=o,ss}function rs(){if(ai===null){var o=pn.alternate;o=o!==null?o.memoizedState:null}else o=ai.next;var u=ss===null?pn.memoizedState:ss.next;if(u!==null)ss=u,ai=o;else{if(o===null)throw pn.alternate===null?Error(i(467)):Error(i(310));ai=o,o={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},ss===null?pn.memoizedState=ss=o:ss=ss.next=o}return ss}function Ol(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Da(o){var u=fa;return fa+=1,Us===null&&(Us=[]),o=ip(Us,o,u),u=pn,(ss===null?u.memoizedState:ss.next)===null&&(u=u.alternate,j.H=u===null||u.memoizedState===null?pp:t0),o}function op(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Da(o);if(o.$$typeof===C)return Ii(o)}throw Error(i(438,String(o)))}function Vg(o){var u=null,m=pn.updateQueue;if(m!==null&&(u=m.memoCache),u==null){var y=pn.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(E){return E.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),m===null&&(m=Ol(),pn.updateQueue=m),m.memoCache=u,m=u.data[u.index],m===void 0)for(m=u.data[u.index]=Array(o),y=0;y<o;y++)m[y]=I;return u.index++,m}function Vo(o,u){return typeof u=="function"?u(o):u}function Ul(o){var u=rs();return kg(u,ai,o)}function kg(o,u,m){var y=o.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=m;var E=o.baseQueue,R=y.pending;if(R!==null){if(E!==null){var G=E.next;E.next=R.next,R.next=G}u.baseQueue=E=R,y.pending=null}if(R=o.baseState,E===null)o.memoizedState=R;else{u=E.next;var q=G=null,ce=null,we=u,Ke=!1;do{var $e=we.lane&-536870913;if($e!==we.lane?(Yt&$e)===$e:(Ho&$e)===$e){var Le=we.revertLane;if(Le===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),$e===dn&&(Ke=!0);else if((Ho&Le)===Le){we=we.next,Le===dn&&(Ke=!0);continue}else $e={lane:0,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},ce===null?(q=ce=$e,G=R):ce=ce.next=$e,pn.lanes|=Le,Fa|=Le;$e=we.action,ir&&m(R,$e),R=we.hasEagerState?we.eagerState:m(R,$e)}else Le={lane:$e,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},ce===null?(q=ce=Le,G=R):ce=ce.next=Le,pn.lanes|=$e,Fa|=$e;we=we.next}while(we!==null&&we!==u);if(ce===null?G=R:ce.next=q,!yr(R,o.memoizedState)&&(_s=!0,Ke&&(m=_u,m!==null)))throw m;o.memoizedState=R,o.baseState=G,o.baseQueue=ce,y.lastRenderedState=R}return E===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function jg(o){var u=rs(),m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=o;var y=m.dispatch,E=m.pending,R=u.memoizedState;if(E!==null){m.pending=null;var G=E=E.next;do R=o(R,G.action),G=G.next;while(G!==E);yr(R,u.memoizedState)||(_s=!0),u.memoizedState=R,u.baseQueue===null&&(u.baseState=R),m.lastRenderedState=R}return[R,y]}function ex(o,u,m){var y=pn,E=rs(),R=Wn;if(R){if(m===void 0)throw Error(i(407));m=m()}else m=u();var G=!yr((ai||E).memoizedState,m);G&&(E.memoizedState=m,_s=!0),E=E.queue;var q=nx.bind(null,y,E,o);if(Du(2048,8,q,[o]),E.getSnapshot!==u||G||ss!==null&&ss.memoizedState.tag&1){if(y.flags|=2048,Bu(9,hh(),tx.bind(null,y,E,m,u),null),un===null)throw Error(i(349));R||(Ho&124)!==0||Ru(y,u,m)}return m}function Ru(o,u,m){o.flags|=16384,o={getSnapshot:u,value:m},u=pn.updateQueue,u===null?(u=Ol(),pn.updateQueue=u,u.stores=[o]):(m=u.stores,m===null?u.stores=[o]:m.push(o))}function tx(o,u,m,y){u.value=m,u.getSnapshot=y,ix(u)&&sx(o)}function nx(o,u,m){return m(function(){ix(u)&&sx(o)})}function ix(o){var u=o.getSnapshot;o=o.value;try{var m=u();return!yr(o,m)}catch{return!0}}function sx(o){var u=Oo(o,2);u!==null&&or(u,o,2)}function Xg(o){var u=sr();if(typeof o=="function"){var m=o;if(o=m(),ir){ct(!0);try{m()}finally{ct(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:o},u}function rx(o,u,m,y){return o.baseState=m,kg(o,ai,typeof y=="function"?y:Vo)}function e_(o,u,m,y,E){if(dp(o))throw Error(i(485));if(o=u.action,o!==null){var R={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){R.listeners.push(G)}};j.T!==null?m(!0):R.isTransition=!1,y(R),m=u.pending,m===null?(R.next=u.pending=R,ax(u,R)):(R.next=m.next,u.pending=m.next=R)}}function ax(o,u){var m=u.action,y=u.payload,E=o.state;if(u.isTransition){var R=j.T,G={};j.T=G;try{var q=m(E,y),ce=j.S;ce!==null&&ce(G,q),ox(o,u,q)}catch(we){Yg(o,u,we)}finally{j.T=R}}else try{R=m(E,y),ox(o,u,R)}catch(we){Yg(o,u,we)}}function ox(o,u,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){lx(o,u,y)},function(y){return Yg(o,u,y)}):lx(o,u,m)}function lx(o,u,m){u.status="fulfilled",u.value=m,cx(u),o.state=m,u=o.pending,u!==null&&(m=u.next,m===u?o.pending=null:(m=m.next,u.next=m,ax(o,m)))}function Yg(o,u,m){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=m,cx(u),u=u.next;while(u!==y)}o.action=null}function cx(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function Wg(o,u){return u}function ux(o,u){if(Wn){var m=un.formState;if(m!==null){e:{var y=pn;if(Wn){if(Ri){t:{for(var E=Ri,R=Pr;E.nodeType!==8;){if(!R){E=null;break t}if(E=Ko(E.nextSibling),E===null){E=null;break t}}R=E.data,E=R==="F!"||R==="F"?E:null}if(E){Ri=Ko(E.nextSibling),y=E.data==="F!";break e}}Rl(y)}y=!1}y&&(u=m[0])}}return m=sr(),m.memoizedState=m.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wg,lastRenderedState:u},m.queue=y,m=_x.bind(null,pn,y),y.dispatch=m,y=Xg(!1),R=hp.bind(null,pn,!1,y.queue),y=sr(),E={state:u,dispatch:null,action:o,pending:null},y.queue=E,m=e_.bind(null,pn,E,R,m),E.dispatch=m,y.memoizedState=o,[u,m,!1]}function fx(o){var u=rs();return hx(u,ai,o)}function hx(o,u,m){if(u=kg(o,u,Wg)[0],o=Ul(Vo)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Da(u)}catch(G){throw G===lh?Ba:G}else y=u;u=rs();var E=u.queue,R=E.dispatch;return m!==u.memoizedState&&(pn.flags|=2048,Bu(9,hh(),t_.bind(null,E,m),null)),[y,R,o]}function t_(o,u){o.action=u}function dx(o){var u=rs(),m=ai;if(m!==null)return hx(u,m,o);rs(),u=u.memoizedState,m=rs();var y=m.queue.dispatch;return m.memoizedState=o,[u,y,!1]}function Bu(o,u,m,y){return o={tag:o,create:m,deps:y,inst:u,next:null},u=pn.updateQueue,u===null&&(u=Ol(),pn.updateQueue=u),m=u.lastEffect,m===null?u.lastEffect=o.next=o:(y=m.next,m.next=o,o.next=y,u.lastEffect=o),o}function hh(){return{destroy:void 0,resource:void 0}}function qg(){return rs().memoizedState}function lp(o,u,m,y){var E=sr();y=y===void 0?null:y,pn.flags|=o,E.memoizedState=Bu(1|u,hh(),m,y)}function Du(o,u,m,y){var E=rs();y=y===void 0?null:y;var R=E.memoizedState.inst;ai!==null&&y!==null&&Xs(y,ai.memoizedState.deps)?E.memoizedState=Bu(u,R,m,y):(pn.flags|=o,E.memoizedState=Bu(1|u,R,m,y))}function Kg(o,u){lp(8390656,8,o,u)}function Jg(o,u){Du(2048,8,o,u)}function cp(o,u){return Du(4,2,o,u)}function up(o,u){return Du(4,4,o,u)}function px(o,u){if(typeof u=="function"){o=o();var m=u(o);return function(){typeof m=="function"?m():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function mx(o,u,m){m=m!=null?m.concat([o]):null,Du(4,4,px.bind(null,u,o),m)}function Zg(){}function gx(o,u){var m=rs();u=u===void 0?null:u;var y=m.memoizedState;return u!==null&&Xs(u,y[1])?y[0]:(m.memoizedState=[o,u],o)}function Qg(o,u){var m=rs();u=u===void 0?null:u;var y=m.memoizedState;if(u!==null&&Xs(u,y[1]))return y[0];if(y=o(),ir){ct(!0);try{o()}finally{ct(!1)}}return m.memoizedState=[y,u],y}function fp(o,u,m){return m===void 0||(Ho&1073741824)!==0?o.memoizedState=u:(o.memoizedState=m,o=Ep(),pn.lanes|=o,Fa|=o,m)}function vx(o,u,m,y){return yr(m,u)?m:wu.current!==null?(o=fp(o,m,y),yr(o,u)||(_s=!0),o):(Ho&42)===0?(_s=!0,o.memoizedState=m):(o=Ep(),pn.lanes|=o,Fa|=o,u)}function yx(o,u,m,y,E){var R=Q.p;Q.p=R!==0&&8>R?R:8;var G=j.T,q={};j.T=q,hp(o,!1,u,m);try{var ce=E(),we=j.S;if(we!==null&&we(q,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Ke=QS(ce,y);dh(o,u,Ke,Hi(o))}else dh(o,u,y,Hi(o))}catch($e){dh(o,u,{then:function(){},status:"rejected",reason:$e},Hi())}finally{Q.p=R,j.T=G}}function n_(){}function $g(o,u,m,y){if(o.tag!==5)throw Error(i(476));var E=xx(o).queue;yx(o,E,u,J,m===null?n_:function(){return bx(o),m(y)})}function xx(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:J},next:null};var m={};return u.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:m},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function bx(o){var u=xx(o).next.queue;dh(o,u,{},Hi())}function e0(){return Ii(d0)}function Ax(){return rs().memoizedState}function Sx(){return rs().memoizedState}function i_(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var m=Hi();o=Qa(m);var y=zo(u,o,m);y!==null&&(or(y,u,m),gc(y,u,m)),u={cache:$d()},o.payload=u;return}u=u.return}}function s_(o,u,m){var y=Hi();m={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},dp(o)?Mx(u,m):(m=qd(o,u,m,y),m!==null&&(or(m,o,y),Fr(m,u,y)))}function _x(o,u,m){var y=Hi();dh(o,u,m,y)}function dh(o,u,m,y){var E={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(dp(o))Mx(u,E);else{var R=o.alternate;if(o.lanes===0&&(R===null||R.lanes===0)&&(R=u.lastRenderedReducer,R!==null))try{var G=u.lastRenderedState,q=R(G,m);if(E.hasEagerState=!0,E.eagerState=q,yr(q,G))return El(o,u,E,0),un===null&&Qf(),!1}catch{}finally{}if(m=qd(o,u,E,y),m!==null)return or(m,o,y),Fr(m,u,y),!0}return!1}function hp(o,u,m,y){if(y={lane:2,revertLane:o_(),action:y,hasEagerState:!1,eagerState:null,next:null},dp(o)){if(u)throw Error(i(479))}else u=qd(o,m,y,2),u!==null&&or(u,o,2)}function dp(o){var u=o.alternate;return o===pn||u!==null&&u===pn}function Mx(o,u){Ll=rp=!0;var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}function Fr(o,u,m){if((m&4194048)!==0){var y=u.lanes;y&=o.pendingLanes,m|=y,u.lanes=m,Ht(o,m)}}var ph={readContext:Ii,use:op,useCallback:Wi,useContext:Wi,useEffect:Wi,useImperativeHandle:Wi,useLayoutEffect:Wi,useInsertionEffect:Wi,useMemo:Wi,useReducer:Wi,useRef:Wi,useState:Wi,useDebugValue:Wi,useDeferredValue:Wi,useTransition:Wi,useSyncExternalStore:Wi,useId:Wi,useHostTransitionStatus:Wi,useFormState:Wi,useActionState:Wi,useOptimistic:Wi,useMemoCache:Wi,useCacheRefresh:Wi},pp={readContext:Ii,use:op,useCallback:function(o,u){return sr().memoizedState=[o,u===void 0?null:u],o},useContext:Ii,useEffect:Kg,useImperativeHandle:function(o,u,m){m=m!=null?m.concat([o]):null,lp(4194308,4,px.bind(null,u,o),m)},useLayoutEffect:function(o,u){return lp(4194308,4,o,u)},useInsertionEffect:function(o,u){lp(4,2,o,u)},useMemo:function(o,u){var m=sr();u=u===void 0?null:u;var y=o();if(ir){ct(!0);try{o()}finally{ct(!1)}}return m.memoizedState=[y,u],y},useReducer:function(o,u,m){var y=sr();if(m!==void 0){var E=m(u);if(ir){ct(!0);try{m(u)}finally{ct(!1)}}}else E=u;return y.memoizedState=y.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},y.queue=o,o=o.dispatch=s_.bind(null,pn,o),[y.memoizedState,o]},useRef:function(o){var u=sr();return o={current:o},u.memoizedState=o},useState:function(o){o=Xg(o);var u=o.queue,m=_x.bind(null,pn,u);return u.dispatch=m,[o.memoizedState,m]},useDebugValue:Zg,useDeferredValue:function(o,u){var m=sr();return fp(m,o,u)},useTransition:function(){var o=Xg(!1);return o=yx.bind(null,pn,o.queue,!0,!1),sr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,m){var y=pn,E=sr();if(Wn){if(m===void 0)throw Error(i(407));m=m()}else{if(m=u(),un===null)throw Error(i(349));(Yt&124)!==0||Ru(y,u,m)}E.memoizedState=m;var R={value:m,getSnapshot:u};return E.queue=R,Kg(nx.bind(null,y,R,o),[o]),y.flags|=2048,Bu(9,hh(),tx.bind(null,y,R,m,u),null),m},useId:function(){var o=sr(),u=un.identifierPrefix;if(Wn){var m=Ja,y=Ka;m=(y&~(1<<32-ht(y)-1)).toString(32)+m,u="«"+u+"R"+m,m=cs++,0<m&&(u+="H"+m.toString(32)),u+="»"}else m=Zy++,u="«"+u+"r"+m.toString(32)+"»";return o.memoizedState=u},useHostTransitionStatus:e0,useFormState:ux,useActionState:ux,useOptimistic:function(o){var u=sr();u.memoizedState=u.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=m,u=hp.bind(null,pn,!0,m),m.dispatch=u,[o,u]},useMemoCache:Vg,useCacheRefresh:function(){return sr().memoizedState=i_.bind(null,pn)}},t0={readContext:Ii,use:op,useCallback:gx,useContext:Ii,useEffect:Jg,useImperativeHandle:mx,useInsertionEffect:cp,useLayoutEffect:up,useMemo:Qg,useReducer:Ul,useRef:qg,useState:function(){return Ul(Vo)},useDebugValue:Zg,useDeferredValue:function(o,u){var m=rs();return vx(m,ai.memoizedState,o,u)},useTransition:function(){var o=Ul(Vo)[0],u=rs().memoizedState;return[typeof o=="boolean"?o:Da(o),u]},useSyncExternalStore:ex,useId:Ax,useHostTransitionStatus:e0,useFormState:fx,useActionState:fx,useOptimistic:function(o,u){var m=rs();return rx(m,ai,o,u)},useMemoCache:Vg,useCacheRefresh:Sx},Ex={readContext:Ii,use:op,useCallback:gx,useContext:Ii,useEffect:Jg,useImperativeHandle:mx,useInsertionEffect:cp,useLayoutEffect:up,useMemo:Qg,useReducer:jg,useRef:qg,useState:function(){return jg(Vo)},useDebugValue:Zg,useDeferredValue:function(o,u){var m=rs();return ai===null?fp(m,o,u):vx(m,ai.memoizedState,o,u)},useTransition:function(){var o=jg(Vo)[0],u=rs().memoizedState;return[typeof o=="boolean"?o:Da(o),u]},useSyncExternalStore:ex,useId:Ax,useHostTransitionStatus:e0,useFormState:dx,useActionState:dx,useOptimistic:function(o,u){var m=rs();return ai!==null?rx(m,ai,o,u):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:Vg,useCacheRefresh:Sx},vc=null,mh=0;function gh(o){var u=mh;return mh+=1,vc===null&&(vc=[]),ip(vc,o,u)}function Nu(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function mp(o,u){throw u.$$typeof===g?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function Tx(o){var u=o._init;return u(o._payload)}function Cx(o){function u(Ae,ye){if(o){var Te=Ae.deletions;Te===null?(Ae.deletions=[ye],Ae.flags|=16):Te.push(ye)}}function m(Ae,ye){if(!o)return null;for(;ye!==null;)u(Ae,ye),ye=ye.sibling;return null}function y(Ae){for(var ye=new Map;Ae!==null;)Ae.key!==null?ye.set(Ae.key,Ae):ye.set(Ae.index,Ae),Ae=Ae.sibling;return ye}function E(Ae,ye){return Ae=Yi(Ae,ye),Ae.index=0,Ae.sibling=null,Ae}function R(Ae,ye,Te){return Ae.index=Te,o?(Te=Ae.alternate,Te!==null?(Te=Te.index,Te<ye?(Ae.flags|=67108866,ye):Te):(Ae.flags|=67108866,ye)):(Ae.flags|=1048576,ye)}function G(Ae){return o&&Ae.alternate===null&&(Ae.flags|=67108866),Ae}function q(Ae,ye,Te,Je){return ye===null||ye.tag!==6?(ye=eh(Te,Ae.mode,Je),ye.return=Ae,ye):(ye=E(ye,Te),ye.return=Ae,ye)}function ce(Ae,ye,Te,Je){var Ot=Te.type;return Ot===A?Ke(Ae,ye,Te.props.children,Je,Te.key):ye!==null&&(ye.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===P&&Tx(Ot)===ye.type)?(ye=E(ye,Te.props),Nu(ye,Te),ye.return=Ae,ye):(ye=Ss(Te.type,Te.key,Te.props,null,Ae.mode,Je),Nu(ye,Te),ye.return=Ae,ye)}function we(Ae,ye,Te,Je){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Te.containerInfo||ye.stateNode.implementation!==Te.implementation?(ye=Kd(Te,Ae.mode,Je),ye.return=Ae,ye):(ye=E(ye,Te.children||[]),ye.return=Ae,ye)}function Ke(Ae,ye,Te,Je,Ot){return ye===null||ye.tag!==7?(ye=Cl(Te,Ae.mode,Je,Ot),ye.return=Ae,ye):(ye=E(ye,Te),ye.return=Ae,ye)}function $e(Ae,ye,Te){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=eh(""+ye,Ae.mode,Te),ye.return=Ae,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case v:return Te=Ss(ye.type,ye.key,ye.props,null,Ae.mode,Te),Nu(Te,ye),Te.return=Ae,Te;case x:return ye=Kd(ye,Ae.mode,Te),ye.return=Ae,ye;case P:var Je=ye._init;return ye=Je(ye._payload),$e(Ae,ye,Te)}if(ae(ye)||re(ye))return ye=Cl(ye,Ae.mode,Te,null),ye.return=Ae,ye;if(typeof ye.then=="function")return $e(Ae,gh(ye),Te);if(ye.$$typeof===C)return $e(Ae,sh(Ae,ye),Te);mp(Ae,ye)}return null}function Le(Ae,ye,Te,Je){var Ot=ye!==null?ye.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Ot!==null?null:q(Ae,ye,""+Te,Je);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case v:return Te.key===Ot?ce(Ae,ye,Te,Je):null;case x:return Te.key===Ot?we(Ae,ye,Te,Je):null;case P:return Ot=Te._init,Te=Ot(Te._payload),Le(Ae,ye,Te,Je)}if(ae(Te)||re(Te))return Ot!==null?null:Ke(Ae,ye,Te,Je,null);if(typeof Te.then=="function")return Le(Ae,ye,gh(Te),Je);if(Te.$$typeof===C)return Le(Ae,ye,sh(Ae,Te),Je);mp(Ae,Te)}return null}function Pe(Ae,ye,Te,Je,Ot){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Ae=Ae.get(Te)||null,q(ye,Ae,""+Je,Ot);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case v:return Ae=Ae.get(Je.key===null?Te:Je.key)||null,ce(ye,Ae,Je,Ot);case x:return Ae=Ae.get(Je.key===null?Te:Je.key)||null,we(ye,Ae,Je,Ot);case P:var Nn=Je._init;return Je=Nn(Je._payload),Pe(Ae,ye,Te,Je,Ot)}if(ae(Je)||re(Je))return Ae=Ae.get(Te)||null,Ke(ye,Ae,Je,Ot,null);if(typeof Je.then=="function")return Pe(Ae,ye,Te,gh(Je),Ot);if(Je.$$typeof===C)return Pe(Ae,ye,Te,sh(ye,Je),Ot);mp(ye,Je)}return null}function rn(Ae,ye,Te,Je){for(var Ot=null,Nn=null,kt=ye,en=ye=0,qs=null;kt!==null&&en<Te.length;en++){kt.index>en?(qs=kt,kt=null):qs=kt.sibling;var ii=Le(Ae,kt,Te[en],Je);if(ii===null){kt===null&&(kt=qs);break}o&&kt&&ii.alternate===null&&u(Ae,kt),ye=R(ii,ye,en),Nn===null?Ot=ii:Nn.sibling=ii,Nn=ii,kt=qs}if(en===Te.length)return m(Ae,kt),Wn&&Uo(Ae,en),Ot;if(kt===null){for(;en<Te.length;en++)kt=$e(Ae,Te[en],Je),kt!==null&&(ye=R(kt,ye,en),Nn===null?Ot=kt:Nn.sibling=kt,Nn=kt);return Wn&&Uo(Ae,en),Ot}for(kt=y(kt);en<Te.length;en++)qs=Pe(kt,Ae,en,Te[en],Je),qs!==null&&(o&&qs.alternate!==null&&kt.delete(qs.key===null?en:qs.key),ye=R(qs,ye,en),Nn===null?Ot=qs:Nn.sibling=qs,Nn=qs);return o&&kt.forEach(function(Ku){return u(Ae,Ku)}),Wn&&Uo(Ae,en),Ot}function $t(Ae,ye,Te,Je){if(Te==null)throw Error(i(151));for(var Ot=null,Nn=null,kt=ye,en=ye=0,qs=null,ii=Te.next();kt!==null&&!ii.done;en++,ii=Te.next()){kt.index>en?(qs=kt,kt=null):qs=kt.sibling;var Ku=Le(Ae,kt,ii.value,Je);if(Ku===null){kt===null&&(kt=qs);break}o&&kt&&Ku.alternate===null&&u(Ae,kt),ye=R(Ku,ye,en),Nn===null?Ot=Ku:Nn.sibling=Ku,Nn=Ku,kt=qs}if(ii.done)return m(Ae,kt),Wn&&Uo(Ae,en),Ot;if(kt===null){for(;!ii.done;en++,ii=Te.next())ii=$e(Ae,ii.value,Je),ii!==null&&(ye=R(ii,ye,en),Nn===null?Ot=ii:Nn.sibling=ii,Nn=ii);return Wn&&Uo(Ae,en),Ot}for(kt=y(kt);!ii.done;en++,ii=Te.next())ii=Pe(kt,Ae,en,ii.value,Je),ii!==null&&(o&&ii.alternate!==null&&kt.delete(ii.key===null?en:ii.key),ye=R(ii,ye,en),Nn===null?Ot=ii:Nn.sibling=ii,Nn=ii);return o&&kt.forEach(function(tG){return u(Ae,tG)}),Wn&&Uo(Ae,en),Ot}function Si(Ae,ye,Te,Je){if(typeof Te=="object"&&Te!==null&&Te.type===A&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case v:e:{for(var Ot=Te.key;ye!==null;){if(ye.key===Ot){if(Ot=Te.type,Ot===A){if(ye.tag===7){m(Ae,ye.sibling),Je=E(ye,Te.props.children),Je.return=Ae,Ae=Je;break e}}else if(ye.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===P&&Tx(Ot)===ye.type){m(Ae,ye.sibling),Je=E(ye,Te.props),Nu(Je,Te),Je.return=Ae,Ae=Je;break e}m(Ae,ye);break}else u(Ae,ye);ye=ye.sibling}Te.type===A?(Je=Cl(Te.props.children,Ae.mode,Je,Te.key),Je.return=Ae,Ae=Je):(Je=Ss(Te.type,Te.key,Te.props,null,Ae.mode,Je),Nu(Je,Te),Je.return=Ae,Ae=Je)}return G(Ae);case x:e:{for(Ot=Te.key;ye!==null;){if(ye.key===Ot)if(ye.tag===4&&ye.stateNode.containerInfo===Te.containerInfo&&ye.stateNode.implementation===Te.implementation){m(Ae,ye.sibling),Je=E(ye,Te.children||[]),Je.return=Ae,Ae=Je;break e}else{m(Ae,ye);break}else u(Ae,ye);ye=ye.sibling}Je=Kd(Te,Ae.mode,Je),Je.return=Ae,Ae=Je}return G(Ae);case P:return Ot=Te._init,Te=Ot(Te._payload),Si(Ae,ye,Te,Je)}if(ae(Te))return rn(Ae,ye,Te,Je);if(re(Te)){if(Ot=re(Te),typeof Ot!="function")throw Error(i(150));return Te=Ot.call(Te),$t(Ae,ye,Te,Je)}if(typeof Te.then=="function")return Si(Ae,ye,gh(Te),Je);if(Te.$$typeof===C)return Si(Ae,ye,sh(Ae,Te),Je);mp(Ae,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint"?(Te=""+Te,ye!==null&&ye.tag===6?(m(Ae,ye.sibling),Je=E(ye,Te),Je.return=Ae,Ae=Je):(m(Ae,ye),Je=eh(Te,Ae.mode,Je),Je.return=Ae,Ae=Je),G(Ae)):m(Ae,ye)}return function(Ae,ye,Te,Je){try{mh=0;var Ot=Si(Ae,ye,Te,Je);return vc=null,Ot}catch(kt){if(kt===lh||kt===Ba)throw kt;var Nn=Ar(29,kt,null,Ae.mode);return Nn.lanes=Je,Nn.return=Ae,Nn}finally{}}}var yc=Cx(!0),wx=Cx(!1),fi=oe(null),Na=null;function Pl(o){var u=o.alternate;_e(qi,qi.current&1),_e(fi,o),Na===null&&(u===null||wu.current!==null||u.memoizedState!==null)&&(Na=o)}function Rx(o){if(o.tag===22){if(_e(qi,qi.current),_e(fi,o),Na===null){var u=o.alternate;u!==null&&u.memoizedState!==null&&(Na=o)}}else Il()}function Il(){_e(qi,qi.current),_e(fi,fi.current)}function $a(o){be(fi),Na===o&&(Na=null),be(qi)}var qi=oe(0);function ko(o){for(var u=o;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||x_(m)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Fl(o,u,m,y){u=o.memoizedState,m=m(y,u),m=m==null?u:p({},u,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var rr={enqueueSetState:function(o,u,m){o=o._reactInternals;var y=Hi(),E=Qa(y);E.payload=u,m!=null&&(E.callback=m),u=zo(o,E,y),u!==null&&(or(u,o,y),gc(u,o,y))},enqueueReplaceState:function(o,u,m){o=o._reactInternals;var y=Hi(),E=Qa(y);E.tag=1,E.payload=u,m!=null&&(E.callback=m),u=zo(o,E,y),u!==null&&(or(u,o,y),gc(u,o,y))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var m=Hi(),y=Qa(m);y.tag=2,u!=null&&(y.callback=u),u=zo(o,y,m),u!==null&&(or(u,o,m),gc(u,o,m))}};function Bx(o,u,m,y,E,R,G){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,R,G):u.prototype&&u.prototype.isPureReactComponent?!wa(m,y)||!wa(E,R):!0}function Dx(o,u,m,y){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,y),u.state!==o&&rr.enqueueReplaceState(u,u.state,null)}function eo(o,u){var m=u;if("ref"in u){m={};for(var y in u)y!=="ref"&&(m[y]=u[y])}if(o=o.defaultProps){m===u&&(m=p({},m));for(var E in o)m[E]===void 0&&(m[E]=o[E])}return m}var xc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function vh(o){xc(o)}function gp(o){console.error(o)}function Nx(o){xc(o)}function vp(o,u){try{var m=o.onUncaughtError;m(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function ha(o,u,m){try{var y=o.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function yp(o,u,m){return m=Qa(m),m.tag=3,m.payload={element:null},m.callback=function(){vp(o,u)},m}function Lx(o){return o=Qa(o),o.tag=3,o}function xp(o,u,m,y){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var R=y.value;o.payload=function(){return E(R)},o.callback=function(){ha(u,m,y)}}var G=m.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(o.callback=function(){ha(u,m,y),typeof E!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function r_(o,u,m,y,E){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=m.alternate,u!==null&&la(u,m,E,!0),m=fi.current,m!==null){switch(m.tag){case 13:return Na===null?h():m.alternate===null&&Mi===0&&(Mi=3),m.flags&=-257,m.flags|=65536,m.lanes=E,y===ch?m.flags|=16384:(u=m.updateQueue,u===null?m.updateQueue=new Set([y]):u.add(y),Ie(o,y,E)),!1;case 22:return m.flags|=65536,y===ch?m.flags|=16384:(u=m.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=u):(m=u.retryQueue,m===null?u.retryQueue=new Set([y]):m.add(y)),Ie(o,y,E)),!1}throw Error(i(435,m.tag))}return Ie(o,y,E),h(),!1}if(Wn)return u=fi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=E,y!==Zd&&(o=Error(i(422),{cause:y}),mc(Ls(o,m)))):(y!==Zd&&(u=Error(i(423),{cause:y}),mc(Ls(u,m))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,y=Ls(y,m),E=yp(o.stateNode,y,E),Eu(o,E),Mi!==4&&(Mi=2)),!1;var R=Error(i(520),{cause:y});if(R=Ls(R,m),ni===null?ni=[R]:ni.push(R),Mi!==4&&(Mi=2),u===null)return!0;y=Ls(y,m),m=u;do{switch(m.tag){case 3:return m.flags|=65536,o=E&-E,m.lanes|=o,o=yp(m.stateNode,y,o),Eu(m,o),!1;case 1:if(u=m.type,R=m.stateNode,(m.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Yr===null||!Yr.has(R))))return m.flags|=65536,E&=-E,m.lanes|=E,E=Lx(E),xp(E,o,m,y),Eu(m,E),!1}m=m.return}while(m!==null);return!1}var Ox=Error(i(461)),_s=!1;function Ki(o,u,m,y){u.child=o===null?wx(u,null,m,y):yc(u,o.child,m,y)}function _r(o,u,m,y,E){m=m.render;var R=u.ref;if("ref"in y){var G={};for(var q in y)q!=="ref"&&(G[q]=y[q])}else G=y;return Za(u),y=Go(o,u,m,G,R,E),q=Hg(),o!==null&&!_s?(ap(o,u,E),Ms(o,u,E)):(Wn&&q&&Rg(u),u.flags|=1,Ki(o,u,y,E),u.child)}function Mr(o,u,m,y,E){if(o===null){var R=m.type;return typeof R=="function"&&!$f(R)&&R.defaultProps===void 0&&m.compare===null?(u.tag=15,u.type=R,n0(o,u,R,y,E)):(o=Ss(m.type,null,y,u,u.mode,E),o.ref=u.ref,o.return=u,u.child=o)}if(R=o.child,!yh(o,E)){var G=R.memoizedProps;if(m=m.compare,m=m!==null?m:wa,m(G,y)&&o.ref===u.ref)return Ms(o,u,E)}return u.flags|=1,o=Yi(R,y),o.ref=u.ref,o.return=u,u.child=o}function n0(o,u,m,y,E){if(o!==null){var R=o.memoizedProps;if(wa(R,y)&&o.ref===u.ref)if(_s=!1,u.pendingProps=y=R,yh(o,E))(o.flags&131072)!==0&&(_s=!0);else return u.lanes=o.lanes,Ms(o,u,E)}return Lu(o,u,m,y,E)}function bc(o,u,m){var y=u.pendingProps,E=y.children,R=o!==null?o.memoizedState:null;if(y.mode==="hidden"){if((u.flags&128)!==0){if(y=R!==null?R.baseLanes|m:m,o!==null){for(E=u.child=o.child,R=0;E!==null;)R=R|E.lanes|E.childLanes,E=E.sibling;u.childLanes=R&~y}else u.childLanes=0,u.child=null;return Ac(o,u,y,m)}if((m&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&oh(u,R!==null?R.cachePool:null),R!==null?Jy(u,R):zg(),Rx(u);else return u.lanes=u.childLanes=536870912,Ac(o,u,R!==null?R.baseLanes|m:m,m)}else R!==null?(oh(u,R.cachePool),Jy(u,R),Il(),u.memoizedState=null):(o!==null&&oh(u,null),zg(),Il());return Ki(o,u,E,m),u.child}function Ac(o,u,m,y){var E=Nl();return E=E===null?null:{parent:is._currentValue,pool:E},u.memoizedState={baseLanes:m,cachePool:E},o!==null&&oh(u,null),zg(),Rx(u),o!==null&&la(o,u,y,!0),null}function Sc(o,u){var m=u.ref;if(m===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(o===null||o.ref!==m)&&(u.flags|=4194816)}}function Lu(o,u,m,y,E){return Za(u),m=Go(o,u,m,y,void 0,E),y=Hg(),o!==null&&!_s?(ap(o,u,E),Ms(o,u,E)):(Wn&&y&&Rg(u),u.flags|=1,Ki(o,u,m,E),u.child)}function zr(o,u,m,y,E,R){return Za(u),u.updateQueue=null,m=$y(u,y,m,E),Qy(o),y=Hg(),o!==null&&!_s?(ap(o,u,R),Ms(o,u,R)):(Wn&&y&&Rg(u),u.flags|=1,Ki(o,u,m,R),u.child)}function Hr(o,u,m,y,E){if(Za(u),u.stateNode===null){var R=Tl,G=m.contextType;typeof G=="object"&&G!==null&&(R=Ii(G)),R=new m(y,R),u.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=rr,u.stateNode=R,R._reactInternals=u,R=u.stateNode,R.props=y,R.state=u.memoizedState,R.refs={},Ig(u),G=m.contextType,R.context=typeof G=="object"&&G!==null?Ii(G):Tl,R.state=u.memoizedState,G=m.getDerivedStateFromProps,typeof G=="function"&&(Fl(u,m,G,y),R.state=u.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(G=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),G!==R.state&&rr.enqueueReplaceState(R,R.state,null),Tu(u,y,R,E),uh(),R.state=u.memoizedState),typeof R.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(o===null){R=u.stateNode;var q=u.memoizedProps,ce=eo(m,q);R.props=ce;var we=R.context,Ke=m.contextType;G=Tl,typeof Ke=="object"&&Ke!==null&&(G=Ii(Ke));var $e=m.getDerivedStateFromProps;Ke=typeof $e=="function"||typeof R.getSnapshotBeforeUpdate=="function",q=u.pendingProps!==q,Ke||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(q||we!==G)&&Dx(u,R,y,G),Fo=!1;var Le=u.memoizedState;R.state=Le,Tu(u,y,R,E),uh(),we=u.memoizedState,q||Le!==we||Fo?(typeof $e=="function"&&(Fl(u,m,$e,y),we=u.memoizedState),(ce=Fo||Bx(u,m,ce,y,Le,we,G))?(Ke||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(u.flags|=4194308)):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=we),R.props=y,R.state=we,R.context=G,y=ce):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{R=u.stateNode,nn(o,u),G=u.memoizedProps,Ke=eo(m,G),R.props=Ke,$e=u.pendingProps,Le=R.context,we=m.contextType,ce=Tl,typeof we=="object"&&we!==null&&(ce=Ii(we)),q=m.getDerivedStateFromProps,(we=typeof q=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(G!==$e||Le!==ce)&&Dx(u,R,y,ce),Fo=!1,Le=u.memoizedState,R.state=Le,Tu(u,y,R,E),uh();var Pe=u.memoizedState;G!==$e||Le!==Pe||Fo||o!==null&&o.dependencies!==null&&ih(o.dependencies)?(typeof q=="function"&&(Fl(u,m,q,y),Pe=u.memoizedState),(Ke=Fo||Bx(u,m,Ke,y,Le,Pe,ce)||o!==null&&o.dependencies!==null&&ih(o.dependencies))?(we||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(y,Pe,ce),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(y,Pe,ce)),typeof R.componentDidUpdate=="function"&&(u.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof R.componentDidUpdate!="function"||G===o.memoizedProps&&Le===o.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&Le===o.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=Pe),R.props=y,R.state=Pe,R.context=ce,y=Ke):(typeof R.componentDidUpdate!="function"||G===o.memoizedProps&&Le===o.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&Le===o.memoizedState||(u.flags|=1024),y=!1)}return R=y,Sc(o,u),y=(u.flags&128)!==0,R||y?(R=u.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:R.render(),u.flags|=1,o!==null&&y?(u.child=yc(u,o.child,null,E),u.child=yc(u,null,m,E)):Ki(o,u,m,E),u.memoizedState=R.state,o=u.child):o=Ms(o,u,E),o}function zl(o,u,m,y){return bu(),u.flags|=256,Ki(o,u,m,y),u.child}var La={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oa(o){return{baseLanes:o,cachePool:tp()}}function us(o,u,m){return o=o!==null?o.childLanes&~m:0,u&&(o|=va),o}function Ou(o,u,m){var y=u.pendingProps,E=!1,R=(u.flags&128)!==0,G;if((G=R)||(G=o!==null&&o.memoizedState===null?!1:(qi.current&2)!==0),G&&(E=!0,u.flags&=-129),G=(u.flags&32)!==0,u.flags&=-33,o===null){if(Wn){if(E?Pl(u):Il(),Wn){var q=Ri,ce;if(ce=q){e:{for(ce=q,q=Pr;ce.nodeType!==8;){if(!q){q=null;break e}if(ce=Ko(ce.nextSibling),ce===null){q=null;break e}}q=ce}q!==null?(u.memoizedState={dehydrated:q,treeContext:wl!==null?{id:Ka,overflow:Ja}:null,retryLane:536870912,hydrationErrors:null},ce=Ar(18,null,null,0),ce.stateNode=q,ce.return=u,u.child=ce,nr=u,Ri=null,ce=!0):ce=!1}ce||Rl(u)}if(q=u.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return x_(q)?u.lanes=32:u.lanes=536870912,null;$a(u)}return q=y.children,y=y.fallback,E?(Il(),E=u.mode,q=_c({mode:"hidden",children:q},E),y=Cl(y,E,m,null),q.return=u,y.return=u,q.sibling=y,u.child=q,E=u.child,E.memoizedState=Oa(m),E.childLanes=us(o,G,m),u.memoizedState=La,y):(Pl(u),to(u,q))}if(ce=o.memoizedState,ce!==null&&(q=ce.dehydrated,q!==null)){if(R)u.flags&256?(Pl(u),u.flags&=-257,u=Ps(o,u,m)):u.memoizedState!==null?(Il(),u.child=o.child,u.flags|=128,u=null):(Il(),E=y.fallback,q=u.mode,y=_c({mode:"visible",children:y.children},q),E=Cl(E,q,m,null),E.flags|=2,y.return=u,E.return=u,y.sibling=E,u.child=y,yc(u,o.child,null,m),y=u.child,y.memoizedState=Oa(m),y.childLanes=us(o,G,m),u.memoizedState=La,u=E);else if(Pl(u),x_(q)){if(G=q.nextSibling&&q.nextSibling.dataset,G)var we=G.dgst;G=we,y=Error(i(419)),y.stack="",y.digest=G,mc({value:y,source:null,stack:null}),u=Ps(o,u,m)}else if(_s||la(o,u,m,!1),G=(m&o.childLanes)!==0,_s||G){if(G=un,G!==null&&(y=m&-m,y=(y&42)!==0?1:vn(y),y=(y&(G.suspendedLanes|m))!==0?0:y,y!==0&&y!==ce.retryLane))throw ce.retryLane=y,Oo(o,y),or(G,o,y),Ox;q.data==="$?"||h(),u=Ps(o,u,m)}else q.data==="$?"?(u.flags|=192,u.child=o.child,u=null):(o=ce.treeContext,Ri=Ko(q.nextSibling),nr=u,Wn=!0,oa=null,Pr=!1,o!==null&&(Os[Ur++]=Ka,Os[Ur++]=Ja,Os[Ur++]=wl,Ka=o.id,Ja=o.overflow,wl=u),u=to(u,y.children),u.flags|=4096);return u}return E?(Il(),E=y.fallback,q=u.mode,ce=o.child,we=ce.sibling,y=Yi(ce,{mode:"hidden",children:y.children}),y.subtreeFlags=ce.subtreeFlags&65011712,we!==null?E=Yi(we,E):(E=Cl(E,q,m,null),E.flags|=2),E.return=u,y.return=u,y.sibling=E,u.child=y,y=E,E=u.child,q=o.child.memoizedState,q===null?q=Oa(m):(ce=q.cachePool,ce!==null?(we=is._currentValue,ce=ce.parent!==we?{parent:we,pool:we}:ce):ce=tp(),q={baseLanes:q.baseLanes|m,cachePool:ce}),E.memoizedState=q,E.childLanes=us(o,G,m),u.memoizedState=La,y):(Pl(u),m=o.child,o=m.sibling,m=Yi(m,{mode:"visible",children:y.children}),m.return=u,m.sibling=null,o!==null&&(G=u.deletions,G===null?(u.deletions=[o],u.flags|=16):G.push(o)),u.child=m,u.memoizedState=null,m)}function to(o,u){return u=_c({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function _c(o,u){return o=Ar(22,o,null,u),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Ps(o,u,m){return yc(u,o.child,null,m),o=to(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function Is(o,u,m){o.lanes|=u;var y=o.alternate;y!==null&&(y.lanes|=u),Lg(o.return,u,m)}function Fn(o,u,m,y,E){var R=o.memoizedState;R===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:E}:(R.isBackwards=u,R.rendering=null,R.renderingStartTime=0,R.last=y,R.tail=m,R.tailMode=E)}function da(o,u,m){var y=u.pendingProps,E=y.revealOrder,R=y.tail;if(Ki(o,u,y.children,m),y=qi.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Is(o,m,u);else if(o.tag===19)Is(o,m,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(_e(qi,y),E){case"forwards":for(m=u.child,E=null;m!==null;)o=m.alternate,o!==null&&ko(o)===null&&(E=m),m=m.sibling;m=E,m===null?(E=u.child,u.child=null):(E=m.sibling,m.sibling=null),Fn(u,!1,E,m,R);break;case"backwards":for(m=null,E=u.child,u.child=null;E!==null;){if(o=E.alternate,o!==null&&ko(o)===null){u.child=E;break}o=E.sibling,E.sibling=m,m=E,E=o}Fn(u,!0,m,null,R);break;case"together":Fn(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ms(o,u,m){if(o!==null&&(u.dependencies=o.dependencies),Fa|=u.lanes,(m&u.childLanes)===0)if(o!==null){if(la(o,u,m,!1),(m&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,m=Yi(o,o.pendingProps),u.child=m,m.return=u;o.sibling!==null;)o=o.sibling,m=m.sibling=Yi(o,o.pendingProps),m.return=u;m.sibling=null}return u.child}function yh(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&ih(o)))}function pa(o,u,m){switch(u.tag){case 3:et(u,u.stateNode.containerInfo),Dl(u,is,o.memoizedState.cache),bu();break;case 27:case 5:_t(u);break;case 4:et(u,u.stateNode.containerInfo);break;case 10:Dl(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Pl(u),u.flags|=128,null):(m&u.child.childLanes)!==0?Ou(o,u,m):(Pl(u),o=Ms(o,u,m),o!==null?o.sibling:null);Pl(u);break;case 19:var E=(o.flags&128)!==0;if(y=(m&u.childLanes)!==0,y||(la(o,u,m,!1),y=(m&u.childLanes)!==0),E){if(y)return da(o,u,m);u.flags|=128}if(E=u.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),_e(qi,qi.current),y)break;return null;case 22:case 23:return u.lanes=0,bc(o,u,m);case 24:Dl(u,is,o.memoizedState.cache)}return Ms(o,u,m)}function Mc(o,u,m){if(o!==null)if(o.memoizedProps!==u.pendingProps)_s=!0;else{if(!yh(o,m)&&(u.flags&128)===0)return _s=!1,pa(o,u,m);_s=(o.flags&131072)!==0}else _s=!1,Wn&&(u.flags&1048576)!==0&&Jd(u,xu,u.index);switch(u.lanes=0,u.tag){case 16:e:{o=u.pendingProps;var y=u.elementType,E=y._init;if(y=E(y._payload),u.type=y,typeof y=="function")$f(y)?(o=eo(y,o),u.tag=1,u=Hr(null,u,y,o,m)):(u.tag=0,u=Lu(null,u,y,o,m));else{if(y!=null){if(E=y.$$typeof,E===B){u.tag=11,u=_r(null,u,y,o,m);break e}else if(E===F){u.tag=14,u=Mr(null,u,y,o,m);break e}}throw u=$(y)||y,Error(i(306,u,""))}}return u;case 0:return Lu(o,u,u.type,u.pendingProps,m);case 1:return y=u.type,E=eo(y,u.pendingProps),Hr(o,u,y,E,m);case 3:e:{if(et(u,u.stateNode.containerInfo),o===null)throw Error(i(387));y=u.pendingProps;var R=u.memoizedState;E=R.element,nn(o,u),Tu(u,y,null,m);var G=u.memoizedState;if(y=G.cache,Dl(u,is,y),y!==R.cache&&nh(u,[is],m,!0),uh(),y=G.element,R.isDehydrated)if(R={element:y,isDehydrated:!1,cache:G.cache},u.updateQueue.baseState=R,u.memoizedState=R,u.flags&256){u=zl(o,u,y,m);break e}else if(y!==E){E=Ls(Error(i(424)),u),mc(E),u=zl(o,u,y,m);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Ri=Ko(o.firstChild),nr=u,Wn=!0,oa=null,Pr=!0,m=wx(u,null,y,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(bu(),y===E){u=Ms(o,u,m);break e}Ki(o,u,y,m)}u=u.child}return u;case 26:return Sc(o,u),o===null?(m=_2(u.type,null,u.pendingProps,null))?u.memoizedState=m:Wn||(m=u.type,o=u.pendingProps,y=Hx(Be.current).createElement(m),y[Pi]=u,y[ji]=o,lr(y,m,o),Ne(y),u.stateNode=y):u.memoizedState=_2(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return _t(u),o===null&&Wn&&(y=u.stateNode=b2(u.type,u.pendingProps,Be.current),nr=u,Pr=!0,E=Ri,ju(u.type)?(b_=E,Ri=Ko(y.firstChild)):Ri=E),Ki(o,u,u.pendingProps.children,m),Sc(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Wn&&((E=y=Ri)&&(y=B5(y,u.type,u.pendingProps,Pr),y!==null?(u.stateNode=y,nr=u,Ri=Ko(y.firstChild),Pr=!1,E=!0):E=!1),E||Rl(u)),_t(u),E=u.type,R=u.pendingProps,G=o!==null?o.memoizedProps:null,y=R.children,g_(E,R)?y=null:G!==null&&g_(E,G)&&(u.flags|=32),u.memoizedState!==null&&(E=Go(o,u,$S,null,null,m),d0._currentValue=E),Sc(o,u),Ki(o,u,y,m),u.child;case 6:return o===null&&Wn&&((o=m=Ri)&&(m=D5(m,u.pendingProps,Pr),m!==null?(u.stateNode=m,nr=u,Ri=null,o=!0):o=!1),o||Rl(u)),null;case 13:return Ou(o,u,m);case 4:return et(u,u.stateNode.containerInfo),y=u.pendingProps,o===null?u.child=yc(u,null,y,m):Ki(o,u,y,m),u.child;case 11:return _r(o,u,u.type,u.pendingProps,m);case 7:return Ki(o,u,u.pendingProps,m),u.child;case 8:return Ki(o,u,u.pendingProps.children,m),u.child;case 12:return Ki(o,u,u.pendingProps.children,m),u.child;case 10:return y=u.pendingProps,Dl(u,u.type,y.value),Ki(o,u,y.children,m),u.child;case 9:return E=u.type._context,y=u.pendingProps.children,Za(u),E=Ii(E),y=y(E),u.flags|=1,Ki(o,u,y,m),u.child;case 14:return Mr(o,u,u.type,u.pendingProps,m);case 15:return n0(o,u,u.type,u.pendingProps,m);case 19:return da(o,u,m);case 31:return y=u.pendingProps,m=u.mode,y={mode:y.mode,children:y.children},o===null?(m=_c(y,m),m.ref=u.ref,u.child=m,m.return=u,u=m):(m=Yi(o.child,y),m.ref=u.ref,u.child=m,m.return=u,u=m),u;case 22:return bc(o,u,m);case 24:return Za(u),y=Ii(is),o===null?(E=Nl(),E===null&&(E=un,R=$d(),E.pooledCache=R,R.refCount++,R!==null&&(E.pooledCacheLanes|=m),E=R),u.memoizedState={parent:y,cache:E},Ig(u),Dl(u,is,E)):((o.lanes&m)!==0&&(nn(o,u),Tu(u,null,null,m),uh()),E=o.memoizedState,R=u.memoizedState,E.parent!==y?(E={parent:y,cache:y},u.memoizedState=E,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=E),Dl(u,is,y)):(y=R.cache,Dl(u,is,y),y!==E.cache&&nh(u,[is],m,!0))),Ki(o,u,u.pendingProps.children,m),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function Ua(o){o.flags|=4}function xh(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!w2(u)){if(u=fi.current,u!==null&&((Yt&4194048)===Yt?Na!==null:(Yt&62914560)!==Yt&&(Yt&536870912)===0||u!==Na))throw ua=ch,Ug;o.flags|=8192}}function jo(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?Ee():536870912,o.lanes|=u,Gn|=u)}function Ec(o,u){if(!Wn)switch(o.tailMode){case"hidden":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function yi(o){var u=o.alternate!==null&&o.alternate.child===o.child,m=0,y=0;if(u)for(var E=o.child;E!==null;)m|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)m|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=y,o.childLanes=m,u}function i0(o,u,m){var y=u.pendingProps;switch(Bg(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(u),null;case 1:return yi(u),null;case 3:return m=u.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Io(is),Lt(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Ra(u)?Ua(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ei())),yi(u),null;case 26:return m=u.memoizedState,o===null?(Ua(u),m!==null?(yi(u),xh(u,m)):(yi(u),u.flags&=-16777217)):m?m!==o.memoizedState?(Ua(u),yi(u),xh(u,m)):(yi(u),u.flags&=-16777217):(o.memoizedProps!==y&&Ua(u),yi(u),u.flags&=-16777217),null;case 27:jt(u),m=Be.current;var E=u.type;if(o!==null&&u.stateNode!=null)o.memoizedProps!==y&&Ua(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return yi(u),null}o=ue.current,Ra(u)?Yy(u):(o=b2(E,y,m),u.stateNode=o,Ua(u))}return yi(u),null;case 5:if(jt(u),m=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&Ua(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return yi(u),null}if(o=ue.current,Ra(u))Yy(u);else{switch(E=Hx(Be.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof y.is=="string"?E.createElement("select",{is:y.is}):E.createElement("select"),y.multiple?o.multiple=!0:y.size&&(o.size=y.size);break;default:o=typeof y.is=="string"?E.createElement(m,{is:y.is}):E.createElement(m)}}o[Pi]=u,o[ji]=y;e:for(E=u.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===u)break e;for(;E.sibling===null;){if(E.return===null||E.return===u)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}u.stateNode=o;e:switch(lr(o,m,y),m){case"button":case"input":case"select":case"textarea":o=!!y.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ua(u)}}return yi(u),u.flags&=-16777217,null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==y&&Ua(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(i(166));if(o=Be.current,Ra(u)){if(o=u.stateNode,m=u.memoizedProps,y=null,E=nr,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}o[Pi]=u,o=!!(o.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||d2(o.nodeValue,m)),o||Rl(u)}else o=Hx(o).createTextNode(y),o[Pi]=u,u.stateNode=o}return yi(u),null;case 13:if(y=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=Ra(u),y!==null&&y.dehydrated!==null){if(o===null){if(!E)throw Error(i(318));if(E=u.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[Pi]=u}else bu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;yi(u),E=!1}else E=ei(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return u.flags&256?($a(u),u):($a(u),null)}if($a(u),(u.flags&128)!==0)return u.lanes=m,u;if(m=y!==null,o=o!==null&&o.memoizedState!==null,m){y=u.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool);var R=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(R=y.memoizedState.cachePool.pool),R!==E&&(y.flags|=2048)}return m!==o&&m&&(u.child.flags|=8192),jo(u,u.updateQueue),yi(u),null;case 4:return Lt(),o===null&&f_(u.stateNode.containerInfo),yi(u),null;case 10:return Io(u.type),yi(u),null;case 19:if(be(qi),E=u.memoizedState,E===null)return yi(u),null;if(y=(u.flags&128)!==0,R=E.rendering,R===null)if(y)Ec(E,!1);else{if(Mi!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(R=ko(o),R!==null){for(u.flags|=128,Ec(E,!1),o=R.updateQueue,u.updateQueue=o,jo(u,o),u.subtreeFlags=0,o=m,m=u.child;m!==null;)wg(m,o),m=m.sibling;return _e(qi,qi.current&1|2),u.child}o=o.sibling}E.tail!==null&&ft()>Ys&&(u.flags|=128,y=!0,Ec(E,!1),u.lanes=4194304)}else{if(!y)if(o=ko(R),o!==null){if(u.flags|=128,y=!0,o=o.updateQueue,u.updateQueue=o,jo(u,o),Ec(E,!0),E.tail===null&&E.tailMode==="hidden"&&!R.alternate&&!Wn)return yi(u),null}else 2*ft()-E.renderingStartTime>Ys&&m!==536870912&&(u.flags|=128,y=!0,Ec(E,!1),u.lanes=4194304);E.isBackwards?(R.sibling=u.child,u.child=R):(o=E.last,o!==null?o.sibling=R:u.child=R,E.last=R)}return E.tail!==null?(u=E.tail,E.rendering=u,E.tail=u.sibling,E.renderingStartTime=ft(),u.sibling=null,o=qi.current,_e(qi,y?o&1|2:o&1),u):(yi(u),null);case 22:case 23:return $a(u),fh(),y=u.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(m&536870912)!==0&&(u.flags&128)===0&&(yi(u),u.subtreeFlags&6&&(u.flags|=8192)):yi(u),m=u.updateQueue,m!==null&&jo(u,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048),o!==null&&be(ca),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Io(is),yi(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function Uu(o,u){switch(Bg(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Io(is),Lt(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return jt(u),null;case 13:if($a(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));bu()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return be(qi),null;case 4:return Lt(),null;case 10:return Io(u.type),null;case 22:case 23:return $a(u),fh(),o!==null&&be(ca),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Io(is),null;case 25:return null;default:return null}}function Pu(o,u){switch(Bg(u),u.tag){case 3:Io(is),Lt();break;case 26:case 27:case 5:jt(u);break;case 4:Lt();break;case 13:$a(u);break;case 19:be(qi);break;case 10:Io(u.type);break;case 22:case 23:$a(u),fh(),o!==null&&be(ca);break;case 24:Io(is)}}function Tc(o,u){try{var m=u.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var E=y.next;m=E;do{if((m.tag&o)===o){y=void 0;var R=m.create,G=m.inst;y=R(),G.destroy=y}m=m.next}while(m!==E)}}catch(q){ge(u,u.return,q)}}function Gr(o,u,m){try{var y=u.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var R=E.next;y=R;do{if((y.tag&o)===o){var G=y.inst,q=G.destroy;if(q!==void 0){G.destroy=void 0,E=u;var ce=m,we=q;try{we()}catch(Ke){ge(E,ce,Ke)}}}y=y.next}while(y!==R)}}catch(Ke){ge(u,u.return,Ke)}}function Cc(o){var u=o.updateQueue;if(u!==null){var m=o.stateNode;try{Ky(u,m)}catch(y){ge(o,o.return,y)}}}function Xo(o,u,m){m.props=eo(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(y){ge(o,u,y)}}function wc(o,u){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof m=="function"?o.refCleanup=m(y):m.current=y}}catch(E){ge(o,u,E)}}function no(o,u){var m=o.ref,y=o.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(E){ge(o,u,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){ge(o,u,E)}else m.current=null}function Iu(o){var u=o.type,m=o.memoizedProps,y=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break e;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(E){ge(o,o.return,E)}}function bh(o,u,m){try{var y=o.stateNode;E5(y,o.type,m,u),y[ji]=u}catch(E){ge(o,o.return,E)}}function Ah(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&ju(o.type)||o.tag===4}function Hl(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ah(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&ju(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Gl(o,u,m){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,u):(u=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,u.appendChild(o),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=zx));else if(y!==4&&(y===27&&ju(o.type)&&(m=o.stateNode,u=null),o=o.child,o!==null))for(Gl(o,u,m),o=o.sibling;o!==null;)Gl(o,u,m),o=o.sibling}function Vl(o,u,m){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?m.insertBefore(o,u):m.appendChild(o);else if(y!==4&&(y===27&&ju(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(Vl(o,u,m),o=o.sibling;o!==null;)Vl(o,u,m),o=o.sibling}function kl(o){var u=o.stateNode,m=o.memoizedProps;try{for(var y=o.type,E=u.attributes;E.length;)u.removeAttributeNode(E[0]);lr(u,y,m),u[Pi]=o,u[ji]=m}catch(R){ge(o,o.return,R)}}var io=!1,xi=!1,Fu=!1,Vr=typeof WeakSet=="function"?WeakSet:Set,hi=null;function fs(o,u){if(o=o.containerInfo,p_=Yx,o=Ag(o),Kf(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var E=y.anchorOffset,R=y.focusNode;y=y.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var G=0,q=-1,ce=-1,we=0,Ke=0,$e=o,Le=null;t:for(;;){for(var Pe;$e!==m||E!==0&&$e.nodeType!==3||(q=G+E),$e!==R||y!==0&&$e.nodeType!==3||(ce=G+y),$e.nodeType===3&&(G+=$e.nodeValue.length),(Pe=$e.firstChild)!==null;)Le=$e,$e=Pe;for(;;){if($e===o)break t;if(Le===m&&++we===E&&(q=G),Le===R&&++Ke===y&&(ce=G),(Pe=$e.nextSibling)!==null)break;$e=Le,Le=$e.parentNode}$e=Pe}m=q===-1||ce===-1?null:{start:q,end:ce}}else m=null}m=m||{start:0,end:0}}else m=null;for(m_={focusedElem:o,selectionRange:m},Yx=!1,hi=u;hi!==null;)if(u=hi,o=u.child,(u.subtreeFlags&1024)!==0&&o!==null)o.return=u,hi=o;else for(;hi!==null;){switch(u=hi,R=u.alternate,o=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&R!==null){o=void 0,m=u,E=R.memoizedProps,R=R.memoizedState,y=m.stateNode;try{var rn=eo(m.type,E,m.elementType===m.type);o=y.getSnapshotBeforeUpdate(rn,R),y.__reactInternalSnapshotBeforeUpdate=o}catch($t){ge(m,m.return,$t)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,m=o.nodeType,m===9)y_(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":y_(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,hi=o;break}hi=u.return}}function Yo(o,u,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:ar(o,m),y&4&&Tc(5,m);break;case 1:if(ar(o,m),y&4)if(o=m.stateNode,u===null)try{o.componentDidMount()}catch(G){ge(m,m.return,G)}else{var E=eo(m.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(E,u,o.__reactInternalSnapshotBeforeUpdate)}catch(G){ge(m,m.return,G)}}y&64&&Cc(m),y&512&&wc(m,m.return);break;case 3:if(ar(o,m),y&64&&(o=m.updateQueue,o!==null)){if(u=null,m.child!==null)switch(m.child.tag){case 27:case 5:u=m.child.stateNode;break;case 1:u=m.child.stateNode}try{Ky(o,u)}catch(G){ge(m,m.return,G)}}break;case 27:u===null&&y&4&&kl(m);case 26:case 5:ar(o,m),u===null&&y&4&&Iu(m),y&512&&wc(m,m.return);break;case 12:ar(o,m);break;case 13:ar(o,m),y&4&&jl(o,m),y&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=Ei.bind(null,m),N5(o,m))));break;case 22:if(y=m.memoizedState!==null||io,!y){u=u!==null&&u.memoizedState!==null||xi,E=io;var R=xi;io=y,(xi=u)&&!R?so(o,m,(m.subtreeFlags&8772)!==0):ar(o,m),io=E,xi=R}break;case 30:break;default:ar(o,m)}}function Sn(o){var u=o.alternate;u!==null&&(o.alternate=null,Sn(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&$n(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Jt=null,Hn=!1;function ma(o,u,m){for(m=m.child;m!==null;)Rc(o,u,m),m=m.sibling}function Rc(o,u,m){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(je,m)}catch{}switch(m.tag){case 26:xi||no(m,u),ma(o,u,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:xi||no(m,u);var y=Jt,E=Hn;ju(m.type)&&(Jt=m.stateNode,Hn=!1),ma(o,u,m),c0(m.stateNode),Jt=y,Hn=E;break;case 5:xi||no(m,u);case 6:if(y=Jt,E=Hn,Jt=null,ma(o,u,m),Jt=y,Hn=E,Jt!==null)if(Hn)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(m.stateNode)}catch(R){ge(m,u,R)}else try{Jt.removeChild(m.stateNode)}catch(R){ge(m,u,R)}break;case 18:Jt!==null&&(Hn?(o=Jt,y2(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),v0(o)):y2(Jt,m.stateNode));break;case 4:y=Jt,E=Hn,Jt=m.stateNode.containerInfo,Hn=!0,ma(o,u,m),Jt=y,Hn=E;break;case 0:case 11:case 14:case 15:xi||Gr(2,m,u),xi||Gr(4,m,u),ma(o,u,m);break;case 1:xi||(no(m,u),y=m.stateNode,typeof y.componentWillUnmount=="function"&&Xo(m,u,y)),ma(o,u,m);break;case 21:ma(o,u,m);break;case 22:xi=(y=xi)||m.memoizedState!==null,ma(o,u,m),xi=y;break;default:ma(o,u,m)}}function jl(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{v0(o)}catch(m){ge(u,u.return,m)}}function bp(o){switch(o.tag){case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new Vr),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new Vr),u;default:throw Error(i(435,o.tag))}}function Bc(o,u){var m=bp(o);u.forEach(function(y){var E=sn.bind(null,o,y);m.has(y)||(m.add(y),y.then(E,E))})}function Es(o,u){var m=u.deletions;if(m!==null)for(var y=0;y<m.length;y++){var E=m[y],R=o,G=u,q=G;e:for(;q!==null;){switch(q.tag){case 27:if(ju(q.type)){Jt=q.stateNode,Hn=!1;break e}break;case 5:Jt=q.stateNode,Hn=!1;break e;case 3:case 4:Jt=q.stateNode.containerInfo,Hn=!0;break e}q=q.return}if(Jt===null)throw Error(i(160));Rc(R,G,E),Jt=null,Hn=!1,R=E.alternate,R!==null&&(R.return=null),E.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)Ap(u,o),u=u.sibling}var Pa=null;function Ap(o,u){var m=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Es(u,o),Fi(o),y&4&&(Gr(3,o,o.return),Tc(3,o),Gr(5,o,o.return));break;case 1:Es(u,o),Fi(o),y&512&&(xi||m===null||no(m,m.return)),y&64&&io&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var E=Pa;if(Es(u,o),Fi(o),y&512&&(xi||m===null||no(m,m.return)),y&4){var R=m!==null?m.memoizedState:null;if(y=o.memoizedState,m===null)if(y===null)if(o.stateNode===null){e:{y=o.type,m=o.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":R=E.getElementsByTagName("title")[0],(!R||R[gr]||R[Pi]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=E.createElement(y),E.head.insertBefore(R,E.querySelector("head > title"))),lr(R,y,m),R[Pi]=o,Ne(R),y=R;break e;case"link":var G=T2("link","href",E).get(y+(m.href||""));if(G){for(var q=0;q<G.length;q++)if(R=G[q],R.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&R.getAttribute("rel")===(m.rel==null?null:m.rel)&&R.getAttribute("title")===(m.title==null?null:m.title)&&R.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){G.splice(q,1);break t}}R=E.createElement(y),lr(R,y,m),E.head.appendChild(R);break;case"meta":if(G=T2("meta","content",E).get(y+(m.content||""))){for(q=0;q<G.length;q++)if(R=G[q],R.getAttribute("content")===(m.content==null?null:""+m.content)&&R.getAttribute("name")===(m.name==null?null:m.name)&&R.getAttribute("property")===(m.property==null?null:m.property)&&R.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&R.getAttribute("charset")===(m.charSet==null?null:m.charSet)){G.splice(q,1);break t}}R=E.createElement(y),lr(R,y,m),E.head.appendChild(R);break;default:throw Error(i(468,y))}R[Pi]=o,Ne(R),y=R}o.stateNode=y}else C2(E,o.type,o.stateNode);else o.stateNode=E2(E,y,o.memoizedProps);else R!==y?(R===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):R.count--,y===null?C2(E,o.type,o.stateNode):E2(E,y,o.memoizedProps)):y===null&&o.stateNode!==null&&bh(o,o.memoizedProps,m.memoizedProps)}break;case 27:Es(u,o),Fi(o),y&512&&(xi||m===null||no(m,m.return)),m!==null&&y&4&&bh(o,o.memoizedProps,m.memoizedProps);break;case 5:if(Es(u,o),Fi(o),y&512&&(xi||m===null||no(m,m.return)),o.flags&32){E=o.stateNode;try{$s(E,"")}catch(Pe){ge(o,o.return,Pe)}}y&4&&o.stateNode!=null&&(E=o.memoizedProps,bh(o,E,m!==null?m.memoizedProps:E)),y&1024&&(Fu=!0);break;case 6:if(Es(u,o),Fi(o),y&4){if(o.stateNode===null)throw Error(i(162));y=o.memoizedProps,m=o.stateNode;try{m.nodeValue=y}catch(Pe){ge(o,o.return,Pe)}}break;case 3:if(kx=null,E=Pa,Pa=Gx(u.containerInfo),Es(u,o),Pa=E,Fi(o),y&4&&m!==null&&m.memoizedState.isDehydrated)try{v0(u.containerInfo)}catch(Pe){ge(o,o.return,Pe)}Fu&&(Fu=!1,Xl(o));break;case 4:y=Pa,Pa=Gx(o.stateNode.containerInfo),Es(u,o),Fi(o),Pa=y;break;case 12:Es(u,o),Fi(o);break;case 13:Es(u,o),Fi(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(oi=ft()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,Bc(o,y)));break;case 22:E=o.memoizedState!==null;var ce=m!==null&&m.memoizedState!==null,we=io,Ke=xi;if(io=we||E,xi=Ke||ce,Es(u,o),xi=Ke,io=we,Fi(o),y&8192)e:for(u=o.stateNode,u._visibility=E?u._visibility&-2:u._visibility|1,E&&(m===null||ce||io||xi||kr(o)),m=null,u=o;;){if(u.tag===5||u.tag===26){if(m===null){ce=m=u;try{if(R=ce.stateNode,E)G=R.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{q=ce.stateNode;var $e=ce.memoizedProps.style,Le=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;q.style.display=Le==null||typeof Le=="boolean"?"":(""+Le).trim()}}catch(Pe){ge(ce,ce.return,Pe)}}}else if(u.tag===6){if(m===null){ce=u;try{ce.stateNode.nodeValue=E?"":ce.memoizedProps}catch(Pe){ge(ce,ce.return,Pe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=o.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,Bc(o,m))));break;case 19:Es(u,o),Fi(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,Bc(o,y)));break;case 30:break;case 21:break;default:Es(u,o),Fi(o)}}function Fi(o){var u=o.flags;if(u&2){try{for(var m,y=o.return;y!==null;){if(Ah(y)){m=y;break}y=y.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var E=m.stateNode,R=Hl(o);Vl(o,R,E);break;case 5:var G=m.stateNode;m.flags&32&&($s(G,""),m.flags&=-33);var q=Hl(o);Vl(o,q,G);break;case 3:case 4:var ce=m.stateNode.containerInfo,we=Hl(o);Gl(o,we,ce);break;default:throw Error(i(161))}}catch(Ke){ge(o,o.return,Ke)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Xl(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;Xl(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function ar(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Yo(o,u.alternate,u),u=u.sibling}function kr(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Gr(4,u,u.return),kr(u);break;case 1:no(u,u.return);var m=u.stateNode;typeof m.componentWillUnmount=="function"&&Xo(u,u.return,m),kr(u);break;case 27:c0(u.stateNode);case 26:case 5:no(u,u.return),kr(u);break;case 22:u.memoizedState===null&&kr(u);break;case 30:kr(u);break;default:kr(u)}o=o.sibling}}function so(o,u,m){for(m=m&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,E=o,R=u,G=R.flags;switch(R.tag){case 0:case 11:case 15:so(E,R,m),Tc(4,R);break;case 1:if(so(E,R,m),y=R,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(we){ge(y,y.return,we)}if(y=R,E=y.updateQueue,E!==null){var q=y.stateNode;try{var ce=E.shared.hiddenCallbacks;if(ce!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ce.length;E++)Cu(ce[E],q)}catch(we){ge(y,y.return,we)}}m&&G&64&&Cc(R),wc(R,R.return);break;case 27:kl(R);case 26:case 5:so(E,R,m),m&&y===null&&G&4&&Iu(R),wc(R,R.return);break;case 12:so(E,R,m);break;case 13:so(E,R,m),m&&G&4&&jl(E,R);break;case 22:R.memoizedState===null&&so(E,R,m),wc(R,R.return);break;case 30:break;default:so(E,R,m)}u=u.sibling}}function Sp(o,u){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&Au(m))}function _p(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Au(o))}function di(o,u,m,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Mp(o,u,m,y),u=u.sibling}function Mp(o,u,m,y){var E=u.flags;switch(u.tag){case 0:case 11:case 15:di(o,u,m,y),E&2048&&Tc(9,u);break;case 1:di(o,u,m,y);break;case 3:di(o,u,m,y),E&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Au(o)));break;case 12:if(E&2048){di(o,u,m,y),o=u.stateNode;try{var R=u.memoizedProps,G=R.id,q=R.onPostCommit;typeof q=="function"&&q(G,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ce){ge(u,u.return,ce)}}else di(o,u,m,y);break;case 13:di(o,u,m,y);break;case 23:break;case 22:R=u.stateNode,G=u.alternate,u.memoizedState!==null?R._visibility&2?di(o,u,m,y):Ia(o,u):R._visibility&2?di(o,u,m,y):(R._visibility|=2,Wo(o,u,m,y,(u.subtreeFlags&10256)!==0)),E&2048&&Sp(G,u);break;case 24:di(o,u,m,y),E&2048&&_p(u.alternate,u);break;default:di(o,u,m,y)}}function Wo(o,u,m,y,E){for(E=E&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var R=o,G=u,q=m,ce=y,we=G.flags;switch(G.tag){case 0:case 11:case 15:Wo(R,G,q,ce,E),Tc(8,G);break;case 23:break;case 22:var Ke=G.stateNode;G.memoizedState!==null?Ke._visibility&2?Wo(R,G,q,ce,E):Ia(R,G):(Ke._visibility|=2,Wo(R,G,q,ce,E)),E&&we&2048&&Sp(G.alternate,G);break;case 24:Wo(R,G,q,ce,E),E&&we&2048&&_p(G.alternate,G);break;default:Wo(R,G,q,ce,E)}u=u.sibling}}function Ia(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var m=o,y=u,E=y.flags;switch(y.tag){case 22:Ia(m,y),E&2048&&Sp(y.alternate,y);break;case 24:Ia(m,y),E&2048&&_p(y.alternate,y);break;default:Ia(m,y)}u=u.sibling}}var jr=8192;function zu(o){if(o.subtreeFlags&jr)for(o=o.child;o!==null;)Ux(o),o=o.sibling}function Ux(o){switch(o.tag){case 26:zu(o),o.flags&jr&&o.memoizedState!==null&&X5(Pa,o.memoizedState,o.memoizedProps);break;case 5:zu(o);break;case 3:case 4:var u=Pa;Pa=Gx(o.stateNode.containerInfo),zu(o),Pa=u;break;case 22:o.memoizedState===null&&(u=o.alternate,u!==null&&u.memoizedState!==null?(u=jr,jr=16777216,zu(o),jr=u):zu(o));break;default:zu(o)}}function Px(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function bi(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var y=u[m];hi=y,ao(y,o)}Px(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)s0(o),o=o.sibling}function s0(o){switch(o.tag){case 0:case 11:case 15:bi(o),o.flags&2048&&Gr(9,o,o.return);break;case 3:bi(o);break;case 12:bi(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,ro(o)):bi(o);break;default:bi(o)}}function ro(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var y=u[m];hi=y,ao(y,o)}Px(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Gr(8,u,u.return),ro(u);break;case 22:m=u.stateNode,m._visibility&2&&(m._visibility&=-3,ro(u));break;default:ro(u)}o=o.sibling}}function ao(o,u){for(;hi!==null;){var m=hi;switch(m.tag){case 0:case 11:case 15:Gr(8,m,u);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Au(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,hi=y;else e:for(m=o;hi!==null;){y=hi;var E=y.sibling,R=y.return;if(Sn(y),y===m){hi=null;break e}if(E!==null){E.return=R,hi=E;break e}hi=R}}}var zi={getCacheForType:function(o){var u=Ii(is),m=u.data.get(o);return m===void 0&&(m=o(),u.data.set(o,m)),m}},r0=typeof WeakMap=="function"?WeakMap:Map,ti=0,un=null,Cn=null,Yt=0,xn=0,Bi=null,Xr=!1,Hu=!1,Gu=!1,ga=0,Mi=0,Fa=0,oo=0,Dc=0,va=0,Gn=0,ni=null,Zt=null,Dn=!1,oi=0,Ys=1/0,ya=null,Yr=null,hs=0,Ws=null,pi=null,Wr=0,qo=0,Sh=null,qr=null,lo=0,Nc=null;function Hi(){if((ti&2)!==0&&Yt!==0)return Yt&-Yt;if(j.T!==null){var o=dn;return o!==0?o:o_()}return cn()}function Ep(){va===0&&(va=(Yt&536870912)===0||Wn?de():536870912);var o=fi.current;return o!==null&&(o.flags|=32),va}function or(o,u,m){(o===un&&(xn===2||xn===9)||o.cancelPendingCommit!==null)&&(Wl(o,0),za(o,Yt,va,!1)),Xe(o,m),((ti&2)===0||o!==un)&&(o===un&&((ti&2)===0&&(oo|=m),Mi===4&&za(o,Yt,va,!1)),Jl(o))}function Vu(o,u,m){if((ti&6)!==0)throw Error(i(327));var y=!m&&(u&124)===0&&(u&o.expiredLanes)===0||Fe(o,u),E=y?T(o,u):d(o,u,!0),R=y;do{if(E===0){Hu&&!y&&za(o,u,0,!1);break}else{if(m=o.current.alternate,R&&!Yl(m)){E=d(o,u,!1),R=!1;continue}if(E===2){if(R=u,o.errorRecoveryDisabledLanes&R)var G=0;else G=o.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){u=G;e:{var q=o;E=ni;var ce=q.current.memoizedState.isDehydrated;if(ce&&(Wl(q,G).flags|=256),G=d(q,G,!1),G!==2){if(Gu&&!ce){q.errorRecoveryDisabledLanes|=R,oo|=R,E=4;break e}R=Zt,Zt=E,R!==null&&(Zt===null?Zt=R:Zt.push.apply(Zt,R))}E=G}if(R=!1,E!==2)continue}}if(E===1){Wl(o,0),za(o,u,0,!0);break}e:{switch(y=o,R=E,R){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:za(y,u,va,!Xr);break e;case 2:Zt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(E=oi+300-ft(),10<E)){if(za(y,u,va,!Xr),me(y,0,!0)!==0)break e;y.timeoutHandle=g2(_h.bind(null,y,m,Zt,ya,Dn,u,va,oo,Gn,Xr,R,2,-0,0),E);break e}_h(y,m,Zt,ya,Dn,u,va,oo,Gn,Xr,R,0,-0,0)}}break}while(!0);Jl(o)}function _h(o,u,m,y,E,R,G,q,ce,we,Ke,$e,Le,Pe){if(o.timeoutHandle=-1,$e=u.subtreeFlags,($e&8192||($e&16785408)===16785408)&&(h0={stylesheets:null,count:0,unsuspend:j5},Ux(u),$e=Y5(),$e!==null)){o.cancelPendingCommit=$e(ut.bind(null,o,u,R,m,y,E,G,q,ce,Ke,1,Le,Pe)),za(o,R,G,!we);return}ut(o,u,R,m,y,E,G,q,ce)}function Yl(o){for(var u=o;;){var m=u.tag;if((m===0||m===11||m===15)&&u.flags&16384&&(m=u.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var E=m[y],R=E.getSnapshot;E=E.value;try{if(!yr(R(),E))return!1}catch{return!1}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function za(o,u,m,y){u&=~Dc,u&=~oo,o.suspendedLanes|=u,o.pingedLanes&=~u,y&&(o.warmLanes|=u),y=o.expirationTimes;for(var E=u;0<E;){var R=31-ht(E),G=1<<R;y[R]=-1,E&=~G}m!==0&&vt(o,m,u)}function co(){return(ti&6)===0?(a0(0),!1):!0}function Lc(){if(Cn!==null){if(xn===0)var o=Cn.return;else o=Cn,Po=Bl=null,Gg(o),vc=null,mh=0,o=Cn;for(;o!==null;)Pu(o.alternate,o),o=o.return;Cn=null}}function Wl(o,u){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,C5(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),Lc(),un=o,Cn=m=Yi(o.current,null),Yt=u,xn=0,Bi=null,Xr=!1,Hu=Fe(o,u),Gu=!1,Gn=va=Dc=oo=Fa=Mi=0,Zt=ni=null,Dn=!1,(u&8)!==0&&(u|=u&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=u;0<y;){var E=31-ht(y),R=1<<E;u|=o[E],y&=~R}return ga=u,Qf(),m}function Tp(o,u){pn=null,j.H=ph,u===lh||u===Ba?(u=Pg(),xn=3):u===Ug?(u=Pg(),xn=4):xn=u===Ox?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Bi=u,Cn===null&&(Mi=1,vp(o,Ls(u,o.current)))}function ku(){var o=j.H;return j.H=ph,o===null?ph:o}function Cp(){var o=j.A;return j.A=zi,o}function h(){Mi=4,Xr||(Yt&4194048)!==Yt&&fi.current!==null||(Hu=!0),(Fa&134217727)===0&&(oo&134217727)===0||un===null||za(un,Yt,va,!1)}function d(o,u,m){var y=ti;ti|=2;var E=ku(),R=Cp();(un!==o||Yt!==u)&&(ya=null,Wl(o,u)),u=!1;var G=Mi;e:do try{if(xn!==0&&Cn!==null){var q=Cn,ce=Bi;switch(xn){case 8:Lc(),G=6;break e;case 3:case 2:case 9:case 6:fi.current===null&&(u=!0);var we=xn;if(xn=0,Bi=null,he(o,q,ce,we),m&&Hu){G=0;break e}break;default:we=xn,xn=0,Bi=null,he(o,q,ce,we)}}b(),G=Mi;break}catch(Ke){Tp(o,Ke)}while(!0);return u&&o.shellSuspendCounter++,Po=Bl=null,ti=y,j.H=E,j.A=R,Cn===null&&(un=null,Yt=0,Qf()),G}function b(){for(;Cn!==null;)O(Cn)}function T(o,u){var m=ti;ti|=2;var y=ku(),E=Cp();un!==o||Yt!==u?(ya=null,Ys=ft()+500,Wl(o,u)):Hu=Fe(o,u);e:do try{if(xn!==0&&Cn!==null){u=Cn;var R=Bi;t:switch(xn){case 1:xn=0,Bi=null,he(o,u,R,1);break;case 2:case 9:if(np(R)){xn=0,Bi=null,K(u);break}u=function(){xn!==2&&xn!==9||un!==o||(xn=7),Jl(o)},R.then(u,u);break e;case 3:xn=7;break e;case 4:xn=5;break e;case 7:np(R)?(xn=0,Bi=null,K(u)):(xn=0,Bi=null,he(o,u,R,7));break;case 5:var G=null;switch(Cn.tag){case 26:G=Cn.memoizedState;case 5:case 27:var q=Cn;if(!G||w2(G)){xn=0,Bi=null;var ce=q.sibling;if(ce!==null)Cn=ce;else{var we=q.return;we!==null?(Cn=we,Se(we)):Cn=null}break t}}xn=0,Bi=null,he(o,u,R,5);break;case 6:xn=0,Bi=null,he(o,u,R,6);break;case 8:Lc(),Mi=6;break e;default:throw Error(i(462))}}D();break}catch(Ke){Tp(o,Ke)}while(!0);return Po=Bl=null,j.H=y,j.A=E,ti=m,Cn!==null?0:(un=null,Yt=0,Qf(),Mi)}function D(){for(;Cn!==null&&!Bt();)O(Cn)}function O(o){var u=Mc(o.alternate,o,ga);o.memoizedProps=o.pendingProps,u===null?Se(o):Cn=u}function K(o){var u=o,m=u.alternate;switch(u.tag){case 15:case 0:u=zr(m,u,u.pendingProps,u.type,void 0,Yt);break;case 11:u=zr(m,u,u.pendingProps,u.type.render,u.ref,Yt);break;case 5:Gg(u);default:Pu(m,u),u=Cn=wg(u,ga),u=Mc(m,u,ga)}o.memoizedProps=o.pendingProps,u===null?Se(o):Cn=u}function he(o,u,m,y){Po=Bl=null,Gg(u),vc=null,mh=0;var E=u.return;try{if(r_(o,E,u,m,Yt)){Mi=1,vp(o,Ls(m,o.current)),Cn=null;return}}catch(R){if(E!==null)throw Cn=E,R;Mi=1,vp(o,Ls(m,o.current)),Cn=null;return}u.flags&32768?(Wn||y===1?o=!0:Hu||(Yt&536870912)!==0?o=!1:(Xr=o=!0,(y===2||y===9||y===3||y===6)&&(y=fi.current,y!==null&&y.tag===13&&(y.flags|=16384))),qe(u,o)):Se(u)}function Se(o){var u=o;do{if((u.flags&32768)!==0){qe(u,Xr);return}o=u.return;var m=i0(u.alternate,u,ga);if(m!==null){Cn=m;return}if(u=u.sibling,u!==null){Cn=u;return}Cn=u=o}while(u!==null);Mi===0&&(Mi=5)}function qe(o,u){do{var m=Uu(o.alternate,o);if(m!==null){m.flags&=32767,Cn=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!u&&(o=o.sibling,o!==null)){Cn=o;return}Cn=o=m}while(o!==null);Mi=6,Cn=null}function ut(o,u,m,y,E,R,G,q,ce){o.cancelPendingCommit=null;do ql();while(hs!==0);if((ti&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(R=u.lanes|u.childLanes,R|=Wd,xt(o,m,R,G,q,ce),o===un&&(Cn=un=null,Yt=0),pi=u,Ws=o,Wr=m,qo=R,Sh=E,qr=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,qn(ne,function(){return Kl(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=j.T,j.T=null,E=Q.p,Q.p=2,G=ti,ti|=4;try{fs(o,u,m)}finally{ti=G,Q.p=E,j.T=y}}hs=1,Mt(),Ct(),fn()}}function Mt(){if(hs===1){hs=0;var o=Ws,u=pi,m=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||m){m=j.T,j.T=null;var y=Q.p;Q.p=2;var E=ti;ti|=4;try{Ap(u,o);var R=m_,G=Ag(o.containerInfo),q=R.focusedElem,ce=R.selectionRange;if(G!==q&&q&&q.ownerDocument&&bg(q.ownerDocument.documentElement,q)){if(ce!==null&&Kf(q)){var we=ce.start,Ke=ce.end;if(Ke===void 0&&(Ke=we),"selectionStart"in q)q.selectionStart=we,q.selectionEnd=Math.min(Ke,q.value.length);else{var $e=q.ownerDocument||document,Le=$e&&$e.defaultView||window;if(Le.getSelection){var Pe=Le.getSelection(),rn=q.textContent.length,$t=Math.min(ce.start,rn),Si=ce.end===void 0?$t:Math.min(ce.end,rn);!Pe.extend&&$t>Si&&(G=Si,Si=$t,$t=G);var Ae=xg(q,$t),ye=xg(q,Si);if(Ae&&ye&&(Pe.rangeCount!==1||Pe.anchorNode!==Ae.node||Pe.anchorOffset!==Ae.offset||Pe.focusNode!==ye.node||Pe.focusOffset!==ye.offset)){var Te=$e.createRange();Te.setStart(Ae.node,Ae.offset),Pe.removeAllRanges(),$t>Si?(Pe.addRange(Te),Pe.extend(ye.node,ye.offset)):(Te.setEnd(ye.node,ye.offset),Pe.addRange(Te))}}}}for($e=[],Pe=q;Pe=Pe.parentNode;)Pe.nodeType===1&&$e.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<$e.length;q++){var Je=$e[q];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}Yx=!!p_,m_=p_=null}finally{ti=E,Q.p=y,j.T=m}}o.current=u,hs=2}}function Ct(){if(hs===2){hs=0;var o=Ws,u=pi,m=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||m){m=j.T,j.T=null;var y=Q.p;Q.p=2;var E=ti;ti|=4;try{Yo(o,u.alternate,u)}finally{ti=E,Q.p=y,j.T=m}}hs=3}}function fn(){if(hs===4||hs===3){hs=0,it();var o=Ws,u=pi,m=Wr,y=qr;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?hs=5:(hs=0,pi=Ws=null,Kr(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(Yr=null),Yn(m),u=u.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(je,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=j.T,E=Q.p,Q.p=2,j.T=null;try{for(var R=o.onRecoverableError,G=0;G<y.length;G++){var q=y[G];R(q.value,{componentStack:q.stack})}}finally{j.T=u,Q.p=E}}(Wr&3)!==0&&ql(),Jl(o),E=o.pendingLanes,(m&4194090)!==0&&(E&42)!==0?o===Nc?lo++:(lo=0,Nc=o):lo=0,a0(0)}}function Kr(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Au(u)))}function ql(o){return Mt(),Ct(),fn(),Kl()}function Kl(){if(hs!==5)return!1;var o=Ws,u=qo;qo=0;var m=Yn(Wr),y=j.T,E=Q.p;try{Q.p=32>m?32:m,j.T=null,m=Sh,Sh=null;var R=Ws,G=Wr;if(hs=0,pi=Ws=null,Wr=0,(ti&6)!==0)throw Error(i(331));var q=ti;if(ti|=4,s0(R.current),Mp(R,R.current,G,m),ti=q,a0(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(je,R)}catch{}return!0}finally{Q.p=E,j.T=y,Kr(o,u)}}function De(o,u,m){u=Ls(m,u),u=yp(o.stateNode,u,2),o=zo(o,u,2),o!==null&&(Xe(o,2),Jl(o))}function ge(o,u,m){if(o.tag===3)De(o,o,m);else for(;u!==null;){if(u.tag===3){De(u,o,m);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Yr===null||!Yr.has(y))){o=Ls(m,o),m=Lx(2),y=zo(u,m,2),y!==null&&(xp(m,y,u,o),Xe(y,2),Jl(y));break}}u=u.return}}function Ie(o,u,m){var y=o.pingCache;if(y===null){y=o.pingCache=new r0;var E=new Set;y.set(u,E)}else E=y.get(u),E===void 0&&(E=new Set,y.set(u,E));E.has(m)||(Gu=!0,E.add(m),o=ot.bind(null,o,u,m),u.then(o,o))}function ot(o,u,m){var y=o.pingCache;y!==null&&y.delete(u),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,un===o&&(Yt&m)===m&&(Mi===4||Mi===3&&(Yt&62914560)===Yt&&300>ft()-oi?(ti&2)===0&&Wl(o,0):Dc|=m,Gn===Yt&&(Gn=0)),Jl(o)}function Gt(o,u){u===0&&(u=Ee()),o=Oo(o,u),o!==null&&(Xe(o,u),Jl(o))}function Ei(o){var u=o.memoizedState,m=0;u!==null&&(m=u.retryLane),Gt(o,m)}function sn(o,u){var m=0;switch(o.tag){case 13:var y=o.stateNode,E=o.memoizedState;E!==null&&(m=E.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(u),Gt(o,m)}function qn(o,u){return Ze(o,u)}var Ji=null,Rn=null,uo=!1,wp=!1,a_=!1,Mh=0;function Jl(o){o!==Rn&&o.next===null&&(Rn===null?Ji=Rn=o:Rn=Rn.next=o),wp=!0,uo||(uo=!0,y5())}function a0(o,u){if(!a_&&wp){a_=!0;do for(var m=!1,y=Ji;y!==null;){if(o!==0){var E=y.pendingLanes;if(E===0)var R=0;else{var G=y.suspendedLanes,q=y.pingedLanes;R=(1<<31-ht(42|o)+1)-1,R&=E&~(G&~q),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(m=!0,a2(y,R))}else R=Yt,R=me(y,y===un?R:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(R&3)===0||Fe(y,R)||(m=!0,a2(y,R));y=y.next}while(m);a_=!1}}function v5(){i2()}function i2(){wp=uo=!1;var o=0;Mh!==0&&(T5()&&(o=Mh),Mh=0);for(var u=ft(),m=null,y=Ji;y!==null;){var E=y.next,R=s2(y,u);R===0?(y.next=null,m===null?Ji=E:m.next=E,E===null&&(Rn=m)):(m=y,(o!==0||(R&3)!==0)&&(wp=!0)),y=E}a0(o)}function s2(o,u){for(var m=o.suspendedLanes,y=o.pingedLanes,E=o.expirationTimes,R=o.pendingLanes&-62914561;0<R;){var G=31-ht(R),q=1<<G,ce=E[G];ce===-1?((q&m)===0||(q&y)!==0)&&(E[G]=rt(q,u)):ce<=u&&(o.expiredLanes|=q),R&=~q}if(u=un,m=Yt,m=me(o,o===u?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,m===0||o===u&&(xn===2||xn===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&ie(y),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||Fe(o,m)){if(u=m&-m,u===o.callbackPriority)return u;switch(y!==null&&ie(y),Yn(m)){case 2:case 8:m=dt;break;case 32:m=ne;break;case 268435456:m=Me;break;default:m=ne}return y=r2.bind(null,o),m=Ze(m,y),o.callbackPriority=u,o.callbackNode=m,u}return y!==null&&y!==null&&ie(y),o.callbackPriority=2,o.callbackNode=null,2}function r2(o,u){if(hs!==0&&hs!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(ql()&&o.callbackNode!==m)return null;var y=Yt;return y=me(o,o===un?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Vu(o,y,u),s2(o,ft()),o.callbackNode!=null&&o.callbackNode===m?r2.bind(null,o):null)}function a2(o,u){if(ql())return null;Vu(o,u,!0)}function y5(){w5(function(){(ti&6)!==0?Ze(Ft,v5):i2()})}function o_(){return Mh===0&&(Mh=de()),Mh}function o2(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Pf(""+o)}function l2(o,u){var m=u.ownerDocument.createElement("input");return m.name=u.name,m.value=u.value,o.id&&m.setAttribute("form",o.id),u.parentNode.insertBefore(m,u),o=new FormData(o),m.parentNode.removeChild(m),o}function x5(o,u,m,y,E){if(u==="submit"&&m&&m.stateNode===E){var R=o2((E[ji]||null).action),G=y.submitter;G&&(u=(u=G[ji]||null)?o2(u.formAction):G.getAttribute("formAction"),u!==null&&(R=u,G=null));var q=new lu("action","action",null,y,E);o.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Mh!==0){var ce=G?l2(E,G):new FormData(E);$g(m,{pending:!0,data:ce,method:E.method,action:R},null,ce)}}else typeof R=="function"&&(q.preventDefault(),ce=G?l2(E,G):new FormData(E),$g(m,{pending:!0,data:ce,method:E.method,action:R},R,ce))},currentTarget:E}]})}}for(var l_=0;l_<Zf.length;l_++){var c_=Zf[l_],b5=c_.toLowerCase(),A5=c_[0].toUpperCase()+c_.slice(1);As(b5,"on"+A5)}As(tr,"onAnimationEnd"),As(Mg,"onAnimationIteration"),As(br,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(Xy,"onTransitionRun"),As(No,"onTransitionStart"),As(gu,"onTransitionCancel"),As(Lo,"onTransitionEnd"),V("onMouseEnter",["mouseout","mouseover"]),V("onMouseLeave",["mouseout","mouseover"]),V("onPointerEnter",["pointerout","pointerover"]),V("onPointerLeave",["pointerout","pointerover"]),nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var o0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(o0));function c2(o,u){u=(u&4)!==0;for(var m=0;m<o.length;m++){var y=o[m],E=y.event;y=y.listeners;e:{var R=void 0;if(u)for(var G=y.length-1;0<=G;G--){var q=y[G],ce=q.instance,we=q.currentTarget;if(q=q.listener,ce!==R&&E.isPropagationStopped())break e;R=q,E.currentTarget=we;try{R(E)}catch(Ke){xc(Ke)}E.currentTarget=null,R=ce}else for(G=0;G<y.length;G++){if(q=y[G],ce=q.instance,we=q.currentTarget,q=q.listener,ce!==R&&E.isPropagationStopped())break e;R=q,E.currentTarget=we;try{R(E)}catch(Ke){xc(Ke)}E.currentTarget=null,R=ce}}}}function On(o,u){var m=u[ks];m===void 0&&(m=u[ks]=new Set);var y=o+"__bubble";m.has(y)||(u2(u,o,2,!1),m.add(y))}function u_(o,u,m){var y=0;u&&(y|=4),u2(m,o,y,u)}var Ix="_reactListening"+Math.random().toString(36).slice(2);function f_(o){if(!o[Ix]){o[Ix]=!0,Ge.forEach(function(m){m!=="selectionchange"&&(S5.has(m)||u_(m,!1,o),u_(m,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Ix]||(u[Ix]=!0,u_("selectionchange",!1,u))}}function u2(o,u,m,y){switch(O2(u)){case 2:var E=K5;break;case 8:E=J5;break;default:E=E_}m=E.bind(null,u,m,o),E=void 0,!Ff||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(E=!0),y?E!==void 0?o.addEventListener(u,m,{capture:!0,passive:E}):o.addEventListener(u,m,!0):E!==void 0?o.addEventListener(u,m,{passive:E}):o.addEventListener(u,m,!1)}function h_(o,u,m,y,E){var R=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var G=y.tag;if(G===3||G===4){var q=y.stateNode.containerInfo;if(q===E)break;if(G===4)for(G=y.return;G!==null;){var ce=G.tag;if((ce===3||ce===4)&&G.stateNode.containerInfo===E)return;G=G.return}for(;q!==null;){if(G=k(q),G===null)return;if(ce=G.tag,ce===5||ce===6||ce===26||ce===27){y=R=G;continue e}q=q.parentNode}}y=y.return}og(function(){var we=R,Ke=Od(m),$e=[];e:{var Le=Yd.get(o);if(Le!==void 0){var Pe=lu,rn=o;switch(o){case"keypress":if(yl(m)===0)break e;case"keydown":case"keyup":Pe=hg;break;case"focusin":rn="focus",Pe=Pd;break;case"focusout":rn="blur",Pe=Pd;break;case"beforeblur":case"afterblur":Pe=Pd;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=qS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=pg;break;case tr:case Mg:case br:Pe=By;break;case Lo:Pe=wo;break;case"scroll":case"scrollend":Pe=Cy;break;case"wheel":Pe=KS;break;case"copy":case"cut":case"paste":Pe=Ny;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=Fd;break;case"toggle":case"beforetoggle":Pe=bl}var $t=(u&4)!==0,Si=!$t&&(o==="scroll"||o==="scrollend"),Ae=$t?Le!==null?Le+"Capture":null:Le;$t=[];for(var ye=we,Te;ye!==null;){var Je=ye;if(Te=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||Te===null||Ae===null||(Je=ru(ye,Ae),Je!=null&&$t.push(l0(ye,Je,Te))),Si)break;ye=ye.return}0<$t.length&&(Le=new Pe(Le,rn,null,m,Ke),$e.push({event:Le,listeners:$t}))}}if((u&7)===0){e:{if(Le=o==="mouseover"||o==="pointerover",Pe=o==="mouseout"||o==="pointerout",Le&&m!==Ld&&(rn=m.relatedTarget||m.fromElement)&&(k(rn)||rn[Xi]))break e;if((Pe||Le)&&(Le=Ke.window===Ke?Ke:(Le=Ke.ownerDocument)?Le.defaultView||Le.parentWindow:window,Pe?(rn=m.relatedTarget||m.toElement,Pe=we,rn=rn?k(rn):null,rn!==null&&(Si=r(rn),$t=rn.tag,rn!==Si||$t!==5&&$t!==27&&$t!==6)&&(rn=null)):(Pe=null,rn=we),Pe!==rn)){if($t=ug,Je="onMouseLeave",Ae="onMouseEnter",ye="mouse",(o==="pointerout"||o==="pointerover")&&($t=Fd,Je="onPointerLeave",Ae="onPointerEnter",ye="pointer"),Si=Pe==null?Le:pe(Pe),Te=rn==null?Le:pe(rn),Le=new $t(Je,ye+"leave",Pe,m,Ke),Le.target=Si,Le.relatedTarget=Te,Je=null,k(Ke)===we&&($t=new $t(Ae,ye+"enter",rn,m,Ke),$t.target=Te,$t.relatedTarget=Si,Je=$t),Si=Je,Pe&&rn)t:{for($t=Pe,Ae=rn,ye=0,Te=$t;Te;Te=Rp(Te))ye++;for(Te=0,Je=Ae;Je;Je=Rp(Je))Te++;for(;0<ye-Te;)$t=Rp($t),ye--;for(;0<Te-ye;)Ae=Rp(Ae),Te--;for(;ye--;){if($t===Ae||Ae!==null&&$t===Ae.alternate)break t;$t=Rp($t),Ae=Rp(Ae)}$t=null}else $t=null;Pe!==null&&f2($e,Le,Pe,$t,!1),rn!==null&&Si!==null&&f2($e,Si,rn,$t,!0)}}e:{if(Le=we?pe(we):window,Pe=Le.nodeName&&Le.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Le.type==="file")var Ot=Hd;else if(yg(Le))if(Gd)Ot=_l;else{Ot=Vy;var Nn=JS}else Pe=Le.nodeName,!Pe||Pe.toLowerCase()!=="input"||Le.type!=="checkbox"&&Le.type!=="radio"?we&&Nd(we.elementType)&&(Ot=Hd):Ot=qf;if(Ot&&(Ot=Ot(o,we))){vr($e,Ot,m,Ke);break e}Nn&&Nn(o,Le,we),o==="focusout"&&we&&Le.type==="number"&&we.memoizedProps.value!=null&&_i(Le,"number",Le.value)}switch(Nn=we?pe(we):window,o){case"focusin":(yg(Nn)||Nn.contentEditable==="true")&&(Bo=Nn,kd=we,Jf=null);break;case"focusout":Jf=kd=Bo=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,_g($e,m,Ke);break;case"selectionchange":if(Sg)break;case"keydown":case"keyup":_g($e,m,Ke)}var kt;if(Vf)e:{switch(o){case"compositionstart":var en="onCompositionStart";break e;case"compositionend":en="onCompositionEnd";break e;case"compositionupdate":en="onCompositionUpdate";break e}en=void 0}else Sl?Xf(o,m)&&(en="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(en="onCompositionStart");en&&(jf&&m.locale!=="ko"&&(Sl||en!=="onCompositionStart"?en==="onCompositionEnd"&&Sl&&(kt=cg()):(To=Ke,lg="value"in To?To.value:To.textContent,Sl=!0)),Nn=Fx(we,en),0<Nn.length&&(en=new Id(en,o,null,m,Ke),$e.push({event:en,listeners:Nn}),kt?en.data=kt:(kt=gg(m),kt!==null&&(en.data=kt)))),(kt=kf?Yf(o,m):vg(o,m))&&(en=Fx(we,"onBeforeInput"),0<en.length&&(Nn=new Id("onBeforeInput","beforeinput",null,m,Ke),$e.push({event:Nn,listeners:en}),Nn.data=kt)),x5($e,o,we,m,Ke)}c2($e,u)})}function l0(o,u,m){return{instance:o,listener:u,currentTarget:m}}function Fx(o,u){for(var m=u+"Capture",y=[];o!==null;){var E=o,R=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||R===null||(E=ru(o,m),E!=null&&y.unshift(l0(o,E,R)),E=ru(o,u),E!=null&&y.push(l0(o,E,R))),o.tag===3)return y;o=o.return}return[]}function Rp(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function f2(o,u,m,y,E){for(var R=u._reactName,G=[];m!==null&&m!==y;){var q=m,ce=q.alternate,we=q.stateNode;if(q=q.tag,ce!==null&&ce===y)break;q!==5&&q!==26&&q!==27||we===null||(ce=we,E?(we=ru(m,R),we!=null&&G.unshift(l0(m,we,ce))):E||(we=ru(m,R),we!=null&&G.push(l0(m,we,ce)))),m=m.return}G.length!==0&&o.push({event:u,listeners:G})}var _5=/\r\n?/g,M5=/\u0000|\uFFFD/g;function h2(o){return(typeof o=="string"?o:""+o).replace(_5,`
`).replace(M5,"")}function d2(o,u){return u=h2(u),h2(o)===u}function zx(){}function Ai(o,u,m,y,E,R){switch(m){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||$s(o,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&$s(o,""+y);break;case"className":Ve(o,"class",y);break;case"tabIndex":Ve(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Ve(o,m,y);break;case"style":Uf(o,y,R);break;case"data":if(u!=="object"){Ve(o,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||m!=="href")){o.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(m);break}y=Pf(""+y),o.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(m==="formAction"?(u!=="input"&&Ai(o,u,"name",E.name,E,null),Ai(o,u,"formEncType",E.formEncType,E,null),Ai(o,u,"formMethod",E.formMethod,E,null),Ai(o,u,"formTarget",E.formTarget,E,null)):(Ai(o,u,"encType",E.encType,E,null),Ai(o,u,"method",E.method,E,null),Ai(o,u,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(m);break}y=Pf(""+y),o.setAttribute(m,y);break;case"onClick":y!=null&&(o.onclick=zx);break;case"onScroll":y!=null&&On("scroll",o);break;case"onScrollEnd":y!=null&&On("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(m=y.__html,m!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}m=Pf(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,""+y):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":y===!0?o.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,y):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(m,y):o.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(m):o.setAttribute(m,y);break;case"popover":On("beforetoggle",o),On("toggle",o),Ce(o,"popover",y);break;case"xlinkActuate":We(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":We(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":We(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":We(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":We(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":We(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":We(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":We(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":We(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ce(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=rg.get(m)||m,Ce(o,m,y))}}function d_(o,u,m,y,E,R){switch(m){case"style":Uf(o,y,R);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(m=y.__html,m!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"children":typeof y=="string"?$s(o,y):(typeof y=="number"||typeof y=="bigint")&&$s(o,""+y);break;case"onScroll":y!=null&&On("scroll",o);break;case"onScrollEnd":y!=null&&On("scrollend",o);break;case"onClick":y!=null&&(o.onclick=zx);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!at.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),u=m.slice(2,E?m.length-7:void 0),R=o[ji]||null,R=R!=null?R[m]:null,typeof R=="function"&&o.removeEventListener(u,R,E),typeof y=="function")){typeof R!="function"&&R!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(u,y,E);break e}m in o?o[m]=y:y===!0?o.setAttribute(m,""):Ce(o,m,y)}}}function lr(o,u,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":On("error",o),On("load",o);var y=!1,E=!1,R;for(R in m)if(m.hasOwnProperty(R)){var G=m[R];if(G!=null)switch(R){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Ai(o,u,R,G,m,null)}}E&&Ai(o,u,"srcSet",m.srcSet,m,null),y&&Ai(o,u,"src",m.src,m,null);return;case"input":On("invalid",o);var q=R=G=E=null,ce=null,we=null;for(y in m)if(m.hasOwnProperty(y)){var Ke=m[y];if(Ke!=null)switch(y){case"name":E=Ke;break;case"type":G=Ke;break;case"checked":ce=Ke;break;case"defaultChecked":we=Ke;break;case"value":R=Ke;break;case"defaultValue":q=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(i(137,u));break;default:Ai(o,u,y,Ke,m,null)}}yn(o,R,q,ce,we,G,E,!1),ri(o);return;case"select":On("invalid",o),y=G=R=null;for(E in m)if(m.hasOwnProperty(E)&&(q=m[E],q!=null))switch(E){case"value":R=q;break;case"defaultValue":G=q;break;case"multiple":y=q;default:Ai(o,u,E,q,m,null)}u=R,m=G,o.multiple=!!y,u!=null?In(o,!!y,u,!1):m!=null&&In(o,!!y,m,!0);return;case"textarea":On("invalid",o),R=E=y=null;for(G in m)if(m.hasOwnProperty(G)&&(q=m[G],q!=null))switch(G){case"value":y=q;break;case"defaultValue":E=q;break;case"children":R=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(91));break;default:Ai(o,u,G,q,m,null)}bs(o,y,E,R),ri(o);return;case"option":for(ce in m)if(m.hasOwnProperty(ce)&&(y=m[ce],y!=null))switch(ce){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Ai(o,u,ce,y,m,null)}return;case"dialog":On("beforetoggle",o),On("toggle",o),On("cancel",o),On("close",o);break;case"iframe":case"object":On("load",o);break;case"video":case"audio":for(y=0;y<o0.length;y++)On(o0[y],o);break;case"image":On("error",o),On("load",o);break;case"details":On("toggle",o);break;case"embed":case"source":case"link":On("error",o),On("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in m)if(m.hasOwnProperty(we)&&(y=m[we],y!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Ai(o,u,we,y,m,null)}return;default:if(Nd(u)){for(Ke in m)m.hasOwnProperty(Ke)&&(y=m[Ke],y!==void 0&&d_(o,u,Ke,y,m,void 0));return}}for(q in m)m.hasOwnProperty(q)&&(y=m[q],y!=null&&Ai(o,u,q,y,m,null))}function E5(o,u,m,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,R=null,G=null,q=null,ce=null,we=null,Ke=null;for(Pe in m){var $e=m[Pe];if(m.hasOwnProperty(Pe)&&$e!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":ce=$e;default:y.hasOwnProperty(Pe)||Ai(o,u,Pe,null,y,$e)}}for(var Le in y){var Pe=y[Le];if($e=m[Le],y.hasOwnProperty(Le)&&(Pe!=null||$e!=null))switch(Le){case"type":R=Pe;break;case"name":E=Pe;break;case"checked":we=Pe;break;case"defaultChecked":Ke=Pe;break;case"value":G=Pe;break;case"defaultValue":q=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(i(137,u));break;default:Pe!==$e&&Ai(o,u,Le,Pe,y,$e)}}An(o,G,q,ce,we,Ke,R,E);return;case"select":Pe=G=q=Le=null;for(R in m)if(ce=m[R],m.hasOwnProperty(R)&&ce!=null)switch(R){case"value":break;case"multiple":Pe=ce;default:y.hasOwnProperty(R)||Ai(o,u,R,null,y,ce)}for(E in y)if(R=y[E],ce=m[E],y.hasOwnProperty(E)&&(R!=null||ce!=null))switch(E){case"value":Le=R;break;case"defaultValue":q=R;break;case"multiple":G=R;default:R!==ce&&Ai(o,u,E,R,y,ce)}u=q,m=G,y=Pe,Le!=null?In(o,!!m,Le,!1):!!y!=!!m&&(u!=null?In(o,!!m,u,!0):In(o,!!m,m?[]:"",!1));return;case"textarea":Pe=Le=null;for(q in m)if(E=m[q],m.hasOwnProperty(q)&&E!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Ai(o,u,q,null,y,E)}for(G in y)if(E=y[G],R=m[G],y.hasOwnProperty(G)&&(E!=null||R!=null))switch(G){case"value":Le=E;break;case"defaultValue":Pe=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:E!==R&&Ai(o,u,G,E,y,R)}ui(o,Le,Pe);return;case"option":for(var rn in m)if(Le=m[rn],m.hasOwnProperty(rn)&&Le!=null&&!y.hasOwnProperty(rn))switch(rn){case"selected":o.selected=!1;break;default:Ai(o,u,rn,null,y,Le)}for(ce in y)if(Le=y[ce],Pe=m[ce],y.hasOwnProperty(ce)&&Le!==Pe&&(Le!=null||Pe!=null))switch(ce){case"selected":o.selected=Le&&typeof Le!="function"&&typeof Le!="symbol";break;default:Ai(o,u,ce,Le,y,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in m)Le=m[$t],m.hasOwnProperty($t)&&Le!=null&&!y.hasOwnProperty($t)&&Ai(o,u,$t,null,y,Le);for(we in y)if(Le=y[we],Pe=m[we],y.hasOwnProperty(we)&&Le!==Pe&&(Le!=null||Pe!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(i(137,u));break;default:Ai(o,u,we,Le,y,Pe)}return;default:if(Nd(u)){for(var Si in m)Le=m[Si],m.hasOwnProperty(Si)&&Le!==void 0&&!y.hasOwnProperty(Si)&&d_(o,u,Si,void 0,y,Le);for(Ke in y)Le=y[Ke],Pe=m[Ke],!y.hasOwnProperty(Ke)||Le===Pe||Le===void 0&&Pe===void 0||d_(o,u,Ke,Le,y,Pe);return}}for(var Ae in m)Le=m[Ae],m.hasOwnProperty(Ae)&&Le!=null&&!y.hasOwnProperty(Ae)&&Ai(o,u,Ae,null,y,Le);for($e in y)Le=y[$e],Pe=m[$e],!y.hasOwnProperty($e)||Le===Pe||Le==null&&Pe==null||Ai(o,u,$e,Le,y,Pe)}var p_=null,m_=null;function Hx(o){return o.nodeType===9?o:o.ownerDocument}function p2(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m2(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function g_(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var v_=null;function T5(){var o=window.event;return o&&o.type==="popstate"?o===v_?!1:(v_=o,!0):(v_=null,!1)}var g2=typeof setTimeout=="function"?setTimeout:void 0,C5=typeof clearTimeout=="function"?clearTimeout:void 0,v2=typeof Promise=="function"?Promise:void 0,w5=typeof queueMicrotask=="function"?queueMicrotask:typeof v2<"u"?function(o){return v2.resolve(null).then(o).catch(R5)}:g2;function R5(o){setTimeout(function(){throw o})}function ju(o){return o==="head"}function y2(o,u){var m=u,y=0,E=0;do{var R=m.nextSibling;if(o.removeChild(m),R&&R.nodeType===8)if(m=R.data,m==="/$"){if(0<y&&8>y){m=y;var G=o.ownerDocument;if(m&1&&c0(G.documentElement),m&2&&c0(G.body),m&4)for(m=G.head,c0(m),G=m.firstChild;G;){var q=G.nextSibling,ce=G.nodeName;G[gr]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&G.rel.toLowerCase()==="stylesheet"||m.removeChild(G),G=q}}if(E===0){o.removeChild(R),v0(u);return}E--}else m==="$"||m==="$?"||m==="$!"?E++:y=m.charCodeAt(0)-48;else y=0;m=R}while(m);v0(u)}function y_(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var m=u;switch(u=u.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":y_(m),$n(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function B5(o,u,m,y){for(;o.nodeType===1;){var E=m;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[gr])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(R=o.getAttribute("rel"),R==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(R!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(R=o.getAttribute("src"),(R!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&R&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var R=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===R)return o}else return o;if(o=Ko(o.nextSibling),o===null)break}return null}function D5(o,u,m){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=Ko(o.nextSibling),o===null))return null;return o}function x_(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function N5(o,u){var m=o.ownerDocument;if(o.data!=="$?"||m.readyState==="complete")u();else{var y=function(){u(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function Ko(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return o}var b_=null;function x2(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(u===0)return o;u--}else m==="/$"&&u++}o=o.previousSibling}return null}function b2(o,u,m){switch(u=Hx(m),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function c0(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);$n(o)}var fo=new Map,A2=new Set;function Gx(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Oc=Q.d;Q.d={f:L5,r:O5,D:U5,C:P5,L:I5,m:F5,X:H5,S:z5,M:G5};function L5(){var o=Oc.f(),u=co();return o||u}function O5(o){var u=Z(o);u!==null&&u.tag===5&&u.type==="form"?bx(u):Oc.r(o)}var Bp=typeof document>"u"?null:document;function S2(o,u,m){var y=Bp;if(y&&typeof u=="string"&&u){var E=qt(u);E='link[rel="'+o+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),A2.has(E)||(A2.add(E),o={rel:o,crossOrigin:m,href:u},y.querySelector(E)===null&&(u=y.createElement("link"),lr(u,"link",o),Ne(u),y.head.appendChild(u)))}}function U5(o){Oc.D(o),S2("dns-prefetch",o,null)}function P5(o,u){Oc.C(o,u),S2("preconnect",o,u)}function I5(o,u,m){Oc.L(o,u,m);var y=Bp;if(y&&o&&u){var E='link[rel="preload"][as="'+qt(u)+'"]';u==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+qt(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+qt(m.imageSizes)+'"]')):E+='[href="'+qt(o)+'"]';var R=E;switch(u){case"style":R=Dp(o);break;case"script":R=Np(o)}fo.has(R)||(o=p({rel:"preload",href:u==="image"&&m&&m.imageSrcSet?void 0:o,as:u},m),fo.set(R,o),y.querySelector(E)!==null||u==="style"&&y.querySelector(u0(R))||u==="script"&&y.querySelector(f0(R))||(u=y.createElement("link"),lr(u,"link",o),Ne(u),y.head.appendChild(u)))}}function F5(o,u){Oc.m(o,u);var m=Bp;if(m&&o){var y=u&&typeof u.as=="string"?u.as:"script",E='link[rel="modulepreload"][as="'+qt(y)+'"][href="'+qt(o)+'"]',R=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=Np(o)}if(!fo.has(R)&&(o=p({rel:"modulepreload",href:o},u),fo.set(R,o),m.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(f0(R)))return}y=m.createElement("link"),lr(y,"link",o),Ne(y),m.head.appendChild(y)}}}function z5(o,u,m){Oc.S(o,u,m);var y=Bp;if(y&&o){var E=Re(y).hoistableStyles,R=Dp(o);u=u||"default";var G=E.get(R);if(!G){var q={loading:0,preload:null};if(G=y.querySelector(u0(R)))q.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":u},m),(m=fo.get(R))&&A_(o,m);var ce=G=y.createElement("link");Ne(ce),lr(ce,"link",o),ce._p=new Promise(function(we,Ke){ce.onload=we,ce.onerror=Ke}),ce.addEventListener("load",function(){q.loading|=1}),ce.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Vx(G,u,y)}G={type:"stylesheet",instance:G,count:1,state:q},E.set(R,G)}}}function H5(o,u){Oc.X(o,u);var m=Bp;if(m&&o){var y=Re(m).hoistableScripts,E=Np(o),R=y.get(E);R||(R=m.querySelector(f0(E)),R||(o=p({src:o,async:!0},u),(u=fo.get(E))&&S_(o,u),R=m.createElement("script"),Ne(R),lr(R,"link",o),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(E,R))}}function G5(o,u){Oc.M(o,u);var m=Bp;if(m&&o){var y=Re(m).hoistableScripts,E=Np(o),R=y.get(E);R||(R=m.querySelector(f0(E)),R||(o=p({src:o,async:!0,type:"module"},u),(u=fo.get(E))&&S_(o,u),R=m.createElement("script"),Ne(R),lr(R,"link",o),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(E,R))}}function _2(o,u,m,y){var E=(E=Be.current)?Gx(E):null;if(!E)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(u=Dp(m.href),m=Re(E).hoistableStyles,y=m.get(u),y||(y={type:"style",instance:null,count:0,state:null},m.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=Dp(m.href);var R=Re(E).hoistableStyles,G=R.get(o);if(G||(E=E.ownerDocument||E,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(o,G),(R=E.querySelector(u0(o)))&&!R._p&&(G.instance=R,G.state.loading=5),fo.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},fo.set(o,m),R||V5(E,o,m,G.state))),u&&y===null)throw Error(i(528,""));return G}if(u&&y!==null)throw Error(i(529,""));return null;case"script":return u=m.async,m=m.src,typeof m=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Np(m),m=Re(E).hoistableScripts,y=m.get(u),y||(y={type:"script",instance:null,count:0,state:null},m.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Dp(o){return'href="'+qt(o)+'"'}function u0(o){return'link[rel="stylesheet"]['+o+"]"}function M2(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function V5(o,u,m,y){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=o.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),lr(u,"link",m),Ne(u),o.head.appendChild(u))}function Np(o){return'[src="'+qt(o)+'"]'}function f0(o){return"script[async]"+o}function E2(o,u,m){if(u.count++,u.instance===null)switch(u.type){case"style":var y=o.querySelector('style[data-href~="'+qt(m.href)+'"]');if(y)return u.instance=y,Ne(y),y;var E=p({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),Ne(y),lr(y,"style",E),Vx(y,m.precedence,o),u.instance=y;case"stylesheet":E=Dp(m.href);var R=o.querySelector(u0(E));if(R)return u.state.loading|=4,u.instance=R,Ne(R),R;y=M2(m),(E=fo.get(E))&&A_(y,E),R=(o.ownerDocument||o).createElement("link"),Ne(R);var G=R;return G._p=new Promise(function(q,ce){G.onload=q,G.onerror=ce}),lr(R,"link",y),u.state.loading|=4,Vx(R,m.precedence,o),u.instance=R;case"script":return R=Np(m.src),(E=o.querySelector(f0(R)))?(u.instance=E,Ne(E),E):(y=m,(E=fo.get(R))&&(y=p({},m),S_(y,E)),o=o.ownerDocument||o,E=o.createElement("script"),Ne(E),lr(E,"link",y),o.head.appendChild(E),u.instance=E);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,Vx(y,m.precedence,o));return u.instance}function Vx(o,u,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,R=E,G=0;G<y.length;G++){var q=y[G];if(q.dataset.precedence===u)R=q;else if(R!==E)break}R?R.parentNode.insertBefore(o,R.nextSibling):(u=m.nodeType===9?m.head:m,u.insertBefore(o,u.firstChild))}function A_(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function S_(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var kx=null;function T2(o,u,m){if(kx===null){var y=new Map,E=kx=new Map;E.set(m,y)}else E=kx,y=E.get(m),y||(y=new Map,E.set(m,y));if(y.has(o))return y;for(y.set(o,null),m=m.getElementsByTagName(o),E=0;E<m.length;E++){var R=m[E];if(!(R[gr]||R[Pi]||o==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var G=R.getAttribute(u)||"";G=o+G;var q=y.get(G);q?q.push(R):y.set(G,[R])}}return y}function C2(o,u,m){o=o.ownerDocument||o,o.head.insertBefore(m,u==="title"?o.querySelector("head > title"):null)}function k5(o,u,m){if(m===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function w2(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var h0=null;function j5(){}function X5(o,u,m){if(h0===null)throw Error(i(475));var y=h0;if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var E=Dp(m.href),R=o.querySelector(u0(E));if(R){o=R._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(y.count++,y=jx.bind(y),o.then(y,y)),u.state.loading|=4,u.instance=R,Ne(R);return}R=o.ownerDocument||o,m=M2(m),(E=fo.get(E))&&A_(m,E),R=R.createElement("link"),Ne(R);var G=R;G._p=new Promise(function(q,ce){G.onload=q,G.onerror=ce}),lr(R,"link",m),u.instance=R}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(y.count++,u=jx.bind(y),o.addEventListener("load",u),o.addEventListener("error",u))}}function Y5(){if(h0===null)throw Error(i(475));var o=h0;return o.stylesheets&&o.count===0&&__(o,o.stylesheets),0<o.count?function(u){var m=setTimeout(function(){if(o.stylesheets&&__(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(m)}}:null}function jx(){if(this.count--,this.count===0){if(this.stylesheets)__(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Xx=null;function __(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Xx=new Map,u.forEach(W5,o),Xx=null,jx.call(o))}function W5(o,u){if(!(u.state.loading&4)){var m=Xx.get(o);if(m)var y=m.get(null);else{m=new Map,Xx.set(o,m);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<E.length;R++){var G=E[R];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(m.set(G.dataset.precedence,G),y=G)}y&&m.set(null,y)}E=u.instance,G=E.getAttribute("data-precedence"),R=m.get(G)||y,R===y&&m.set(null,E),m.set(G,E),this.count++,y=jx.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),R?R.parentNode.insertBefore(E,R.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),u.state.loading|=4}}var d0={$$typeof:C,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function q5(o,u,m,y,E,R,G,q){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oe(0),this.hiddenUpdates=Oe(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=R,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function R2(o,u,m,y,E,R,G,q,ce,we,Ke,$e){return o=new q5(o,u,m,G,q,ce,we,$e),u=1,R===!0&&(u|=24),R=Ar(3,null,null,u),o.current=R,R.stateNode=o,u=$d(),u.refCount++,o.pooledCache=u,u.refCount++,R.memoizedState={element:y,isDehydrated:m,cache:u},Ig(R),o}function B2(o){return o?(o=Tl,o):Tl}function D2(o,u,m,y,E,R){E=B2(E),y.context===null?y.context=E:y.pendingContext=E,y=Qa(u),y.payload={element:m},R=R===void 0?null:R,R!==null&&(y.callback=R),m=zo(o,y,u),m!==null&&(or(m,o,u),gc(m,o,u))}function N2(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<u?m:u}}function M_(o,u){N2(o,u),(o=o.alternate)&&N2(o,u)}function L2(o){if(o.tag===13){var u=Oo(o,67108864);u!==null&&or(u,o,67108864),M_(o,67108864)}}var Yx=!0;function K5(o,u,m,y){var E=j.T;j.T=null;var R=Q.p;try{Q.p=2,E_(o,u,m,y)}finally{Q.p=R,j.T=E}}function J5(o,u,m,y){var E=j.T;j.T=null;var R=Q.p;try{Q.p=8,E_(o,u,m,y)}finally{Q.p=R,j.T=E}}function E_(o,u,m,y){if(Yx){var E=T_(y);if(E===null)h_(o,u,y,Wx,m),U2(o,y);else if(Q5(E,o,u,m,y))y.stopPropagation();else if(U2(o,y),u&4&&-1<Z5.indexOf(o)){for(;E!==null;){var R=Z(E);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var G=mt(R.pendingLanes);if(G!==0){var q=R;for(q.pendingLanes|=2,q.entangledLanes|=2;G;){var ce=1<<31-ht(G);q.entanglements[1]|=ce,G&=~ce}Jl(R),(ti&6)===0&&(Ys=ft()+500,a0(0))}}break;case 13:q=Oo(R,2),q!==null&&or(q,R,2),co(),M_(R,2)}if(R=T_(y),R===null&&h_(o,u,y,Wx,m),R===E)break;E=R}E!==null&&y.stopPropagation()}else h_(o,u,y,null,m)}}function T_(o){return o=Od(o),C_(o)}var Wx=null;function C_(o){if(Wx=null,o=k(o),o!==null){var u=r(o);if(u===null)o=null;else{var m=u.tag;if(m===13){if(o=a(u),o!==null)return o;o=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return Wx=o,null}function O2(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case Ft:return 2;case dt:return 8;case ne:case W:return 32;case Me:return 268435456;default:return 32}default:return 32}}var w_=!1,Xu=null,Yu=null,Wu=null,p0=new Map,m0=new Map,qu=[],Z5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U2(o,u){switch(o){case"focusin":case"focusout":Xu=null;break;case"dragenter":case"dragleave":Yu=null;break;case"mouseover":case"mouseout":Wu=null;break;case"pointerover":case"pointerout":p0.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":m0.delete(u.pointerId)}}function g0(o,u,m,y,E,R){return o===null||o.nativeEvent!==R?(o={blockedOn:u,domEventName:m,eventSystemFlags:y,nativeEvent:R,targetContainers:[E]},u!==null&&(u=Z(u),u!==null&&L2(u)),o):(o.eventSystemFlags|=y,u=o.targetContainers,E!==null&&u.indexOf(E)===-1&&u.push(E),o)}function Q5(o,u,m,y,E){switch(u){case"focusin":return Xu=g0(Xu,o,u,m,y,E),!0;case"dragenter":return Yu=g0(Yu,o,u,m,y,E),!0;case"mouseover":return Wu=g0(Wu,o,u,m,y,E),!0;case"pointerover":var R=E.pointerId;return p0.set(R,g0(p0.get(R)||null,o,u,m,y,E)),!0;case"gotpointercapture":return R=E.pointerId,m0.set(R,g0(m0.get(R)||null,o,u,m,y,E)),!0}return!1}function P2(o){var u=k(o.target);if(u!==null){var m=r(u);if(m!==null){if(u=m.tag,u===13){if(u=a(m),u!==null){o.blockedOn=u,Ui(o.priority,function(){if(m.tag===13){var y=Hi();y=vn(y);var E=Oo(m,y);E!==null&&or(E,m,y),M_(m,y)}});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function qx(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var m=T_(o.nativeEvent);if(m===null){m=o.nativeEvent;var y=new m.constructor(m.type,m);Ld=y,m.target.dispatchEvent(y),Ld=null}else return u=Z(m),u!==null&&L2(u),o.blockedOn=m,!1;u.shift()}return!0}function I2(o,u,m){qx(o)&&m.delete(u)}function $5(){w_=!1,Xu!==null&&qx(Xu)&&(Xu=null),Yu!==null&&qx(Yu)&&(Yu=null),Wu!==null&&qx(Wu)&&(Wu=null),p0.forEach(I2),m0.forEach(I2)}function Kx(o,u){o.blockedOn===u&&(o.blockedOn=null,w_||(w_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$5)))}var Jx=null;function F2(o){Jx!==o&&(Jx=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Jx===o&&(Jx=null);for(var u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],E=o[u+2];if(typeof y!="function"){if(C_(y||m)===null)continue;break}var R=Z(m);R!==null&&(o.splice(u,3),u-=3,$g(R,{pending:!0,data:E,method:m.method,action:y},y,E))}}))}function v0(o){function u(ce){return Kx(ce,o)}Xu!==null&&Kx(Xu,o),Yu!==null&&Kx(Yu,o),Wu!==null&&Kx(Wu,o),p0.forEach(u),m0.forEach(u);for(var m=0;m<qu.length;m++){var y=qu[m];y.blockedOn===o&&(y.blockedOn=null)}for(;0<qu.length&&(m=qu[0],m.blockedOn===null);)P2(m),m.blockedOn===null&&qu.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var E=m[y],R=m[y+1],G=E[ji]||null;if(typeof R=="function")G||F2(m);else if(G){var q=null;if(R&&R.hasAttribute("formAction")){if(E=R,G=R[ji]||null)q=G.formAction;else if(C_(E)!==null)continue}else q=G.action;typeof q=="function"?m[y+1]=q:(m.splice(y,3),y-=3),F2(m)}}}function R_(o){this._internalRoot=o}Zx.prototype.render=R_.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var m=u.current,y=Hi();D2(m,y,o,u,null,null)},Zx.prototype.unmount=R_.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;D2(o.current,2,null,o,null,null),co(),u[Xi]=null}};function Zx(o){this._internalRoot=o}Zx.prototype.unstable_scheduleHydration=function(o){if(o){var u=cn();o={blockedOn:null,target:o,priority:u};for(var m=0;m<qu.length&&u!==0&&u<qu[m].priority;m++);qu.splice(m,0,o),m===0&&P2(o)}};var z2=e.version;if(z2!=="19.1.0")throw Error(i(527,z2,"19.1.0"));Q.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=c(u),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var eG={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qx.isDisabled&&Qx.supportsFiber)try{je=Qx.inject(eG),gt=Qx}catch{}}return x0.createRoot=function(o,u){if(!s(o))throw Error(i(299));var m=!1,y="",E=vh,R=gp,G=Nx,q=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(G=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(q=u.unstable_transitionCallbacks)),u=R2(o,1,!1,null,null,m,y,E,R,G,q,null),o[Xi]=u.current,f_(o),new R_(u)},x0.hydrateRoot=function(o,u,m){if(!s(o))throw Error(i(299));var y=!1,E="",R=vh,G=gp,q=Nx,ce=null,we=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(G=m.onCaughtError),m.onRecoverableError!==void 0&&(q=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ce=m.unstable_transitionCallbacks),m.formState!==void 0&&(we=m.formState)),u=R2(o,1,!0,u,m??null,y,E,R,G,q,ce,we),u.context=B2(null),m=u.current,y=Hi(),y=vn(y),E=Qa(y),E.callback=null,zo(m,E,y),m=y,u.current.lanes=m,Xe(u,m),Jl(u),o[Xi]=u.current,f_(o),new Zx(u)},x0.version="19.1.0",x0}var K2;function uG(){if(K2)return N_.exports;K2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),N_.exports=cG(),N_.exports}var fG=uG(),b0={},J2;function hG(){if(J2)return b0;J2=1,Object.defineProperty(b0,"__esModule",{value:!0}),b0.parse=a,b0.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,r=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function a(v,x){const A=new r,M=v.length;if(M<2)return A;const _=(x==null?void 0:x.decode)||p;let S=0;do{const w=v.indexOf("=",S);if(w===-1)break;const C=v.indexOf(";",S),B=C===-1?M:C;if(w>B){S=v.lastIndexOf(";",w-1)+1;continue}const N=l(v,S,w),L=c(v,w,N),F=v.slice(N,L);if(A[F]===void 0){let P=l(v,w+1,B),U=c(v,B,P);const I=_(v.slice(P,U));A[F]=I}S=B+1}while(S<M);return A}function l(v,x,A){do{const M=v.charCodeAt(x);if(M!==32&&M!==9)return x}while(++x<A);return A}function c(v,x,A){for(;x>A;){const M=v.charCodeAt(--x);if(M!==32&&M!==9)return x+1}return A}function f(v,x,A){const M=(A==null?void 0:A.encode)||encodeURIComponent;if(!n.test(v))throw new TypeError(`argument name is invalid: ${v}`);const _=M(x);if(!e.test(_))throw new TypeError(`argument val is invalid: ${x}`);let S=v+"="+_;if(!A)return S;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);S+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);S+="; Domain="+A.domain}if(A.path){if(!i.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);S+="; Path="+A.path}if(A.expires){if(!g(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);S+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(S+="; HttpOnly"),A.secure&&(S+="; Secure"),A.partitioned&&(S+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return S}function p(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function g(v){return s.call(v)==="[object Date]"}return b0}hG();var Z2="popstate";function dG(n={}){function e(i,s){let{pathname:r,search:a,hash:l}=i.location;return IE("",{pathname:r,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:vv(s)}return mG(e,t,null,n)}function ts(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pG(){return Math.random().toString(36).substring(2,10)}function Q2(n,e){return{usr:n.state,key:n.key,idx:e}}function IE(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?km(e):e,state:t,key:e&&e.key||i||pG()}}function vv({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function km(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function mG(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:r=!1}=i,a=s.history,l="POP",c=null,f=p();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function p(){return(a.state||{idx:null}).idx}function g(){l="POP";let _=p(),S=_==null?null:_-f;f=_,c&&c({action:l,location:M.location,delta:S})}function v(_,S){l="PUSH";let w=IE(M.location,_,S);f=p()+1;let C=Q2(w,f),B=M.createHref(w);try{a.pushState(C,"",B)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(B)}r&&c&&c({action:l,location:M.location,delta:1})}function x(_,S){l="REPLACE";let w=IE(M.location,_,S);f=p();let C=Q2(w,f),B=M.createHref(w);a.replaceState(C,"",B),r&&c&&c({action:l,location:M.location,delta:0})}function A(_){return gG(_)}let M={get action(){return l},get location(){return n(s,a)},listen(_){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Z2,g),c=_,()=>{s.removeEventListener(Z2,g),c=null}},createHref(_){return e(s,_)},createURL:A,encodeLocation(_){let S=A(_);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:x,go(_){return a.go(_)}};return M}function gG(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ts(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:vv(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function $O(n,e,t="/"){return vG(n,e,t,!1)}function vG(n,e,t,i){let s=typeof e=="string"?km(e):e,r=Qc(s.pathname||"/",t);if(r==null)return null;let a=eU(n);yG(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let f=RG(r);l=CG(a[c],f,i)}return l}function eU(n,e=[],t=[],i=""){let s=(r,a,l)=>{let c={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};c.relativePath.startsWith("/")&&(ts(c.relativePath.startsWith(i),`Absolute route path "${c.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(i.length));let f=Kc([i,c.relativePath]),p=t.concat(c);r.children&&r.children.length>0&&(ts(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),eU(r.children,e,p,f)),!(r.path==null&&!r.index)&&e.push({path:f,score:EG(f,r.index),routesMeta:p})};return n.forEach((r,a)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))s(r,a);else for(let c of tU(r.path))s(r,a,c)}),e}function tU(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let a=tU(i.join("/")),l=[];return l.push(...a.map(c=>c===""?r:[r,c].join("/"))),s&&l.push(...a),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function yG(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:TG(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var xG=/^:[\w-]+$/,bG=3,AG=2,SG=1,_G=10,MG=-2,$2=n=>n==="*";function EG(n,e){let t=n.split("/"),i=t.length;return t.some($2)&&(i+=MG),e&&(i+=AG),t.filter(s=>!$2(s)).reduce((s,r)=>s+(xG.test(r)?bG:r===""?SG:_G),i)}function TG(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function CG(n,e,t=!1){let{routesMeta:i}=n,s={},r="/",a=[];for(let l=0;l<i.length;++l){let c=i[l],f=l===i.length-1,p=r==="/"?e:e.slice(r.length)||"/",g=Nb({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),v=c.route;if(!g&&f&&t&&!i[i.length-1].route.index&&(g=Nb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:Kc([r,g.pathname]),pathnameBase:LG(Kc([r,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(r=Kc([r,g.pathnameBase]))}return a}function Nb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=wG(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:g},v)=>{if(p==="*"){let A=l[v]||"";a=r.slice(0,r.length-A.length).replace(/(.)\/+$/,"$1")}const x=l[v];return g&&!x?f[p]=void 0:f[p]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:r,pathnameBase:a,pattern:n}}function wG(n,e=!1,t=!0){lc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function RG(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lc(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Qc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function BG(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?km(n):n;return{pathname:t?t.startsWith("/")?t:DG(t,e):e,search:OG(i),hash:UG(s)}}function DG(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function P_(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NG(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function nU(n){let e=NG(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function iU(n,e,t,i=!1){let s;typeof n=="string"?s=km(n):(s={...n},ts(!s.pathname||!s.pathname.includes("?"),P_("?","pathname","search",s)),ts(!s.pathname||!s.pathname.includes("#"),P_("#","pathname","hash",s)),ts(!s.search||!s.search.includes("#"),P_("#","search","hash",s)));let r=n===""||s.pathname==="",a=r?"/":s.pathname,l;if(a==null)l=t;else{let g=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;s.pathname=v.join("/")}l=g>=0?e[g]:"/"}let c=BG(s,l),f=a&&a!=="/"&&a.endsWith("/"),p=(r||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}var Kc=n=>n.join("/").replace(/\/\/+/g,"/"),LG=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),OG=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,UG=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function PG(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var sU=["POST","PUT","PATCH","DELETE"];new Set(sU);var IG=["GET",...sU];new Set(IG);var jm=z.createContext(null);jm.displayName="DataRouter";var jA=z.createContext(null);jA.displayName="DataRouterState";var rU=z.createContext({isTransitioning:!1});rU.displayName="ViewTransition";var FG=z.createContext(new Map);FG.displayName="Fetchers";var zG=z.createContext(null);zG.displayName="Await";var fc=z.createContext(null);fc.displayName="Navigation";var Wv=z.createContext(null);Wv.displayName="Location";var iu=z.createContext({outlet:null,matches:[],isDataRoute:!1});iu.displayName="Route";var dC=z.createContext(null);dC.displayName="RouteError";function HG(n,{relative:e}={}){ts(qv(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext(fc),{hash:s,pathname:r,search:a}=Kv(n,{relative:e}),l=r;return t!=="/"&&(l=r==="/"?t:Kc([t,r])),i.createHref({pathname:l,search:a,hash:s})}function qv(){return z.useContext(Wv)!=null}function Td(){return ts(qv(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Wv).location}var aU="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oU(n){z.useContext(fc).static||z.useLayoutEffect(n)}function GG(){let{isDataRoute:n}=z.useContext(iu);return n?eV():VG()}function VG(){ts(qv(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(jm),{basename:e,navigator:t}=z.useContext(fc),{matches:i}=z.useContext(iu),{pathname:s}=Td(),r=JSON.stringify(nU(i)),a=z.useRef(!1);return oU(()=>{a.current=!0}),z.useCallback((c,f={})=>{if(lc(a.current,aU),!a.current)return;if(typeof c=="number"){t.go(c);return}let p=iU(c,JSON.parse(r),s,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Kc([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,r,s,n])}z.createContext(null);function Kv(n,{relative:e}={}){let{matches:t}=z.useContext(iu),{pathname:i}=Td(),s=JSON.stringify(nU(t));return z.useMemo(()=>iU(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function kG(n,e){return lU(n,e)}function lU(n,e,t,i){var S;ts(qv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=z.useContext(fc),{matches:r}=z.useContext(iu),a=r[r.length-1],l=a?a.params:{},c=a?a.pathname:"/",f=a?a.pathnameBase:"/",p=a&&a.route;{let w=p&&p.path||"";cU(c,!p||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let g=Td(),v;if(e){let w=typeof e=="string"?km(e):e;ts(f==="/"||((S=w.pathname)==null?void 0:S.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${w.pathname}" was given in the \`location\` prop.`),v=w}else v=g;let x=v.pathname||"/",A=x;if(f!=="/"){let w=f.replace(/^\//,"").split("/");A="/"+x.replace(/^\//,"").split("/").slice(w.length).join("/")}let M=$O(n,{pathname:A});lc(p||M!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),lc(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=qG(M&&M.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Kc([f,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:Kc([f,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),r,t,i);return e&&_?z.createElement(Wv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},_):_}function jG(){let n=$G(),e=PG(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=z.createElement(z.Fragment,null,z.createElement("p",null,"💿 Hey developer 👋"),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:r},"ErrorBoundary")," or"," ",z.createElement("code",{style:r},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:s},t):null,a)}var XG=z.createElement(jG,null),YG=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?z.createElement(iu.Provider,{value:this.props.routeContext},z.createElement(dC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function WG({routeContext:n,match:e,children:t}){let i=z.useContext(jm);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(iu.Provider,{value:n},t)}function qG(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,r=t==null?void 0:t.errors;if(r!=null){let c=s.findIndex(f=>f.route.id&&(r==null?void 0:r[f.route.id])!==void 0);ts(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(t)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:p,errors:g}=t,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,f,p)=>{let g,v=!1,x=null,A=null;t&&(g=r&&f.route.id?r[f.route.id]:void 0,x=f.route.errorElement||XG,a&&(l<0&&p===0?(cU("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,A=null):l===p&&(v=!0,A=f.route.hydrateFallbackElement||null)));let M=e.concat(s.slice(0,p+1)),_=()=>{let S;return g?S=x:v?S=A:f.route.Component?S=z.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=c,z.createElement(WG,{match:f,routeContext:{outlet:c,matches:M,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?z.createElement(YG,{location:t.location,revalidation:t.revalidation,component:x,error:g,children:_(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):_()},null)}function pC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KG(n){let e=z.useContext(jm);return ts(e,pC(n)),e}function JG(n){let e=z.useContext(jA);return ts(e,pC(n)),e}function ZG(n){let e=z.useContext(iu);return ts(e,pC(n)),e}function mC(n){let e=ZG(n),t=e.matches[e.matches.length-1];return ts(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function QG(){return mC("useRouteId")}function $G(){var i;let n=z.useContext(dC),e=JG("useRouteError"),t=mC("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function eV(){let{router:n}=KG("useNavigate"),e=mC("useNavigate"),t=z.useRef(!1);return oU(()=>{t.current=!0}),z.useCallback(async(s,r={})=>{lc(t.current,aU),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...r}))},[n,e])}var eB={};function cU(n,e,t){!e&&!eB[n]&&(eB[n]=!0,lc(!1,t))}z.memo(tV);function tV({routes:n,future:e,state:t}){return lU(n,void 0,t,e)}function FE(n){ts(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nV({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:r=!1}){ts(!qv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),l=z.useMemo(()=>({basename:a,navigator:s,static:r,future:{}}),[a,s,r]);typeof t=="string"&&(t=km(t));let{pathname:c="/",search:f="",hash:p="",state:g=null,key:v="default"}=t,x=z.useMemo(()=>{let A=Qc(c,a);return A==null?null:{location:{pathname:A,search:f,hash:p,state:g,key:v},navigationType:i}},[a,c,f,p,g,v,i]);return lc(x!=null,`<Router basename="${a}"> is not able to match the URL "${c}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:z.createElement(fc.Provider,{value:l},z.createElement(Wv.Provider,{children:e,value:x}))}function iV({children:n,location:e}){return kG(zE(n),e)}function zE(n,e=[]){let t=[];return z.Children.forEach(n,(i,s)=>{if(!z.isValidElement(i))return;let r=[...e,s];if(i.type===z.Fragment){t.push.apply(t,zE(i.props.children,r));return}ts(i.type===FE,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ts(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=zE(i.props.children,r)),t.push(a)}),t}var ub="get",fb="application/x-www-form-urlencoded";function XA(n){return n!=null&&typeof n.tagName=="string"}function sV(n){return XA(n)&&n.tagName.toLowerCase()==="button"}function rV(n){return XA(n)&&n.tagName.toLowerCase()==="form"}function aV(n){return XA(n)&&n.tagName.toLowerCase()==="input"}function oV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function lV(n,e){return n.button===0&&(!e||e==="_self")&&!oV(n)}var $x=null;function cV(){if($x===null)try{new FormData(document.createElement("form"),0),$x=!1}catch{$x=!0}return $x}var uV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function I_(n){return n!=null&&!uV.has(n)?(lc(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fb}"`),null):n}function fV(n,e){let t,i,s,r,a;if(rV(n)){let l=n.getAttribute("action");i=l?Qc(l,e):null,t=n.getAttribute("method")||ub,s=I_(n.getAttribute("enctype"))||fb,r=new FormData(n)}else if(sV(n)||aV(n)&&(n.type==="submit"||n.type==="image")){let l=n.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||l.getAttribute("action");if(i=c?Qc(c,e):null,t=n.getAttribute("formmethod")||l.getAttribute("method")||ub,s=I_(n.getAttribute("formenctype"))||I_(l.getAttribute("enctype"))||fb,r=new FormData(l,n),!cV()){let{name:f,type:p,value:g}=n;if(p==="image"){let v=f?`${f}.`:"";r.append(`${v}x`,"0"),r.append(`${v}y`,"0")}else f&&r.append(f,g)}}else{if(XA(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ub,i=null,s=fb,a=n}return r&&s==="text/plain"&&(a=r,r=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:r,body:a}}function gC(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function hV(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dV(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function pV(n,e,t){let i=await Promise.all(n.map(async s=>{let r=e.routes[s.route.id];if(r){let a=await hV(r,t);return a.links?a.links():[]}return[]}));return yV(i.flat(1).filter(dV).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function tB(n,e,t,i,s,r){let a=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,l=(c,f)=>{var p;return t[f].pathname!==c.pathname||((p=t[f].route.path)==null?void 0:p.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return r==="assets"?e.filter((c,f)=>a(c,f)||l(c,f)):r==="data"?e.filter((c,f)=>{var g;let p=i.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(a(c,f)||l(c,f))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function mV(n,e,{includeHydrateFallback:t}={}){return gV(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function gV(n){return[...new Set(n)]}function vV(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function yV(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let r=JSON.stringify(vV(s));return t.has(r)||(t.add(r),i.push({key:r,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xV=new Set([100,101,204,205]);function bV(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Qc(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function uU(){let n=z.useContext(jm);return gC(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function AV(){let n=z.useContext(jA);return gC(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var vC=z.createContext(void 0);vC.displayName="FrameworkContext";function fU(){let n=z.useContext(vC);return gC(n,"You must render this element inside a <HydratedRouter> element"),n}function SV(n,e){let t=z.useContext(vC),[i,s]=z.useState(!1),[r,a]=z.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=e,v=z.useRef(null);z.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let M=S=>{S.forEach(w=>{a(w.isIntersecting)})},_=new IntersectionObserver(M,{threshold:.5});return v.current&&_.observe(v.current),()=>{_.disconnect()}}},[n]),z.useEffect(()=>{if(i){let M=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(M)}}},[i]);let x=()=>{s(!0)},A=()=>{s(!1),a(!1)};return t?n!=="intent"?[r,v,{}]:[r,v,{onFocus:A0(l,x),onBlur:A0(c,A),onMouseEnter:A0(f,x),onMouseLeave:A0(p,A),onTouchStart:A0(g,x)}]:[!1,v,{}]}function A0(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function _V({page:n,...e}){let{router:t}=uU(),i=z.useMemo(()=>$O(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?z.createElement(EV,{page:n,matches:i,...e}):null}function MV(n){let{manifest:e,routeModules:t}=fU(),[i,s]=z.useState([]);return z.useEffect(()=>{let r=!1;return pV(n,e,t).then(a=>{r||s(a)}),()=>{r=!0}},[n,e,t]),i}function EV({page:n,matches:e,...t}){let i=Td(),{manifest:s,routeModules:r}=fU(),{basename:a}=uU(),{loaderData:l,matches:c}=AV(),f=z.useMemo(()=>tB(n,e,c,s,i,"data"),[n,e,c,s,i]),p=z.useMemo(()=>tB(n,e,c,s,i,"assets"),[n,e,c,s,i]),g=z.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,M=!1;if(e.forEach(S=>{var C;let w=s.routes[S.route.id];!w||!w.hasLoader||(!f.some(B=>B.route.id===S.route.id)&&S.route.id in l&&((C=r[S.route.id])!=null&&C.shouldRevalidate)||w.hasClientLoader?M=!0:A.add(S.route.id))}),A.size===0)return[];let _=bV(n,a);return M&&A.size>0&&_.searchParams.set("_routes",e.filter(S=>A.has(S.route.id)).map(S=>S.route.id).join(",")),[_.pathname+_.search]},[a,l,i,s,f,e,n,r]),v=z.useMemo(()=>mV(p,s),[p,s]),x=MV(p);return z.createElement(z.Fragment,null,g.map(A=>z.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),v.map(A=>z.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),x.map(({key:A,link:M})=>z.createElement("link",{key:A,...M})))}function TV(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var hU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hU&&(window.__reactRouterVersion="7.6.2")}catch{}function CV({basename:n,children:e,window:t}){let i=z.useRef();i.current==null&&(i.current=dG({window:t,v5Compat:!0}));let s=i.current,[r,a]=z.useState({action:s.action,location:s.location}),l=z.useCallback(c=>{z.startTransition(()=>a(c))},[a]);return z.useLayoutEffect(()=>s.listen(l),[s,l]),z.createElement(nV,{basename:n,children:e,location:r.location,navigationType:r.action,navigator:s})}var dU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jv=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:r,replace:a,state:l,target:c,to:f,preventScrollReset:p,viewTransition:g,...v},x){let{basename:A}=z.useContext(fc),M=typeof f=="string"&&dU.test(f),_,S=!1;if(typeof f=="string"&&M&&(_=f,hU))try{let U=new URL(window.location.href),I=f.startsWith("//")?new URL(U.protocol+f):new URL(f),X=Qc(I.pathname,A);I.origin===U.origin&&X!=null?f=X+I.search+I.hash:S=!0}catch{lc(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=HG(f,{relative:s}),[C,B,N]=SV(i,v),L=DV(f,{replace:a,state:l,target:c,preventScrollReset:p,relative:s,viewTransition:g});function F(U){e&&e(U),U.defaultPrevented||L(U)}let P=z.createElement("a",{...v,...N,href:_||w,onClick:S||r?e:F,ref:TV(x,B),target:c,"data-discover":!M&&t==="render"?"true":void 0});return C&&!M?z.createElement(z.Fragment,null,P,z.createElement(_V,{page:w})):P});Jv.displayName="Link";var wV=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:r,to:a,viewTransition:l,children:c,...f},p){let g=Kv(a,{relative:f.relative}),v=Td(),x=z.useContext(jA),{navigator:A,basename:M}=z.useContext(fc),_=x!=null&&PV(g)&&l===!0,S=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,w=v.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(w=w.toLowerCase(),C=C?C.toLowerCase():null,S=S.toLowerCase()),C&&M&&(C=Qc(C,M)||C);const B=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let N=w===S||!s&&w.startsWith(S)&&w.charAt(B)==="/",L=C!=null&&(C===S||!s&&C.startsWith(S)&&C.charAt(S.length)==="/"),F={isActive:N,isPending:L,isTransitioning:_},P=N?e:void 0,U;typeof i=="function"?U=i(F):U=[i,N?"active":null,L?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let I=typeof r=="function"?r(F):r;return z.createElement(Jv,{...f,"aria-current":P,className:U,ref:p,style:I,to:a,viewTransition:l},typeof c=="function"?c(F):c)});wV.displayName="NavLink";var RV=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:r,method:a=ub,action:l,onSubmit:c,relative:f,preventScrollReset:p,viewTransition:g,...v},x)=>{let A=OV(),M=UV(l,{relative:f}),_=a.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&dU.test(l),w=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let B=C.nativeEvent.submitter,N=(B==null?void 0:B.getAttribute("formmethod"))||a;A(B||C.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:s,state:r,relative:f,preventScrollReset:p,viewTransition:g})};return z.createElement("form",{ref:x,method:_,action:M,onSubmit:i?c:w,...v,"data-discover":!S&&n==="render"?"true":void 0})});RV.displayName="Form";function BV(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pU(n){let e=z.useContext(jm);return ts(e,BV(n)),e}function DV(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:r,viewTransition:a}={}){let l=GG(),c=Td(),f=Kv(n,{relative:r});return z.useCallback(p=>{if(lV(p,e)){p.preventDefault();let g=t!==void 0?t:vv(c)===vv(f);l(n,{replace:g,state:i,preventScrollReset:s,relative:r,viewTransition:a})}},[c,l,f,t,i,e,n,s,r,a])}var NV=0,LV=()=>`__${String(++NV)}__`;function OV(){let{router:n}=pU("useSubmit"),{basename:e}=z.useContext(fc),t=QG();return z.useCallback(async(i,s={})=>{let{action:r,method:a,encType:l,formData:c,body:f}=fV(i,e);if(s.navigate===!1){let p=s.fetcherKey||LV();await n.fetch(p,t,s.action||r,{preventScrollReset:s.preventScrollReset,formData:c,body:f,formMethod:s.method||a,formEncType:s.encType||l,flushSync:s.flushSync})}else await n.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:c,body:f,formMethod:s.method||a,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function UV(n,{relative:e}={}){let{basename:t}=z.useContext(fc),i=z.useContext(iu);ts(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),r={...Kv(n||".",{relative:e})},a=Td();if(n==null){r.search=a.search;let l=new URLSearchParams(r.search),c=l.getAll("index");if(c.some(p=>p==="")){l.delete("index"),c.filter(g=>g).forEach(g=>l.append("index",g));let p=l.toString();r.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:Kc([t,r.pathname])),vv(r)}function PV(n,e={}){let t=z.useContext(rU);ts(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=pU("useViewTransitionState"),s=Kv(n,{relative:e.relative});if(!t.isTransitioning)return!1;let r=Qc(t.currentLocation.pathname,i)||t.currentLocation.pathname,a=Qc(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Nb(s.pathname,a)!=null||Nb(s.pathname,r)!=null}[...xV];const yC=z.createContext({});function xC(n){const e=z.useRef(null);return e.current===null&&(e.current=n()),e.current}const bC=typeof window<"u",mU=bC?z.useLayoutEffect:z.useEffect,YA=z.createContext(null),AC=z.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function gU(n){return typeof n=="object"&&n!==null}function SC(n){return gU(n)&&"offsetHeight"in n}class IV extends z.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=SC(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function FV({children:n,isPresent:e,anchorX:t}){const i=z.useId(),s=z.useRef(null),r=z.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=z.useContext(AC);return z.useInsertionEffect(()=>{const{width:l,height:c,top:f,left:p,right:g}=r.current;if(e||!s.current||!l||!c)return;const v=t==="left"?`left: ${p}`:`right: ${g}`;s.current.dataset.motionPopId=i;const x=document.createElement("style");return a&&(x.nonce=a),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${v}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.contains(x)&&document.head.removeChild(x)}},[e]),H.jsx(IV,{isPresent:e,childRef:s,sizeRef:r,children:z.cloneElement(n,{ref:s})})}const zV=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:a,anchorX:l})=>{const c=xC(HV),f=z.useId();let p=!0,g=z.useMemo(()=>(p=!1,{id:f,initial:e,isPresent:t,custom:s,onExitComplete:v=>{c.set(v,!0);for(const x of c.values())if(!x)return;i&&i()},register:v=>(c.set(v,!1),()=>c.delete(v))}),[t,c,i]);return r&&p&&(g={...g}),z.useMemo(()=>{c.forEach((v,x)=>c.set(x,!1))},[t]),z.useEffect(()=>{!t&&!c.size&&i&&i()},[t]),a==="popLayout"&&(n=H.jsx(FV,{isPresent:t,anchorX:l,children:n})),H.jsx(YA.Provider,{value:g,children:n})};function HV(){return new Map}function vU(n=!0){const e=z.useContext(YA);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,r=z.useId();z.useEffect(()=>{if(n)return s(r)},[n]);const a=z.useCallback(()=>n&&i&&i(r),[r,i,n]);return!t&&i?[!1,a]:[!0]}const e1=n=>n.key||"";function nB(n){const e=[];return z.Children.forEach(n,t=>{z.isValidElement(t)&&e.push(t)}),e}const GV=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:a=!1,anchorX:l="left"})=>{const[c,f]=vU(a),p=z.useMemo(()=>nB(n),[n]),g=a&&!c?[]:p.map(e1),v=z.useRef(!0),x=z.useRef(p),A=xC(()=>new Map),[M,_]=z.useState(p),[S,w]=z.useState(p);mU(()=>{v.current=!1,x.current=p;for(let N=0;N<S.length;N++){const L=e1(S[N]);g.includes(L)?A.delete(L):A.get(L)!==!0&&A.set(L,!1)}},[S,g.length,g.join("-")]);const C=[];if(p!==M){let N=[...p];for(let L=0;L<S.length;L++){const F=S[L],P=e1(F);g.includes(P)||(N.splice(L,0,F),C.push(F))}return r==="wait"&&C.length&&(N=C),w(nB(N)),_(p),null}const{forceRender:B}=z.useContext(yC);return H.jsx(H.Fragment,{children:S.map(N=>{const L=e1(N),F=a&&!c?!1:p===S||g.includes(L),P=()=>{if(A.has(L))A.set(L,!0);else return;let U=!0;A.forEach(I=>{I||(U=!1)}),U&&(B==null||B(),w(x.current),a&&(f==null||f()),i&&i())};return H.jsx(zV,{isPresent:F,initial:!v.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:r,onExitComplete:F?void 0:P,anchorX:l,children:N},L)})})},t1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],iB={value:null};function VV(n,e){let t=new Set,i=new Set,s=!1,r=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function f(g){a.has(g)&&(p.schedule(g),n()),c++,g(l)}const p={schedule:(g,v=!1,x=!1)=>{const M=x&&s?t:i;return v&&a.add(g),M.has(g)||M.add(g),g},cancel:g=>{i.delete(g),a.delete(g)},process:g=>{if(l=g,s){r=!0;return}s=!0,[t,i]=[i,t],t.forEach(f),e&&iB.value&&iB.value.frameloop[e].push(c),c=0,t.clear(),s=!1,r&&(r=!1,p.process(g))}};return p}const $c={},kV=40;function yU(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,a=t1.reduce((C,B)=>(C[B]=VV(r,e?B:void 0),C),{}),{setup:l,read:c,resolveKeyframes:f,preUpdate:p,update:g,preRender:v,render:x,postRender:A}=a,M=()=>{const C=$c.useManualTiming?s.timestamp:performance.now();t=!1,$c.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(C-s.timestamp,kV),1)),s.timestamp=C,s.isProcessing=!0,l.process(s),c.process(s),f.process(s),p.process(s),g.process(s),v.process(s),x.process(s),A.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(M))},_=()=>{t=!0,i=!0,s.isProcessing||n(M)};return{schedule:t1.reduce((C,B)=>{const N=a[B];return C[B]=(L,F=!1,P=!1)=>(t||_(),N.schedule(L,F,P)),C},{}),cancel:C=>{for(let B=0;B<t1.length;B++)a[t1[B]].cancel(C)},state:s,steps:a}}const So=n=>n,{schedule:ns,cancel:mf,state:cr,steps:F_}=yU(typeof requestAnimationFrame<"u"?requestAnimationFrame:So,!0),xU=z.createContext({strict:!1}),sB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Mm={};for(const n in sB)Mm[n]={isEnabled:e=>sB[n].some(t=>!!e[t])};function jV(n){for(const e in n)Mm[e]={...Mm[e],...n[e]}}const XV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lb(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||XV.has(n)}let bU=n=>!Lb(n);function YV(n){n&&(bU=e=>e.startsWith("on")?!Lb(e):n(e))}try{YV(require("@emotion/is-prop-valid").default)}catch{}function WV(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(bU(s)||t===!0&&Lb(s)||!e&&!Lb(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}function qV(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const WA=z.createContext({});function qA(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function yv(n){return typeof n=="string"||Array.isArray(n)}const _C=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],MC=["initial",..._C];function KA(n){return qA(n.animate)||MC.some(e=>yv(n[e]))}function AU(n){return!!(KA(n)||n.variants)}function KV(n,e){if(KA(n)){const{initial:t,animate:i}=n;return{initial:t===!1||yv(t)?t:void 0,animate:yv(i)?i:void 0}}return n.inherit!==!1?e:{}}function JV(n){const{initial:e,animate:t}=KV(n,z.useContext(WA));return z.useMemo(()=>({initial:e,animate:t}),[rB(e),rB(t)])}function rB(n){return Array.isArray(n)?n.join(" "):n}const ZV=Symbol.for("motionComponentSymbol");function im(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function QV(n,e,t){return z.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):im(t)&&(t.current=i))},[e])}const EC=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$V="framerAppearId",SU="data-"+EC($V),_U=z.createContext({}),{schedule:TC}=yU(queueMicrotask,!1);function e8(n,e,t,i,s){var M,_;const{visualElement:r}=z.useContext(WA),a=z.useContext(xU),l=z.useContext(YA),c=z.useContext(AC).reducedMotion,f=z.useRef(null);i=i||a.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:r,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const p=f.current,g=z.useContext(_U);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&t8(f.current,t,s,g);const v=z.useRef(!1);z.useInsertionEffect(()=>{p&&v.current&&p.update(t,l)});const x=t[SU],A=z.useRef(!!x&&!((M=window.MotionHandoffIsComplete)!=null&&M.call(window,x))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,x)));return mU(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),TC.render(p.render),A.current&&p.animationState&&p.animationState.animateChanges())}),z.useEffect(()=>{p&&(!A.current&&p.animationState&&p.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,x)}),A.current=!1))}),p}function t8(n,e,t,i){const{layoutId:s,layout:r,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:f,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:MU(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||l&&im(l),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:p,layoutScroll:c,layoutRoot:f})}function MU(n){if(n)return n.options.allowProjection!==!1?n.projection:MU(n.parent)}let CC=()=>{};function n8({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:s}){n&&jV(n);function r(l,c){let f;const p={...z.useContext(AC),...l,layoutId:i8(l)},{isStatic:g}=p,v=JV(l),x=i(l,g);if(!g&&bC){s8();const A=r8(p);f=A.MeasureLayout,v.visualElement=e8(s,x,p,e,A.ProjectionNode)}return H.jsxs(WA.Provider,{value:v,children:[f&&v.visualElement?H.jsx(f,{visualElement:v.visualElement,...p}):null,t(s,l,QV(x,v.visualElement,c),x,g,v.visualElement)]})}r.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const a=z.forwardRef(r);return a[ZV]=s,a}function i8({layoutId:n}){const e=z.useContext(yC).id;return e&&n!==void 0?e+"-"+n:n}function s8(n,e){z.useContext(xU).strict}function r8(n){const{drag:e,layout:t}=Mm;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const EU=n=>e=>typeof e=="string"&&e.startsWith(n),wC=EU("--"),a8=EU("var(--"),RC=n=>a8(n)?o8.test(n.split("/*")[0].trim()):!1,o8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xv={};function l8(n){for(const e in n)xv[e]=n[e],wC(e)&&(xv[e].isCSSVariable=!0)}const Xm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ym=new Set(Xm);function TU(n,{layout:e,layoutId:t}){return Ym.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!xv[n]||n==="opacity")}const CU=(n,e)=>e&&typeof n=="number"?e.transform(n):n,eu=(n,e,t)=>t>e?e:t<n?n:t,Wm={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},bv={...Wm,transform:n=>eu(0,1,n)},n1={...Wm,default:1},aB={...Wm,transform:Math.round},Zv=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),lf=Zv("deg"),ec=Zv("%"),an=Zv("px"),c8=Zv("vh"),u8=Zv("vw"),oB={...ec,parse:n=>ec.parse(n)/100,transform:n=>ec.transform(n*100)},f8={rotate:lf,rotateX:lf,rotateY:lf,rotateZ:lf,scale:n1,scaleX:n1,scaleY:n1,scaleZ:n1,skew:lf,skewX:lf,skewY:lf,distance:an,translateX:an,translateY:an,translateZ:an,x:an,y:an,z:an,perspective:an,transformPerspective:an,opacity:bv,originX:oB,originY:oB,originZ:an},BC={borderWidth:an,borderTopWidth:an,borderRightWidth:an,borderBottomWidth:an,borderLeftWidth:an,borderRadius:an,radius:an,borderTopLeftRadius:an,borderTopRightRadius:an,borderBottomRightRadius:an,borderBottomLeftRadius:an,width:an,maxWidth:an,height:an,maxHeight:an,top:an,right:an,bottom:an,left:an,padding:an,paddingTop:an,paddingRight:an,paddingBottom:an,paddingLeft:an,margin:an,marginTop:an,marginRight:an,marginBottom:an,marginLeft:an,backgroundPositionX:an,backgroundPositionY:an,...f8,zIndex:aB,fillOpacity:bv,strokeOpacity:bv,numOctaves:aB},h8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},d8=Xm.length;function p8(n,e,t){let i="",s=!0;for(let r=0;r<d8;r++){const a=Xm[r],l=n[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||t){const f=CU(l,BC[a]);if(!c){s=!1;const p=h8[a]||a;i+=`${p}(${f}) `}t&&(e[a]=f)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function DC(n,e,t){const{style:i,vars:s,transformOrigin:r}=n;let a=!1,l=!1;for(const c in e){const f=e[c];if(Ym.has(c)){a=!0;continue}else if(wC(c)){s[c]=f;continue}else{const p=CU(f,BC[c]);c.startsWith("origin")?(l=!0,r[c]=p):i[c]=p}}if(e.transform||(a||t?i.transform=p8(e,n.transform,t):i.transform&&(i.transform="none")),l){const{originX:c="50%",originY:f="50%",originZ:p=0}=r;i.transformOrigin=`${c} ${f} ${p}`}}const NC=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Dr=n=>!!(n&&n.getVelocity);function wU(n,e,t){for(const i in e)!Dr(e[i])&&!TU(i,t)&&(n[i]=e[i])}function m8({transformTemplate:n},e){return z.useMemo(()=>{const t=NC();return DC(t,e,n),Object.assign({},t.vars,t.style)},[e])}function g8(n,e){const t=n.style||{},i={};return wU(i,t,n),Object.assign(i,m8(n,e)),i}function v8(n,e){const t={},i=g8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const y8={offset:"stroke-dashoffset",array:"stroke-dasharray"},x8={offset:"strokeDashoffset",array:"strokeDasharray"};function b8(n,e,t=1,i=0,s=!0){n.pathLength=1;const r=s?y8:x8;n[r.offset]=an.transform(-i);const a=an.transform(e),l=an.transform(t);n[r.array]=`${a} ${l}`}function RU(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:a=0,...l},c,f,p){if(DC(n,l,f),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:v}=n;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),i!==void 0&&(g.scale=i),s!==void 0&&b8(g,s,r,a,!1)}const BU=()=>({...NC(),attrs:{}}),DU=n=>typeof n=="string"&&n.toLowerCase()==="svg";function A8(n,e,t,i){const s=z.useMemo(()=>{const r=BU();return RU(r,e,DU(i),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};wU(r,n.style,n),s.style={...r,...s.style}}return s}const S8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function LC(n){return typeof n!="string"||n.includes("-")?!1:!!(S8.indexOf(n)>-1||/[A-Z]/u.test(n))}function _8(n=!1){return(t,i,s,{latestValues:r},a)=>{const c=(LC(t)?A8:v8)(i,r,a,t),f=WV(i,typeof t=="string",n),p=t!==z.Fragment?{...f,...c,ref:s}:{},{children:g}=i,v=z.useMemo(()=>Dr(g)?g.get():g,[g]);return z.createElement(t,{...p,children:v})}}function lB(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function OC(n,e,t,i){if(typeof e=="function"){const[s,r]=lB(i);e=e(t!==void 0?t:n.custom,s,r)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,r]=lB(i);e=e(t!==void 0?t:n.custom,s,r)}return e}function hb(n){return Dr(n)?n.get():n}function M8({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:E8(t,i,s,n),renderState:e()}}const NU=n=>(e,t)=>{const i=z.useContext(WA),s=z.useContext(YA),r=()=>M8(n,e,i,s);return t?r():xC(r)};function E8(n,e,t,i){const s={},r=i(n,{});for(const v in r)s[v]=hb(r[v]);let{initial:a,animate:l}=n;const c=KA(n),f=AU(n);e&&f&&!c&&n.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||a===!1;const g=p?l:a;if(g&&typeof g!="boolean"&&!qA(g)){const v=Array.isArray(g)?g:[g];for(let x=0;x<v.length;x++){const A=OC(n,v[x]);if(A){const{transitionEnd:M,transition:_,...S}=A;for(const w in S){let C=S[w];if(Array.isArray(C)){const B=p?C.length-1:0;C=C[B]}C!==null&&(s[w]=C)}for(const w in M)s[w]=M[w]}}}return s}function UC(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(Dr(i[a])||e.style&&Dr(e.style[a])||TU(a,n)||((r=t==null?void 0:t.getValue(a))==null?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const T8={useVisualState:NU({scrapeMotionValuesFromProps:UC,createRenderState:NC})};function LU(n,e,t){const i=UC(n,e,t);for(const s in n)if(Dr(n[s])||Dr(e[s])){const r=Xm.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}const C8={useVisualState:NU({scrapeMotionValuesFromProps:LU,createRenderState:BU})};function w8(n,e){return function(i,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...LC(i)?C8:T8,preloadedFeatures:n,useRender:_8(s),createVisualElement:e,Component:i};return n8(a)}}function Av(n,e,t){const i=n.getProps();return OC(i,e,t!==void 0?t:i.custom,n)}const HE=n=>Array.isArray(n);let db;function R8(){db=void 0}const Sa={now:()=>(db===void 0&&Sa.set(cr.isProcessing||$c.useManualTiming?cr.timestamp:performance.now()),db),set:n=>{db=n,queueMicrotask(R8)}};function PC(n,e){n.indexOf(e)===-1&&n.push(e)}function IC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let FC=class{constructor(){this.subscriptions=[]}add(e){return PC(this.subscriptions,e),()=>IC(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}};function OU(n,e){return e?n*(1e3/e):0}const cB=30,B8=n=>!isNaN(parseFloat(n));let D8=class{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{var a,l;const r=Sa.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();s&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Sa.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=B8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new FC);const i=this.events[e].add(t);return e==="change"?()=>{i(),ns.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Sa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cB)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,cB);return OU(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function Em(n,e){return new D8(n,e)}function N8(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Em(t))}function L8(n){return HE(n)?n[n.length-1]||0:n}function O8(n,e){const t=Av(n,e);let{transitionEnd:i={},transition:s={},...r}=t||{};r={...r,...i};for(const a in r){const l=L8(r[a]);N8(n,a,l)}}function U8(n){return!!(Dr(n)&&n.add)}function GE(n,e){const t=n.getValue("willChange");if(U8(t))return t.add(e);if(!t&&$c.WillChange){const i=new $c.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function UU(n){return n.props[SU]}const P8=n=>n!==null;function I8(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(P8),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[r]}const F8={type:"spring",stiffness:500,damping:25,restSpeed:10},z8=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),H8={type:"keyframes",duration:.8},G8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},V8=(n,{keyframes:e})=>e.length>2?H8:Ym.has(n)?n.startsWith("scale")?z8(e[1]):F8:G8;function k8({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:l,from:c,elapsed:f,...p}){return!!Object.keys(p).length}function zC(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const tc=n=>n*1e3,nc=n=>n/1e3,W0=n=>Math.round(n*1e5)/1e5,HC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function j8(n){return n==null}const X8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,GC=(n,e)=>t=>!!(typeof t=="string"&&X8.test(t)&&t.startsWith(n)||e&&!j8(t)&&Object.prototype.hasOwnProperty.call(t,e)),PU=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,r,a,l]=i.match(HC);return{[n]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Y8=n=>eu(0,255,n),z_={...Wm,transform:n=>Math.round(Y8(n))},Kh={test:GC("rgb","red"),parse:PU("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+z_.transform(n)+", "+z_.transform(e)+", "+z_.transform(t)+", "+W0(bv.transform(i))+")"};function W8(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const VE={test:GC("#"),parse:W8,transform:Kh.transform},sm={test:GC("hsl","hue"),parse:PU("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+ec.transform(W0(e))+", "+ec.transform(W0(t))+", "+W0(bv.transform(i))+")"},Rr={test:n=>Kh.test(n)||VE.test(n)||sm.test(n),parse:n=>Kh.test(n)?Kh.parse(n):sm.test(n)?sm.parse(n):VE.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Kh.transform(n):sm.transform(n)},q8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function K8(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(HC))==null?void 0:e.length)||0)+(((t=n.match(q8))==null?void 0:t.length)||0)>0}const IU="number",FU="color",J8="var",Z8="var(",uB="${}",Q8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sv(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let r=0;const l=e.replace(Q8,c=>(Rr.test(c)?(i.color.push(r),s.push(FU),t.push(Rr.parse(c))):c.startsWith(Z8)?(i.var.push(r),s.push(J8),t.push(c)):(i.number.push(r),s.push(IU),t.push(parseFloat(c))),++r,uB)).split(uB);return{values:t,split:l,indexes:i,types:s}}function zU(n){return Sv(n).values}function HU(n){const{split:e,types:t}=Sv(n),i=e.length;return s=>{let r="";for(let a=0;a<i;a++)if(r+=e[a],s[a]!==void 0){const l=t[a];l===IU?r+=W0(s[a]):l===FU?r+=Rr.transform(s[a]):r+=s[a]}return r}}const $8=n=>typeof n=="number"?0:n;function e6(n){const e=zU(n);return HU(n)(e.map($8))}const gf={test:K8,parse:zU,createTransformer:HU,getAnimatableNone:e6};function H_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function t6({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,r=0,a=0;if(!e)s=r=a=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;s=H_(c,l,n+1/3),r=H_(c,l,n),a=H_(c,l,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:i}}function Ob(n,e){return t=>t>0?e:n}const Qi=(n,e,t)=>n+(e-n)*t,G_=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},n6=[VE,Kh,sm],i6=n=>n6.find(e=>e.test(n));function fB(n){const e=i6(n);if(!e)return!1;let t=e.parse(n);return e===sm&&(t=t6(t)),t}const hB=(n,e)=>{const t=fB(n),i=fB(e);if(!t||!i)return Ob(n,e);const s={...t};return r=>(s.red=G_(t.red,i.red,r),s.green=G_(t.green,i.green,r),s.blue=G_(t.blue,i.blue,r),s.alpha=Qi(t.alpha,i.alpha,r),Kh.transform(s))},kE=new Set(["none","hidden"]);function s6(n,e){return kE.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}const r6=(n,e)=>t=>e(n(t)),Qv=(...n)=>n.reduce(r6);function a6(n,e){return t=>Qi(n,e,t)}function VC(n){return typeof n=="number"?a6:typeof n=="string"?RC(n)?Ob:Rr.test(n)?hB:c6:Array.isArray(n)?GU:typeof n=="object"?Rr.test(n)?hB:o6:Ob}function GU(n,e){const t=[...n],i=t.length,s=n.map((r,a)=>VC(r)(r,e[a]));return r=>{for(let a=0;a<i;a++)t[a]=s[a](r);return t}}function o6(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=VC(n[s])(n[s],e[s]));return s=>{for(const r in i)t[r]=i[r](s);return t}}function l6(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],a=n.indexes[r][i[r]],l=n.values[a]??0;t[s]=l,i[r]++}return t}const c6=(n,e)=>{const t=gf.createTransformer(e),i=Sv(n),s=Sv(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?kE.has(n)&&!s.values.length||kE.has(e)&&!i.values.length?s6(n,e):Qv(GU(l6(i,s),s.values),t):Ob(n,e)};function VU(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Qi(n,e,t):VC(n)(n,e)}const u6=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>ns.update(e,t),stop:()=>mf(e),now:()=>cr.isProcessing?cr.timestamp:Sa.now()}},kU=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let r=0;r<s;r++)i+=n(r/(s-1))+", ";return`linear(${i.substring(0,i.length-2)})`},Ub=2e4;function kC(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Ub;)e+=t,i=n.next(e);return e>=Ub?1/0:e}function f6(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(kC(i),Ub);return{type:"keyframes",ease:r=>i.next(s*r).value/e,duration:nc(s)}}const h6=5;function jU(n,e,t){const i=Math.max(e-h6,0);return OU(t-n(i),e-i)}const os={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dB=.001;function d6({duration:n=os.duration,bounce:e=os.bounce,velocity:t=os.velocity,mass:i=os.mass}){let s,r,a=1-e;a=eu(os.minDamping,os.maxDamping,a),n=eu(os.minDuration,os.maxDuration,nc(n)),a<1?(s=f=>{const p=f*a,g=p*n,v=p-t,x=jE(f,a),A=Math.exp(-g);return dB-v/x*A},r=f=>{const g=f*a*n,v=g*t+t,x=Math.pow(a,2)*Math.pow(f,2)*n,A=Math.exp(-g),M=jE(Math.pow(f,2),a);return(-s(f)+dB>0?-1:1)*((v-x)*A)/M}):(s=f=>{const p=Math.exp(-f*n),g=(f-t)*n+1;return-.001+p*g},r=f=>{const p=Math.exp(-f*n),g=(t-f)*(n*n);return p*g});const l=5/n,c=m6(s,r,l);if(n=tc(n),isNaN(c))return{stiffness:os.stiffness,damping:os.damping,duration:n};{const f=Math.pow(c,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:n}}}const p6=12;function m6(n,e,t){let i=t;for(let s=1;s<p6;s++)i=i-n(i)/e(i);return i}function jE(n,e){return n*Math.sqrt(1-e*e)}const g6=["duration","bounce"],v6=["stiffness","damping","mass"];function pB(n,e){return e.some(t=>n[t]!==void 0)}function y6(n){let e={velocity:os.velocity,stiffness:os.stiffness,damping:os.damping,mass:os.mass,isResolvedFromDuration:!1,...n};if(!pB(n,v6)&&pB(n,g6))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,r=2*eu(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:os.mass,stiffness:s,damping:r}}else{const t=d6(n);e={...e,...t,mass:os.mass},e.isResolvedFromDuration=!0}return e}function Pb(n=os.visualDuration,e=os.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const r=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],l={done:!1,value:r},{stiffness:c,damping:f,mass:p,duration:g,velocity:v,isResolvedFromDuration:x}=y6({...t,velocity:-nc(t.velocity||0)}),A=v||0,M=f/(2*Math.sqrt(c*p)),_=a-r,S=nc(Math.sqrt(c/p)),w=Math.abs(_)<5;i||(i=w?os.restSpeed.granular:os.restSpeed.default),s||(s=w?os.restDelta.granular:os.restDelta.default);let C;if(M<1){const N=jE(S,M);C=L=>{const F=Math.exp(-M*S*L);return a-F*((A+M*S*_)/N*Math.sin(N*L)+_*Math.cos(N*L))}}else if(M===1)C=N=>a-Math.exp(-S*N)*(_+(A+S*_)*N);else{const N=S*Math.sqrt(M*M-1);C=L=>{const F=Math.exp(-M*S*L),P=Math.min(N*L,300);return a-F*((A+M*S*_)*Math.sinh(P)+N*_*Math.cosh(P))/N}}const B={calculatedDuration:x&&g||null,next:N=>{const L=C(N);if(x)l.done=N>=g;else{let F=N===0?A:0;M<1&&(F=N===0?tc(A):jU(C,N,L));const P=Math.abs(F)<=i,U=Math.abs(a-L)<=s;l.done=P&&U}return l.value=l.done?a:L,l},toString:()=>{const N=Math.min(kC(B),Ub),L=kU(F=>B.next(N*F).value,N,30);return N+"ms "+L},toTransition:()=>{}};return B}Pb.applyToOptions=n=>{const e=f6(n,100,Pb);return n.ease=e.ease,n.duration=tc(e.duration),n.type="keyframes",n};function XE({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:l,max:c,restDelta:f=.5,restSpeed:p}){const g=n[0],v={done:!1,value:g},x=P=>l!==void 0&&P<l||c!==void 0&&P>c,A=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let M=t*e;const _=g+M,S=a===void 0?_:a(_);S!==_&&(M=S-g);const w=P=>-M*Math.exp(-P/i),C=P=>S+w(P),B=P=>{const U=w(P),I=C(P);v.done=Math.abs(U)<=f,v.value=v.done?S:I};let N,L;const F=P=>{x(v.value)&&(N=P,L=Pb({keyframes:[v.value,A(v.value)],velocity:jU(C,P,v.value),damping:s,stiffness:r,restDelta:f,restSpeed:p}))};return F(0),{calculatedDuration:null,next:P=>{let U=!1;return!L&&N===void 0&&(U=!0,B(P),F(P)),N!==void 0&&P>=N?L.next(P-N):(!U&&B(P),v)}}}const _v=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};function x6(n,e,t){const i=[],s=t||$c.mix||VU,r=n.length-1;for(let a=0;a<r;a++){let l=s(n[a],n[a+1]);if(e){const c=Array.isArray(e)?e[a]||So:e;l=Qv(c,l)}i.push(l)}return i}function b6(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const r=n.length;if(CC(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const l=x6(e,i,s),c=l.length,f=p=>{if(a&&p<n[0])return e[0];let g=0;if(c>1)for(;g<n.length-2&&!(p<n[g+1]);g++);const v=_v(n[g],n[g+1],p);return l[g](v)};return t?p=>f(eu(n[0],n[r-1],p)):f}function A6(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=_v(0,e,i);n.push(Qi(t,1,s))}}function S6(n){const e=[0];return A6(e,n.length-1),e}function _6(n,e){return n.map(t=>t*e)}const XU=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,M6=1e-7,E6=12;function T6(n,e,t,i,s){let r,a,l=0;do a=e+(t-e)/2,r=XU(a,i,s)-n,r>0?t=a:e=a;while(Math.abs(r)>M6&&++l<E6);return a}function $v(n,e,t,i){if(n===e&&t===i)return So;const s=r=>T6(r,0,1,n,t);return r=>r===0||r===1?r:XU(s(r),e,i)}const C6=$v(.42,0,1,1),w6=$v(0,0,.58,1),YU=$v(.42,0,.58,1),R6=n=>Array.isArray(n)&&typeof n[0]!="number",WU=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,qU=n=>e=>1-n(1-e),KU=$v(.33,1.53,.69,.99),jC=qU(KU),JU=WU(jC),ZU=n=>(n*=2)<1?.5*jC(n):.5*(2-Math.pow(2,-10*(n-1))),XC=n=>1-Math.sin(Math.acos(n)),QU=qU(XC),$U=WU(XC),eP=n=>Array.isArray(n)&&typeof n[0]=="number",B6={linear:So,easeIn:C6,easeInOut:YU,easeOut:w6,circIn:XC,circInOut:$U,circOut:QU,backIn:jC,backInOut:JU,backOut:KU,anticipate:ZU},D6=n=>typeof n=="string",mB=n=>{if(eP(n)){CC(n.length===4);const[e,t,i,s]=n;return $v(e,t,i,s)}else if(D6(n))return B6[n];return n};function N6(n,e){return n.map(()=>e||YU).splice(0,n.length-1)}function q0({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=R6(i)?i.map(mB):mB(i),r={done:!1,value:e[0]},a=_6(t&&t.length===e.length?t:S6(e),n),l=b6(a,e,{ease:Array.isArray(s)?s:N6(e,s)});return{calculatedDuration:n,next:c=>(r.value=l(c),r.done=c>=n,r)}}const L6=n=>n!==null;function YC(n,{repeat:e,repeatType:t="loop"},i,s=1){const r=n.filter(L6),l=s<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!l||i===void 0?r[l]:i}const O6={decay:XE,inertia:XE,tween:q0,keyframes:q0,spring:Pb};function tP(n){typeof n.type=="string"&&(n.type=O6[n.type])}let WC=class{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}};const U6=n=>n/100;let qC=class extends WC{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:t}=this.options;t&&t.updatedAt!==Sa.now()&&this.tick(Sa.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;tP(e);const{type:t=q0,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=e;let{keyframes:l}=e;const c=t||q0;c!==q0&&typeof l[0]!="number"&&(this.mixKeyframes=Qv(U6,VU(l[0],l[1])),l=[0,100]);const f=c({...e,keyframes:l});r==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=kC(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:p,repeat:g,repeatType:v,repeatDelay:x,type:A,onUpdate:M,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const S=this.currentTime-f*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?S<0:S>s;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let C=this.currentTime,B=i;if(g){const P=Math.min(this.currentTime,s)/l;let U=Math.floor(P),I=P%1;!I&&P>=1&&(I=1),I===1&&U--,U=Math.min(U,g+1),!!(U%2)&&(v==="reverse"?(I=1-I,x&&(I-=x/l)):v==="mirror"&&(B=a)),C=eu(0,1,I)*l}const N=w?{done:!1,value:p[0]}:B.next(C);r&&(N.value=r(N.value));let{done:L}=N;!w&&c!==null&&(L=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return F&&A!==XE&&(N.value=YC(p,this.options,_,this.speed)),M&&M(N.value),F&&this.finish(),N}then(e,t){return this.finished.then(e,t)}get duration(){return nc(this.calculatedDuration)}get time(){return nc(this.currentTime)}set time(e){var t;e=tc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Sa.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=nc(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:e=u6,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Sa.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}};function P6(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Jh=n=>n*180/Math.PI,YE=n=>{const e=Jh(Math.atan2(n[1],n[0]));return WE(e)},I6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:YE,rotateZ:YE,skewX:n=>Jh(Math.atan(n[1])),skewY:n=>Jh(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},WE=n=>(n=n%360,n<0&&(n+=360),n),gB=YE,vB=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),yB=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),F6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vB,scaleY:yB,scale:n=>(vB(n)+yB(n))/2,rotateX:n=>WE(Jh(Math.atan2(n[6],n[5]))),rotateY:n=>WE(Jh(Math.atan2(-n[2],n[0]))),rotateZ:gB,rotate:gB,skewX:n=>Jh(Math.atan(n[4])),skewY:n=>Jh(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function qE(n){return n.includes("scale")?1:0}function KE(n,e){if(!n||n==="none")return qE(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=F6,s=t;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=I6,s=l}if(!s)return qE(e);const r=i[e],a=s[1].split(",").map(H6);return typeof r=="function"?r(a):a[r]}const z6=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return KE(t,e)};function H6(n){return parseFloat(n.trim())}const xB=n=>n===Wm||n===an,G6=new Set(["x","y","z"]),V6=Xm.filter(n=>!G6.has(n));function k6(n){const e=[];return V6.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const ld={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>KE(e,"x"),y:(n,{transform:e})=>KE(e,"y")};ld.translateX=ld.x;ld.translateY=ld.y;const cd=new Set;let JE=!1,ZE=!1,QE=!1;function nP(){if(ZE){const n=Array.from(cd).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=k6(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([r,a])=>{var l;(l=i.getValue(r))==null||l.set(a)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}ZE=!1,JE=!1,cd.forEach(n=>n.complete(QE)),cd.clear()}function iP(){cd.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(ZE=!0)})}function j6(){QE=!0,iP(),nP(),QE=!1}let KC=class{constructor(e,t,i,s,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(cd.add(this),JE||(JE=!0,ns.read(iP),ns.resolveKeyframes(nP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const r=s==null?void 0:s.get(),a=e[e.length-1];if(r!==void 0)e[0]=r;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&r===void 0&&s.set(e[0])}P6(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),cd.delete(this)}cancel(){this.state==="scheduled"&&(cd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}};const X6=n=>n.startsWith("--");function Y6(n,e,t){X6(e)?n.style.setProperty(e,t):n.style[e]=t}function JC(n){let e;return()=>(e===void 0&&(e=n()),e)}const W6=JC(()=>window.ScrollTimeline!==void 0),q6={};function K6(n,e){const t=JC(n);return()=>q6[e]??t()}const sP=K6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),V0=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,bB={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:V0([0,.65,.55,1]),circOut:V0([.55,0,1,.45]),backIn:V0([.31,.01,.66,-.59]),backOut:V0([.33,1.53,.69,.99])};function rP(n,e){if(n)return typeof n=="function"?sP()?kU(n,e):"ease-out":eP(n)?V0(n):Array.isArray(n)?n.map(t=>rP(t,e)||bB.easeOut):bB[n]}function J6(n,e,t,{delay:i=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:l="easeOut",times:c}={},f=void 0){const p={[e]:t};c&&(p.offset=c);const g=rP(l,s);Array.isArray(g)&&(p.easing=g);const v={delay:i,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),n.animate(p,v)}function aP(n){return typeof n=="function"&&"applyToOptions"in n}function Z6({type:n,...e}){return aP(n)&&sP()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}let Q6=class extends WC{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=e,CC(typeof e.type!="string");const f=Z6(e);this.animation=J6(t,i,s,f,r),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const p=YC(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(p):Y6(t,i,p),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return nc(Number(e))}get time(){return nc(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=tc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&W6()?(this.animation.timeline=e,So):t(this)}};const oP={anticipate:ZU,backInOut:JU,circInOut:$U};function $6(n){return n in oP}function e9(n){typeof n.ease=="string"&&$6(n.ease)&&(n.ease=oP[n.ease])}const AB=10;let t9=class extends Q6{constructor(e){e9(e),tP(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:r,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new qC({...a,autoplay:!1}),c=tc(this.finishedTime??this.time);t.setWithVelocity(l.sample(c-AB).value,l.sample(c).value,AB),l.stop()}};const SB=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(gf.test(n)||n==="0")&&!n.startsWith("url("));function n9(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function i9(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=n[n.length-1],a=SB(s,e),l=SB(r,e);return!a||!l?!1:n9(n)||(t==="spring"||aP(t))&&i}const s9=new Set(["opacity","clipPath","filter","transform"]),r9=JC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function a9(n){var f;const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:r,type:a}=n;if(!SC((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return r9()&&t&&s9.has(t)&&(t!=="transform"||!c)&&!l&&!i&&s!=="mirror"&&r!==0&&a!=="inertia"}const o9=40;let l9=class extends WC{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",keyframes:l,name:c,motionValue:f,element:p,...g}){var A;super(),this.stop=()=>{var M,_;this._animation&&(this._animation.stop(),(M=this.stopTimeline)==null||M.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=Sa.now();const v={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:r,repeatType:a,name:c,motionValue:f,element:p,...g},x=(p==null?void 0:p.KeyframeResolver)||KC;this.keyframeResolver=new x(l,(M,_,S)=>this.onKeyframesResolved(M,_,v,!S),c,f,p),(A=this.keyframeResolver)==null||A.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:r,type:a,velocity:l,delay:c,isHandoff:f,onUpdate:p}=i;this.resolvedAt=Sa.now(),i9(e,r,a,l)||(($c.instantAnimations||!c)&&(p==null||p(YC(e,i,t))),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>o9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},x=!f&&a9(v)?new t9({...v,element:v.motionValue.owner.current}):new qC(v);x.finished.then(()=>this.notifyFinished()).catch(So),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),j6()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}};const ZC=(n,e,t,i={},s,r)=>a=>{const l=zC(i,n)||{},c=l.delay||i.delay||0;let{elapsed:f=0}=i;f=f-tc(c);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:n,motionValue:e,element:r?void 0:s};k8(l)||Object.assign(p,V8(n,p)),p.duration&&(p.duration=tc(p.duration)),p.repeatDelay&&(p.repeatDelay=tc(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),($c.instantAnimations||$c.skipAnimations)&&(g=!0,p.duration=0,p.delay=0),p.allowFlatten=!l.type&&!l.ease,g&&!r&&e.get()!==void 0){const v=I8(p.keyframes,l);if(v!==void 0){ns.update(()=>{p.onUpdate(v),p.onComplete()});return}}return l.isSync?new qC(p):new l9(p)},lP=new Set(["width","height","top","left","right","bottom",...Xm]);function c9({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function cP(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(r=i);const c=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const p in l){const g=n.getValue(p,n.latestValues[p]??null),v=l[p];if(v===void 0||f&&c9(f,p))continue;const x={delay:t,...zC(r||{},p)},A=g.get();if(A!==void 0&&!g.isAnimating&&!Array.isArray(v)&&v===A&&!x.velocity)continue;let M=!1;if(window.MotionHandoffAnimation){const S=UU(n);if(S){const w=window.MotionHandoffAnimation(S,p,ns);w!==null&&(x.startTime=w,M=!0)}}GE(n,p),g.start(ZC(p,g,v,n.shouldReduceMotion&&lP.has(p)?{type:!1}:x,n,M));const _=g.animation;_&&c.push(_)}return a&&Promise.all(c).then(()=>{ns.update(()=>{a&&O8(n,a)})}),c}function $E(n,e,t={}){var c;const i=Av(n,e,t.type==="exit"?(c=n.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const r=i?()=>Promise.all(cP(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:v}=s;return u9(n,e,p+f,g,v,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[f,p]=l==="beforeChildren"?[r,a]:[a,r];return f().then(()=>p())}else return Promise.all([r(),a(t.delay)])}function u9(n,e,t=0,i=0,s=1,r){const a=[],l=(n.variantChildren.size-1)*i,c=s===1?(f=0)=>f*i:(f=0)=>l-f*i;return Array.from(n.variantChildren).sort(f9).forEach((f,p)=>{f.notify("AnimationStart",e),a.push($E(f,e,{...r,delay:t+c(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function f9(n,e){return n.sortNodePosition(e)}function h9(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>$E(n,r,t));i=Promise.all(s)}else if(typeof e=="string")i=$E(n,e,t);else{const s=typeof e=="function"?Av(n,e,t.custom):e;i=Promise.all(cP(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function uP(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const d9=MC.length;function fP(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?fP(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<d9;t++){const i=MC[t],s=n.props[i];(yv(s)||s===!1)&&(e[i]=s)}return e}const p9=[..._C].reverse(),m9=_C.length;function g9(n){return e=>Promise.all(e.map(({animation:t,options:i})=>h9(n,t,i)))}function v9(n){let e=g9(n),t=_B(),i=!0;const s=c=>(f,p)=>{var v;const g=Av(n,p,c==="exit"?(v=n.presenceContext)==null?void 0:v.custom:void 0);if(g){const{transition:x,transitionEnd:A,...M}=g;f={...f,...M,...A}}return f};function r(c){e=c(n)}function a(c){const{props:f}=n,p=fP(n.parent)||{},g=[],v=new Set;let x={},A=1/0;for(let _=0;_<m9;_++){const S=p9[_],w=t[S],C=f[S]!==void 0?f[S]:p[S],B=yv(C),N=S===c?w.isActive:null;N===!1&&(A=_);let L=C===p[S]&&C!==f[S]&&B;if(L&&i&&n.manuallyAnimateOnMount&&(L=!1),w.protectedKeys={...x},!w.isActive&&N===null||!C&&!w.prevProp||qA(C)||typeof C=="boolean")continue;const F=y9(w.prevProp,C);let P=F||S===c&&w.isActive&&!L&&B||_>A&&B,U=!1;const I=Array.isArray(C)?C:[C];let X=I.reduce(s(S),{});N===!1&&(X={});const{prevResolvedValues:re={}}=w,ee={...re,...X},$=Q=>{P=!0,v.has(Q)&&(U=!0,v.delete(Q)),w.needsAnimating[Q]=!0;const J=n.getValue(Q);J&&(J.liveStyle=!1)};for(const Q in ee){const J=X[Q],xe=re[Q];if(x.hasOwnProperty(Q))continue;let Y=!1;HE(J)&&HE(xe)?Y=!uP(J,xe):Y=J!==xe,Y?J!=null?$(Q):v.add(Q):J!==void 0&&v.has(Q)?$(Q):w.protectedKeys[Q]=!0}w.prevProp=C,w.prevResolvedValues=X,w.isActive&&(x={...x,...X}),i&&n.blockInitialAnimation&&(P=!1),P&&(!(L&&F)||U)&&g.push(...I.map(Q=>({animation:Q,options:{type:S}})))}if(v.size){const _={};if(typeof f.initial!="boolean"){const S=Av(n,Array.isArray(f.initial)?f.initial[0]:f.initial);S&&S.transition&&(_.transition=S.transition)}v.forEach(S=>{const w=n.getBaseTarget(S),C=n.getValue(S);C&&(C.liveStyle=!0),_[S]=w??null}),g.push({animation:_})}let M=!!g.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(M=!1),i=!1,M?e(g):Promise.resolve()}function l(c,f){var g;if(t[c].isActive===f)return Promise.resolve();(g=n.variantChildren)==null||g.forEach(v=>{var x;return(x=v.animationState)==null?void 0:x.setActive(c,f)}),t[c].isActive=f;const p=a(c);for(const v in t)t[v].protectedKeys={};return p}return{animateChanges:a,setActive:l,setAnimateFunction:r,getState:()=>t,reset:()=>{t=_B(),i=!0}}}function y9(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!uP(e,n):!1}function Eh(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _B(){return{animate:Eh(!0),whileInView:Eh(),whileHover:Eh(),whileTap:Eh(),whileDrag:Eh(),whileFocus:Eh(),exit:Eh()}}let Tf=class{constructor(e){this.isMounted=!1,this.node=e}update(){}},x9=class extends Tf{constructor(e){super(e),e.animationState||(e.animationState=v9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qA(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}},b9=0,A9=class extends Tf{constructor(){super(...arguments),this.id=b9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}};const S9={animation:{Feature:x9},exit:{Feature:A9}};function Mv(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const QC=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function ey(n){return{point:{x:n.pageX,y:n.pageY}}}const _9=n=>e=>QC(e)&&n(e,ey(e));function K0(n,e,t,i){return Mv(n,e,_9(t),i)}function hP({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function M9({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function E9(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}const dP=1e-4,T9=1-dP,C9=1+dP,pP=.01,w9=0-pP,R9=0+pP;function ta(n){return n.max-n.min}function B9(n,e,t){return Math.abs(n-e)<=t}function MB(n,e,t,i=.5){n.origin=i,n.originPoint=Qi(e.min,e.max,n.origin),n.scale=ta(t)/ta(e),n.translate=Qi(t.min,t.max,n.origin)-n.originPoint,(n.scale>=T9&&n.scale<=C9||isNaN(n.scale))&&(n.scale=1),(n.translate>=w9&&n.translate<=R9||isNaN(n.translate))&&(n.translate=0)}function J0(n,e,t,i){MB(n.x,e.x,t.x,i?i.originX:void 0),MB(n.y,e.y,t.y,i?i.originY:void 0)}function EB(n,e,t){n.min=t.min+e.min,n.max=n.min+ta(e)}function D9(n,e,t){EB(n.x,e.x,t.x),EB(n.y,e.y,t.y)}function TB(n,e,t){n.min=e.min-t.min,n.max=n.min+ta(e)}function Z0(n,e,t){TB(n.x,e.x,t.x),TB(n.y,e.y,t.y)}const CB=()=>({translate:0,scale:1,origin:0,originPoint:0}),rm=()=>({x:CB(),y:CB()}),wB=()=>({min:0,max:0}),ps=()=>({x:wB(),y:wB()});function vo(n){return[n("x"),n("y")]}function V_(n){return n===void 0||n===1}function eT({scale:n,scaleX:e,scaleY:t}){return!V_(n)||!V_(e)||!V_(t)}function Vh(n){return eT(n)||mP(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function mP(n){return RB(n.x)||RB(n.y)}function RB(n){return n&&n!=="0%"}function Ib(n,e,t){const i=n-t,s=e*i;return t+s}function BB(n,e,t,i,s){return s!==void 0&&(n=Ib(n,s,i)),Ib(n,t,i)+e}function tT(n,e=0,t=1,i,s){n.min=BB(n.min,e,t,i,s),n.max=BB(n.max,e,t,i,s)}function gP(n,{x:e,y:t}){tT(n.x,e.translate,e.scale,e.originPoint),tT(n.y,t.translate,t.scale,t.originPoint)}const DB=.999999999999,NB=1.0000000000001;function N9(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,a;for(let l=0;l<s;l++){r=t[l],a=r.projectionDelta;const{visualElement:c}=r.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&om(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,gP(n,a)),i&&Vh(r.latestValues)&&om(n,r.latestValues))}e.x<NB&&e.x>DB&&(e.x=1),e.y<NB&&e.y>DB&&(e.y=1)}function am(n,e){n.min=n.min+e,n.max=n.max+e}function LB(n,e,t,i,s=.5){const r=Qi(n.min,n.max,s);tT(n,e,t,r,i)}function om(n,e){LB(n.x,e.x,e.scaleX,e.scale,e.originX),LB(n.y,e.y,e.scaleY,e.scale,e.originY)}function vP(n,e){return hP(E9(n.getBoundingClientRect(),e))}function L9(n,e,t){const i=vP(n,t),{scroll:s}=e;return s&&(am(i.x,s.offset.x),am(i.y,s.offset.y)),i}const yP=({current:n})=>n?n.ownerDocument.defaultView:null,OB=(n,e)=>Math.abs(n-e);function O9(n,e){const t=OB(n.x,e.x),i=OB(n.y,e.y);return Math.sqrt(t**2+i**2)}let xP=class{constructor(e,t,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=j_(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,x=O9(g.offset,{x:0,y:0})>=3;if(!v&&!x)return;const{point:A}=g,{timestamp:M}=cr;this.history.push({...A,timestamp:M});const{onStart:_,onMove:S}=this.handlers;v||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=k_(v,this.transformPagePoint),ns.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:x,onSessionEnd:A,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=j_(g.type==="pointercancel"?this.lastMoveEventInfo:k_(v,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,_),A&&A(g,_)},!QC(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.contextWindow=s||window;const a=ey(e),l=k_(a,this.transformPagePoint),{point:c}=l,{timestamp:f}=cr;this.history=[{...c,timestamp:f}];const{onSessionStart:p}=t;p&&p(e,j_(l,this.history)),this.removeListeners=Qv(K0(this.contextWindow,"pointermove",this.handlePointerMove),K0(this.contextWindow,"pointerup",this.handlePointerUp),K0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),mf(this.updatePoint)}};function k_(n,e){return e?{point:e(n.point)}:n}function UB(n,e){return{x:n.x-e.x,y:n.y-e.y}}function j_({point:n},e){return{point:n,delta:UB(n,bP(e)),offset:UB(n,U9(e)),velocity:P9(e,.1)}}function U9(n){return n[0]}function bP(n){return n[n.length-1]}function P9(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=bP(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>tc(e)));)t--;if(!i)return{x:0,y:0};const r=nc(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function I9(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Qi(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Qi(t,n,i.max):Math.min(n,t)),n}function PB(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function F9(n,{top:e,left:t,bottom:i,right:s}){return{x:PB(n.x,t,s),y:PB(n.y,e,i)}}function IB(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function z9(n,e){return{x:IB(n.x,e.x),y:IB(n.y,e.y)}}function H9(n,e){let t=.5;const i=ta(n),s=ta(e);return s>i?t=_v(e.min,e.max-i,n.min):i>s&&(t=_v(n.min,n.max-s,e.min)),eu(0,1,t)}function G9(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const nT=.35;function V9(n=nT){return n===!1?n=0:n===!0&&(n=nT),{x:FB(n,"left","right"),y:FB(n,"top","bottom")}}function FB(n,e,t){return{min:zB(n,e),max:zB(n,t)}}function zB(n,e){return typeof n=="number"?n:n[e]||0}const el={x:!1,y:!1};function AP(){return el.x||el.y}function k9(n){return n==="x"||n==="y"?el[n]?null:(el[n]=!0,()=>{el[n]=!1}):el.x||el.y?null:(el.x=el.y=!0,()=>{el.x=el.y=!1})}const j9=new WeakMap;let X9=class{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ps(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ey(p).point)},r=(p,g)=>{const{drag:v,dragPropagation:x,onDragStart:A}=this.getProps();if(v&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=k9(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vo(_=>{let S=this.getAxisMotionValue(_).get()||0;if(ec.test(S)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[_];C&&(S=ta(C)*(parseFloat(S)/100))}}this.originPoint[_]=S}),A&&ns.postRender(()=>A(p,g)),GE(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},a=(p,g)=>{const{dragPropagation:v,dragDirectionLock:x,onDirectionLock:A,onDrag:M}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:_}=g;if(x&&this.currentDirection===null){this.currentDirection=Y9(_),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",g.point,_),this.updateAxis("y",g.point,_),this.visualElement.render(),M&&M(p,g)},l=(p,g)=>this.stop(p,g),c=()=>vo(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)==null?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new xP(e,{onSessionStart:s,onStart:r,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:yP(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&ns.postRender(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!i1(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=I9(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;e&&im(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=F9(i.layoutBox,e):this.constraints=!1,this.elastic=V9(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&vo(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=G9(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!im(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=L9(i,s.root,this.visualElement.getTransformPagePoint());let a=z9(s.layout.layoutBox,r);if(t){const l=t(M9(a));this.hasMutatedConstraints=!!l,l&&(a=hP(l))}return a}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},f=vo(p=>{if(!i1(p,t,this.currentDirection))return;let g=c&&c[p]||{};a&&(g={min:0,max:0});const v=s?200:1e6,x=s?40:1e7,A={type:"inertia",velocity:i?e[p]:0,bounceStiffness:v,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...r,...g};return this.startAxisValueAnimation(p,A)});return Promise.all(f).then(l)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return GE(this.visualElement,e),i.start(ZC(e,i,0,t,this.visualElement,!1))}stopAnimation(){vo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vo(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){vo(t=>{const{drag:i}=this.getProps();if(!i1(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[t];r.set(e[t]-Qi(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!im(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};vo(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=H9({min:c,max:c},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),vo(a=>{if(!i1(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:f}=this.constraints[a];l.set(Qi(c,f,s[a]))})}addListeners(){if(!this.visualElement.current)return;j9.set(this.visualElement,this);const e=this.visualElement.current,t=K0(e,"pointerdown",c=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();im(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ns.read(i);const a=Mv(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(vo(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=c[p].translate,g.set(g.get()+c[p].translate))}),this.visualElement.render())});return()=>{a(),t(),r(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=nT,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:l}}};function i1(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Y9(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}let W9=class extends Tf{constructor(e){super(e),this.removeGroupControls=So,this.removeListeners=So,this.controls=new X9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||So}unmount(){this.removeGroupControls(),this.removeListeners()}};const HB=n=>(e,t)=>{n&&ns.postRender(()=>n(e,t))};let q9=class extends Tf{constructor(){super(...arguments),this.removePointerDownListener=So}onPointerDown(e){this.session=new xP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:HB(e),onStart:HB(t),onMove:i,onEnd:(r,a)=>{delete this.session,s&&ns.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=K0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}};const pb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GB(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const S0={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(an.test(n))n=parseFloat(n);else return n;const t=GB(n,e.target.x),i=GB(n,e.target.y);return`${t}% ${i}%`}},K9={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=gf.parse(n);if(s.length>5)return i;const r=gf.createTransformer(n),a=typeof s[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;s[0+a]/=l,s[1+a]/=c;const f=Qi(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=f),typeof s[3+a]=="number"&&(s[3+a]/=f),r(s)}};let J9=class extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;l8(Z9),r&&(t.group&&t.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),pb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:r}=this.props,{projection:a}=i;return a&&(a.isPresent=r,s||e.layoutDependency!==t||t===void 0||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||ns.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),TC.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}};function SP(n){const[e,t]=vU(),i=z.useContext(yC);return H.jsx(J9,{...n,layoutGroup:i,switchLayoutGroup:z.useContext(_U),isPresent:e,safeToRemove:t})}const Z9={borderRadius:{...S0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:S0,borderTopRightRadius:S0,borderBottomLeftRadius:S0,borderBottomRightRadius:S0,boxShadow:K9};function Q9(n,e,t){const i=Dr(n)?n:Em(n);return i.start(ZC("",i,e,t)),i.animation}const $9=(n,e)=>n.depth-e.depth;let ek=class{constructor(){this.children=[],this.isDirty=!1}add(e){PC(this.children,e),this.isDirty=!0}remove(e){IC(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($9),this.isDirty=!1,this.children.forEach(e)}};function tk(n,e){const t=Sa.now(),i=({timestamp:s})=>{const r=s-t;r>=e&&(mf(i),n(r-e))};return ns.setup(i,!0),()=>mf(i)}const _P=["TopLeft","TopRight","BottomLeft","BottomRight"],nk=_P.length,VB=n=>typeof n=="string"?parseFloat(n):n,kB=n=>typeof n=="number"||an.test(n);function ik(n,e,t,i,s,r){s?(n.opacity=Qi(0,t.opacity??1,sk(i)),n.opacityExit=Qi(e.opacity??1,0,rk(i))):r&&(n.opacity=Qi(e.opacity??1,t.opacity??1,i));for(let a=0;a<nk;a++){const l=`border${_P[a]}Radius`;let c=jB(e,l),f=jB(t,l);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||kB(c)===kB(f)?(n[l]=Math.max(Qi(VB(c),VB(f),i),0),(ec.test(f)||ec.test(c))&&(n[l]+="%")):n[l]=f}(e.rotate||t.rotate)&&(n.rotate=Qi(e.rotate||0,t.rotate||0,i))}function jB(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const sk=MP(0,.5,QU),rk=MP(.5,.95,So);function MP(n,e,t){return i=>i<n?0:i>e?1:t(_v(n,e,i))}function XB(n,e){n.min=e.min,n.max=e.max}function ho(n,e){XB(n.x,e.x),XB(n.y,e.y)}function YB(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function WB(n,e,t,i,s){return n-=e,n=Ib(n,1/t,i),s!==void 0&&(n=Ib(n,1/s,i)),n}function ak(n,e=0,t=1,i=.5,s,r=n,a=n){if(ec.test(e)&&(e=parseFloat(e),e=Qi(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=Qi(r.min,r.max,i);n===r&&(l-=e),n.min=WB(n.min,e,t,l,s),n.max=WB(n.max,e,t,l,s)}function qB(n,e,[t,i,s],r,a){ak(n,e[t],e[i],e[s],e.scale,r,a)}const ok=["x","scaleX","originX"],lk=["y","scaleY","originY"];function KB(n,e,t,i){qB(n.x,e,ok,t?t.x:void 0,i?i.x:void 0),qB(n.y,e,lk,t?t.y:void 0,i?i.y:void 0)}function JB(n){return n.translate===0&&n.scale===1}function EP(n){return JB(n.x)&&JB(n.y)}function ZB(n,e){return n.min===e.min&&n.max===e.max}function ck(n,e){return ZB(n.x,e.x)&&ZB(n.y,e.y)}function QB(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function TP(n,e){return QB(n.x,e.x)&&QB(n.y,e.y)}function $B(n){return ta(n.x)/ta(n.y)}function eD(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}let uk=class{constructor(){this.members=[]}add(e){PC(this.members,e),e.scheduleRender()}remove(e){if(IC(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}};function fk(n,e,t){let i="";const s=n.x.translate/e.x,r=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((s||r||a)&&(i=`translate3d(${s}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:p,rotateX:g,rotateY:v,skewX:x,skewY:A}=t;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),g&&(i+=`rotateX(${g}deg) `),v&&(i+=`rotateY(${v}deg) `),x&&(i+=`skewX(${x}deg) `),A&&(i+=`skewY(${A}deg) `)}const l=n.x.scale*e.x,c=n.y.scale*e.y;return(l!==1||c!==1)&&(i+=`scale(${l}, ${c})`),i||"none"}function CP(n){return gU(n)&&"ownerSVGElement"in n}function hk(n){return CP(n)&&n.tagName==="svg"}const X_=["","X","Y","Z"],dk={visibility:"hidden"},pk=1e3;let mk=0;function Y_(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function wP(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=UU(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ns,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&wP(i)}function RP({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(a={},l=e==null?void 0:e()){this.id=mk++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(yk),this.nodes.forEach(_k),this.nodes.forEach(Mk),this.nodes.forEach(xk)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new ek)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new FC),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=CP(a)&&!hk(a),this.instance=a;const{layoutId:l,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),n){let p;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=tk(g,250),pb.hasAnimatedSinceResize&&(pb.hasAnimatedSinceResize=!1,this.nodes.forEach(nD))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||f.getDefaultTransition()||Rk,{onLayoutAnimationStart:M,onLayoutAnimationComplete:_}=f.getProps(),S=!this.targetLayout||!TP(this.targetLayout,x),w=!g&&v;if(this.options.layoutRoot||this.resumeFrom||w||g&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...zC(A,"layout"),onPlay:M,onComplete:_};(f.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(p,w)}else g||nD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),mf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ek),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&wP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tD);return}this.isUpdating||this.nodes.forEach(Ak),this.isUpdating=!1,this.nodes.forEach(Sk),this.nodes.forEach(gk),this.nodes.forEach(vk),this.clearAllSnapshots();const l=Sa.now();cr.delta=eu(0,1e3/60,l-cr.timestamp),cr.timestamp=l,cr.isProcessing=!0,F_.update.process(cr),F_.preRender.process(cr),F_.render.process(cr),cr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,TC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bk),this.sharedNodes.forEach(Tk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ns.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ns.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ta(this.snapshot.measuredBox.x)&&!ta(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ps(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!EP(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;a&&this.instance&&(l||Vh(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),Bk(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:a}=this.options;if(!a)return ps();const l=a.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(Dk))){const{scroll:p}=this.root;p&&(am(l.x,p.offset.x),am(l.y,p.offset.y))}return l}removeElementScroll(a){var c;const l=ps();if(ho(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:g,options:v}=p;p!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&ho(l,a),am(l.x,g.offset.x),am(l.y,g.offset.y))}return l}applyTransform(a,l=!1){const c=ps();ho(c,a);for(let f=0;f<this.path.length;f++){const p=this.path[f];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&om(c,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Vh(p.latestValues)&&om(c,p.latestValues)}return Vh(this.latestValues)&&om(c,this.latestValues),c}removeTransform(a){const l=ps();ho(l,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!Vh(f.latestValues))continue;eT(f.latestValues)&&f.updateSnapshot();const p=ps(),g=f.measurePageBox();ho(p,g),KB(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Vh(this.latestValues)&&KB(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var v;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=cr.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ps(),this.relativeTargetOrigin=ps(),Z0(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ho(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ps(),this.targetWithTransforms=ps()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),D9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ho(this.target,this.layout.layoutBox),gP(this.target,this.targetDelta)):ho(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ps(),this.relativeTargetOrigin=ps(),Z0(this.relativeTargetOrigin,this.target,x.target),ho(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||eT(this.parent.latestValues)||mP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var A;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===cr.timestamp&&(c=!1),c)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;ho(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;N9(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ps());const{target:x}=a;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YB(this.prevProjectionDelta.x,this.projectionDelta.x),YB(this.prevProjectionDelta.y,this.projectionDelta.y)),J0(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!eD(this.projectionDelta.x,this.prevProjectionDelta.x)||!eD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rm(),this.projectionDelta=rm(),this.projectionDeltaWithTransform=rm()}setAnimationOrigin(a,l=!1){const c=this.snapshot,f=c?c.latestValues:{},p={...this.latestValues},g=rm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=ps(),x=c?c.source:void 0,A=this.layout?this.layout.source:void 0,M=x!==A,_=this.getStack(),S=!_||_.members.length<=1,w=!!(M&&!S&&this.options.crossfade===!0&&!this.path.some(wk));this.animationProgress=0;let C;this.mixTargetDelta=B=>{const N=B/1e3;iD(g.x,a.x,N),iD(g.y,a.y,N),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Z0(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ck(this.relativeTarget,this.relativeTargetOrigin,v,N),C&&ck(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=ps()),ho(C,this.relativeTarget)),M&&(this.animationValues=p,ik(p,f,this.latestValues,N,w,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,f;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(f=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||f.stop(),this.pendingAnimation&&(mf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ns.update(()=>{pb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Em(0)),this.currentAnimation=Q9(this.motionValue,[0,1e3],{...a,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),a.onUpdate&&a.onUpdate(p)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:f,latestValues:p}=a;if(!(!l||!c||!f)){if(this!==a&&this.layout&&f&&BP(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||ps();const g=ta(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+g;const v=ta(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+v}ho(l,c),om(l,p),J0(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new uk),this.sharedNodes.get(a).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const f={};c.z&&Y_("z",a,f,this.animationValues);for(let p=0;p<X_.length;p++)Y_(`rotate${X_[p]}`,a,f,this.animationValues),Y_(`skew${X_[p]}`,a,f,this.animationValues);a.render();for(const p in f)a.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return dk;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=hb(a==null?void 0:a.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=hb(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Vh(this.latestValues)&&(x.transform=c?c({},""):"none",this.hasProjected=!1),x}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),l.transform=fk(this.projectionDeltaWithTransform,this.treeScale,p),c&&(l.transform=c(p,l.transform));const{x:g,y:v}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,f.animationValues?l.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in xv){if(p[x]===void 0)continue;const{correct:A,applyTo:M,isCSSVariable:_}=xv[x],S=l.transform==="none"?p[x]:A(p[x],f);if(M){const w=M.length;for(let C=0;C<w;C++)l[M[C]]=S}else _?this.options.visualElement.renderState.vars[x]=S:l[x]=S}return this.options.layoutId&&(l.pointerEvents=f===this?hb(a==null?void 0:a.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(tD),this.root.sharedNodes.clear()}}}function gk(n){n.updateLayout()}function vk(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,a=e.source!==n.layout.source;r==="size"?vo(g=>{const v=a?e.measuredBox[g]:e.layoutBox[g],x=ta(v);v.min=i[g].min,v.max=v.min+x}):BP(r,e.layoutBox,i)&&vo(g=>{const v=a?e.measuredBox[g]:e.layoutBox[g],x=ta(i[g]);v.max=v.min+x,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+x)});const l=rm();J0(l,i,e.layoutBox);const c=rm();a?J0(c,n.applyTransform(s,!0),e.measuredBox):J0(c,i,e.layoutBox);const f=!EP(l);let p=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:x}=g;if(v&&x){const A=ps();Z0(A,e.layoutBox,v.layoutBox);const M=ps();Z0(M,i,x.layoutBox),TP(A,M)||(p=!0),g.options.layoutRoot&&(n.relativeTarget=M,n.relativeTargetOrigin=A,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function yk(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function xk(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function bk(n){n.clearSnapshot()}function tD(n){n.clearMeasurements()}function Ak(n){n.isLayoutDirty=!1}function Sk(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function nD(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function _k(n){n.resolveTargetDelta()}function Mk(n){n.calcProjection()}function Ek(n){n.resetSkewAndRotation()}function Tk(n){n.removeLeadSnapshot()}function iD(n,e,t){n.translate=Qi(e.translate,0,t),n.scale=Qi(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function sD(n,e,t,i){n.min=Qi(e.min,t.min,i),n.max=Qi(e.max,t.max,i)}function Ck(n,e,t,i){sD(n.x,e.x,t.x,i),sD(n.y,e.y,t.y,i)}function wk(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Rk={duration:.45,ease:[.4,0,.1,1]},rD=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),aD=rD("applewebkit/")&&!rD("chrome/")?Math.round:So;function oD(n){n.min=aD(n.min),n.max=aD(n.max)}function Bk(n){oD(n.x),oD(n.y)}function BP(n,e,t){return n==="position"||n==="preserve-aspect"&&!B9($B(e),$B(t),.2)}function Dk(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const Nk=RP({attachResizeListener:(n,e)=>Mv(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),W_={current:void 0},DP=RP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!W_.current){const n=new Nk({});n.mount(window),n.setOptions({layoutScroll:!0}),W_.current=n}return W_.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Lk={pan:{Feature:q9},drag:{Feature:W9,ProjectionNode:DP,MeasureLayout:SP}};function Ok(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=(t==null?void 0:t[n])??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function NP(n,e){const t=Ok(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function lD(n){return!(n.pointerType==="touch"||AP())}function Uk(n,e,t={}){const[i,s,r]=NP(n,t),a=l=>{if(!lD(l))return;const{target:c}=l,f=e(c,l);if(typeof f!="function"||!c)return;const p=g=>{lD(g)&&(f(g),c.removeEventListener("pointerleave",p))};c.addEventListener("pointerleave",p,s)};return i.forEach(l=>{l.addEventListener("pointerenter",a,s)}),r}function cD(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,r=i[s];r&&ns.postRender(()=>r(e,ey(e)))}let Pk=class extends Tf{mount(){const{current:e}=this.node;e&&(this.unmount=Uk(e,(t,i)=>(cD(this.node,i,"Start"),s=>cD(this.node,s,"End"))))}unmount(){}},Ik=class extends Tf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qv(Mv(this.node.current,"focus",()=>this.onFocus()),Mv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}};const LP=(n,e)=>e?n===e?!0:LP(n,e.parentElement):!1,Fk=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zk(n){return Fk.has(n.tagName)||n.tabIndex!==-1}const mb=new WeakSet;function uD(n){return e=>{e.key==="Enter"&&n(e)}}function q_(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Hk=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=uD(()=>{if(mb.has(t))return;q_(t,"down");const s=uD(()=>{q_(t,"up")}),r=()=>q_(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function fD(n){return QC(n)&&!AP()}function Gk(n,e,t={}){const[i,s,r]=NP(n,t),a=l=>{const c=l.currentTarget;if(!fD(l))return;mb.add(c);const f=e(c,l),p=(x,A)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),mb.has(c)&&mb.delete(c),fD(x)&&typeof f=="function"&&f(x,{success:A})},g=x=>{p(x,c===window||c===document||t.useGlobalTarget||LP(c,x.target))},v=x=>{p(x,!1)};window.addEventListener("pointerup",g,s),window.addEventListener("pointercancel",v,s)};return i.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),SC(l)&&(l.addEventListener("focus",f=>Hk(f,s)),!zk(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),r}function hD(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),r=i[s];r&&ns.postRender(()=>r(e,ey(e)))}let Vk=class extends Tf{mount(){const{current:e}=this.node;e&&(this.unmount=Gk(e,(t,i)=>(hD(this.node,i,"Start"),(s,{success:r})=>hD(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}};const iT=new WeakMap,K_=new WeakMap,kk=n=>{const e=iT.get(n.target);e&&e(n)},jk=n=>{n.forEach(kk)};function Xk({root:n,...e}){const t=n||document;K_.has(t)||K_.set(t,{});const i=K_.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(jk,{root:n,...e})),i[s]}function Yk(n,e,t){const i=Xk(e);return iT.set(n,t),i.observe(n),()=>{iT.delete(n),i.unobserve(n)}}const Wk={some:0,all:1};let qk=class extends Tf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:Wk[s]},l=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,r&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),v=f?p:g;v&&v(c)};return Yk(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Kk(e,t))&&this.startObserver()}unmount(){}};function Kk({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Jk={inView:{Feature:qk},tap:{Feature:Vk},focus:{Feature:Ik},hover:{Feature:Pk}},Zk={layout:{ProjectionNode:DP,MeasureLayout:SP}},sT={current:null},OP={current:!1};function Qk(){if(OP.current=!0,!!bC)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>sT.current=n.matches;n.addListener(e),e()}else sT.current=!1}const $k=new WeakMap;function ej(n,e,t){for(const i in e){const s=e[i],r=t[i];if(Dr(s))n.addValue(i,s);else if(Dr(r))n.addValue(i,Em(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const a=n.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=n.getStaticValue(i);n.addValue(i,Em(a!==void 0?a:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const UP=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),PP=n=>/^0[^.\s]+$/u.test(n),tj={test:n=>n==="auto",parse:n=>n},IP=n=>e=>e.test(n),FP=[Wm,an,ec,lf,u8,c8,tj],dD=n=>FP.find(IP(n)),nj=[...FP,Rr,gf],ij=n=>nj.find(IP(n)),sj=new Set(["brightness","contrast","saturate","opacity"]);function rj(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(HC)||[];if(!i)return n;const s=t.replace(i,"");let r=sj.has(e)?1:0;return i!==t&&(r*=100),e+"("+r+s+")"}const aj=/\b([a-z-]*)\(.*?\)/gu,rT={...gf,getAnimatableNone:n=>{const e=n.match(aj);return e?e.map(rj).join(" "):n}},oj={...BC,color:Rr,backgroundColor:Rr,outlineColor:Rr,fill:Rr,stroke:Rr,borderColor:Rr,borderTopColor:Rr,borderRightColor:Rr,borderBottomColor:Rr,borderLeftColor:Rr,filter:rT,WebkitFilter:rT},zP=n=>oj[n];function HP(n,e){let t=zP(n);return t!==rT&&(t=gf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const pD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let lj=class{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Sa.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,ns.render(this.render,!1,!0))};const{latestValues:c,renderState:f}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!r,this.isControllingVariants=KA(t),this.isVariantNode=AU(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in g){const x=g[v];c[v]!==void 0&&Dr(x)&&x.set(c[v],!1)}}mount(e){this.current=e,$k.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),OP.current||Qk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sT.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),mf(this.notifyUpdate),mf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Ym.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&ns.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Mm){const t=Mm[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ps()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<pD.length;i++){const s=pD[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=e[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=ej(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Em(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(UP(i)||PP(i))?i=parseFloat(i):!ij(i)&&gf.test(t)&&(i=HP(e,t)),this.setBaseTarget(e,Dr(i)?i.get():i)),Dr(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var r;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const a=OC(this.props,t,(r=this.presenceContext)==null?void 0:r.custom);a&&(i=a[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Dr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new FC),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}};const cj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function uj(n){const e=cj.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function GP(n,e,t=1){const[i,s]=uj(n);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const a=r.trim();return UP(a)?parseFloat(a):a}return RC(s)?GP(s,e,t+1):s}function fj(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||PP(n):!0}const hj=new Set(["auto","none","0"]);function dj(n,e,t){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!hj.has(r)&&Sv(r).values.length&&(s=n[i]),i++}if(s&&t)for(const r of e)n[r]=HP(t,s)}let pj=class extends KC{constructor(e,t,i,s,r){super(e,t,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),RC(f))){const p=GP(f,t.current);p!==void 0&&(e[c]=p),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!lP.has(i)||e.length!==2)return;const[s,r]=e,a=dD(s),l=dD(r);if(a!==l)if(xB(a)&&xB(l))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else ld[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||fj(e[s]))&&i.push(s);i.length&&dj(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ld[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,a=i[r];i[r]=ld[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}},VP=class extends lj{constructor(){super(...arguments),this.KeyframeResolver=pj}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}};function kP(n,{style:e,vars:t},i,s){Object.assign(n.style,e,s&&s.getProjectionStyles(i));for(const r in t)n.style.setProperty(r,t[r])}function mj(n){return window.getComputedStyle(n)}let gj=class extends VP{constructor(){super(...arguments),this.type="html",this.renderInstance=kP}readValueFromInstance(e,t){var i;if(Ym.has(t))return(i=this.projection)!=null&&i.isProjecting?qE(t):z6(e,t);{const s=mj(e),r=(wC(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return vP(e,t)}build(e,t,i){DC(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return UC(e,t,i)}};const jP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vj(n,e,t,i){kP(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(jP.has(s)?s:EC(s),e.attrs[s])}let yj=class extends VP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ps}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ym.has(t)){const i=zP(t);return i&&i.default||0}return t=jP.has(t)?t:EC(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return LU(e,t,i)}build(e,t,i){RU(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){vj(e,t,i,s)}mount(e){this.isSVGTag=DU(e.tagName),super.mount(e)}};const xj=(n,e)=>LC(n)?new yj(e):new gj(e,{allowProjection:n!==z.Fragment}),bj=w8({...S9,...Jk,...Lk,...Zk},xj),XP=qV(bj);var _a=function(){return _a=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_a.apply(this,arguments)};function Fb(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}var Di="-ms-",Q0="-moz-",li="-webkit-",YP="comm",JA="rule",$C="decl",Aj="@import",WP="@keyframes",Sj="@layer",qP=Math.abs,ew=String.fromCharCode,aT=Object.assign;function _j(n,e){return Zs(n,0)^45?(((e<<2^Zs(n,0))<<2^Zs(n,1))<<2^Zs(n,2))<<2^Zs(n,3):0}function KP(n){return n.trim()}function kc(n,e){return(n=e.exec(n))?n[0]:n}function wn(n,e,t){return n.replace(e,t)}function gb(n,e,t){return n.indexOf(e,t)}function Zs(n,e){return n.charCodeAt(e)|0}function Tm(n,e,t){return n.slice(e,t)}function Zl(n){return n.length}function JP(n){return n.length}function k0(n,e){return e.push(n),n}function Mj(n,e){return n.map(e).join("")}function mD(n,e){return n.filter(function(t){return!kc(t,e)})}var ZA=1,Cm=1,ZP=0,_o=0,Cs=0,qm="";function QA(n,e,t,i,s,r,a,l){return{value:n,root:e,parent:t,type:i,props:s,children:r,line:ZA,column:Cm,length:a,return:"",siblings:l}}function cf(n,e){return aT(QA("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},e)}function Lp(n){for(;n.root;)n=cf(n.root,{children:[n]});k0(n,n.siblings)}function Ej(){return Cs}function Tj(){return Cs=_o>0?Zs(qm,--_o):0,Cm--,Cs===10&&(Cm=1,ZA--),Cs}function ll(){return Cs=_o<ZP?Zs(qm,_o++):0,Cm++,Cs===10&&(Cm=1,ZA++),Cs}function ud(){return Zs(qm,_o)}function vb(){return _o}function $A(n,e){return Tm(qm,n,e)}function oT(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Cj(n){return ZA=Cm=1,ZP=Zl(qm=n),_o=0,[]}function wj(n){return qm="",n}function J_(n){return KP($A(_o-1,lT(n===91?n+2:n===40?n+1:n)))}function Rj(n){for(;(Cs=ud())&&Cs<33;)ll();return oT(n)>2||oT(Cs)>3?"":" "}function Bj(n,e){for(;--e&&ll()&&!(Cs<48||Cs>102||Cs>57&&Cs<65||Cs>70&&Cs<97););return $A(n,vb()+(e<6&&ud()==32&&ll()==32))}function lT(n){for(;ll();)switch(Cs){case n:return _o;case 34:case 39:n!==34&&n!==39&&lT(Cs);break;case 40:n===41&&lT(n);break;case 92:ll();break}return _o}function Dj(n,e){for(;ll()&&n+Cs!==57;)if(n+Cs===84&&ud()===47)break;return"/*"+$A(e,_o-1)+"*"+ew(n===47?n:ll())}function Nj(n){for(;!oT(ud());)ll();return $A(n,_o)}function Lj(n){return wj(yb("",null,null,null,[""],n=Cj(n),0,[0],n))}function yb(n,e,t,i,s,r,a,l,c){for(var f=0,p=0,g=a,v=0,x=0,A=0,M=1,_=1,S=1,w=0,C="",B=s,N=r,L=i,F=C;_;)switch(A=w,w=ll()){case 40:if(A!=108&&Zs(F,g-1)==58){gb(F+=wn(J_(w),"&","&\f"),"&\f",qP(f?l[f-1]:0))!=-1&&(S=-1);break}case 34:case 39:case 91:F+=J_(w);break;case 9:case 10:case 13:case 32:F+=Rj(A);break;case 92:F+=Bj(vb()-1,7);continue;case 47:switch(ud()){case 42:case 47:k0(Oj(Dj(ll(),vb()),e,t,c),c);break;default:F+="/"}break;case 123*M:l[f++]=Zl(F)*S;case 125*M:case 59:case 0:switch(w){case 0:case 125:_=0;case 59+p:S==-1&&(F=wn(F,/\f/g,"")),x>0&&Zl(F)-g&&k0(x>32?vD(F+";",i,t,g-1,c):vD(wn(F," ","")+";",i,t,g-2,c),c);break;case 59:F+=";";default:if(k0(L=gD(F,e,t,f,p,s,l,C,B=[],N=[],g,r),r),w===123)if(p===0)yb(F,e,L,L,B,r,g,l,N);else switch(v===99&&Zs(F,3)===110?100:v){case 100:case 108:case 109:case 115:yb(n,L,L,i&&k0(gD(n,L,L,0,0,s,l,C,s,B=[],g,N),N),s,N,g,l,i?B:N);break;default:yb(F,L,L,L,[""],N,0,l,N)}}f=p=x=0,M=S=1,C=F="",g=a;break;case 58:g=1+Zl(F),x=A;default:if(M<1){if(w==123)--M;else if(w==125&&M++==0&&Tj()==125)continue}switch(F+=ew(w),w*M){case 38:S=p>0?1:(F+="\f",-1);break;case 44:l[f++]=(Zl(F)-1)*S,S=1;break;case 64:ud()===45&&(F+=J_(ll())),v=ud(),p=g=Zl(C=F+=Nj(vb())),w++;break;case 45:A===45&&Zl(F)==2&&(M=0)}}return r}function gD(n,e,t,i,s,r,a,l,c,f,p,g){for(var v=s-1,x=s===0?r:[""],A=JP(x),M=0,_=0,S=0;M<i;++M)for(var w=0,C=Tm(n,v+1,v=qP(_=a[M])),B=n;w<A;++w)(B=KP(_>0?x[w]+" "+C:wn(C,/&\f/g,x[w])))&&(c[S++]=B);return QA(n,e,t,s===0?JA:l,c,f,p,g)}function Oj(n,e,t,i){return QA(n,e,t,YP,ew(Ej()),Tm(n,2,-2),0,i)}function vD(n,e,t,i,s){return QA(n,e,t,$C,Tm(n,0,i),Tm(n,i+1,-1),i,s)}function QP(n,e,t){switch(_j(n,e)){case 5103:return li+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return li+n+n;case 4789:return Q0+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return li+n+Q0+n+Di+n+n;case 5936:switch(Zs(n,e+11)){case 114:return li+n+Di+wn(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return li+n+Di+wn(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return li+n+Di+wn(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return li+n+Di+n+n;case 6165:return li+n+Di+"flex-"+n+n;case 5187:return li+n+wn(n,/(\w+).+(:[^]+)/,li+"box-$1$2"+Di+"flex-$1$2")+n;case 5443:return li+n+Di+"flex-item-"+wn(n,/flex-|-self/g,"")+(kc(n,/flex-|baseline/)?"":Di+"grid-row-"+wn(n,/flex-|-self/g,""))+n;case 4675:return li+n+Di+"flex-line-pack"+wn(n,/align-content|flex-|-self/g,"")+n;case 5548:return li+n+Di+wn(n,"shrink","negative")+n;case 5292:return li+n+Di+wn(n,"basis","preferred-size")+n;case 6060:return li+"box-"+wn(n,"-grow","")+li+n+Di+wn(n,"grow","positive")+n;case 4554:return li+wn(n,/([^-])(transform)/g,"$1"+li+"$2")+n;case 6187:return wn(wn(wn(n,/(zoom-|grab)/,li+"$1"),/(image-set)/,li+"$1"),n,"")+n;case 5495:case 3959:return wn(n,/(image-set\([^]*)/,li+"$1$`$1");case 4968:return wn(wn(n,/(.+:)(flex-)?(.*)/,li+"box-pack:$3"+Di+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+li+n+n;case 4200:if(!kc(n,/flex-|baseline/))return Di+"grid-column-align"+Tm(n,e)+n;break;case 2592:case 3360:return Di+wn(n,"template-","")+n;case 4384:case 3616:return t&&t.some(function(i,s){return e=s,kc(i.props,/grid-\w+-end/)})?~gb(n+(t=t[e].value),"span",0)?n:Di+wn(n,"-start","")+n+Di+"grid-row-span:"+(~gb(t,"span",0)?kc(t,/\d+/):+kc(t,/\d+/)-+kc(n,/\d+/))+";":Di+wn(n,"-start","")+n;case 4896:case 4128:return t&&t.some(function(i){return kc(i.props,/grid-\w+-start/)})?n:Di+wn(wn(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return wn(n,/(.+)-inline(.+)/,li+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Zl(n)-1-e>6)switch(Zs(n,e+1)){case 109:if(Zs(n,e+4)!==45)break;case 102:return wn(n,/(.+:)(.+)-([^]+)/,"$1"+li+"$2-$3$1"+Q0+(Zs(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~gb(n,"stretch",0)?QP(wn(n,"stretch","fill-available"),e,t)+n:n}break;case 5152:case 5920:return wn(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(i,s,r,a,l,c,f){return Di+s+":"+r+f+(a?Di+s+"-span:"+(l?c:+c-+r)+f:"")+n});case 4949:if(Zs(n,e+6)===121)return wn(n,":",":"+li)+n;break;case 6444:switch(Zs(n,Zs(n,14)===45?18:11)){case 120:return wn(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+li+(Zs(n,14)===45?"inline-":"")+"box$3$1"+li+"$2$3$1"+Di+"$2box$3")+n;case 100:return wn(n,":",":"+Di)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return wn(n,"scroll-","scroll-snap-")+n}return n}function zb(n,e){for(var t="",i=0;i<n.length;i++)t+=e(n[i],i,n,e)||"";return t}function Uj(n,e,t,i){switch(n.type){case Sj:if(n.children.length)break;case Aj:case $C:return n.return=n.return||n.value;case YP:return"";case WP:return n.return=n.value+"{"+zb(n.children,i)+"}";case JA:if(!Zl(n.value=n.props.join(",")))return""}return Zl(t=zb(n.children,i))?n.return=n.value+"{"+t+"}":""}function Pj(n){var e=JP(n);return function(t,i,s,r){for(var a="",l=0;l<e;l++)a+=n[l](t,i,s,r)||"";return a}}function Ij(n){return function(e){e.root||(e=e.return)&&n(e)}}function Fj(n,e,t,i){if(n.length>-1&&!n.return)switch(n.type){case $C:n.return=QP(n.value,n.length,t);return;case WP:return zb([cf(n,{value:wn(n.value,"@","@"+li)})],i);case JA:if(n.length)return Mj(t=n.props,function(s){switch(kc(s,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Lp(cf(n,{props:[wn(s,/:(read-\w+)/,":"+Q0+"$1")]})),Lp(cf(n,{props:[s]})),aT(n,{props:mD(t,i)});break;case"::placeholder":Lp(cf(n,{props:[wn(s,/:(plac\w+)/,":"+li+"input-$1")]})),Lp(cf(n,{props:[wn(s,/:(plac\w+)/,":"+Q0+"$1")]})),Lp(cf(n,{props:[wn(s,/:(plac\w+)/,Di+"input-$1")]})),Lp(cf(n,{props:[s]})),aT(n,{props:mD(t,i)});break}return""})}}var zj={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Va={},wm=typeof process<"u"&&Va!==void 0&&(Va.REACT_APP_SC_ATTR||Va.SC_ATTR)||"data-styled",$P="active",eI="data-styled-version",eS="6.1.18",tw=`/*!sc*/
`,Hb=typeof window<"u"&&typeof document<"u",Hj=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Va!==void 0&&Va.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Va.REACT_APP_SC_DISABLE_SPEEDY!==""?Va.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Va.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Va!==void 0&&Va.SC_DISABLE_SPEEDY!==void 0&&Va.SC_DISABLE_SPEEDY!==""&&Va.SC_DISABLE_SPEEDY!=="false"&&Va.SC_DISABLE_SPEEDY),tS=Object.freeze([]),Rm=Object.freeze({});function Gj(n,e,t){return t===void 0&&(t=Rm),n.theme!==t.theme&&n.theme||e||t.theme}var tI=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Vj=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,kj=/(^-|-$)/g;function yD(n){return n.replace(Vj,"-").replace(kj,"")}var jj=/(a)(d)/gi,s1=52,xD=function(n){return String.fromCharCode(n+(n>25?39:97))};function cT(n){var e,t="";for(e=Math.abs(n);e>s1;e=e/s1|0)t=xD(e%s1)+t;return(xD(e%s1)+t).replace(jj,"$1-$2")}var Z_,nI=5381,lm=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},iI=function(n){return lm(nI,n)};function Xj(n){return cT(iI(n)>>>0)}function Yj(n){return n.displayName||n.name||"Component"}function Q_(n){return typeof n=="string"&&!0}var sI=typeof Symbol=="function"&&Symbol.for,rI=sI?Symbol.for("react.memo"):60115,Wj=sI?Symbol.for("react.forward_ref"):60112,qj={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Kj={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},aI={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Jj=((Z_={})[Wj]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Z_[rI]=aI,Z_);function bD(n){return("type"in(e=n)&&e.type.$$typeof)===rI?aI:"$$typeof"in n?Jj[n.$$typeof]:qj;var e}var Zj=Object.defineProperty,Qj=Object.getOwnPropertyNames,AD=Object.getOwnPropertySymbols,$j=Object.getOwnPropertyDescriptor,e7=Object.getPrototypeOf,SD=Object.prototype;function oI(n,e,t){if(typeof e!="string"){if(SD){var i=e7(e);i&&i!==SD&&oI(n,i,t)}var s=Qj(e);AD&&(s=s.concat(AD(e)));for(var r=bD(n),a=bD(e),l=0;l<s.length;++l){var c=s[l];if(!(c in Kj||t&&t[c]||a&&c in a||r&&c in r)){var f=$j(e,c);try{Zj(n,c,f)}catch{}}}}return n}function Bm(n){return typeof n=="function"}function nw(n){return typeof n=="object"&&"styledComponentId"in n}function Zh(n,e){return n&&e?"".concat(n," ").concat(e):n||e||""}function _D(n,e){if(n.length===0)return"";for(var t=n[0],i=1;i<n.length;i++)t+=n[i];return t}function Ev(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function uT(n,e,t){if(t===void 0&&(t=!1),!t&&!Ev(n)&&!Array.isArray(n))return e;if(Array.isArray(e))for(var i=0;i<e.length;i++)n[i]=uT(n[i],e[i]);else if(Ev(e))for(var i in e)n[i]=uT(n[i],e[i]);return n}function iw(n,e){Object.defineProperty(n,"toString",{value:e})}function ty(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var t7=function(){function n(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return n.prototype.indexOfGroup=function(e){for(var t=0,i=0;i<e;i++)t+=this.groupSizes[i];return t},n.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var i=this.groupSizes,s=i.length,r=s;e>=r;)if((r<<=1)<0)throw ty(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(i),this.length=r;for(var a=s;a<r;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(e+1),c=(a=0,t.length);a<c;a++)this.tag.insertRule(l,t[a])&&(this.groupSizes[e]++,l++)},n.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],i=this.indexOfGroup(e),s=i+t;this.groupSizes[e]=0;for(var r=i;r<s;r++)this.tag.deleteRule(i)}},n.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var i=this.groupSizes[e],s=this.indexOfGroup(e),r=s+i,a=s;a<r;a++)t+="".concat(this.tag.getRule(a)).concat(tw);return t},n}(),xb=new Map,Gb=new Map,bb=1,r1=function(n){if(xb.has(n))return xb.get(n);for(;Gb.has(bb);)bb++;var e=bb++;return xb.set(n,e),Gb.set(e,n),e},n7=function(n,e){bb=e+1,xb.set(n,e),Gb.set(e,n)},i7="style[".concat(wm,"][").concat(eI,'="').concat(eS,'"]'),s7=new RegExp("^".concat(wm,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),r7=function(n,e,t){for(var i,s=t.split(","),r=0,a=s.length;r<a;r++)(i=s[r])&&n.registerName(e,i)},a7=function(n,e){for(var t,i=((t=e.textContent)!==null&&t!==void 0?t:"").split(tw),s=[],r=0,a=i.length;r<a;r++){var l=i[r].trim();if(l){var c=l.match(s7);if(c){var f=0|parseInt(c[1],10),p=c[2];f!==0&&(n7(p,f),r7(n,p,c[3]),n.getTag().insertRules(f,s)),s.length=0}else s.push(l)}}},MD=function(n){for(var e=document.querySelectorAll(i7),t=0,i=e.length;t<i;t++){var s=e[t];s&&s.getAttribute(wm)!==$P&&(a7(n,s),s.parentNode&&s.parentNode.removeChild(s))}};function o7(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var lI=function(n){var e=document.head,t=n||e,i=document.createElement("style"),s=function(l){var c=Array.from(l.querySelectorAll("style[".concat(wm,"]")));return c[c.length-1]}(t),r=s!==void 0?s.nextSibling:null;i.setAttribute(wm,$P),i.setAttribute(eI,eS);var a=o7();return a&&i.setAttribute("nonce",a),t.insertBefore(i,r),i},l7=function(){function n(e){this.element=lI(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var i=document.styleSheets,s=0,r=i.length;s<r;s++){var a=i[s];if(a.ownerNode===t)return a}throw ty(17)}(this.element),this.length=0}return n.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},n}(),c7=function(){function n(e){this.element=lI(e),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var i=document.createTextNode(t);return this.element.insertBefore(i,this.nodes[e]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},n}(),u7=function(){function n(e){this.rules=[],this.length=0}return n.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},n.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},n}(),ED=Hb,f7={isServer:!Hb,useCSSOMInjection:!Hj},cI=function(){function n(e,t,i){e===void 0&&(e=Rm),t===void 0&&(t={});var s=this;this.options=_a(_a({},f7),e),this.gs=t,this.names=new Map(i),this.server=!!e.isServer,!this.server&&Hb&&ED&&(ED=!1,MD(this)),iw(this,function(){return function(r){for(var a=r.getTag(),l=a.length,c="",f=function(g){var v=function(S){return Gb.get(S)}(g);if(v===void 0)return"continue";var x=r.names.get(v),A=a.getGroup(g);if(x===void 0||!x.size||A.length===0)return"continue";var M="".concat(wm,".g").concat(g,'[id="').concat(v,'"]'),_="";x!==void 0&&x.forEach(function(S){S.length>0&&(_+="".concat(S,","))}),c+="".concat(A).concat(M,'{content:"').concat(_,'"}').concat(tw)},p=0;p<l;p++)f(p);return c}(s)})}return n.registerId=function(e){return r1(e)},n.prototype.rehydrate=function(){!this.server&&Hb&&MD(this)},n.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new n(_a(_a({},this.options),e),this.gs,t&&this.names||void 0)},n.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var i=t.useCSSOMInjection,s=t.target;return t.isServer?new u7(s):i?new l7(s):new c7(s)}(this.options),new t7(e)));var e},n.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},n.prototype.registerName=function(e,t){if(r1(e),this.names.has(e))this.names.get(e).add(t);else{var i=new Set;i.add(t),this.names.set(e,i)}},n.prototype.insertRules=function(e,t,i){this.registerName(e,t),this.getTag().insertRules(r1(e),i)},n.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.prototype.clearRules=function(e){this.getTag().clearGroup(r1(e)),this.clearNames(e)},n.prototype.clearTag=function(){this.tag=void 0},n}(),h7=/&/g,d7=/^\s*\/\/.*$/gm;function uI(n,e){return n.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(i){return"".concat(e," ").concat(i)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=uI(t.children,e)),t})}function p7(n){var e,t,i,s=Rm,r=s.options,a=r===void 0?Rm:r,l=s.plugins,c=l===void 0?tS:l,f=function(v,x,A){return A.startsWith(t)&&A.endsWith(t)&&A.replaceAll(t,"").length>0?".".concat(e):v},p=c.slice();p.push(function(v){v.type===JA&&v.value.includes("&")&&(v.props[0]=v.props[0].replace(h7,t).replace(i,f))}),a.prefix&&p.push(Fj),p.push(Uj);var g=function(v,x,A,M){x===void 0&&(x=""),A===void 0&&(A=""),M===void 0&&(M="&"),e=M,t=x,i=new RegExp("\\".concat(t,"\\b"),"g");var _=v.replace(d7,""),S=Lj(A||x?"".concat(A," ").concat(x," { ").concat(_," }"):_);a.namespace&&(S=uI(S,a.namespace));var w=[];return zb(S,Pj(p.concat(Ij(function(C){return w.push(C)})))),w};return g.hash=c.length?c.reduce(function(v,x){return x.name||ty(15),lm(v,x.name)},nI).toString():"",g}var m7=new cI,fT=p7(),fI=sa.createContext({shouldForwardProp:void 0,styleSheet:m7,stylis:fT});fI.Consumer;sa.createContext(void 0);function TD(){return z.useContext(fI)}var g7=function(){function n(e,t){var i=this;this.inject=function(s,r){r===void 0&&(r=fT);var a=i.name+r.hash;s.hasNameForId(i.id,a)||s.insertRules(i.id,a,r(i.rules,a,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,iw(this,function(){throw ty(12,String(i.name))})}return n.prototype.getName=function(e){return e===void 0&&(e=fT),this.name+e.hash},n}(),v7=function(n){return n>="A"&&n<="Z"};function CD(n){for(var e="",t=0;t<n.length;t++){var i=n[t];if(t===1&&i==="-"&&n[0]==="-")return n;v7(i)?e+="-"+i.toLowerCase():e+=i}return e.startsWith("ms-")?"-"+e:e}var hI=function(n){return n==null||n===!1||n===""},dI=function(n){var e,t,i=[];for(var s in n){var r=n[s];n.hasOwnProperty(s)&&!hI(r)&&(Array.isArray(r)&&r.isCss||Bm(r)?i.push("".concat(CD(s),":"),r,";"):Ev(r)?i.push.apply(i,Fb(Fb(["".concat(s," {")],dI(r),!1),["}"],!1)):i.push("".concat(CD(s),": ").concat((e=s,(t=r)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in zj||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return i};function fd(n,e,t,i){if(hI(n))return[];if(nw(n))return[".".concat(n.styledComponentId)];if(Bm(n)){if(!Bm(r=n)||r.prototype&&r.prototype.isReactComponent||!e)return[n];var s=n(e);return fd(s,e,t,i)}var r;return n instanceof g7?t?(n.inject(t,i),[n.getName(i)]):[n]:Ev(n)?dI(n):Array.isArray(n)?Array.prototype.concat.apply(tS,n.map(function(a){return fd(a,e,t,i)})):[n.toString()]}function y7(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(Bm(t)&&!nw(t))return!1}return!0}var x7=iI(eS),b7=function(){function n(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&y7(e),this.componentId=t,this.baseHash=lm(x7,t),this.baseStyle=i,cI.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,i){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,i):"";if(this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))s=Zh(s,this.staticRulesId);else{var r=_D(fd(this.rules,e,t,i)),a=cT(lm(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,a)){var l=i(r,".".concat(a),void 0,this.componentId);t.insertRules(this.componentId,a,l)}s=Zh(s,a),this.staticRulesId=a}else{for(var c=lm(this.baseHash,i.hash),f="",p=0;p<this.rules.length;p++){var g=this.rules[p];if(typeof g=="string")f+=g;else if(g){var v=_D(fd(g,e,t,i));c=lm(c,v+p),f+=v}}if(f){var x=cT(c>>>0);t.hasNameForId(this.componentId,x)||t.insertRules(this.componentId,x,i(f,".".concat(x),void 0,this.componentId)),s=Zh(s,x)}}return s},n}(),pI=sa.createContext(void 0);pI.Consumer;var $_={};function A7(n,e,t){var i=nw(n),s=n,r=!Q_(n),a=e.attrs,l=a===void 0?tS:a,c=e.componentId,f=c===void 0?function(B,N){var L=typeof B!="string"?"sc":yD(B);$_[L]=($_[L]||0)+1;var F="".concat(L,"-").concat(Xj(eS+L+$_[L]));return N?"".concat(N,"-").concat(F):F}(e.displayName,e.parentComponentId):c,p=e.displayName,g=p===void 0?function(B){return Q_(B)?"styled.".concat(B):"Styled(".concat(Yj(B),")")}(n):p,v=e.displayName&&e.componentId?"".concat(yD(e.displayName),"-").concat(e.componentId):e.componentId||f,x=i&&s.attrs?s.attrs.concat(l).filter(Boolean):l,A=e.shouldForwardProp;if(i&&s.shouldForwardProp){var M=s.shouldForwardProp;if(e.shouldForwardProp){var _=e.shouldForwardProp;A=function(B,N){return M(B,N)&&_(B,N)}}else A=M}var S=new b7(t,v,i?s.componentStyle:void 0);function w(B,N){return function(L,F,P){var U=L.attrs,I=L.componentStyle,X=L.defaultProps,re=L.foldedComponentIds,ee=L.styledComponentId,$=L.target,ae=sa.useContext(pI),j=TD(),Q=L.shouldForwardProp||j.shouldForwardProp,J=Gj(F,ae,X)||Rm,xe=function(Ue,Be,He){for(var et,Lt=_a(_a({},Be),{className:void 0,theme:He}),_t=0;_t<Ue.length;_t+=1){var jt=Bm(et=Ue[_t])?et(Lt):et;for(var Ye in jt)Lt[Ye]=Ye==="className"?Zh(Lt[Ye],jt[Ye]):Ye==="style"?_a(_a({},Lt[Ye]),jt[Ye]):jt[Ye]}return Be.className&&(Lt.className=Zh(Lt.className,Be.className)),Lt}(U,F,J),Y=xe.as||$,oe={};for(var be in xe)xe[be]===void 0||be[0]==="$"||be==="as"||be==="theme"&&xe.theme===J||(be==="forwardedAs"?oe.as=xe.forwardedAs:Q&&!Q(be,Y)||(oe[be]=xe[be]));var _e=function(Ue,Be){var He=TD(),et=Ue.generateAndInjectStyles(Be,He.styleSheet,He.stylis);return et}(I,xe),ue=Zh(re,ee);return _e&&(ue+=" "+_e),xe.className&&(ue+=" "+xe.className),oe[Q_(Y)&&!tI.has(Y)?"class":"className"]=ue,P&&(oe.ref=P),z.createElement(Y,oe)}(C,B,N)}w.displayName=g;var C=sa.forwardRef(w);return C.attrs=x,C.componentStyle=S,C.displayName=g,C.shouldForwardProp=A,C.foldedComponentIds=i?Zh(s.foldedComponentIds,s.styledComponentId):"",C.styledComponentId=v,C.target=i?s.target:n,Object.defineProperty(C,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(B){this._foldedDefaultProps=i?function(N){for(var L=[],F=1;F<arguments.length;F++)L[F-1]=arguments[F];for(var P=0,U=L;P<U.length;P++)uT(N,U[P],!0);return N}({},s.defaultProps,B):B}}),iw(C,function(){return".".concat(C.styledComponentId)}),r&&oI(C,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),C}function wD(n,e){for(var t=[n[0]],i=0,s=e.length;i<s;i+=1)t.push(e[i],n[i+1]);return t}var RD=function(n){return Object.assign(n,{isCss:!0})};function S7(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Bm(n)||Ev(n))return RD(fd(wD(tS,Fb([n],e,!0))));var i=n;return e.length===0&&i.length===1&&typeof i[0]=="string"?fd(i):RD(fd(wD(i,e)))}function hT(n,e,t){if(t===void 0&&(t=Rm),!e)throw ty(1,e);var i=function(s){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return n(e,t,S7.apply(void 0,Fb([s],r,!1)))};return i.attrs=function(s){return hT(n,e,_a(_a({},t),{attrs:Array.prototype.concat(t.attrs,s).filter(Boolean)}))},i.withConfig=function(s){return hT(n,e,_a(_a({},t),s))},i}var mI=function(n){return hT(A7,n)},gI=mI;tI.forEach(function(n){gI[n]=mI(n)});const _7=({className:n})=>H.jsx(M7,{className:n,children:H.jsxs("button",{children:[H.jsx("p",{children:"Reach Out"}),H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})}),M7=gI.div`
  button {
    padding: 0;
    margin: 0;
    border: none;
    background: none;
    cursor: pointer;
  }

  button {
    --primary-color: #888;
    --hovered-color:rgb(240, 240, 240);
    position: relative;
    display: flex;
    font-weight: 500;
    font-size: 20px;
    gap: 0.5rem;
    align-items: center;
    justify-content: center;
  }

  button p {
    margin: 0;
    position: relative;
    font-size: 14px;
    color: var(--primary-color);
  }

  button::after {
    position: absolute;
    content: "";
    width: 0;
    left: 0;
    bottom: -7px;
    background: var(--hovered-color);
    height: 2px;
    transition: 0.3s ease-out;
  }

  button p::before {
    position: absolute;
    /*   box-sizing: border-box; */
    content: "Reach Out";
    width: 0%;
    inset: 0;
    color: var(--hovered-color);
    overflow: hidden;
    transition: 0.3s ease-out;
  }

  button:hover::after {
    width: 100%;
  }

  button:hover p::before {
    width: 100%;
  }

  button:hover svg {
    transform: translateX(4px);
    color: var(--hovered-color);
  }

  button svg {
    color: var(--primary-color);
    transition: 0.2s;
    position: relative;
    width: 15px;
    transition-delay: 0.2s;
  }`;function BD({isMobile:n}){return H.jsxs("ul",{className:`nav-ul ${n?"flex flex-col space-y-6":""}`,children:[H.jsx("li",{className:"nav-li",children:H.jsx("a",{className:`nav-link ${n?"text-xl text-white/80 hover:text-white":""}`,href:"#home",children:"Home"})}),H.jsx("li",{className:"nav-li",children:H.jsx("a",{className:`nav-link ${n?"text-xl text-white/80 hover:text-white":""}`,href:"#work",children:"Simulation"})}),H.jsx("li",{className:"nav-li",children:H.jsx("a",{className:`nav-link ${n?"text-xl text-white/80 hover:text-white":""}`,href:"#about",children:"About"})}),"      ",H.jsx("li",{className:`nav-li ${n?"flex justify-center mt-6":""}`,children:H.jsx("a",{className:`nav-link ${n?"flex justify-center w-full":""}`,href:"#contact",children:H.jsx(_7,{className:n?"mx-auto":""})})})]})}const E7=()=>{const[n,e]=z.useState(!1);return H.jsxs("div",{className:"fixed inset-x-0 z-20 w-full backdrop-blur-lg bg-primary/40",children:[H.jsx("div",{className:"mx-auto c-space max-w-7xl",children:H.jsxs("div",{className:"flex items-center justify-between py-2 sm:py-0",children:[H.jsx("a",{href:"/",className:"text-xl font-bold transition-colors text-neutral-400 hover:text-white",children:H.jsx("img",{src:"/assets/logos/logo-gray.svg",alt:"Logo",className:"h-6"})}),H.jsx("button",{onClick:()=>e(!n),className:"flex cursor-pointer text-neutral-400 hover:text-white focus:outline-none sm:hidden",children:H.jsx("img",{src:n?"assets/close.svg":"assets/menu.svg",className:"w-6 h-6",alt:"toggle"})}),"          ",H.jsx("nav",{className:"hidden sm:flex",children:H.jsx(BD,{isMobile:!1})})]})}),"      ",n&&H.jsx(XP.div,{className:"block overflow-hidden text-center sm:hidden bg-black/80 backdrop-blur-md",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{maxHeight:"100vh"},transition:{duration:.5},children:H.jsx("nav",{className:"py-8 flex flex-col",children:H.jsx(BD,{isMobile:!0})})})]})};function $0(n){let e=n[0],t=n[1],i=n[2];return Math.sqrt(e*e+t*t+i*i)}function dT(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function T7(n,e,t,i){return n[0]=e,n[1]=t,n[2]=i,n}function DD(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function ND(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function C7(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function w7(n,e,t){return n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n}function eM(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function R7(n,e){let t=e[0]-n[0],i=e[1]-n[1],s=e[2]-n[2];return Math.sqrt(t*t+i*i+s*s)}function B7(n,e){let t=e[0]-n[0],i=e[1]-n[1],s=e[2]-n[2];return t*t+i*i+s*s}function LD(n){let e=n[0],t=n[1],i=n[2];return e*e+t*t+i*i}function D7(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function N7(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n}function pT(n,e){let t=e[0],i=e[1],s=e[2],r=t*t+i*i+s*s;return r>0&&(r=1/Math.sqrt(r)),n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n}function vI(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function OD(n,e,t){let i=e[0],s=e[1],r=e[2],a=t[0],l=t[1],c=t[2];return n[0]=s*c-r*l,n[1]=r*a-i*c,n[2]=i*l-s*a,n}function L7(n,e,t,i){let s=e[0],r=e[1],a=e[2];return n[0]=s+i*(t[0]-s),n[1]=r+i*(t[1]-r),n[2]=a+i*(t[2]-a),n}function O7(n,e,t,i,s){const r=Math.exp(-i*s);let a=e[0],l=e[1],c=e[2];return n[0]=t[0]+(a-t[0])*r,n[1]=t[1]+(l-t[1])*r,n[2]=t[2]+(c-t[2])*r,n}function U7(n,e,t){let i=e[0],s=e[1],r=e[2],a=t[3]*i+t[7]*s+t[11]*r+t[15];return a=a||1,n[0]=(t[0]*i+t[4]*s+t[8]*r+t[12])/a,n[1]=(t[1]*i+t[5]*s+t[9]*r+t[13])/a,n[2]=(t[2]*i+t[6]*s+t[10]*r+t[14])/a,n}function P7(n,e,t){let i=e[0],s=e[1],r=e[2],a=t[3]*i+t[7]*s+t[11]*r+t[15];return a=a||1,n[0]=(t[0]*i+t[4]*s+t[8]*r)/a,n[1]=(t[1]*i+t[5]*s+t[9]*r)/a,n[2]=(t[2]*i+t[6]*s+t[10]*r)/a,n}function I7(n,e,t){let i=e[0],s=e[1],r=e[2];return n[0]=i*t[0]+s*t[3]+r*t[6],n[1]=i*t[1]+s*t[4]+r*t[7],n[2]=i*t[2]+s*t[5]+r*t[8],n}function F7(n,e,t){let i=e[0],s=e[1],r=e[2],a=t[0],l=t[1],c=t[2],f=t[3],p=l*r-c*s,g=c*i-a*r,v=a*s-l*i,x=l*v-c*g,A=c*p-a*v,M=a*g-l*p,_=f*2;return p*=_,g*=_,v*=_,x*=2,A*=2,M*=2,n[0]=i+p+x,n[1]=s+g+A,n[2]=r+v+M,n}const z7=function(){const n=[0,0,0],e=[0,0,0];return function(t,i){dT(n,t),dT(e,i),pT(n,n),pT(e,e);let s=vI(n,e);return s>1?0:s<-1?Math.PI:Math.acos(s)}}();function H7(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]}class rl extends Array{constructor(e=0,t=e,i=e){return super(e,t,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,t=e,i=e){return e.length?this.copy(e):(T7(this,e,t,i),this)}copy(e){return dT(this,e),this}add(e,t){return t?DD(this,e,t):DD(this,this,e),this}sub(e,t){return t?ND(this,e,t):ND(this,this,e),this}multiply(e){return e.length?C7(this,this,e):eM(this,this,e),this}divide(e){return e.length?w7(this,this,e):eM(this,this,1/e),this}inverse(e=this){return N7(this,e),this}len(){return $0(this)}distance(e){return e?R7(this,e):$0(this)}squaredLen(){return LD(this)}squaredDistance(e){return e?B7(this,e):LD(this)}negate(e=this){return D7(this,e),this}cross(e,t){return t?OD(this,e,t):OD(this,this,e),this}scale(e){return eM(this,this,e),this}normalize(){return pT(this,this),this}dot(e){return vI(this,e)}equals(e){return H7(this,e)}applyMatrix3(e){return I7(this,this,e),this}applyMatrix4(e){return U7(this,this,e),this}scaleRotateMatrix4(e){return P7(this,this,e),this}applyQuaternion(e){return F7(this,this,e),this}angle(e){return z7(this,e)}lerp(e,t){return L7(this,this,e,t),this}smoothLerp(e,t,i){return O7(this,this,e,t,i),this}clone(){return new rl(this[0],this[1],this[2])}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],i=this[1],s=this[2];return this[0]=e[0]*t+e[4]*i+e[8]*s,this[1]=e[1]*t+e[5]*i+e[9]*s,this[2]=e[2]*t+e[6]*i+e[10]*s,this.normalize()}}const UD=new rl;let G7=1,V7=1,PD=!1;class k7{constructor(e,t={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=G7++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let i in t)this.addAttribute(i,t[i])}addAttribute(e,t){if(this.attributes[e]=t,t.id=V7++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else e==="index"?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){const t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((t,{name:i,type:s})=>{if(!this.attributes[i]){console.warn(`active attribute ${i} not being supplied`);return}const r=this.attributes[i];this.gl.bindBuffer(r.target,r.buffer),this.glState.boundBuffer=r.buffer;let a=1;s===35674&&(a=2),s===35675&&(a=3),s===35676&&(a=4);const l=r.size/a,c=a===1?0:a*a*4,f=a===1?0:a*4;for(let p=0;p<a;p++)this.gl.vertexAttribPointer(t+p,l,r.type,r.normalized,r.stride+c,r.offset+p*f),this.gl.enableVertexAttribArray(t+p),this.gl.renderer.vertexAttribDivisor(t+p,r.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:t=this.gl.TRIANGLES}){var s;this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((r,{name:a})=>{const l=this.attributes[a];l.needsUpdate&&this.updateAttribute(l)});let i=2;((s=this.attributes.index)==null?void 0:s.type)===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(t,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(t,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!PD)return console.warn("No position buffer data found to compute bounds"),PD=!0}computeBoundingBox(e){e||(e=this.getPosition());const t=e.data,i=e.size;this.bounds||(this.bounds={min:new rl,max:new rl,center:new rl,scale:new rl,radius:1/0});const s=this.bounds.min,r=this.bounds.max,a=this.bounds.center,l=this.bounds.scale;s.set(1/0),r.set(-1/0);for(let c=0,f=t.length;c<f;c+=i){const p=t[c],g=t[c+1],v=t[c+2];s.x=Math.min(p,s.x),s.y=Math.min(g,s.y),s.z=Math.min(v,s.z),r.x=Math.max(p,r.x),r.y=Math.max(g,r.y),r.z=Math.max(v,r.z)}l.sub(r,s),a.add(s,r).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const t=e.data,i=e.size;this.bounds||this.computeBoundingBox(e);let s=0;for(let r=0,a=t.length;r<a;r+=i)UD.fromArray(t,r),s=Math.max(s,this.bounds.center.squaredDistance(UD));this.bounds.radius=Math.sqrt(s)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let j7=1;const ID={};class X7{constructor(e,{vertex:t,fragment:i,uniforms:s={},transparent:r=!1,cullFace:a=e.BACK,frontFace:l=e.CCW,depthTest:c=!0,depthWrite:f=!0,depthFunc:p=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=s,this.id=j7++,t||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=r,this.cullFace=a,this.frontFace=l,this.depthTest=c,this.depthWrite=f,this.depthFunc=p,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:i})}setShaders({vertex:e,fragment:t}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${FD(e)}`)),t&&(this.gl.shaderSource(this.fragmentShader,t),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${FD(t)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let a=0;a<i;a++){let l=this.gl.getActiveUniform(this.program,a);this.uniformLocations.set(l,this.gl.getUniformLocation(this.program,l.name));const c=l.name.match(/(\w+)/g);l.uniformName=c[0],l.nameComponents=c.slice(1)}this.attributeLocations=new Map;const s=[],r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let a=0;a<r;a++){const l=this.gl.getActiveAttrib(this.program,a),c=this.gl.getAttribLocation(this.program,l.name);c!==-1&&(s[c]=l.name,this.attributeLocations.set(l,c))}this.attributeOrder=s.join("")}setBlendFunc(e,t,i,s){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=s,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,i){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=i}setStencilOp(e,t,i){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=i}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let t=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((s,r)=>{let a=this.uniforms[r.uniformName];for(const l of r.nameComponents){if(!a)break;if(l in a)a=a[l];else{if(Array.isArray(a.value))break;a=void 0;break}}if(!a)return zD(`Active uniform ${r.name} has not been supplied`);if(a&&a.value===void 0)return zD(`${r.name} uniform is missing a value parameter`);if(a.value.texture)return t=t+1,a.value.update(t),tM(this.gl,r.type,s,t);if(a.value.length&&a.value[0].texture){const l=[];return a.value.forEach(c=>{t=t+1,c.update(t),l.push(t)}),tM(this.gl,r.type,s,l)}tM(this.gl,r.type,s,a.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function tM(n,e,t,i){i=i.length?Y7(i):i;const s=n.renderer.state.uniformLocations.get(t);if(i.length)if(s===void 0||s.length!==i.length)n.renderer.state.uniformLocations.set(t,i.slice(0));else{if(W7(s,i))return;s.set?s.set(i):q7(s,i),n.renderer.state.uniformLocations.set(t,s)}else{if(s===i)return;n.renderer.state.uniformLocations.set(t,i)}switch(e){case 5126:return i.length?n.uniform1fv(t,i):n.uniform1f(t,i);case 35664:return n.uniform2fv(t,i);case 35665:return n.uniform3fv(t,i);case 35666:return n.uniform4fv(t,i);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return i.length?n.uniform1iv(t,i):n.uniform1i(t,i);case 35671:case 35667:return n.uniform2iv(t,i);case 35672:case 35668:return n.uniform3iv(t,i);case 35673:case 35669:return n.uniform4iv(t,i);case 35674:return n.uniformMatrix2fv(t,!1,i);case 35675:return n.uniformMatrix3fv(t,!1,i);case 35676:return n.uniformMatrix4fv(t,!1,i)}}function FD(n){let e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function Y7(n){const e=n.length,t=n[0].length;if(t===void 0)return n;const i=e*t;let s=ID[i];s||(ID[i]=s=new Float32Array(i));for(let r=0;r<e;r++)s.set(n[r],r*t);return s}function W7(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function q7(n,e){for(let t=0,i=n.length;t<i;t++)n[t]=e[t]}let nM=0;function zD(n){nM>100||(console.warn(n),nM++,nM>100&&console.warn("More than 100 program warnings - stopping logs."))}const iM=new rl;let K7=1;class J7{constructor({canvas:e=document.createElement("canvas"),width:t=300,height:i=150,dpr:s=1,alpha:r=!1,depth:a=!0,stencil:l=!1,antialias:c=!1,premultipliedAlpha:f=!1,preserveDrawingBuffer:p=!1,powerPreference:g="default",autoClear:v=!0,webgl:x=2}={}){const A={alpha:r,depth:a,stencil:l,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:p,powerPreference:g};this.dpr=s,this.alpha=r,this.color=!0,this.depth=a,this.stencil=l,this.premultipliedAlpha=f,this.autoClear=v,this.id=K7++,x===2&&(this.gl=e.getContext("webgl2",A)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",A)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(t,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t,i=0,s=0){this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=i,this.state.viewport.y=s,this.gl.viewport(i,s,e,t))}setScissor(e,t,i=0,s=0){this.gl.scissor(i,s,e,t)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,i,s){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===s||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=s,i!==void 0?this.gl.blendFuncSeparate(e,t,i,s):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,t!==void 0?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,i){this.state.stencilFunc===e&&this.state.stencilRef===t&&this.state.stencilFuncMask===i||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=i||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,i||0))}setStencilOp(e,t,i){this.state.stencilFail===e&&this.state.stencilDepthFail===t&&this.state.stencilDepthPass===i||(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=i,this.gl.stencilOp(e,t,i))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:t=null}={}){this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,i){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][i].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList({scene:e,camera:t,frustumCull:i,sort:s}){let r=[];if(t&&i&&t.updateFrustum(),e.traverse(a=>{if(!a.visible)return!0;a.draw&&(i&&a.frustumCulled&&t&&!t.frustumIntersectsMesh(a)||r.push(a))}),s){const a=[],l=[],c=[];r.forEach(f=>{f.program.transparent?f.program.depthTest?l.push(f):c.push(f):a.push(f),f.zDepth=0,!(f.renderOrder!==0||!f.program.depthTest||!t)&&(f.worldMatrix.getTranslation(iM),iM.applyMatrix4(t.projectionViewMatrix),f.zDepth=iM.z)}),a.sort(this.sortOpaque),l.sort(this.sortTransparent),c.sort(this.sortUI),r=a.concat(l,c)}return r}render({scene:e,camera:t,target:i=null,update:s=!0,sort:r=!0,frustumCull:a=!0,clear:l}){i===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(l||this.autoClear&&l!==!1)&&(this.depth&&(!i||i.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!i||i.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),s&&e.updateMatrixWorld(),t&&t.updateMatrixWorld(),this.getRenderList({scene:e,camera:t,frustumCull:a,sort:r}).forEach(f=>{f.draw({camera:t})})}}function Z7(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function Q7(n,e,t,i,s){return n[0]=e,n[1]=t,n[2]=i,n[3]=s,n}function $7(n,e){let t=e[0],i=e[1],s=e[2],r=e[3],a=t*t+i*i+s*s+r*r;return a>0&&(a=1/Math.sqrt(a)),n[0]=t*a,n[1]=i*a,n[2]=s*a,n[3]=r*a,n}function eX(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}function tX(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function nX(n,e,t){t=t*.5;let i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function HD(n,e,t){let i=e[0],s=e[1],r=e[2],a=e[3],l=t[0],c=t[1],f=t[2],p=t[3];return n[0]=i*p+a*l+s*f-r*c,n[1]=s*p+a*c+r*l-i*f,n[2]=r*p+a*f+i*c-s*l,n[3]=a*p-i*l-s*c-r*f,n}function iX(n,e,t){t*=.5;let i=e[0],s=e[1],r=e[2],a=e[3],l=Math.sin(t),c=Math.cos(t);return n[0]=i*c+a*l,n[1]=s*c+r*l,n[2]=r*c-s*l,n[3]=a*c-i*l,n}function sX(n,e,t){t*=.5;let i=e[0],s=e[1],r=e[2],a=e[3],l=Math.sin(t),c=Math.cos(t);return n[0]=i*c-r*l,n[1]=s*c+a*l,n[2]=r*c+i*l,n[3]=a*c-s*l,n}function rX(n,e,t){t*=.5;let i=e[0],s=e[1],r=e[2],a=e[3],l=Math.sin(t),c=Math.cos(t);return n[0]=i*c+s*l,n[1]=s*c-i*l,n[2]=r*c+a*l,n[3]=a*c-r*l,n}function aX(n,e,t,i){let s=e[0],r=e[1],a=e[2],l=e[3],c=t[0],f=t[1],p=t[2],g=t[3],v,x,A,M,_;return x=s*c+r*f+a*p+l*g,x<0&&(x=-x,c=-c,f=-f,p=-p,g=-g),1-x>1e-6?(v=Math.acos(x),A=Math.sin(v),M=Math.sin((1-i)*v)/A,_=Math.sin(i*v)/A):(M=1-i,_=i),n[0]=M*s+_*c,n[1]=M*r+_*f,n[2]=M*a+_*p,n[3]=M*l+_*g,n}function oX(n,e){let t=e[0],i=e[1],s=e[2],r=e[3],a=t*t+i*i+s*s+r*r,l=a?1/a:0;return n[0]=-t*l,n[1]=-i*l,n[2]=-s*l,n[3]=r*l,n}function lX(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n}function cX(n,e){let t=e[0]+e[4]+e[8],i;if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,i=.5/i,n[0]=(e[5]-e[7])*i,n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[s*3+s]&&(s=2);let r=(s+1)%3,a=(s+2)%3;i=Math.sqrt(e[s*3+s]-e[r*3+r]-e[a*3+a]+1),n[s]=.5*i,i=.5/i,n[3]=(e[r*3+a]-e[a*3+r])*i,n[r]=(e[r*3+s]+e[s*3+r])*i,n[a]=(e[a*3+s]+e[s*3+a])*i}return n}function uX(n,e,t="YXZ"){let i=Math.sin(e[0]*.5),s=Math.cos(e[0]*.5),r=Math.sin(e[1]*.5),a=Math.cos(e[1]*.5),l=Math.sin(e[2]*.5),c=Math.cos(e[2]*.5);return t==="XYZ"?(n[0]=i*a*c+s*r*l,n[1]=s*r*c-i*a*l,n[2]=s*a*l+i*r*c,n[3]=s*a*c-i*r*l):t==="YXZ"?(n[0]=i*a*c+s*r*l,n[1]=s*r*c-i*a*l,n[2]=s*a*l-i*r*c,n[3]=s*a*c+i*r*l):t==="ZXY"?(n[0]=i*a*c-s*r*l,n[1]=s*r*c+i*a*l,n[2]=s*a*l+i*r*c,n[3]=s*a*c-i*r*l):t==="ZYX"?(n[0]=i*a*c-s*r*l,n[1]=s*r*c+i*a*l,n[2]=s*a*l-i*r*c,n[3]=s*a*c+i*r*l):t==="YZX"?(n[0]=i*a*c+s*r*l,n[1]=s*r*c+i*a*l,n[2]=s*a*l-i*r*c,n[3]=s*a*c-i*r*l):t==="XZY"&&(n[0]=i*a*c-s*r*l,n[1]=s*r*c-i*a*l,n[2]=s*a*l+i*r*c,n[3]=s*a*c+i*r*l),n}const fX=Z7,hX=Q7,dX=eX,pX=$7;class mX extends Array{constructor(e=0,t=0,i=0,s=1){super(e,t,i,s),this.onChange=()=>{},this._target=this;const r=["0","1","2","3"];return new Proxy(this,{set(a,l){const c=Reflect.set(...arguments);return c&&r.includes(l)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return tX(this._target),this.onChange(),this}set(e,t,i,s){return e.length?this.copy(e):(hX(this._target,e,t,i,s),this.onChange(),this)}rotateX(e){return iX(this._target,this._target,e),this.onChange(),this}rotateY(e){return sX(this._target,this._target,e),this.onChange(),this}rotateZ(e){return rX(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return oX(this._target,e),this.onChange(),this}conjugate(e=this._target){return lX(this._target,e),this.onChange(),this}copy(e){return fX(this._target,e),this.onChange(),this}normalize(e=this._target){return pX(this._target,e),this.onChange(),this}multiply(e,t){return t?HD(this._target,e,t):HD(this._target,this._target,e),this.onChange(),this}dot(e){return dX(this._target,e)}fromMatrix3(e){return cX(this._target,e),this.onChange(),this}fromEuler(e,t){return uX(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){return nX(this._target,e,t),this.onChange(),this}slerp(e,t){return aX(this._target,this._target,e,t),this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}const gX=1e-6;function vX(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function yX(n,e,t,i,s,r,a,l,c,f,p,g,v,x,A,M,_){return n[0]=e,n[1]=t,n[2]=i,n[3]=s,n[4]=r,n[5]=a,n[6]=l,n[7]=c,n[8]=f,n[9]=p,n[10]=g,n[11]=v,n[12]=x,n[13]=A,n[14]=M,n[15]=_,n}function xX(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function bX(n,e){let t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=e[9],v=e[10],x=e[11],A=e[12],M=e[13],_=e[14],S=e[15],w=t*l-i*a,C=t*c-s*a,B=t*f-r*a,N=i*c-s*l,L=i*f-r*l,F=s*f-r*c,P=p*M-g*A,U=p*_-v*A,I=p*S-x*A,X=g*_-v*M,re=g*S-x*M,ee=v*S-x*_,$=w*ee-C*re+B*X+N*I-L*U+F*P;return $?($=1/$,n[0]=(l*ee-c*re+f*X)*$,n[1]=(s*re-i*ee-r*X)*$,n[2]=(M*F-_*L+S*N)*$,n[3]=(v*L-g*F-x*N)*$,n[4]=(c*I-a*ee-f*U)*$,n[5]=(t*ee-s*I+r*U)*$,n[6]=(_*B-A*F-S*C)*$,n[7]=(p*F-v*B+x*C)*$,n[8]=(a*re-l*I+f*P)*$,n[9]=(i*I-t*re-r*P)*$,n[10]=(A*L-M*B+S*w)*$,n[11]=(g*B-p*L-x*w)*$,n[12]=(l*U-a*X-c*P)*$,n[13]=(t*X-i*U+s*P)*$,n[14]=(M*C-A*N-_*w)*$,n[15]=(p*N-g*C+v*w)*$,n):null}function yI(n){let e=n[0],t=n[1],i=n[2],s=n[3],r=n[4],a=n[5],l=n[6],c=n[7],f=n[8],p=n[9],g=n[10],v=n[11],x=n[12],A=n[13],M=n[14],_=n[15],S=e*a-t*r,w=e*l-i*r,C=e*c-s*r,B=t*l-i*a,N=t*c-s*a,L=i*c-s*l,F=f*A-p*x,P=f*M-g*x,U=f*_-v*x,I=p*M-g*A,X=p*_-v*A,re=g*_-v*M;return S*re-w*X+C*I+B*U-N*P+L*F}function GD(n,e,t){let i=e[0],s=e[1],r=e[2],a=e[3],l=e[4],c=e[5],f=e[6],p=e[7],g=e[8],v=e[9],x=e[10],A=e[11],M=e[12],_=e[13],S=e[14],w=e[15],C=t[0],B=t[1],N=t[2],L=t[3];return n[0]=C*i+B*l+N*g+L*M,n[1]=C*s+B*c+N*v+L*_,n[2]=C*r+B*f+N*x+L*S,n[3]=C*a+B*p+N*A+L*w,C=t[4],B=t[5],N=t[6],L=t[7],n[4]=C*i+B*l+N*g+L*M,n[5]=C*s+B*c+N*v+L*_,n[6]=C*r+B*f+N*x+L*S,n[7]=C*a+B*p+N*A+L*w,C=t[8],B=t[9],N=t[10],L=t[11],n[8]=C*i+B*l+N*g+L*M,n[9]=C*s+B*c+N*v+L*_,n[10]=C*r+B*f+N*x+L*S,n[11]=C*a+B*p+N*A+L*w,C=t[12],B=t[13],N=t[14],L=t[15],n[12]=C*i+B*l+N*g+L*M,n[13]=C*s+B*c+N*v+L*_,n[14]=C*r+B*f+N*x+L*S,n[15]=C*a+B*p+N*A+L*w,n}function AX(n,e,t){let i=t[0],s=t[1],r=t[2],a,l,c,f,p,g,v,x,A,M,_,S;return e===n?(n[12]=e[0]*i+e[4]*s+e[8]*r+e[12],n[13]=e[1]*i+e[5]*s+e[9]*r+e[13],n[14]=e[2]*i+e[6]*s+e[10]*r+e[14],n[15]=e[3]*i+e[7]*s+e[11]*r+e[15]):(a=e[0],l=e[1],c=e[2],f=e[3],p=e[4],g=e[5],v=e[6],x=e[7],A=e[8],M=e[9],_=e[10],S=e[11],n[0]=a,n[1]=l,n[2]=c,n[3]=f,n[4]=p,n[5]=g,n[6]=v,n[7]=x,n[8]=A,n[9]=M,n[10]=_,n[11]=S,n[12]=a*i+p*s+A*r+e[12],n[13]=l*i+g*s+M*r+e[13],n[14]=c*i+v*s+_*r+e[14],n[15]=f*i+x*s+S*r+e[15]),n}function SX(n,e,t){let i=t[0],s=t[1],r=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*s,n[5]=e[5]*s,n[6]=e[6]*s,n[7]=e[7]*s,n[8]=e[8]*r,n[9]=e[9]*r,n[10]=e[10]*r,n[11]=e[11]*r,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function _X(n,e,t,i){let s=i[0],r=i[1],a=i[2],l=Math.hypot(s,r,a),c,f,p,g,v,x,A,M,_,S,w,C,B,N,L,F,P,U,I,X,re,ee,$,ae;return Math.abs(l)<gX?null:(l=1/l,s*=l,r*=l,a*=l,c=Math.sin(t),f=Math.cos(t),p=1-f,g=e[0],v=e[1],x=e[2],A=e[3],M=e[4],_=e[5],S=e[6],w=e[7],C=e[8],B=e[9],N=e[10],L=e[11],F=s*s*p+f,P=r*s*p+a*c,U=a*s*p-r*c,I=s*r*p-a*c,X=r*r*p+f,re=a*r*p+s*c,ee=s*a*p+r*c,$=r*a*p-s*c,ae=a*a*p+f,n[0]=g*F+M*P+C*U,n[1]=v*F+_*P+B*U,n[2]=x*F+S*P+N*U,n[3]=A*F+w*P+L*U,n[4]=g*I+M*X+C*re,n[5]=v*I+_*X+B*re,n[6]=x*I+S*X+N*re,n[7]=A*I+w*X+L*re,n[8]=g*ee+M*$+C*ae,n[9]=v*ee+_*$+B*ae,n[10]=x*ee+S*$+N*ae,n[11]=A*ee+w*$+L*ae,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}function MX(n,e){return n[0]=e[12],n[1]=e[13],n[2]=e[14],n}function xI(n,e){let t=e[0],i=e[1],s=e[2],r=e[4],a=e[5],l=e[6],c=e[8],f=e[9],p=e[10];return n[0]=Math.hypot(t,i,s),n[1]=Math.hypot(r,a,l),n[2]=Math.hypot(c,f,p),n}function EX(n){let e=n[0],t=n[1],i=n[2],s=n[4],r=n[5],a=n[6],l=n[8],c=n[9],f=n[10];const p=e*e+t*t+i*i,g=s*s+r*r+a*a,v=l*l+c*c+f*f;return Math.sqrt(Math.max(p,g,v))}const bI=function(){const n=[1,1,1];return function(e,t){let i=n;xI(i,t);let s=1/i[0],r=1/i[1],a=1/i[2],l=t[0]*s,c=t[1]*r,f=t[2]*a,p=t[4]*s,g=t[5]*r,v=t[6]*a,x=t[8]*s,A=t[9]*r,M=t[10]*a,_=l+g+M,S=0;return _>0?(S=Math.sqrt(_+1)*2,e[3]=.25*S,e[0]=(v-A)/S,e[1]=(x-f)/S,e[2]=(c-p)/S):l>g&&l>M?(S=Math.sqrt(1+l-g-M)*2,e[3]=(v-A)/S,e[0]=.25*S,e[1]=(c+p)/S,e[2]=(x+f)/S):g>M?(S=Math.sqrt(1+g-l-M)*2,e[3]=(x-f)/S,e[0]=(c+p)/S,e[1]=.25*S,e[2]=(v+A)/S):(S=Math.sqrt(1+M-l-g)*2,e[3]=(c-p)/S,e[0]=(x+f)/S,e[1]=(v+A)/S,e[2]=.25*S),e}}();function TX(n,e,t,i){let s=$0([n[0],n[1],n[2]]);const r=$0([n[4],n[5],n[6]]),a=$0([n[8],n[9],n[10]]);yI(n)<0&&(s=-s),t[0]=n[12],t[1]=n[13],t[2]=n[14];const c=n.slice(),f=1/s,p=1/r,g=1/a;c[0]*=f,c[1]*=f,c[2]*=f,c[4]*=p,c[5]*=p,c[6]*=p,c[8]*=g,c[9]*=g,c[10]*=g,bI(e,c),i[0]=s,i[1]=r,i[2]=a}function CX(n,e,t,i){const s=n,r=e[0],a=e[1],l=e[2],c=e[3],f=r+r,p=a+a,g=l+l,v=r*f,x=r*p,A=r*g,M=a*p,_=a*g,S=l*g,w=c*f,C=c*p,B=c*g,N=i[0],L=i[1],F=i[2];return s[0]=(1-(M+S))*N,s[1]=(x+B)*N,s[2]=(A-C)*N,s[3]=0,s[4]=(x-B)*L,s[5]=(1-(v+S))*L,s[6]=(_+w)*L,s[7]=0,s[8]=(A+C)*F,s[9]=(_-w)*F,s[10]=(1-(v+M))*F,s[11]=0,s[12]=t[0],s[13]=t[1],s[14]=t[2],s[15]=1,s}function wX(n,e){let t=e[0],i=e[1],s=e[2],r=e[3],a=t+t,l=i+i,c=s+s,f=t*a,p=i*a,g=i*l,v=s*a,x=s*l,A=s*c,M=r*a,_=r*l,S=r*c;return n[0]=1-g-A,n[1]=p+S,n[2]=v-_,n[3]=0,n[4]=p-S,n[5]=1-f-A,n[6]=x+M,n[7]=0,n[8]=v+_,n[9]=x-M,n[10]=1-f-g,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function RX(n,e,t,i,s){let r=1/Math.tan(e/2),a=1/(i-s);return n[0]=r/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(s+i)*a,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*s*i*a,n[15]=0,n}function BX(n,e,t,i,s,r,a){let l=1/(e-t),c=1/(i-s),f=1/(r-a);return n[0]=-2*l,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*f,n[11]=0,n[12]=(e+t)*l,n[13]=(s+i)*c,n[14]=(a+r)*f,n[15]=1,n}function DX(n,e,t,i){let s=e[0],r=e[1],a=e[2],l=i[0],c=i[1],f=i[2],p=s-t[0],g=r-t[1],v=a-t[2],x=p*p+g*g+v*v;x===0?v=1:(x=1/Math.sqrt(x),p*=x,g*=x,v*=x);let A=c*v-f*g,M=f*p-l*v,_=l*g-c*p;return x=A*A+M*M+_*_,x===0&&(f?l+=1e-6:c?f+=1e-6:c+=1e-6,A=c*v-f*g,M=f*p-l*v,_=l*g-c*p,x=A*A+M*M+_*_),x=1/Math.sqrt(x),A*=x,M*=x,_*=x,n[0]=A,n[1]=M,n[2]=_,n[3]=0,n[4]=g*_-v*M,n[5]=v*A-p*_,n[6]=p*M-g*A,n[7]=0,n[8]=p,n[9]=g,n[10]=v,n[11]=0,n[12]=s,n[13]=r,n[14]=a,n[15]=1,n}function VD(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n}function kD(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n}function NX(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n}class Vb extends Array{constructor(e=1,t=0,i=0,s=0,r=0,a=1,l=0,c=0,f=0,p=0,g=1,v=0,x=0,A=0,M=0,_=1){return super(e,t,i,s,r,a,l,c,f,p,g,v,x,A,M,_),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,i,s,r,a,l,c,f,p,g,v,x,A,M,_){return e.length?this.copy(e):(yX(this,e,t,i,s,r,a,l,c,f,p,g,v,x,A,M,_),this)}translate(e,t=this){return AX(this,t,e),this}rotate(e,t,i=this){return _X(this,i,e,t),this}scale(e,t=this){return SX(this,t,typeof e=="number"?[e,e,e]:e),this}add(e,t){return t?VD(this,e,t):VD(this,this,e),this}sub(e,t){return t?kD(this,e,t):kD(this,this,e),this}multiply(e,t){return e.length?t?GD(this,e,t):GD(this,this,e):NX(this,this,e),this}identity(){return xX(this),this}copy(e){return vX(this,e),this}fromPerspective({fov:e,aspect:t,near:i,far:s}={}){return RX(this,e,t,i,s),this}fromOrthogonal({left:e,right:t,bottom:i,top:s,near:r,far:a}){return BX(this,e,t,i,s,r,a),this}fromQuaternion(e){return wX(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return bX(this,e),this}compose(e,t,i){return CX(this,e,t,i),this}decompose(e,t,i){return TX(this,e,t,i),this}getRotation(e){return bI(e,this),this}getTranslation(e){return MX(e,this),this}getScaling(e){return xI(e,this),this}getMaxScaleOnAxis(){return EX(this)}lookAt(e,t,i){return DX(this,e,t,i),this}determinant(){return yI(this)}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}function LX(n,e,t="YXZ"){return t==="XYZ"?(n[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(n[0]=Math.atan2(-e[9],e[10]),n[2]=Math.atan2(-e[4],e[0])):(n[0]=Math.atan2(e[6],e[5]),n[2]=0)):t==="YXZ"?(n[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(n[1]=Math.atan2(e[8],e[10]),n[2]=Math.atan2(e[1],e[5])):(n[1]=Math.atan2(-e[2],e[0]),n[2]=0)):t==="ZXY"?(n[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(n[1]=Math.atan2(-e[2],e[10]),n[2]=Math.atan2(-e[4],e[5])):(n[1]=0,n[2]=Math.atan2(e[1],e[0]))):t==="ZYX"?(n[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(n[0]=Math.atan2(e[6],e[10]),n[2]=Math.atan2(e[1],e[0])):(n[0]=0,n[2]=Math.atan2(-e[4],e[5]))):t==="YZX"?(n[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(n[0]=Math.atan2(-e[9],e[5]),n[1]=Math.atan2(-e[2],e[0])):(n[0]=0,n[1]=Math.atan2(e[8],e[10]))):t==="XZY"&&(n[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(n[0]=Math.atan2(e[6],e[5]),n[1]=Math.atan2(e[8],e[0])):(n[0]=Math.atan2(-e[9],e[10]),n[1]=0)),n}const jD=new Vb;let OX=class extends Array{constructor(e=0,t=e,i=e,s="YXZ"){super(e,t,i),this.order=s,this.onChange=()=>{},this._target=this;const r=["0","1","2"];return new Proxy(this,{set(a,l){const c=Reflect.set(...arguments);return c&&r.includes(l)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,t=e,i=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=i,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,t=this.order){return LX(this._target,e,t),this.onChange(),this}fromQuaternion(e,t=this.order,i){return jD.fromQuaternion(e),this._target.fromRotationMatrix(jD,t),i||this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}};class UX{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Vb,this.worldMatrix=new Vb,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new rl,this.quaternion=new mX,this.scale=new rl(1),this.rotation=new OX,this.up=new rl(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,t=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e,t=!0){~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e,t=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,i=this.children.length;t<i;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,i=this.children.length;t<i;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,t=!1){t?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function PX(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n}function IX(n,e){let t=e[0],i=e[1],s=e[2],r=e[3],a=t+t,l=i+i,c=s+s,f=t*a,p=i*a,g=i*l,v=s*a,x=s*l,A=s*c,M=r*a,_=r*l,S=r*c;return n[0]=1-g-A,n[3]=p-S,n[6]=v+_,n[1]=p+S,n[4]=1-f-A,n[7]=x-M,n[2]=v-_,n[5]=x+M,n[8]=1-f-g,n}function FX(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function zX(n,e,t,i,s,r,a,l,c,f){return n[0]=e,n[1]=t,n[2]=i,n[3]=s,n[4]=r,n[5]=a,n[6]=l,n[7]=c,n[8]=f,n}function HX(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function GX(n,e){let t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=p*a-l*f,v=-p*r+l*c,x=f*r-a*c,A=t*g+i*v+s*x;return A?(A=1/A,n[0]=g*A,n[1]=(-p*i+s*f)*A,n[2]=(l*i-s*a)*A,n[3]=v*A,n[4]=(p*t-s*c)*A,n[5]=(-l*t+s*r)*A,n[6]=x*A,n[7]=(-f*t+i*c)*A,n[8]=(a*t-i*r)*A,n):null}function XD(n,e,t){let i=e[0],s=e[1],r=e[2],a=e[3],l=e[4],c=e[5],f=e[6],p=e[7],g=e[8],v=t[0],x=t[1],A=t[2],M=t[3],_=t[4],S=t[5],w=t[6],C=t[7],B=t[8];return n[0]=v*i+x*a+A*f,n[1]=v*s+x*l+A*p,n[2]=v*r+x*c+A*g,n[3]=M*i+_*a+S*f,n[4]=M*s+_*l+S*p,n[5]=M*r+_*c+S*g,n[6]=w*i+C*a+B*f,n[7]=w*s+C*l+B*p,n[8]=w*r+C*c+B*g,n}function VX(n,e,t){let i=e[0],s=e[1],r=e[2],a=e[3],l=e[4],c=e[5],f=e[6],p=e[7],g=e[8],v=t[0],x=t[1];return n[0]=i,n[1]=s,n[2]=r,n[3]=a,n[4]=l,n[5]=c,n[6]=v*i+x*a+f,n[7]=v*s+x*l+p,n[8]=v*r+x*c+g,n}function kX(n,e,t){let i=e[0],s=e[1],r=e[2],a=e[3],l=e[4],c=e[5],f=e[6],p=e[7],g=e[8],v=Math.sin(t),x=Math.cos(t);return n[0]=x*i+v*a,n[1]=x*s+v*l,n[2]=x*r+v*c,n[3]=x*a-v*i,n[4]=x*l-v*s,n[5]=x*c-v*r,n[6]=f,n[7]=p,n[8]=g,n}function jX(n,e,t){let i=t[0],s=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=s*e[3],n[4]=s*e[4],n[5]=s*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function XX(n,e){let t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=e[9],v=e[10],x=e[11],A=e[12],M=e[13],_=e[14],S=e[15],w=t*l-i*a,C=t*c-s*a,B=t*f-r*a,N=i*c-s*l,L=i*f-r*l,F=s*f-r*c,P=p*M-g*A,U=p*_-v*A,I=p*S-x*A,X=g*_-v*M,re=g*S-x*M,ee=v*S-x*_,$=w*ee-C*re+B*X+N*I-L*U+F*P;return $?($=1/$,n[0]=(l*ee-c*re+f*X)*$,n[1]=(c*I-a*ee-f*U)*$,n[2]=(a*re-l*I+f*P)*$,n[3]=(s*re-i*ee-r*X)*$,n[4]=(t*ee-s*I+r*U)*$,n[5]=(i*I-t*re-r*P)*$,n[6]=(M*F-_*L+S*N)*$,n[7]=(_*B-A*F-S*C)*$,n[8]=(A*L-M*B+S*w)*$,n):null}class YX extends Array{constructor(e=1,t=0,i=0,s=0,r=1,a=0,l=0,c=0,f=1){return super(e,t,i,s,r,a,l,c,f),this}set(e,t,i,s,r,a,l,c,f){return e.length?this.copy(e):(zX(this,e,t,i,s,r,a,l,c,f),this)}translate(e,t=this){return VX(this,t,e),this}rotate(e,t=this){return kX(this,t,e),this}scale(e,t=this){return jX(this,t,e),this}multiply(e,t){return t?XD(this,e,t):XD(this,this,e),this}identity(){return HX(this),this}copy(e){return FX(this,e),this}fromMatrix4(e){return PX(this,e),this}fromQuaternion(e){return IX(this,e),this}fromBasis(e,t,i){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],i[0],i[1],i[2]),this}inverse(e=this){return GX(this,e),this}getNormalMatrix(e){return XX(this,e),this}}let WX=0,qX=class extends UX{constructor(e,{geometry:t,program:i,mode:s=e.TRIANGLES,frustumCulled:r=!0,renderOrder:a=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=WX++,this.geometry=t,this.program=i,this.mode=s,this.frustumCulled=r,this.renderOrder=a,this.modelViewMatrix=new Vb,this.normalMatrix=new YX,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}));let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}))}};const YD={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function WD(n){n.length===4&&(n=n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e||console.warn(`Unable to convert hex string ${n} to rgb values`),[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]}function KX(n){return n=parseInt(n),[(n>>16&255)/255,(n>>8&255)/255,(n&255)/255]}function qD(n){return n===void 0?[0,0,0]:arguments.length===3?arguments:isNaN(n)?n[0]==="#"?WD(n):YD[n.toLowerCase()]?WD(YD[n.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):KX(n)}let KD=class extends Array{constructor(e){return Array.isArray(e)?super(...e):super(...qD(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(e){this[0]=e}set g(e){this[1]=e}set b(e){this[2]=e}set(e){return Array.isArray(e)?this.copy(e):this.copy(qD(...arguments))}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this}},JX=class extends k7{constructor(e,{attributes:t={}}={}){Object.assign(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,t)}};const ZX=`#version 300 es
in vec2 position;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
}
`,QX=`#version 300 es
precision highp float;

uniform float uTime;
uniform float uAmplitude;
uniform vec3 uColorStops[3];
uniform vec2 uResolution;
uniform float uBlend;

out vec4 fragColor;

vec3 permute(vec3 x) {
  return mod(((x * 34.0) + 1.0) * x, 289.0);
}

float snoise(vec2 v){
  const vec4 C = vec4(
      0.211324865405187, 0.366025403784439,
      -0.577350269189626, 0.024390243902439
  );
  vec2 i  = floor(v + dot(v, C.yy));
  vec2 x0 = v - i + dot(i, C.xx);
  vec2 i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
  vec4 x12 = x0.xyxy + C.xxzz;
  x12.xy -= i1;
  i = mod(i, 289.0);

  vec3 p = permute(
      permute(i.y + vec3(0.0, i1.y, 1.0))
    + i.x + vec3(0.0, i1.x, 1.0)
  );

  vec3 m = max(
      0.5 - vec3(
          dot(x0, x0),
          dot(x12.xy, x12.xy),
          dot(x12.zw, x12.zw)
      ), 
      0.0
  );
  m = m * m;
  m = m * m;

  vec3 x = 2.0 * fract(p * C.www) - 1.0;
  vec3 h = abs(x) - 0.5;
  vec3 ox = floor(x + 0.5);
  vec3 a0 = x - ox;
  m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);

  vec3 g;
  g.x  = a0.x  * x0.x  + h.x  * x0.y;
  g.yz = a0.yz * x12.xz + h.yz * x12.yw;
  return 130.0 * dot(m, g);
}

struct ColorStop {
  vec3 color;
  float position;
};

#define COLOR_RAMP(colors, factor, finalColor) {                int index = 0;                                              for (int i = 0; i < 2; i++) {                                    ColorStop currentColor = colors[i];                         bool isInBetween = currentColor.position <= factor;         index = int(mix(float(index), float(i), float(isInBetween)));   }                                                           ColorStop currentColor = colors[index];                     ColorStop nextColor = colors[index + 1];                    float range = nextColor.position - currentColor.position;   float lerpFactor = (factor - currentColor.position) / range;   finalColor = mix(currentColor.color, nextColor.color, lerpFactor); }

void main() {
  vec2 uv = gl_FragCoord.xy / uResolution;
  
  ColorStop colors[3];
  colors[0] = ColorStop(uColorStops[0], 0.0);
  colors[1] = ColorStop(uColorStops[1], 0.5);
  colors[2] = ColorStop(uColorStops[2], 1.0);
  
  vec3 rampColor;
  COLOR_RAMP(colors, uv.x, rampColor);
  
  float height = snoise(vec2(uv.x * 2.0 + uTime * 0.1, uTime * 0.25)) * 0.5 * uAmplitude;
  height = exp(height);
  height = (uv.y * 2.0 - height + 0.2);
  float intensity = 0.6 * height;
  
  // midPoint is fixed; uBlend controls the transition width.
  float midPoint = 0.20;
  float auroraAlpha = smoothstep(midPoint - uBlend * 0.5, midPoint + uBlend * 0.5, intensity);
  
  vec3 auroraColor = intensity * rampColor;
  
  // Premultiplied alpha output.
  fragColor = vec4(auroraColor * auroraAlpha, auroraAlpha);
}
`;function $X(n){const{colorStops:e=["#00d8ff","#7cff67","#00d8ff"],amplitude:t=1,blend:i=.5}=n,s=z.useRef(n);s.current=n;const r=z.useRef(null);return z.useEffect(()=>{const a=r.current;if(!a)return;const l=new J7({alpha:!0,premultipliedAlpha:!0,antialias:!0}),c=l.gl;c.clearColor(0,0,0,0),c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),c.canvas.style.backgroundColor="transparent";let f;function p(){if(!a)return;const _=a.offsetWidth,S=a.offsetHeight;l.setSize(_,S),f&&(f.uniforms.uResolution.value=[_,S])}window.addEventListener("resize",p);const g=new JX(c);g.attributes.uv&&delete g.attributes.uv;const v=e.map(_=>{const S=new KD(_);return[S.r,S.g,S.b]});f=new X7(c,{vertex:ZX,fragment:QX,uniforms:{uTime:{value:0},uAmplitude:{value:t},uColorStops:{value:v},uResolution:{value:[a.offsetWidth,a.offsetHeight]},uBlend:{value:i}}});const x=new qX(c,{geometry:g,program:f});a.appendChild(c.canvas);let A=0;const M=_=>{A=requestAnimationFrame(M);const{time:S=_*.01,speed:w=1}=s.current;f.uniforms.uTime.value=S*w*.1,f.uniforms.uAmplitude.value=s.current.amplitude??1,f.uniforms.uBlend.value=s.current.blend??i;const C=s.current.colorStops??e;f.uniforms.uColorStops.value=C.map(B=>{const N=new KD(B);return[N.r,N.g,N.b]}),l.render({scene:x})};return A=requestAnimationFrame(M),p(),()=>{var _;cancelAnimationFrame(A),window.removeEventListener("resize",p),a&&c.canvas.parentNode===a&&a.removeChild(c.canvas),(_=c.getExtension("WEBGL_lose_context"))==null||_.loseContext()}},[t]),H.jsx("div",{ref:r,className:"w-full h-full"})}const AI=z.createContext({});function nS(n){const e=z.useRef(null);return e.current===null&&(e.current=n()),e.current}const sw=typeof window<"u",rw=sw?z.useLayoutEffect:z.useEffect,aw=z.createContext(null);function ow(n,e){n.indexOf(e)===-1&&n.push(e)}function lw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const cc=(n,e,t)=>t>e?e:t<n?n:t;let eY=()=>{},cw=()=>{};const tu={},SI=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function _I(n){return typeof n=="object"&&n!==null}const MI=n=>/^0[^.\s]+$/u.test(n);function uw(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ea=n=>n,tY=(n,e)=>t=>e(n(t)),ny=(...n)=>n.reduce(tY),Dm=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class fw{constructor(){this.subscriptions=[]}add(e){return ow(this.subscriptions,e),()=>lw(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ic=n=>n*1e3,sc=n=>n/1e3;function hw(n,e){return e?n*(1e3/e):0}const EI=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,nY=1e-7,iY=12;function sY(n,e,t,i,s){let r,a,l=0;do a=e+(t-e)/2,r=EI(a,i,s)-n,r>0?t=a:e=a;while(Math.abs(r)>nY&&++l<iY);return a}function iy(n,e,t,i){if(n===e&&t===i)return Ea;const s=r=>sY(r,0,1,n,t);return r=>r===0||r===1?r:EI(s(r),e,i)}const TI=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,CI=n=>e=>1-n(1-e),wI=iy(.33,1.53,.69,.99),dw=CI(wI),RI=TI(dw),BI=n=>(n*=2)<1?.5*dw(n):.5*(2-Math.pow(2,-10*(n-1))),pw=n=>1-Math.sin(Math.acos(n)),DI=CI(pw),NI=TI(pw),rY=iy(.42,0,1,1),aY=iy(0,0,.58,1),LI=iy(.42,0,.58,1),oY=n=>Array.isArray(n)&&typeof n[0]!="number",OI=n=>Array.isArray(n)&&typeof n[0]=="number",lY={linear:Ea,easeIn:rY,easeInOut:LI,easeOut:aY,circIn:pw,circInOut:NI,circOut:DI,backIn:dw,backInOut:RI,backOut:wI,anticipate:BI},cY=n=>typeof n=="string",JD=n=>{if(OI(n)){cw(n.length===4);const[e,t,i,s]=n;return iy(e,t,i,s)}else if(cY(n))return lY[n];return n},a1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function uY(n,e){let t=new Set,i=new Set,s=!1,r=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(p){a.has(p)&&(f.schedule(p),n()),p(l)}const f={schedule:(p,g=!1,v=!1)=>{const A=v&&s?t:i;return g&&a.add(p),A.has(p)||A.add(p),p},cancel:p=>{i.delete(p),a.delete(p)},process:p=>{if(l=p,s){r=!0;return}s=!0,[t,i]=[i,t],t.forEach(c),t.clear(),s=!1,r&&(r=!1,f.process(p))}};return f}const fY=40;function UI(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,a=a1.reduce((C,B)=>(C[B]=uY(r),C),{}),{setup:l,read:c,resolveKeyframes:f,preUpdate:p,update:g,preRender:v,render:x,postRender:A}=a,M=()=>{const C=tu.useManualTiming?s.timestamp:performance.now();t=!1,tu.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(C-s.timestamp,fY),1)),s.timestamp=C,s.isProcessing=!0,l.process(s),c.process(s),f.process(s),p.process(s),g.process(s),v.process(s),x.process(s),A.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(M))},_=()=>{t=!0,i=!0,s.isProcessing||n(M)};return{schedule:a1.reduce((C,B)=>{const N=a[B];return C[B]=(L,F=!1,P=!1)=>(t||_(),N.schedule(L,F,P)),C},{}),cancel:C=>{for(let B=0;B<a1.length;B++)a[a1[B]].cancel(C)},state:s,steps:a}}const{schedule:gi,cancel:fl,state:Js,steps:sM}=UI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ea,!0);let Ab;function hY(){Ab=void 0}const Ma={now:()=>(Ab===void 0&&Ma.set(Js.isProcessing||tu.useManualTiming?Js.timestamp:performance.now()),Ab),set:n=>{Ab=n,queueMicrotask(hY)}},PI=n=>e=>typeof e=="string"&&e.startsWith(n),mw=PI("--"),dY=PI("var(--"),gw=n=>dY(n)?pY.test(n.split("/*")[0].trim()):!1,pY=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Km={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Tv={...Km,transform:n=>cc(0,1,n)},o1={...Km,default:1},ev=n=>Math.round(n*1e5)/1e5,vw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mY(n){return n==null}const gY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yw=(n,e)=>t=>!!(typeof t=="string"&&gY.test(t)&&t.startsWith(n)||e&&!mY(t)&&Object.prototype.hasOwnProperty.call(t,e)),II=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,r,a,l]=i.match(vw);return{[n]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},vY=n=>cc(0,255,n),rM={...Km,transform:n=>Math.round(vY(n))},Qh={test:yw("rgb","red"),parse:II("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+rM.transform(n)+", "+rM.transform(e)+", "+rM.transform(t)+", "+ev(Tv.transform(i))+")"};function yY(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const mT={test:yw("#"),parse:yY,transform:Qh.transform},sy=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),uf=sy("deg"),rc=sy("%"),on=sy("px"),xY=sy("vh"),bY=sy("vw"),ZD={...rc,parse:n=>rc.parse(n)/100,transform:n=>rc.transform(n*100)},cm={test:yw("hsl","hue"),parse:II("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+rc.transform(ev(e))+", "+rc.transform(ev(t))+", "+ev(Tv.transform(i))+")"},Br={test:n=>Qh.test(n)||mT.test(n)||cm.test(n),parse:n=>Qh.test(n)?Qh.parse(n):cm.test(n)?cm.parse(n):mT.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Qh.transform(n):cm.transform(n)},AY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function SY(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(vw))==null?void 0:e.length)||0)+(((t=n.match(AY))==null?void 0:t.length)||0)>0}const FI="number",zI="color",_Y="var",MY="var(",QD="${}",EY=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cv(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let r=0;const l=e.replace(EY,c=>(Br.test(c)?(i.color.push(r),s.push(zI),t.push(Br.parse(c))):c.startsWith(MY)?(i.var.push(r),s.push(_Y),t.push(c)):(i.number.push(r),s.push(FI),t.push(parseFloat(c))),++r,QD)).split(QD);return{values:t,split:l,indexes:i,types:s}}function HI(n){return Cv(n).values}function GI(n){const{split:e,types:t}=Cv(n),i=e.length;return s=>{let r="";for(let a=0;a<i;a++)if(r+=e[a],s[a]!==void 0){const l=t[a];l===FI?r+=ev(s[a]):l===zI?r+=Br.transform(s[a]):r+=s[a]}return r}}const TY=n=>typeof n=="number"?0:n;function CY(n){const e=HI(n);return GI(n)(e.map(TY))}const vf={test:SY,parse:HI,createTransformer:GI,getAnimatableNone:CY};function aM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function wY({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,r=0,a=0;if(!e)s=r=a=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;s=aM(c,l,n+1/3),r=aM(c,l,n),a=aM(c,l,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:i}}function kb(n,e){return t=>t>0?e:n}const $i=(n,e,t)=>n+(e-n)*t,oM=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},RY=[mT,Qh,cm],BY=n=>RY.find(e=>e.test(n));function $D(n){const e=BY(n);if(!e)return!1;let t=e.parse(n);return e===cm&&(t=wY(t)),t}const e3=(n,e)=>{const t=$D(n),i=$D(e);if(!t||!i)return kb(n,e);const s={...t};return r=>(s.red=oM(t.red,i.red,r),s.green=oM(t.green,i.green,r),s.blue=oM(t.blue,i.blue,r),s.alpha=$i(t.alpha,i.alpha,r),Qh.transform(s))},gT=new Set(["none","hidden"]);function DY(n,e){return gT.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function NY(n,e){return t=>$i(n,e,t)}function xw(n){return typeof n=="number"?NY:typeof n=="string"?gw(n)?kb:Br.test(n)?e3:UY:Array.isArray(n)?VI:typeof n=="object"?Br.test(n)?e3:LY:kb}function VI(n,e){const t=[...n],i=t.length,s=n.map((r,a)=>xw(r)(r,e[a]));return r=>{for(let a=0;a<i;a++)t[a]=s[a](r);return t}}function LY(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=xw(n[s])(n[s],e[s]));return s=>{for(const r in i)t[r]=i[r](s);return t}}function OY(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],a=n.indexes[r][i[r]],l=n.values[a]??0;t[s]=l,i[r]++}return t}const UY=(n,e)=>{const t=vf.createTransformer(e),i=Cv(n),s=Cv(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?gT.has(n)&&!s.values.length||gT.has(e)&&!i.values.length?DY(n,e):ny(VI(OY(i,s),s.values),t):kb(n,e)};function kI(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?$i(n,e,t):xw(n)(n,e)}const PY=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>gi.update(e,t),stop:()=>fl(e),now:()=>Js.isProcessing?Js.timestamp:Ma.now()}},jI=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let r=0;r<s;r++)i+=n(r/(s-1))+", ";return`linear(${i.substring(0,i.length-2)})`},jb=2e4;function bw(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<jb;)e+=t,i=n.next(e);return e>=jb?1/0:e}function IY(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(bw(i),jb);return{type:"keyframes",ease:r=>i.next(s*r).value/e,duration:sc(s)}}const FY=5;function XI(n,e,t){const i=Math.max(e-FY,0);return hw(t-n(i),e-i)}const ls={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},t3=.001;function zY({duration:n=ls.duration,bounce:e=ls.bounce,velocity:t=ls.velocity,mass:i=ls.mass}){let s,r,a=1-e;a=cc(ls.minDamping,ls.maxDamping,a),n=cc(ls.minDuration,ls.maxDuration,sc(n)),a<1?(s=f=>{const p=f*a,g=p*n,v=p-t,x=vT(f,a),A=Math.exp(-g);return t3-v/x*A},r=f=>{const g=f*a*n,v=g*t+t,x=Math.pow(a,2)*Math.pow(f,2)*n,A=Math.exp(-g),M=vT(Math.pow(f,2),a);return(-s(f)+t3>0?-1:1)*((v-x)*A)/M}):(s=f=>{const p=Math.exp(-f*n),g=(f-t)*n+1;return-.001+p*g},r=f=>{const p=Math.exp(-f*n),g=(t-f)*(n*n);return p*g});const l=5/n,c=GY(s,r,l);if(n=ic(n),isNaN(c))return{stiffness:ls.stiffness,damping:ls.damping,duration:n};{const f=Math.pow(c,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:n}}}const HY=12;function GY(n,e,t){let i=t;for(let s=1;s<HY;s++)i=i-n(i)/e(i);return i}function vT(n,e){return n*Math.sqrt(1-e*e)}const VY=["duration","bounce"],kY=["stiffness","damping","mass"];function n3(n,e){return e.some(t=>n[t]!==void 0)}function jY(n){let e={velocity:ls.velocity,stiffness:ls.stiffness,damping:ls.damping,mass:ls.mass,isResolvedFromDuration:!1,...n};if(!n3(n,kY)&&n3(n,VY))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,r=2*cc(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:ls.mass,stiffness:s,damping:r}}else{const t=zY(n);e={...e,...t,mass:ls.mass},e.isResolvedFromDuration=!0}return e}function Xb(n=ls.visualDuration,e=ls.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const r=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],l={done:!1,value:r},{stiffness:c,damping:f,mass:p,duration:g,velocity:v,isResolvedFromDuration:x}=jY({...t,velocity:-sc(t.velocity||0)}),A=v||0,M=f/(2*Math.sqrt(c*p)),_=a-r,S=sc(Math.sqrt(c/p)),w=Math.abs(_)<5;i||(i=w?ls.restSpeed.granular:ls.restSpeed.default),s||(s=w?ls.restDelta.granular:ls.restDelta.default);let C;if(M<1){const N=vT(S,M);C=L=>{const F=Math.exp(-M*S*L);return a-F*((A+M*S*_)/N*Math.sin(N*L)+_*Math.cos(N*L))}}else if(M===1)C=N=>a-Math.exp(-S*N)*(_+(A+S*_)*N);else{const N=S*Math.sqrt(M*M-1);C=L=>{const F=Math.exp(-M*S*L),P=Math.min(N*L,300);return a-F*((A+M*S*_)*Math.sinh(P)+N*_*Math.cosh(P))/N}}const B={calculatedDuration:x&&g||null,next:N=>{const L=C(N);if(x)l.done=N>=g;else{let F=N===0?A:0;M<1&&(F=N===0?ic(A):XI(C,N,L));const P=Math.abs(F)<=i,U=Math.abs(a-L)<=s;l.done=P&&U}return l.value=l.done?a:L,l},toString:()=>{const N=Math.min(bw(B),jb),L=jI(F=>B.next(N*F).value,N,30);return N+"ms "+L},toTransition:()=>{}};return B}Xb.applyToOptions=n=>{const e=IY(n,100,Xb);return n.ease=e.ease,n.duration=ic(e.duration),n.type="keyframes",n};function yT({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:l,max:c,restDelta:f=.5,restSpeed:p}){const g=n[0],v={done:!1,value:g},x=P=>l!==void 0&&P<l||c!==void 0&&P>c,A=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let M=t*e;const _=g+M,S=a===void 0?_:a(_);S!==_&&(M=S-g);const w=P=>-M*Math.exp(-P/i),C=P=>S+w(P),B=P=>{const U=w(P),I=C(P);v.done=Math.abs(U)<=f,v.value=v.done?S:I};let N,L;const F=P=>{x(v.value)&&(N=P,L=Xb({keyframes:[v.value,A(v.value)],velocity:XI(C,P,v.value),damping:s,stiffness:r,restDelta:f,restSpeed:p}))};return F(0),{calculatedDuration:null,next:P=>{let U=!1;return!L&&N===void 0&&(U=!0,B(P),F(P)),N!==void 0&&P>=N?L.next(P-N):(!U&&B(P),v)}}}function XY(n,e,t){const i=[],s=t||tu.mix||kI,r=n.length-1;for(let a=0;a<r;a++){let l=s(n[a],n[a+1]);if(e){const c=Array.isArray(e)?e[a]||Ea:e;l=ny(c,l)}i.push(l)}return i}function Aw(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const r=n.length;if(cw(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const l=XY(e,i,s),c=l.length,f=p=>{if(a&&p<n[0])return e[0];let g=0;if(c>1)for(;g<n.length-2&&!(p<n[g+1]);g++);const v=Dm(n[g],n[g+1],p);return l[g](v)};return t?p=>f(cc(n[0],n[r-1],p)):f}function YY(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=Dm(0,e,i);n.push($i(t,1,s))}}function YI(n){const e=[0];return YY(e,n.length-1),e}function WY(n,e){return n.map(t=>t*e)}function qY(n,e){return n.map(()=>e||LI).splice(0,n.length-1)}function tv({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=oY(i)?i.map(JD):JD(i),r={done:!1,value:e[0]},a=WY(t&&t.length===e.length?t:YI(e),n),l=Aw(a,e,{ease:Array.isArray(s)?s:qY(e,s)});return{calculatedDuration:n,next:c=>(r.value=l(c),r.done=c>=n,r)}}const KY=n=>n!==null;function Sw(n,{repeat:e,repeatType:t="loop"},i,s=1){const r=n.filter(KY),l=s<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!l||i===void 0?r[l]:i}const JY={decay:yT,inertia:yT,tween:tv,keyframes:tv,spring:Xb};function WI(n){typeof n.type=="string"&&(n.type=JY[n.type])}class _w{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const ZY=n=>n/100;class iS extends _w{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:t}=this.options;t&&t.updatedAt!==Ma.now()&&this.tick(Ma.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;WI(e);const{type:t=tv,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=e;let{keyframes:l}=e;const c=t||tv;c!==tv&&typeof l[0]!="number"&&(this.mixKeyframes=ny(ZY,kI(l[0],l[1])),l=[0,100]);const f=c({...e,keyframes:l});r==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=bw(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:p,repeat:g,repeatType:v,repeatDelay:x,type:A,onUpdate:M,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const S=this.currentTime-f*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?S<0:S>s;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let C=this.currentTime,B=i;if(g){const P=Math.min(this.currentTime,s)/l;let U=Math.floor(P),I=P%1;!I&&P>=1&&(I=1),I===1&&U--,U=Math.min(U,g+1),!!(U%2)&&(v==="reverse"?(I=1-I,x&&(I-=x/l)):v==="mirror"&&(B=a)),C=cc(0,1,I)*l}const N=w?{done:!1,value:p[0]}:B.next(C);r&&(N.value=r(N.value));let{done:L}=N;!w&&c!==null&&(L=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return F&&A!==yT&&(N.value=Sw(p,this.options,_,this.speed)),M&&M(N.value),F&&this.finish(),N}then(e,t){return this.finished.then(e,t)}get duration(){return sc(this.calculatedDuration)}get time(){return sc(this.currentTime)}set time(e){var t;e=ic(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ma.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=sc(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:e=PY,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ma.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function QY(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const $h=n=>n*180/Math.PI,xT=n=>{const e=$h(Math.atan2(n[1],n[0]));return bT(e)},$Y={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:xT,rotateZ:xT,skewX:n=>$h(Math.atan(n[1])),skewY:n=>$h(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},bT=n=>(n=n%360,n<0&&(n+=360),n),i3=xT,s3=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),r3=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),eW={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:s3,scaleY:r3,scale:n=>(s3(n)+r3(n))/2,rotateX:n=>bT($h(Math.atan2(n[6],n[5]))),rotateY:n=>bT($h(Math.atan2(-n[2],n[0]))),rotateZ:i3,rotate:i3,skewX:n=>$h(Math.atan(n[4])),skewY:n=>$h(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function AT(n){return n.includes("scale")?1:0}function ST(n,e){if(!n||n==="none")return AT(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=eW,s=t;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=$Y,s=l}if(!s)return AT(e);const r=i[e],a=s[1].split(",").map(nW);return typeof r=="function"?r(a):a[r]}const tW=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return ST(t,e)};function nW(n){return parseFloat(n.trim())}const Jm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zm=new Set(Jm),a3=n=>n===Km||n===on,iW=new Set(["x","y","z"]),sW=Jm.filter(n=>!iW.has(n));function rW(n){const e=[];return sW.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const hd={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>ST(e,"x"),y:(n,{transform:e})=>ST(e,"y")};hd.translateX=hd.x;hd.translateY=hd.y;const dd=new Set;let _T=!1,MT=!1,ET=!1;function qI(){if(MT){const n=Array.from(dd).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=rW(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([r,a])=>{var l;(l=i.getValue(r))==null||l.set(a)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}MT=!1,_T=!1,dd.forEach(n=>n.complete(ET)),dd.clear()}function KI(){dd.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(MT=!0)})}function aW(){ET=!0,KI(),qI(),ET=!1}class Mw{constructor(e,t,i,s,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(dd.add(this),_T||(_T=!0,gi.read(KI),gi.resolveKeyframes(qI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const r=s==null?void 0:s.get(),a=e[e.length-1];if(r!==void 0)e[0]=r;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&r===void 0&&s.set(e[0])}QY(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),dd.delete(this)}cancel(){this.state==="scheduled"&&(dd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oW=n=>n.startsWith("--");function lW(n,e,t){oW(e)?n.style.setProperty(e,t):n.style[e]=t}const JI=uw(()=>window.ScrollTimeline!==void 0),cW={};function uW(n,e){const t=uw(n);return()=>cW[e]??t()}const ZI=uW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),j0=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,o3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:j0([0,.65,.55,1]),circOut:j0([.55,0,1,.45]),backIn:j0([.31,.01,.66,-.59]),backOut:j0([.33,1.53,.69,.99])};function QI(n,e){if(n)return typeof n=="function"?ZI()?jI(n,e):"ease-out":OI(n)?j0(n):Array.isArray(n)?n.map(t=>QI(t,e)||o3.easeOut):o3[n]}function fW(n,e,t,{delay:i=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:l="easeOut",times:c}={},f=void 0){const p={[e]:t};c&&(p.offset=c);const g=QI(l,s);Array.isArray(g)&&(p.easing=g);const v={delay:i,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),n.animate(p,v)}function $I(n){return typeof n=="function"&&"applyToOptions"in n}function hW({type:n,...e}){return $I(n)&&ZI()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class dW extends _w{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=e,cw(typeof e.type!="string");const f=hW(e);this.animation=fW(t,i,s,f,r),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const p=Sw(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(p):lW(t,i,p),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return sc(Number(e))}get time(){return sc(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ic(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&JI()?(this.animation.timeline=e,Ea):t(this)}}const eF={anticipate:BI,backInOut:RI,circInOut:NI};function pW(n){return n in eF}function mW(n){typeof n.ease=="string"&&pW(n.ease)&&(n.ease=eF[n.ease])}const l3=10;class gW extends dW{constructor(e){mW(e),WI(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:r,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new iS({...a,autoplay:!1}),c=ic(this.finishedTime??this.time);t.setWithVelocity(l.sample(c-l3).value,l.sample(c).value,l3),l.stop()}}const c3=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(vf.test(n)||n==="0")&&!n.startsWith("url("));function vW(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function yW(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=n[n.length-1],a=c3(s,e),l=c3(r,e);return!a||!l?!1:vW(n)||(t==="spring"||$I(t))&&i}function Ew(n){return _I(n)&&"offsetHeight"in n}const xW=new Set(["opacity","clipPath","filter","transform"]),bW=uw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function AW(n){var f;const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:r,type:a}=n;if(!Ew((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return bW()&&t&&xW.has(t)&&(t!=="transform"||!c)&&!l&&!i&&s!=="mirror"&&r!==0&&a!=="inertia"}const SW=40;class _W extends _w{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",keyframes:l,name:c,motionValue:f,element:p,...g}){var A;super(),this.stop=()=>{var M,_;this._animation&&(this._animation.stop(),(M=this.stopTimeline)==null||M.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=Ma.now();const v={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:r,repeatType:a,name:c,motionValue:f,element:p,...g},x=(p==null?void 0:p.KeyframeResolver)||Mw;this.keyframeResolver=new x(l,(M,_,S)=>this.onKeyframesResolved(M,_,v,!S),c,f,p),(A=this.keyframeResolver)==null||A.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:r,type:a,velocity:l,delay:c,isHandoff:f,onUpdate:p}=i;this.resolvedAt=Ma.now(),yW(e,r,a,l)||((tu.instantAnimations||!c)&&(p==null||p(Sw(e,i,t))),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>SW?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},x=!f&&AW(v)?new gW({...v,element:v.motionValue.owner.current}):new iS(v);x.finished.then(()=>this.notifyFinished()).catch(Ea),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),aW()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const MW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function EW(n){const e=MW.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function tF(n,e,t=1){const[i,s]=EW(n);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const a=r.trim();return SI(a)?parseFloat(a):a}return gw(s)?tF(s,e,t+1):s}function Tw(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const nF=new Set(["width","height","top","left","right","bottom",...Jm]),TW={test:n=>n==="auto",parse:n=>n},iF=n=>e=>e.test(n),sF=[Km,on,rc,uf,bY,xY,TW],u3=n=>sF.find(iF(n));function CW(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||MI(n):!0}const wW=new Set(["brightness","contrast","saturate","opacity"]);function RW(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(vw)||[];if(!i)return n;const s=t.replace(i,"");let r=wW.has(e)?1:0;return i!==t&&(r*=100),e+"("+r+s+")"}const BW=/\b([a-z-]*)\(.*?\)/gu,TT={...vf,getAnimatableNone:n=>{const e=n.match(BW);return e?e.map(RW).join(" "):n}},f3={...Km,transform:Math.round},DW={rotate:uf,rotateX:uf,rotateY:uf,rotateZ:uf,scale:o1,scaleX:o1,scaleY:o1,scaleZ:o1,skew:uf,skewX:uf,skewY:uf,distance:on,translateX:on,translateY:on,translateZ:on,x:on,y:on,z:on,perspective:on,transformPerspective:on,opacity:Tv,originX:ZD,originY:ZD,originZ:on},Cw={borderWidth:on,borderTopWidth:on,borderRightWidth:on,borderBottomWidth:on,borderLeftWidth:on,borderRadius:on,radius:on,borderTopLeftRadius:on,borderTopRightRadius:on,borderBottomRightRadius:on,borderBottomLeftRadius:on,width:on,maxWidth:on,height:on,maxHeight:on,top:on,right:on,bottom:on,left:on,padding:on,paddingTop:on,paddingRight:on,paddingBottom:on,paddingLeft:on,margin:on,marginTop:on,marginRight:on,marginBottom:on,marginLeft:on,backgroundPositionX:on,backgroundPositionY:on,...DW,zIndex:f3,fillOpacity:Tv,strokeOpacity:Tv,numOctaves:f3},NW={...Cw,color:Br,backgroundColor:Br,outlineColor:Br,fill:Br,stroke:Br,borderColor:Br,borderTopColor:Br,borderRightColor:Br,borderBottomColor:Br,borderLeftColor:Br,filter:TT,WebkitFilter:TT},rF=n=>NW[n];function aF(n,e){let t=rF(n);return t!==TT&&(t=vf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const LW=new Set(["auto","none","0"]);function OW(n,e,t){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!LW.has(r)&&Cv(r).values.length&&(s=n[i]),i++}if(s&&t)for(const r of e)n[r]=aF(t,s)}class UW extends Mw{constructor(e,t,i,s,r){super(e,t,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),gw(f))){const p=tF(f,t.current);p!==void 0&&(e[c]=p),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!nF.has(i)||e.length!==2)return;const[s,r]=e,a=u3(s),l=u3(r);if(a!==l)if(a3(a)&&a3(l))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else hd[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||CW(e[s]))&&i.push(s);i.length&&OW(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hd[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,a=i[r];i[r]=hd[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function ww(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const s=document.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const oF=(n,e)=>e&&typeof n=="number"?e.transform(n):n,h3=30,PW=n=>!isNaN(parseFloat(n)),nv={current:void 0};class IW{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{var a,l;const r=Ma.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();s&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ma.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=PW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new fw);const i=this.events[e].add(t);return e==="change"?()=>{i(),gi.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return nv.current&&nv.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ma.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>h3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,h3);return hw(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function al(n,e){return new IW(n,e)}const{schedule:Rw}=UI(queueMicrotask,!1),tl={x:!1,y:!1};function lF(){return tl.x||tl.y}function FW(n){return n==="x"||n==="y"?tl[n]?null:(tl[n]=!0,()=>{tl[n]=!1}):tl.x||tl.y?null:(tl.x=tl.y=!0,()=>{tl.x=tl.y=!1})}function cF(n,e){const t=ww(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function d3(n){return!(n.pointerType==="touch"||lF())}function zW(n,e,t={}){const[i,s,r]=cF(n,t),a=l=>{if(!d3(l))return;const{target:c}=l,f=e(c,l);if(typeof f!="function"||!c)return;const p=g=>{d3(g)&&(f(g),c.removeEventListener("pointerleave",p))};c.addEventListener("pointerleave",p,s)};return i.forEach(l=>{l.addEventListener("pointerenter",a,s)}),r}const uF=(n,e)=>e?n===e?!0:uF(n,e.parentElement):!1,Bw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,HW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function GW(n){return HW.has(n.tagName)||n.tabIndex!==-1}const Sb=new WeakSet;function p3(n){return e=>{e.key==="Enter"&&n(e)}}function lM(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const VW=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=p3(()=>{if(Sb.has(t))return;lM(t,"down");const s=p3(()=>{lM(t,"up")}),r=()=>lM(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function m3(n){return Bw(n)&&!lF()}function kW(n,e,t={}){const[i,s,r]=cF(n,t),a=l=>{const c=l.currentTarget;if(!m3(l))return;Sb.add(c);const f=e(c,l),p=(x,A)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),Sb.has(c)&&Sb.delete(c),m3(x)&&typeof f=="function"&&f(x,{success:A})},g=x=>{p(x,c===window||c===document||t.useGlobalTarget||uF(c,x.target))},v=x=>{p(x,!1)};window.addEventListener("pointerup",g,s),window.addEventListener("pointercancel",v,s)};return i.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),Ew(l)&&(l.addEventListener("focus",f=>VW(f,s)),!GW(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),r}function Dw(n){return _I(n)&&"ownerSVGElement"in n}const _b=new WeakMap;let ff;const fF=(n,e,t)=>(i,s)=>s&&s[0]?s[0][n+"Size"]:Dw(i)&&"getBBox"in i?i.getBBox()[e]:i[t],jW=fF("inline","width","offsetWidth"),XW=fF("block","height","offsetHeight");function YW({target:n,borderBoxSize:e}){var t;(t=_b.get(n))==null||t.forEach(i=>{i(n,{get width(){return jW(n,e)},get height(){return XW(n,e)}})})}function WW(n){n.forEach(YW)}function qW(){typeof ResizeObserver>"u"||(ff=new ResizeObserver(WW))}function KW(n,e){ff||qW();const t=ww(n);return t.forEach(i=>{let s=_b.get(i);s||(s=new Set,_b.set(i,s)),s.add(e),ff==null||ff.observe(i)}),()=>{t.forEach(i=>{const s=_b.get(i);s==null||s.delete(e),s!=null&&s.size||ff==null||ff.unobserve(i)})}}const Mb=new Set;let um;function JW(){um=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};Mb.forEach(e=>e(n))},window.addEventListener("resize",um)}function ZW(n){return Mb.add(n),um||JW(),()=>{Mb.delete(n),!Mb.size&&typeof um=="function"&&(window.removeEventListener("resize",um),um=void 0)}}function QW(n,e){return typeof n=="function"?ZW(n):KW(n,e)}function hF(n,e){let t;const i=()=>{const{currentTime:s}=e,a=(s===null?0:s.value)/100;t!==a&&n(a),t=a};return gi.preUpdate(i,!0),()=>fl(i)}function $W(n){return Dw(n)&&n.tagName==="svg"}function eq(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],s=n[1+t],r=n[2+t],a=n[3+t],l=Aw(s,r,a);return e?l(i):l}const Qs=n=>!!(n&&n.getVelocity);function tq(n,e,t){const i=n.get();let s=null,r=i,a;const l=typeof i=="string"?i.replace(/[\d.-]/g,""):void 0,c=()=>{s&&(s.stop(),s=null)},f=()=>{c(),s=new iS({keyframes:[v3(n.get()),v3(r)],velocity:n.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:a})};n.attach((g,v)=>(r=g,a=x=>v(g3(x,l)),gi.postRender(f),n.get()),c);let p;return Qs(e)&&(p=e.on("change",g=>n.set(g3(g,l))),n.on("destroy",p)),p}function g3(n,e){return e?n+e:n}function v3(n){return typeof n=="number"?n:parseFloat(n)}const nq=[...sF,Br,vf],iq=n=>nq.find(iF(n)),sS=z.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function sq(n=!0){const e=z.useContext(aw);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,r=z.useId();z.useEffect(()=>{if(n)return s(r)},[n]);const a=z.useCallback(()=>n&&i&&i(r),[r,i,n]);return!t&&i?[!1,a]:[!0]}const dF=z.createContext({strict:!1}),y3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nm={};for(const n in y3)Nm[n]={isEnabled:e=>y3[n].some(t=>!!e[t])};function rq(n){for(const e in n)Nm[e]={...Nm[e],...n[e]}}const aq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yb(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||aq.has(n)}let pF=n=>!Yb(n);function oq(n){n&&(pF=e=>e.startsWith("on")?!Yb(e):n(e))}try{oq(require("@emotion/is-prop-valid").default)}catch{}function lq(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(pF(s)||t===!0&&Yb(s)||!e&&!Yb(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}function cq(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const rS=z.createContext({});function aS(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function wv(n){return typeof n=="string"||Array.isArray(n)}const Nw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lw=["initial",...Nw];function oS(n){return aS(n.animate)||Lw.some(e=>wv(n[e]))}function mF(n){return!!(oS(n)||n.variants)}function uq(n,e){if(oS(n)){const{initial:t,animate:i}=n;return{initial:t===!1||wv(t)?t:void 0,animate:wv(i)?i:void 0}}return n.inherit!==!1?e:{}}function fq(n){const{initial:e,animate:t}=uq(n,z.useContext(rS));return z.useMemo(()=>({initial:e,animate:t}),[x3(e),x3(t)])}function x3(n){return Array.isArray(n)?n.join(" "):n}const hq=Symbol.for("motionComponentSymbol");function fm(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function dq(n,e,t){return z.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):fm(t)&&(t.current=i))},[e])}const Ow=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pq="framerAppearId",gF="data-"+Ow(pq),vF=z.createContext({});function mq(n,e,t,i,s){var M,_;const{visualElement:r}=z.useContext(rS),a=z.useContext(dF),l=z.useContext(aw),c=z.useContext(sS).reducedMotion,f=z.useRef(null);i=i||a.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:r,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const p=f.current,g=z.useContext(vF);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&gq(f.current,t,s,g);const v=z.useRef(!1);z.useInsertionEffect(()=>{p&&v.current&&p.update(t,l)});const x=t[gF],A=z.useRef(!!x&&!((M=window.MotionHandoffIsComplete)!=null&&M.call(window,x))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,x)));return rw(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Rw.render(p.render),A.current&&p.animationState&&p.animationState.animateChanges())}),z.useEffect(()=>{p&&(!A.current&&p.animationState&&p.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,x)}),A.current=!1))}),p}function gq(n,e,t,i){const{layoutId:s,layout:r,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:f,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:yF(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||l&&fm(l),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:p,layoutScroll:c,layoutRoot:f})}function yF(n){if(n)return n.options.allowProjection!==!1?n.projection:yF(n.parent)}function vq({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:s}){n&&rq(n);function r(l,c){let f;const p={...z.useContext(sS),...l,layoutId:yq(l)},{isStatic:g}=p,v=fq(l),x=i(l,g);if(!g&&sw){xq();const A=bq(p);f=A.MeasureLayout,v.visualElement=mq(s,x,p,e,A.ProjectionNode)}return H.jsxs(rS.Provider,{value:v,children:[f&&v.visualElement?H.jsx(f,{visualElement:v.visualElement,...p}):null,t(s,l,dq(x,v.visualElement,c),x,g,v.visualElement)]})}r.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const a=z.forwardRef(r);return a[hq]=s,a}function yq({layoutId:n}){const e=z.useContext(AI).id;return e&&n!==void 0?e+"-"+n:n}function xq(n,e){z.useContext(dF).strict}function bq(n){const{drag:e,layout:t}=Nm;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const Rv={};function Aq(n){for(const e in n)Rv[e]=n[e],mw(e)&&(Rv[e].isCSSVariable=!0)}function xF(n,{layout:e,layoutId:t}){return Zm.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Rv[n]||n==="opacity")}const Sq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_q=Jm.length;function Mq(n,e,t){let i="",s=!0;for(let r=0;r<_q;r++){const a=Jm[r],l=n[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||t){const f=oF(l,Cw[a]);if(!c){s=!1;const p=Sq[a]||a;i+=`${p}(${f}) `}t&&(e[a]=f)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function Uw(n,e,t){const{style:i,vars:s,transformOrigin:r}=n;let a=!1,l=!1;for(const c in e){const f=e[c];if(Zm.has(c)){a=!0;continue}else if(mw(c)){s[c]=f;continue}else{const p=oF(f,Cw[c]);c.startsWith("origin")?(l=!0,r[c]=p):i[c]=p}}if(e.transform||(a||t?i.transform=Mq(e,n.transform,t):i.transform&&(i.transform="none")),l){const{originX:c="50%",originY:f="50%",originZ:p=0}=r;i.transformOrigin=`${c} ${f} ${p}`}}const Pw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bF(n,e,t){for(const i in e)!Qs(e[i])&&!xF(i,t)&&(n[i]=e[i])}function Eq({transformTemplate:n},e){return z.useMemo(()=>{const t=Pw();return Uw(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Tq(n,e){const t=n.style||{},i={};return bF(i,t,n),Object.assign(i,Eq(n,e)),i}function Cq(n,e){const t={},i=Tq(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const wq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rq={offset:"strokeDashoffset",array:"strokeDasharray"};function Bq(n,e,t=1,i=0,s=!0){n.pathLength=1;const r=s?wq:Rq;n[r.offset]=on.transform(-i);const a=on.transform(e),l=on.transform(t);n[r.array]=`${a} ${l}`}function AF(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:a=0,...l},c,f,p){if(Uw(n,l,f),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:v}=n;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),i!==void 0&&(g.scale=i),s!==void 0&&Bq(g,s,r,a,!1)}const SF=()=>({...Pw(),attrs:{}}),_F=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Dq(n,e,t,i){const s=z.useMemo(()=>{const r=SF();return AF(r,e,_F(i),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};bF(r,n.style,n),s.style={...r,...s.style}}return s}const Nq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Iw(n){return typeof n!="string"||n.includes("-")?!1:!!(Nq.indexOf(n)>-1||/[A-Z]/u.test(n))}function Lq(n=!1){return(t,i,s,{latestValues:r},a)=>{const c=(Iw(t)?Dq:Cq)(i,r,a,t),f=lq(i,typeof t=="string",n),p=t!==z.Fragment?{...f,...c,ref:s}:{},{children:g}=i,v=z.useMemo(()=>Qs(g)?g.get():g,[g]);return z.createElement(t,{...p,children:v})}}function b3(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Fw(n,e,t,i){if(typeof e=="function"){const[s,r]=b3(i);e=e(t!==void 0?t:n.custom,s,r)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,r]=b3(i);e=e(t!==void 0?t:n.custom,s,r)}return e}function Eb(n){return Qs(n)?n.get():n}function Oq({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:Uq(t,i,s,n),renderState:e()}}const MF=n=>(e,t)=>{const i=z.useContext(rS),s=z.useContext(aw),r=()=>Oq(n,e,i,s);return t?r():nS(r)};function Uq(n,e,t,i){const s={},r=i(n,{});for(const v in r)s[v]=Eb(r[v]);let{initial:a,animate:l}=n;const c=oS(n),f=mF(n);e&&f&&!c&&n.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||a===!1;const g=p?l:a;if(g&&typeof g!="boolean"&&!aS(g)){const v=Array.isArray(g)?g:[g];for(let x=0;x<v.length;x++){const A=Fw(n,v[x]);if(A){const{transitionEnd:M,transition:_,...S}=A;for(const w in S){let C=S[w];if(Array.isArray(C)){const B=p?C.length-1:0;C=C[B]}C!==null&&(s[w]=C)}for(const w in M)s[w]=M[w]}}}return s}function zw(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(Qs(i[a])||e.style&&Qs(e.style[a])||xF(a,n)||((r=t==null?void 0:t.getValue(a))==null?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const Pq={useVisualState:MF({scrapeMotionValuesFromProps:zw,createRenderState:Pw})};function EF(n,e,t){const i=zw(n,e,t);for(const s in n)if(Qs(n[s])||Qs(e[s])){const r=Jm.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}const Iq={useVisualState:MF({scrapeMotionValuesFromProps:EF,createRenderState:SF})};function Fq(n,e){return function(i,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...Iw(i)?Iq:Pq,preloadedFeatures:n,useRender:Lq(s),createVisualElement:e,Component:i};return vq(a)}}function Bv(n,e,t){const i=n.getProps();return Fw(i,e,t!==void 0?t:i.custom,n)}const CT=n=>Array.isArray(n);function zq(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,al(t))}function Hq(n){return CT(n)?n[n.length-1]||0:n}function Gq(n,e){const t=Bv(n,e);let{transitionEnd:i={},transition:s={},...r}=t||{};r={...r,...i};for(const a in r){const l=Hq(r[a]);zq(n,a,l)}}function Vq(n){return!!(Qs(n)&&n.add)}function wT(n,e){const t=n.getValue("willChange");if(Vq(t))return t.add(e);if(!t&&tu.WillChange){const i=new tu.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function TF(n){return n.props[gF]}const kq=n=>n!==null;function jq(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(kq),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[r]}const Xq={type:"spring",stiffness:500,damping:25,restSpeed:10},Yq=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Wq={type:"keyframes",duration:.8},qq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Kq=(n,{keyframes:e})=>e.length>2?Wq:Zm.has(n)?n.startsWith("scale")?Yq(e[1]):Xq:qq;function Jq({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:l,from:c,elapsed:f,...p}){return!!Object.keys(p).length}const Hw=(n,e,t,i={},s,r)=>a=>{const l=Tw(i,n)||{},c=l.delay||i.delay||0;let{elapsed:f=0}=i;f=f-ic(c);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:n,motionValue:e,element:r?void 0:s};Jq(l)||Object.assign(p,Kq(n,p)),p.duration&&(p.duration=ic(p.duration)),p.repeatDelay&&(p.repeatDelay=ic(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),(tu.instantAnimations||tu.skipAnimations)&&(g=!0,p.duration=0,p.delay=0),p.allowFlatten=!l.type&&!l.ease,g&&!r&&e.get()!==void 0){const v=jq(p.keyframes,l);if(v!==void 0){gi.update(()=>{p.onUpdate(v),p.onComplete()});return}}return l.isSync?new iS(p):new _W(p)};function Zq({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function CF(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(r=i);const c=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const p in l){const g=n.getValue(p,n.latestValues[p]??null),v=l[p];if(v===void 0||f&&Zq(f,p))continue;const x={delay:t,...Tw(r||{},p)},A=g.get();if(A!==void 0&&!g.isAnimating&&!Array.isArray(v)&&v===A&&!x.velocity)continue;let M=!1;if(window.MotionHandoffAnimation){const S=TF(n);if(S){const w=window.MotionHandoffAnimation(S,p,gi);w!==null&&(x.startTime=w,M=!0)}}wT(n,p),g.start(Hw(p,g,v,n.shouldReduceMotion&&nF.has(p)?{type:!1}:x,n,M));const _=g.animation;_&&c.push(_)}return a&&Promise.all(c).then(()=>{gi.update(()=>{a&&Gq(n,a)})}),c}function RT(n,e,t={}){var c;const i=Bv(n,e,t.type==="exit"?(c=n.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const r=i?()=>Promise.all(CF(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:v}=s;return Qq(n,e,p+f,g,v,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[f,p]=l==="beforeChildren"?[r,a]:[a,r];return f().then(()=>p())}else return Promise.all([r(),a(t.delay)])}function Qq(n,e,t=0,i=0,s=1,r){const a=[],l=(n.variantChildren.size-1)*i,c=s===1?(f=0)=>f*i:(f=0)=>l-f*i;return Array.from(n.variantChildren).sort($q).forEach((f,p)=>{f.notify("AnimationStart",e),a.push(RT(f,e,{...r,delay:t+c(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function $q(n,e){return n.sortNodePosition(e)}function eK(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>RT(n,r,t));i=Promise.all(s)}else if(typeof e=="string")i=RT(n,e,t);else{const s=typeof e=="function"?Bv(n,e,t.custom):e;i=Promise.all(CF(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function wF(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const tK=Lw.length;function RF(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?RF(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<tK;t++){const i=Lw[t],s=n.props[i];(wv(s)||s===!1)&&(e[i]=s)}return e}const nK=[...Nw].reverse(),iK=Nw.length;function sK(n){return e=>Promise.all(e.map(({animation:t,options:i})=>eK(n,t,i)))}function rK(n){let e=sK(n),t=A3(),i=!0;const s=c=>(f,p)=>{var v;const g=Bv(n,p,c==="exit"?(v=n.presenceContext)==null?void 0:v.custom:void 0);if(g){const{transition:x,transitionEnd:A,...M}=g;f={...f,...M,...A}}return f};function r(c){e=c(n)}function a(c){const{props:f}=n,p=RF(n.parent)||{},g=[],v=new Set;let x={},A=1/0;for(let _=0;_<iK;_++){const S=nK[_],w=t[S],C=f[S]!==void 0?f[S]:p[S],B=wv(C),N=S===c?w.isActive:null;N===!1&&(A=_);let L=C===p[S]&&C!==f[S]&&B;if(L&&i&&n.manuallyAnimateOnMount&&(L=!1),w.protectedKeys={...x},!w.isActive&&N===null||!C&&!w.prevProp||aS(C)||typeof C=="boolean")continue;const F=aK(w.prevProp,C);let P=F||S===c&&w.isActive&&!L&&B||_>A&&B,U=!1;const I=Array.isArray(C)?C:[C];let X=I.reduce(s(S),{});N===!1&&(X={});const{prevResolvedValues:re={}}=w,ee={...re,...X},$=Q=>{P=!0,v.has(Q)&&(U=!0,v.delete(Q)),w.needsAnimating[Q]=!0;const J=n.getValue(Q);J&&(J.liveStyle=!1)};for(const Q in ee){const J=X[Q],xe=re[Q];if(x.hasOwnProperty(Q))continue;let Y=!1;CT(J)&&CT(xe)?Y=!wF(J,xe):Y=J!==xe,Y?J!=null?$(Q):v.add(Q):J!==void 0&&v.has(Q)?$(Q):w.protectedKeys[Q]=!0}w.prevProp=C,w.prevResolvedValues=X,w.isActive&&(x={...x,...X}),i&&n.blockInitialAnimation&&(P=!1),P&&(!(L&&F)||U)&&g.push(...I.map(Q=>({animation:Q,options:{type:S}})))}if(v.size){const _={};if(typeof f.initial!="boolean"){const S=Bv(n,Array.isArray(f.initial)?f.initial[0]:f.initial);S&&S.transition&&(_.transition=S.transition)}v.forEach(S=>{const w=n.getBaseTarget(S),C=n.getValue(S);C&&(C.liveStyle=!0),_[S]=w??null}),g.push({animation:_})}let M=!!g.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(M=!1),i=!1,M?e(g):Promise.resolve()}function l(c,f){var g;if(t[c].isActive===f)return Promise.resolve();(g=n.variantChildren)==null||g.forEach(v=>{var x;return(x=v.animationState)==null?void 0:x.setActive(c,f)}),t[c].isActive=f;const p=a(c);for(const v in t)t[v].protectedKeys={};return p}return{animateChanges:a,setActive:l,setAnimateFunction:r,getState:()=>t,reset:()=>{t=A3(),i=!0}}}function aK(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!wF(e,n):!1}function Th(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function A3(){return{animate:Th(!0),whileInView:Th(),whileHover:Th(),whileTap:Th(),whileDrag:Th(),whileFocus:Th(),exit:Th()}}class Cf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oK extends Cf{constructor(e){super(e),e.animationState||(e.animationState=rK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();aS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let lK=0;class cK extends Cf{constructor(){super(...arguments),this.id=lK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const uK={animation:{Feature:oK},exit:{Feature:cK}};function Dv(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function ry(n){return{point:{x:n.pageX,y:n.pageY}}}const fK=n=>e=>Bw(e)&&n(e,ry(e));function iv(n,e,t,i){return Dv(n,e,fK(t),i)}function BF({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function hK({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function dK(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}const DF=1e-4,pK=1-DF,mK=1+DF,NF=.01,gK=0-NF,vK=0+NF;function na(n){return n.max-n.min}function yK(n,e,t){return Math.abs(n-e)<=t}function S3(n,e,t,i=.5){n.origin=i,n.originPoint=$i(e.min,e.max,n.origin),n.scale=na(t)/na(e),n.translate=$i(t.min,t.max,n.origin)-n.originPoint,(n.scale>=pK&&n.scale<=mK||isNaN(n.scale))&&(n.scale=1),(n.translate>=gK&&n.translate<=vK||isNaN(n.translate))&&(n.translate=0)}function sv(n,e,t,i){S3(n.x,e.x,t.x,i?i.originX:void 0),S3(n.y,e.y,t.y,i?i.originY:void 0)}function _3(n,e,t){n.min=t.min+e.min,n.max=n.min+na(e)}function xK(n,e,t){_3(n.x,e.x,t.x),_3(n.y,e.y,t.y)}function M3(n,e,t){n.min=e.min-t.min,n.max=n.min+na(e)}function rv(n,e,t){M3(n.x,e.x,t.x),M3(n.y,e.y,t.y)}const E3=()=>({translate:0,scale:1,origin:0,originPoint:0}),hm=()=>({x:E3(),y:E3()}),T3=()=>({min:0,max:0}),ms=()=>({x:T3(),y:T3()});function yo(n){return[n("x"),n("y")]}function cM(n){return n===void 0||n===1}function BT({scale:n,scaleX:e,scaleY:t}){return!cM(n)||!cM(e)||!cM(t)}function kh(n){return BT(n)||LF(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function LF(n){return C3(n.x)||C3(n.y)}function C3(n){return n&&n!=="0%"}function Wb(n,e,t){const i=n-t,s=e*i;return t+s}function w3(n,e,t,i,s){return s!==void 0&&(n=Wb(n,s,i)),Wb(n,t,i)+e}function DT(n,e=0,t=1,i,s){n.min=w3(n.min,e,t,i,s),n.max=w3(n.max,e,t,i,s)}function OF(n,{x:e,y:t}){DT(n.x,e.translate,e.scale,e.originPoint),DT(n.y,t.translate,t.scale,t.originPoint)}const R3=.999999999999,B3=1.0000000000001;function bK(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,a;for(let l=0;l<s;l++){r=t[l],a=r.projectionDelta;const{visualElement:c}=r.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&pm(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,OF(n,a)),i&&kh(r.latestValues)&&pm(n,r.latestValues))}e.x<B3&&e.x>R3&&(e.x=1),e.y<B3&&e.y>R3&&(e.y=1)}function dm(n,e){n.min=n.min+e,n.max=n.max+e}function D3(n,e,t,i,s=.5){const r=$i(n.min,n.max,s);DT(n,e,t,r,i)}function pm(n,e){D3(n.x,e.x,e.scaleX,e.scale,e.originX),D3(n.y,e.y,e.scaleY,e.scale,e.originY)}function UF(n,e){return BF(dK(n.getBoundingClientRect(),e))}function AK(n,e,t){const i=UF(n,t),{scroll:s}=e;return s&&(dm(i.x,s.offset.x),dm(i.y,s.offset.y)),i}const PF=({current:n})=>n?n.ownerDocument.defaultView:null,N3=(n,e)=>Math.abs(n-e);function SK(n,e){const t=N3(n.x,e.x),i=N3(n.y,e.y);return Math.sqrt(t**2+i**2)}class IF{constructor(e,t,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=fM(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,x=SK(g.offset,{x:0,y:0})>=3;if(!v&&!x)return;const{point:A}=g,{timestamp:M}=Js;this.history.push({...A,timestamp:M});const{onStart:_,onMove:S}=this.handlers;v||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=uM(v,this.transformPagePoint),gi.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:x,onSessionEnd:A,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=fM(g.type==="pointercancel"?this.lastMoveEventInfo:uM(v,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,_),A&&A(g,_)},!Bw(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.contextWindow=s||window;const a=ry(e),l=uM(a,this.transformPagePoint),{point:c}=l,{timestamp:f}=Js;this.history=[{...c,timestamp:f}];const{onSessionStart:p}=t;p&&p(e,fM(l,this.history)),this.removeListeners=ny(iv(this.contextWindow,"pointermove",this.handlePointerMove),iv(this.contextWindow,"pointerup",this.handlePointerUp),iv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fl(this.updatePoint)}}function uM(n,e){return e?{point:e(n.point)}:n}function L3(n,e){return{x:n.x-e.x,y:n.y-e.y}}function fM({point:n},e){return{point:n,delta:L3(n,FF(e)),offset:L3(n,_K(e)),velocity:MK(e,.1)}}function _K(n){return n[0]}function FF(n){return n[n.length-1]}function MK(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=FF(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>ic(e)));)t--;if(!i)return{x:0,y:0};const r=sc(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function EK(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?$i(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?$i(t,n,i.max):Math.min(n,t)),n}function O3(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function TK(n,{top:e,left:t,bottom:i,right:s}){return{x:O3(n.x,t,s),y:O3(n.y,e,i)}}function U3(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function CK(n,e){return{x:U3(n.x,e.x),y:U3(n.y,e.y)}}function wK(n,e){let t=.5;const i=na(n),s=na(e);return s>i?t=Dm(e.min,e.max-i,n.min):i>s&&(t=Dm(n.min,n.max-s,e.min)),cc(0,1,t)}function RK(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const NT=.35;function BK(n=NT){return n===!1?n=0:n===!0&&(n=NT),{x:P3(n,"left","right"),y:P3(n,"top","bottom")}}function P3(n,e,t){return{min:I3(n,e),max:I3(n,t)}}function I3(n,e){return typeof n=="number"?n:n[e]||0}const DK=new WeakMap;class NK{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ms(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ry(p).point)},r=(p,g)=>{const{drag:v,dragPropagation:x,onDragStart:A}=this.getProps();if(v&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=FW(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yo(_=>{let S=this.getAxisMotionValue(_).get()||0;if(rc.test(S)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[_];C&&(S=na(C)*(parseFloat(S)/100))}}this.originPoint[_]=S}),A&&gi.postRender(()=>A(p,g)),wT(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},a=(p,g)=>{const{dragPropagation:v,dragDirectionLock:x,onDirectionLock:A,onDrag:M}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:_}=g;if(x&&this.currentDirection===null){this.currentDirection=LK(_),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",g.point,_),this.updateAxis("y",g.point,_),this.visualElement.render(),M&&M(p,g)},l=(p,g)=>this.stop(p,g),c=()=>yo(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)==null?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new IF(e,{onSessionStart:s,onStart:r,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:PF(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&gi.postRender(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!l1(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=EK(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;e&&fm(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=TK(i.layoutBox,e):this.constraints=!1,this.elastic=BK(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&yo(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=RK(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!fm(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=AK(i,s.root,this.visualElement.getTransformPagePoint());let a=CK(s.layout.layoutBox,r);if(t){const l=t(hK(a));this.hasMutatedConstraints=!!l,l&&(a=BF(l))}return a}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},f=yo(p=>{if(!l1(p,t,this.currentDirection))return;let g=c&&c[p]||{};a&&(g={min:0,max:0});const v=s?200:1e6,x=s?40:1e7,A={type:"inertia",velocity:i?e[p]:0,bounceStiffness:v,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...r,...g};return this.startAxisValueAnimation(p,A)});return Promise.all(f).then(l)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return wT(this.visualElement,e),i.start(Hw(e,i,0,t,this.visualElement,!1))}stopAnimation(){yo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yo(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){yo(t=>{const{drag:i}=this.getProps();if(!l1(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[t];r.set(e[t]-$i(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!fm(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};yo(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=wK({min:c,max:c},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),yo(a=>{if(!l1(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:f}=this.constraints[a];l.set($i(c,f,s[a]))})}addListeners(){if(!this.visualElement.current)return;DK.set(this.visualElement,this);const e=this.visualElement.current,t=iv(e,"pointerdown",c=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();fm(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),gi.read(i);const a=Dv(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(yo(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=c[p].translate,g.set(g.get()+c[p].translate))}),this.visualElement.render())});return()=>{a(),t(),r(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=NT,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:l}}}function l1(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function LK(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class OK extends Cf{constructor(e){super(e),this.removeGroupControls=Ea,this.removeListeners=Ea,this.controls=new NK(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ea}unmount(){this.removeGroupControls(),this.removeListeners()}}const F3=n=>(e,t)=>{n&&gi.postRender(()=>n(e,t))};class UK extends Cf{constructor(){super(...arguments),this.removePointerDownListener=Ea}onPointerDown(e){this.session=new IF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:PF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:F3(e),onStart:F3(t),onMove:i,onEnd:(r,a)=>{delete this.session,s&&gi.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=iv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function z3(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const _0={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(on.test(n))n=parseFloat(n);else return n;const t=z3(n,e.target.x),i=z3(n,e.target.y);return`${t}% ${i}%`}},PK={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=vf.parse(n);if(s.length>5)return i;const r=vf.createTransformer(n),a=typeof s[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;s[0+a]/=l,s[1+a]/=c;const f=$i(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=f),typeof s[3+a]=="number"&&(s[3+a]/=f),r(s)}};class IK extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;Aq(FK),r&&(t.group&&t.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Tb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:r}=this.props,{projection:a}=i;return a&&(a.isPresent=r,s||e.layoutDependency!==t||t===void 0||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||gi.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Rw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function zF(n){const[e,t]=sq(),i=z.useContext(AI);return H.jsx(IK,{...n,layoutGroup:i,switchLayoutGroup:z.useContext(vF),isPresent:e,safeToRemove:t})}const FK={borderRadius:{..._0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_0,borderTopRightRadius:_0,borderBottomLeftRadius:_0,borderBottomRightRadius:_0,boxShadow:PK};function zK(n,e,t){const i=Qs(n)?n:al(n);return i.start(Hw("",i,e,t)),i.animation}const HK=(n,e)=>n.depth-e.depth;class GK{constructor(){this.children=[],this.isDirty=!1}add(e){ow(this.children,e),this.isDirty=!0}remove(e){lw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(HK),this.isDirty=!1,this.children.forEach(e)}}function VK(n,e){const t=Ma.now(),i=({timestamp:s})=>{const r=s-t;r>=e&&(fl(i),n(r-e))};return gi.setup(i,!0),()=>fl(i)}const HF=["TopLeft","TopRight","BottomLeft","BottomRight"],kK=HF.length,H3=n=>typeof n=="string"?parseFloat(n):n,G3=n=>typeof n=="number"||on.test(n);function jK(n,e,t,i,s,r){s?(n.opacity=$i(0,t.opacity??1,XK(i)),n.opacityExit=$i(e.opacity??1,0,YK(i))):r&&(n.opacity=$i(e.opacity??1,t.opacity??1,i));for(let a=0;a<kK;a++){const l=`border${HF[a]}Radius`;let c=V3(e,l),f=V3(t,l);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||G3(c)===G3(f)?(n[l]=Math.max($i(H3(c),H3(f),i),0),(rc.test(f)||rc.test(c))&&(n[l]+="%")):n[l]=f}(e.rotate||t.rotate)&&(n.rotate=$i(e.rotate||0,t.rotate||0,i))}function V3(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const XK=GF(0,.5,DI),YK=GF(.5,.95,Ea);function GF(n,e,t){return i=>i<n?0:i>e?1:t(Dm(n,e,i))}function k3(n,e){n.min=e.min,n.max=e.max}function po(n,e){k3(n.x,e.x),k3(n.y,e.y)}function j3(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function X3(n,e,t,i,s){return n-=e,n=Wb(n,1/t,i),s!==void 0&&(n=Wb(n,1/s,i)),n}function WK(n,e=0,t=1,i=.5,s,r=n,a=n){if(rc.test(e)&&(e=parseFloat(e),e=$i(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=$i(r.min,r.max,i);n===r&&(l-=e),n.min=X3(n.min,e,t,l,s),n.max=X3(n.max,e,t,l,s)}function Y3(n,e,[t,i,s],r,a){WK(n,e[t],e[i],e[s],e.scale,r,a)}const qK=["x","scaleX","originX"],KK=["y","scaleY","originY"];function W3(n,e,t,i){Y3(n.x,e,qK,t?t.x:void 0,i?i.x:void 0),Y3(n.y,e,KK,t?t.y:void 0,i?i.y:void 0)}function q3(n){return n.translate===0&&n.scale===1}function VF(n){return q3(n.x)&&q3(n.y)}function K3(n,e){return n.min===e.min&&n.max===e.max}function JK(n,e){return K3(n.x,e.x)&&K3(n.y,e.y)}function J3(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function kF(n,e){return J3(n.x,e.x)&&J3(n.y,e.y)}function Z3(n){return na(n.x)/na(n.y)}function Q3(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class ZK{constructor(){this.members=[]}add(e){ow(this.members,e),e.scheduleRender()}remove(e){if(lw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QK(n,e,t){let i="";const s=n.x.translate/e.x,r=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((s||r||a)&&(i=`translate3d(${s}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:p,rotateX:g,rotateY:v,skewX:x,skewY:A}=t;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),g&&(i+=`rotateX(${g}deg) `),v&&(i+=`rotateY(${v}deg) `),x&&(i+=`skewX(${x}deg) `),A&&(i+=`skewY(${A}deg) `)}const l=n.x.scale*e.x,c=n.y.scale*e.y;return(l!==1||c!==1)&&(i+=`scale(${l}, ${c})`),i||"none"}const hM=["","X","Y","Z"],$K={visibility:"hidden"},eJ=1e3;let tJ=0;function dM(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function jF(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=TF(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",gi,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&jF(i)}function XF({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(a={},l=e==null?void 0:e()){this.id=tJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(sJ),this.nodes.forEach(cJ),this.nodes.forEach(uJ),this.nodes.forEach(rJ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new GK)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new fw),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Dw(a)&&!$W(a),this.instance=a;const{layoutId:l,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),n){let p;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=VK(g,250),Tb.hasAnimatedSinceResize&&(Tb.hasAnimatedSinceResize=!1,this.nodes.forEach(eN))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||f.getDefaultTransition()||mJ,{onLayoutAnimationStart:M,onLayoutAnimationComplete:_}=f.getProps(),S=!this.targetLayout||!kF(this.targetLayout,x),w=!g&&v;if(this.options.layoutRoot||this.resumeFrom||w||g&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...Tw(A,"layout"),onPlay:M,onComplete:_};(f.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(p,w)}else g||eN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fJ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($3);return}this.isUpdating||this.nodes.forEach(oJ),this.isUpdating=!1,this.nodes.forEach(lJ),this.nodes.forEach(nJ),this.nodes.forEach(iJ),this.clearAllSnapshots();const l=Ma.now();Js.delta=cc(0,1e3/60,l-Js.timestamp),Js.timestamp=l,Js.isProcessing=!0,sM.update.process(Js),sM.preRender.process(Js),sM.render.process(Js),Js.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Rw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(aJ),this.sharedNodes.forEach(hJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!na(this.snapshot.measuredBox.x)&&!na(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ms(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!VF(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;a&&this.instance&&(l||kh(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),gJ(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:a}=this.options;if(!a)return ms();const l=a.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(vJ))){const{scroll:p}=this.root;p&&(dm(l.x,p.offset.x),dm(l.y,p.offset.y))}return l}removeElementScroll(a){var c;const l=ms();if(po(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:g,options:v}=p;p!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&po(l,a),dm(l.x,g.offset.x),dm(l.y,g.offset.y))}return l}applyTransform(a,l=!1){const c=ms();po(c,a);for(let f=0;f<this.path.length;f++){const p=this.path[f];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&pm(c,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),kh(p.latestValues)&&pm(c,p.latestValues)}return kh(this.latestValues)&&pm(c,this.latestValues),c}removeTransform(a){const l=ms();po(l,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!kh(f.latestValues))continue;BT(f.latestValues)&&f.updateSnapshot();const p=ms(),g=f.measurePageBox();po(p,g),W3(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return kh(this.latestValues)&&W3(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Js.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var v;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=Js.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ms(),this.relativeTargetOrigin=ms(),rv(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),po(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ms(),this.targetWithTransforms=ms()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):po(this.target,this.layout.layoutBox),OF(this.target,this.targetDelta)):po(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ms(),this.relativeTargetOrigin=ms(),rv(this.relativeTargetOrigin,this.target,x.target),po(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||BT(this.parent.latestValues)||LF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var A;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Js.timestamp&&(c=!1),c)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;po(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;bK(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ms());const{target:x}=a;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(j3(this.prevProjectionDelta.x,this.projectionDelta.x),j3(this.prevProjectionDelta.y,this.projectionDelta.y)),sv(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!Q3(this.projectionDelta.x,this.prevProjectionDelta.x)||!Q3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hm(),this.projectionDelta=hm(),this.projectionDeltaWithTransform=hm()}setAnimationOrigin(a,l=!1){const c=this.snapshot,f=c?c.latestValues:{},p={...this.latestValues},g=hm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=ms(),x=c?c.source:void 0,A=this.layout?this.layout.source:void 0,M=x!==A,_=this.getStack(),S=!_||_.members.length<=1,w=!!(M&&!S&&this.options.crossfade===!0&&!this.path.some(pJ));this.animationProgress=0;let C;this.mixTargetDelta=B=>{const N=B/1e3;tN(g.x,a.x,N),tN(g.y,a.y,N),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rv(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dJ(this.relativeTarget,this.relativeTargetOrigin,v,N),C&&JK(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=ms()),po(C,this.relativeTarget)),M&&(this.animationValues=p,jK(p,f,this.latestValues,N,w,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,f;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(f=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||f.stop(),this.pendingAnimation&&(fl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gi.update(()=>{Tb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=al(0)),this.currentAnimation=zK(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),a.onUpdate&&a.onUpdate(p)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(eJ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:f,latestValues:p}=a;if(!(!l||!c||!f)){if(this!==a&&this.layout&&f&&YF(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||ms();const g=na(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+g;const v=na(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+v}po(l,c),pm(l,p),sv(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new ZK),this.sharedNodes.get(a).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const f={};c.z&&dM("z",a,f,this.animationValues);for(let p=0;p<hM.length;p++)dM(`rotate${hM[p]}`,a,f,this.animationValues),dM(`skew${hM[p]}`,a,f,this.animationValues);a.render();for(const p in f)a.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return $K;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=Eb(a==null?void 0:a.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Eb(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!kh(this.latestValues)&&(x.transform=c?c({},""):"none",this.hasProjected=!1),x}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),l.transform=QK(this.projectionDeltaWithTransform,this.treeScale,p),c&&(l.transform=c(p,l.transform));const{x:g,y:v}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,f.animationValues?l.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in Rv){if(p[x]===void 0)continue;const{correct:A,applyTo:M,isCSSVariable:_}=Rv[x],S=l.transform==="none"?p[x]:A(p[x],f);if(M){const w=M.length;for(let C=0;C<w;C++)l[M[C]]=S}else _?this.options.visualElement.renderState.vars[x]=S:l[x]=S}return this.options.layoutId&&(l.pointerEvents=f===this?Eb(a==null?void 0:a.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach($3),this.root.sharedNodes.clear()}}}function nJ(n){n.updateLayout()}function iJ(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,a=e.source!==n.layout.source;r==="size"?yo(g=>{const v=a?e.measuredBox[g]:e.layoutBox[g],x=na(v);v.min=i[g].min,v.max=v.min+x}):YF(r,e.layoutBox,i)&&yo(g=>{const v=a?e.measuredBox[g]:e.layoutBox[g],x=na(i[g]);v.max=v.min+x,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+x)});const l=hm();sv(l,i,e.layoutBox);const c=hm();a?sv(c,n.applyTransform(s,!0),e.measuredBox):sv(c,i,e.layoutBox);const f=!VF(l);let p=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:x}=g;if(v&&x){const A=ms();rv(A,e.layoutBox,v.layoutBox);const M=ms();rv(M,i,x.layoutBox),kF(A,M)||(p=!0),g.options.layoutRoot&&(n.relativeTarget=M,n.relativeTargetOrigin=A,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function sJ(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function rJ(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function aJ(n){n.clearSnapshot()}function $3(n){n.clearMeasurements()}function oJ(n){n.isLayoutDirty=!1}function lJ(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function eN(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function cJ(n){n.resolveTargetDelta()}function uJ(n){n.calcProjection()}function fJ(n){n.resetSkewAndRotation()}function hJ(n){n.removeLeadSnapshot()}function tN(n,e,t){n.translate=$i(e.translate,0,t),n.scale=$i(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function nN(n,e,t,i){n.min=$i(e.min,t.min,i),n.max=$i(e.max,t.max,i)}function dJ(n,e,t,i){nN(n.x,e.x,t.x,i),nN(n.y,e.y,t.y,i)}function pJ(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const mJ={duration:.45,ease:[.4,0,.1,1]},iN=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),sN=iN("applewebkit/")&&!iN("chrome/")?Math.round:Ea;function rN(n){n.min=sN(n.min),n.max=sN(n.max)}function gJ(n){rN(n.x),rN(n.y)}function YF(n,e,t){return n==="position"||n==="preserve-aspect"&&!yK(Z3(e),Z3(t),.2)}function vJ(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const yJ=XF({attachResizeListener:(n,e)=>Dv(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pM={current:void 0},WF=XF({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!pM.current){const n=new yJ({});n.mount(window),n.setOptions({layoutScroll:!0}),pM.current=n}return pM.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),xJ={pan:{Feature:UK},drag:{Feature:OK,ProjectionNode:WF,MeasureLayout:zF}};function aN(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,r=i[s];r&&gi.postRender(()=>r(e,ry(e)))}class bJ extends Cf{mount(){const{current:e}=this.node;e&&(this.unmount=zW(e,(t,i)=>(aN(this.node,i,"Start"),s=>aN(this.node,s,"End"))))}unmount(){}}class AJ extends Cf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ny(Dv(this.node.current,"focus",()=>this.onFocus()),Dv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function oN(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),r=i[s];r&&gi.postRender(()=>r(e,ry(e)))}class SJ extends Cf{mount(){const{current:e}=this.node;e&&(this.unmount=kW(e,(t,i)=>(oN(this.node,i,"Start"),(s,{success:r})=>oN(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const LT=new WeakMap,mM=new WeakMap,_J=n=>{const e=LT.get(n.target);e&&e(n)},MJ=n=>{n.forEach(_J)};function EJ({root:n,...e}){const t=n||document;mM.has(t)||mM.set(t,{});const i=mM.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(MJ,{root:n,...e})),i[s]}function TJ(n,e,t){const i=EJ(e);return LT.set(n,t),i.observe(n),()=>{LT.delete(n),i.unobserve(n)}}const CJ={some:0,all:1};class wJ extends Cf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:CJ[s]},l=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,r&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),v=f?p:g;v&&v(c)};return TJ(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(RJ(e,t))&&this.startObserver()}unmount(){}}function RJ({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const BJ={inView:{Feature:wJ},tap:{Feature:SJ},focus:{Feature:AJ},hover:{Feature:bJ}},DJ={layout:{ProjectionNode:WF,MeasureLayout:zF}},OT={current:null},qF={current:!1};function NJ(){if(qF.current=!0,!!sw)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>OT.current=n.matches;n.addListener(e),e()}else OT.current=!1}const LJ=new WeakMap;function OJ(n,e,t){for(const i in e){const s=e[i],r=t[i];if(Qs(s))n.addValue(i,s);else if(Qs(r))n.addValue(i,al(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const a=n.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=n.getStaticValue(i);n.addValue(i,al(a!==void 0?a:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const lN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class UJ{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Mw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Ma.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,gi.render(this.render,!1,!0))};const{latestValues:c,renderState:f}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!r,this.isControllingVariants=oS(t),this.isVariantNode=mF(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in g){const x=g[v];c[v]!==void 0&&Qs(x)&&x.set(c[v],!1)}}mount(e){this.current=e,LJ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),qF.current||NJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:OT.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fl(this.notifyUpdate),fl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Zm.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&gi.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Nm){const t=Nm[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ms()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<lN.length;i++){const s=lN[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=e[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=OJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=al(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(SI(i)||MI(i))?i=parseFloat(i):!iq(i)&&vf.test(t)&&(i=aF(e,t)),this.setBaseTarget(e,Qs(i)?i.get():i)),Qs(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var r;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const a=Fw(this.props,t,(r=this.presenceContext)==null?void 0:r.custom);a&&(i=a[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Qs(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new fw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class KF extends UJ{constructor(){super(...arguments),this.KeyframeResolver=UW}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Qs(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function JF(n,{style:e,vars:t},i,s){Object.assign(n.style,e,s&&s.getProjectionStyles(i));for(const r in t)n.style.setProperty(r,t[r])}function PJ(n){return window.getComputedStyle(n)}class IJ extends KF{constructor(){super(...arguments),this.type="html",this.renderInstance=JF}readValueFromInstance(e,t){var i;if(Zm.has(t))return(i=this.projection)!=null&&i.isProjecting?AT(t):tW(e,t);{const s=PJ(e),r=(mw(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return UF(e,t)}build(e,t,i){Uw(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return zw(e,t,i)}}const ZF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function FJ(n,e,t,i){JF(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(ZF.has(s)?s:Ow(s),e.attrs[s])}class zJ extends KF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ms}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Zm.has(t)){const i=rF(t);return i&&i.default||0}return t=ZF.has(t)?t:Ow(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return EF(e,t,i)}build(e,t,i){AF(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){FJ(e,t,i,s)}mount(e){this.isSVGTag=_F(e.tagName),super.mount(e)}}const HJ=(n,e)=>Iw(n)?new zJ(e):new IJ(e,{allowProjection:n!==z.Fragment}),GJ=Fq({...uK,...BJ,...xJ,...DJ},HJ),Mn=cq(GJ),VJ=50,cN=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),kJ=()=>({time:0,x:cN(),y:cN()}),jJ={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function uN(n,e,t,i){const s=t[e],{length:r,position:a}=jJ[e],l=s.current,c=t.time;s.current=n[`scroll${a}`],s.scrollLength=n[`scroll${r}`]-n[`client${r}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=Dm(0,s.scrollLength,s.current);const f=i-c;s.velocity=f>VJ?0:hw(s.current-l,f)}function XJ(n,e,t){uN(n,"x",e,t),uN(n,"y",e,t),e.time=t}function YJ(n,e){const t={x:0,y:0};let i=n;for(;i&&i!==e;)if(Ew(i))t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;else if(i.tagName==="svg"){const s=i.getBoundingClientRect();i=i.parentElement;const r=i.getBoundingClientRect();t.x+=s.left-r.left,t.y+=s.top-r.top}else if(i instanceof SVGGraphicsElement){const{x:s,y:r}=i.getBBox();t.x+=s,t.y+=r;let a=null,l=i.parentNode;for(;!a;)l.tagName==="svg"&&(a=l),l=i.parentNode;i=a}else break;return t}const UT={start:0,center:.5,end:1};function fN(n,e,t=0){let i=0;if(n in UT&&(n=UT[n]),typeof n=="string"){const s=parseFloat(n);n.endsWith("px")?i=s:n.endsWith("%")?n=s/100:n.endsWith("vw")?i=s/100*document.documentElement.clientWidth:n.endsWith("vh")?i=s/100*document.documentElement.clientHeight:n=s}return typeof n=="number"&&(i=e*n),t+i}const WJ=[0,0];function qJ(n,e,t,i){let s=Array.isArray(n)?n:WJ,r=0,a=0;return typeof n=="number"?s=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?s=n.split(" "):s=[n,UT[n]?n:"0"]),r=fN(s[0],t,i),a=fN(s[1],e),r-a}const KJ={All:[[0,0],[1,1]]},JJ={x:0,y:0};function ZJ(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function QJ(n,e,t){const{offset:i=KJ.All}=t,{target:s=n,axis:r="y"}=t,a=r==="y"?"height":"width",l=s!==n?YJ(s,n):JJ,c=s===n?{width:n.scrollWidth,height:n.scrollHeight}:ZJ(s),f={width:n.clientWidth,height:n.clientHeight};e[r].offset.length=0;let p=!e[r].interpolate;const g=i.length;for(let v=0;v<g;v++){const x=qJ(i[v],f[a],c[a],l[r]);!p&&x!==e[r].interpolatorOffsets[v]&&(p=!0),e[r].offset[v]=x}p&&(e[r].interpolate=Aw(e[r].offset,YI(i),{clamp:!1}),e[r].interpolatorOffsets=[...e[r].offset]),e[r].progress=cc(0,1,e[r].interpolate(e[r].current))}function $J(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let i=e;for(;i&&i!==n;)t.x.targetOffset+=i.offsetLeft,t.y.targetOffset+=i.offsetTop,i=i.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function eZ(n,e,t,i={}){return{measure:s=>{$J(n,i.target,t),XJ(n,t,s),(i.offset||i.target)&&QJ(n,t,i)},notify:()=>e(t)}}const M0=new WeakMap,hN=new WeakMap,gM=new WeakMap,dN=n=>n===document.scrollingElement?window:n;function QF(n,{container:e=document.scrollingElement,...t}={}){if(!e)return Ea;let i=gM.get(e);i||(i=new Set,gM.set(e,i));const s=kJ(),r=eZ(e,n,s,t);if(i.add(r),!M0.has(e)){const l=()=>{for(const g of i)g.measure(Js.timestamp);gi.preUpdate(c)},c=()=>{for(const g of i)g.notify()},f=()=>gi.read(l);M0.set(e,f);const p=dN(e);window.addEventListener("resize",f,{passive:!0}),e!==document.documentElement&&hN.set(e,QW(e,f)),p.addEventListener("scroll",f,{passive:!0}),f()}const a=M0.get(e);return gi.read(a,!1,!0),()=>{var f;fl(a);const l=gM.get(e);if(!l||(l.delete(r),l.size))return;const c=M0.get(e);M0.delete(e),c&&(dN(e).removeEventListener("scroll",c),(f=hN.get(e))==null||f(),window.removeEventListener("resize",c))}}const pN=new Map;function tZ(n){const e={value:0},t=QF(i=>{e.value=i[n.axis].progress*100},n);return{currentTime:e,cancel:t}}function $F({source:n,container:e,...t}){const{axis:i}=t;n&&(e=n);const s=pN.get(e)??new Map;pN.set(e,s);const r=t.target??"self",a=s.get(r)??{},l=i+(t.offset??[]).join(",");return a[l]||(a[l]=!t.target&&JI()?new ScrollTimeline({source:e,axis:i}):tZ({container:e,...t})),a[l]}function nZ(n,e){const t=$F(e);return n.attachTimeline({timeline:e.target?void 0:t,observe:i=>(i.pause(),hF(s=>{i.time=i.duration*s},t))})}function iZ(n){return n.length===2}function sZ(n,e){return iZ(n)?QF(t=>{n(t[e.axis].progress,t)},e):hF(n,$F(e))}function rZ(n,{axis:e="y",container:t=document.scrollingElement,...i}={}){if(!t)return Ea;const s={axis:e,container:t,...i};return typeof n=="function"?sZ(n,s):nZ(n,s)}function mN(n,e){eY(!!(!e||e.current))}const aZ=()=>({scrollX:al(0),scrollY:al(0),scrollXProgress:al(0),scrollYProgress:al(0)});function oZ({container:n,target:e,layoutEffect:t=!0,...i}={}){const s=nS(aZ);return(t?rw:z.useEffect)(()=>(mN("target",e),mN("container",n),rZ((a,{x:l,y:c})=>{s.scrollX.set(l.current),s.scrollXProgress.set(l.progress),s.scrollY.set(c.current),s.scrollYProgress.set(c.progress)},{...i,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[n,e,JSON.stringify(i.offset)]),s}function lS(n){const e=nS(()=>al(n)),{isStatic:t}=z.useContext(sS);if(t){const[,i]=z.useState(n);z.useEffect(()=>e.on("change",i),[])}return e}function ez(n,e){const t=lS(e()),i=()=>t.set(e());return i(),rw(()=>{const s=()=>gi.preRender(i,!1,!0),r=n.map(a=>a.on("change",s));return()=>{r.forEach(a=>a()),fl(i)}}),t}function lZ(n){nv.current=[],n();const e=ez(nv.current,n);return nv.current=void 0,e}function qb(n,e,t,i){if(typeof n=="function")return lZ(n);const s=typeof e=="function"?e:eq(e,t,i);return Array.isArray(n)?gN(n,s):gN([n],([r])=>s(r))}function gN(n,e){const t=nS(()=>[]);return ez(n,()=>{t.length=0;const i=n.length;for(let s=0;s<i;s++)t[s]=n[s].get();return e(t)})}function cZ(n,e={}){const{isStatic:t}=z.useContext(sS),i=()=>Qs(n)?n.get():n;if(t)return qb(i);const s=lS(i());return z.useInsertionEffect(()=>tq(s,n,e),[s,JSON.stringify(e)]),s}const uZ={some:0,all:1};function fZ(n,e,{root:t,margin:i,amount:s="some"}={}){const r=ww(n),a=new WeakMap,l=f=>{f.forEach(p=>{const g=a.get(p.target);if(p.isIntersecting!==!!g)if(p.isIntersecting){const v=e(p.target,p);typeof v=="function"?a.set(p.target,v):c.unobserve(p.target)}else typeof g=="function"&&(g(p),a.delete(p.target))})},c=new IntersectionObserver(l,{root:t,rootMargin:i,threshold:typeof s=="number"?s:uZ[s]});return r.forEach(f=>c.observe(f)),()=>c.disconnect()}function hZ(n,{root:e,margin:t,amount:i,once:s=!1,initial:r=!1}={}){const[a,l]=z.useState(r);return z.useEffect(()=>{if(!n.current||s&&a)return;const c=()=>(l(!0),s?void 0:()=>l(!1)),f={root:e&&e.current||void 0,margin:t,amount:i};return fZ(n.current,c,f)},[e,n,t,s,i]),a}const dZ=({sentence:n="True Focus",manualMode:e=!1,blurAmount:t=5,borderColor:i="green",glowColor:s="rgba(0, 255, 0, 0.6)",animationDuration:r=.5,pauseBetweenAnimations:a=1})=>{const l=n.split(" "),[c,f]=z.useState(0),[p,g]=z.useState(null),v=z.useRef(null),x=z.useRef([]),[A,M]=z.useState({x:0,y:0,width:0,height:0});z.useEffect(()=>{if(!e){const w=setInterval(()=>{f(C=>(C+1)%l.length)},(r+a)*1e3);return()=>clearInterval(w)}},[e,r,a,l.length]),z.useEffect(()=>{if(c===null||c===-1||!x.current[c]||!v.current)return;const w=v.current.getBoundingClientRect(),C=x.current[c].getBoundingClientRect();M({x:C.left-w.left,y:C.top-w.top,width:C.width,height:C.height})},[c,l.length]);const _=w=>{e&&(g(w),f(w))},S=()=>{e&&f(p)};return H.jsxs("div",{className:"relative flex gap-2 md:gap-4 justify-center items-center flex-wrap",ref:v,children:[l.map((w,C)=>{const B=C===c;return H.jsx("span",{ref:N=>x.current[C]=N,className:"relative text-[1.8rem] sm:text-[2.2rem] md:text-[3rem] font-black cursor-pointer",style:{filter:e?B?"blur(0px)":`blur(${t}px)`:B?"blur(0px)":`blur(${t}px)`,"--border-color":i,"--glow-color":s,transition:`filter ${r}s ease`},onMouseEnter:()=>_(C),onMouseLeave:S,children:w},C)}),H.jsxs(Mn.div,{className:"absolute top-0 left-0 pointer-events-none box-border border-0",animate:{x:A.x,y:A.y,width:A.width,height:A.height,opacity:c>=0?1:0},transition:{duration:r},style:{"--border-color":i,"--glow-color":s},children:[H.jsx("span",{className:"absolute w-4 h-4 border-[3px] rounded-[3px] top-[-10px] left-[-10px] border-r-0 border-b-0",style:{borderColor:"var(--border-color)",filter:"drop-shadow(0 0 4px var(--border-color))"}}),H.jsx("span",{className:"absolute w-4 h-4 border-[3px] rounded-[3px] top-[-10px] right-[-10px] border-l-0 border-b-0",style:{borderColor:"var(--border-color)",filter:"drop-shadow(0 0 4px var(--border-color))"}}),H.jsx("span",{className:"absolute w-4 h-4 border-[3px] rounded-[3px] bottom-[-10px] left-[-10px] border-r-0 border-t-0",style:{borderColor:"var(--border-color)",filter:"drop-shadow(0 0 4px var(--border-color))"}}),H.jsx("span",{className:"absolute w-4 h-4 border-[3px] rounded-[3px] bottom-[-10px] right-[-10px] border-l-0 border-t-0",style:{borderColor:"var(--border-color)",filter:"drop-shadow(0 0 4px var(--border-color))"}})]})]})};var vM={exports:{}},yM,vN;function pZ(){if(vN)return yM;vN=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return yM=n,yM}var xM,yN;function mZ(){if(yN)return xM;yN=1;var n=pZ();function e(){}function t(){}return t.resetWarningCache=e,xM=function(){function i(a,l,c,f,p,g){if(g!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function s(){return i}var r={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},xM}var xN;function gZ(){return xN||(xN=1,vM.exports=mZ()()),vM.exports}var vZ=gZ();const wt=Yv(vZ),tz=({children:n})=>H.jsx("div",{className:"flex w-full sm:w-auto",children:H.jsx("div",{className:"relative group",children:H.jsxs(Jv,{to:"/simulation",className:"relative inline-block p-px font-semibold leading-6 text-white bg-gray-800 shadow-2xl cursor-pointer rounded-xl shadow-zinc-900 transition-transform duration-300 ease-in-out hover:scale-105 active:scale-95",children:[H.jsx("span",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-teal-400 via-blue-500 to-purple-500 p-[2px] opacity-0 transition-opacity duration-500 group-hover:opacity-100"}),H.jsx("span",{className:"relative z-10 block px-4 sm:px-6 py-2 sm:py-3 rounded-xl bg-gray-950",children:H.jsxs("div",{className:"relative z-10 flex items-center space-x-2",children:[H.jsx("span",{className:"text-sm sm:text-base transition-all duration-500 group-hover:translate-x-1",children:n||"Start Simulation"}),H.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 transition-transform duration-500 group-hover:translate-x-1","data-slot":"icon","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:H.jsx("path",{clipRule:"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z",fillRule:"evenodd"})})]})})]})})});tz.propTypes={children:wt.node};function Ql(){return Ql=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ql.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const wf="173",jh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Xh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},nz=0,PT=1,iz=2,yZ=3,sz=0,cS=1,ym=2,nl=3,hl=0,zs=1,fr=2,hr=0,pd=1,IT=2,FT=3,zT=4,rz=5,hf=100,az=101,oz=102,lz=103,cz=104,uz=200,fz=201,hz=202,dz=203,Kb=204,Jb=205,pz=206,mz=207,gz=208,vz=209,yz=210,xz=211,bz=212,Az=213,Sz=214,Zb=0,Qb=1,$b=2,xd=3,eA=4,tA=5,nA=6,iA=7,ay=0,_z=1,Mz=2,cl=0,Ez=1,Tz=2,Cz=3,Gw=4,wz=5,Rz=6,Bz=7,HT="attached",Dz="detached",yf=300,uc=301,xf=302,Lm=303,Nv=304,Qm=306,bf=1e3,gs=1001,Om=1002,wi=1003,uS=1004,xZ=1004,ed=1005,bZ=1005,jn=1006,xm=1007,AZ=1007,Ao=1008,GT=1008,xs=1009,fS=1010,hS=1011,Um=1012,oy=1013,dl=1014,Vi=1015,ws=1016,dS=1017,pS=1018,Af=1020,Vw=35902,kw=1021,jw=1022,vs=1023,Xw=1024,Yw=1025,md=1026,Sf=1027,ly=1028,cy=1029,Ww=1030,mS=1031,SZ=1032,gS=1033,av=33776,ov=33777,lv=33778,cv=33779,sA=35840,rA=35841,aA=35842,oA=35843,lA=36196,cA=37492,uA=37496,fA=37808,hA=37809,dA=37810,pA=37811,mA=37812,gA=37813,vA=37814,yA=37815,xA=37816,bA=37817,AA=37818,SA=37819,_A=37820,MA=37821,uv=36492,EA=36494,TA=36495,qw=36283,CA=36284,wA=36285,RA=36286,Nz=2200,Lz=2201,Oz=2202,Pm=2300,Im=2301,Cb=2302,td=2400,nd=2401,Lv=2402,vS=2500,Kw=2501,Uz=0,Jw=1,BA=2,Rf=3200,Pz=3201,_Z=3202,MZ=3203,Bf=0,Iz=1,sl="",Qn="srgb",ja="srgb-linear",Ov="linear",mi="srgb",EZ=0,Yh=7680,TZ=7681,CZ=7682,wZ=7683,RZ=34055,BZ=34056,DZ=5386,NZ=512,LZ=513,OZ=514,UZ=515,PZ=516,IZ=517,FZ=518,VT=519,Fz=512,zz=513,Hz=514,Zw=515,Gz=516,Vz=517,kz=518,jz=519,Uv=35044,zZ=35048,HZ=35040,GZ=35045,VZ=35049,kZ=35041,jZ=35046,XZ=35050,YZ=35042,WZ="100",kT="300 es",ol=2e3,Pv=2001,qZ={COMPUTE:"compute",RENDER:"render"};let Ya=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const s=i[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e);e.target=null}}};const Tr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let bN=1234567;const gd=Math.PI/180,Fm=180/Math.PI;function ka(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Tr[n&255]+Tr[n>>8&255]+Tr[n>>16&255]+Tr[n>>24&255]+"-"+Tr[e&255]+Tr[e>>8&255]+"-"+Tr[e>>16&15|64]+Tr[e>>24&255]+"-"+Tr[t&63|128]+Tr[t>>8&255]+"-"+Tr[t>>16&255]+Tr[t>>24&255]+Tr[i&255]+Tr[i>>8&255]+Tr[i>>16&255]+Tr[i>>24&255]).toLowerCase()}function mn(n,e,t){return Math.max(e,Math.min(t,n))}function Qw(n,e){return(n%e+e)%e}function KZ(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function JZ(n,e,t){return n!==e?(t-n)/(e-n):0}function fv(n,e,t){return(1-t)*n+t*e}function ZZ(n,e,t,i){return fv(n,e,1-Math.exp(-t*i))}function QZ(n,e=1){return e-Math.abs(Qw(n,e*2)-e)}function $Z(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function eQ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function tQ(n,e){return n+Math.floor(Math.random()*(e-n+1))}function nQ(n,e){return n+Math.random()*(e-n)}function iQ(n){return n*(.5-Math.random())}function sQ(n){n!==void 0&&(bN=n);let e=bN+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function rQ(n){return n*gd}function aQ(n){return n*Fm}function oQ(n){return(n&n-1)===0&&n!==0}function lQ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function cQ(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function uQ(n,e,t,i,s){const r=Math.cos,a=Math.sin,l=r(t/2),c=a(t/2),f=r((e+i)/2),p=a((e+i)/2),g=r((e-i)/2),v=a((e-i)/2),x=r((i-e)/2),A=a((i-e)/2);switch(s){case"XYX":n.set(l*p,c*g,c*v,l*f);break;case"YZY":n.set(c*v,l*p,c*g,l*f);break;case"ZXZ":n.set(c*g,c*v,l*p,l*f);break;case"XZX":n.set(l*p,c*A,c*x,l*f);break;case"YXY":n.set(c*x,l*p,c*A,l*f);break;case"ZYZ":n.set(c*A,c*x,l*p,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function ea(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function _n(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const bm={DEG2RAD:gd,RAD2DEG:Fm,generateUUID:ka,clamp:mn,euclideanModulo:Qw,mapLinear:KZ,inverseLerp:JZ,lerp:fv,damp:ZZ,pingpong:QZ,smoothstep:$Z,smootherstep:eQ,randInt:tQ,randFloat:nQ,randFloatSpread:iQ,seededRandom:sQ,degToRad:rQ,radToDeg:aQ,isPowerOfTwo:oQ,ceilPowerOfTwo:lQ,floorPowerOfTwo:cQ,setQuaternionFromProperEuler:uQ,normalize:_n,denormalize:ea};class ze{constructor(e=0,t=0){ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(mn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(mn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*i-a*s+e.x,this.y=r*s+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bn{constructor(e,t,i,s,r,a,l,c,f){bn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,a,l,c,f)}set(e,t,i,s,r,a,l,c,f){const p=this.elements;return p[0]=e,p[1]=s,p[2]=l,p[3]=t,p[4]=r,p[5]=c,p[6]=i,p[7]=a,p[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,a=i[0],l=i[3],c=i[6],f=i[1],p=i[4],g=i[7],v=i[2],x=i[5],A=i[8],M=s[0],_=s[3],S=s[6],w=s[1],C=s[4],B=s[7],N=s[2],L=s[5],F=s[8];return r[0]=a*M+l*w+c*N,r[3]=a*_+l*C+c*L,r[6]=a*S+l*B+c*F,r[1]=f*M+p*w+g*N,r[4]=f*_+p*C+g*L,r[7]=f*S+p*B+g*F,r[2]=v*M+x*w+A*N,r[5]=v*_+x*C+A*L,r[8]=v*S+x*B+A*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],l=e[5],c=e[6],f=e[7],p=e[8];return t*a*p-t*l*f-i*r*p+i*l*c+s*r*f-s*a*c}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=p*a-l*f,v=l*c-p*r,x=f*r-a*c,A=t*g+i*v+s*x;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/A;return e[0]=g*M,e[1]=(s*f-p*i)*M,e[2]=(l*i-s*a)*M,e[3]=v*M,e[4]=(p*t-s*c)*M,e[5]=(s*r-l*t)*M,e[6]=x*M,e[7]=(i*c-f*t)*M,e[8]=(a*t-i*r)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,a,l){const c=Math.cos(r),f=Math.sin(r);return this.set(i*c,i*f,-i*(c*a+f*l)+a+e,-s*f,s*c,-s*(-f*a+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(bM.makeScale(e,t)),this}rotate(e){return this.premultiply(bM.makeRotation(-e)),this}translate(e,t){return this.premultiply(bM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const bM=new bn;function Xz(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const fQ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function mm(n,e){return new fQ[n](e)}function Iv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Yz(){const n=Iv("canvas");return n.style.display="block",n}const AN={};function nm(n){n in AN||(AN[n]=!0,console.warn(n))}function hQ(n,e,t){return new Promise(function(i,s){function r(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:i()}}setTimeout(r,t)})}function dQ(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function pQ(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const SN=new bn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),_N=new bn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function mQ(){const n={enabled:!0,workingColorSpace:ja,spaces:{},convert:function(s,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===mi&&(s.r=Jc(s.r),s.g=Jc(s.g),s.b=Jc(s.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===mi&&(s.r=Am(s.r),s.g=Am(s.g),s.b=Am(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===sl?Ov:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,a){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[ja]:{primaries:e,whitePoint:i,transfer:Ov,toXYZ:SN,fromXYZ:_N,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Qn},outputColorSpaceConfig:{drawingBufferColorSpace:Qn}},[Qn]:{primaries:e,whitePoint:i,transfer:mi,toXYZ:SN,fromXYZ:_N,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Qn}}}),n}const Vn=mQ();function Jc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Am(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Op;class Wz{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Op===void 0&&(Op=Iv("canvas")),Op.width=e.width,Op.height=e.height;const i=Op.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Op}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Iv("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=Jc(r[a]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Jc(t[i]/255)*255):t[i]=Jc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let gQ=0;class id{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:gQ++}),this.uuid=ka(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,l=s.length;a<l;a++)s[a].isDataTexture?r.push(AM(s[a].image)):r.push(AM(s[a]))}else r=AM(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function AM(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Wz.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let vQ=0;class Zn extends Ya{constructor(e=Zn.DEFAULT_IMAGE,t=Zn.DEFAULT_MAPPING,i=gs,s=gs,r=jn,a=Ao,l=vs,c=xs,f=Zn.DEFAULT_ANISOTROPY,p=sl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:vQ++}),this.uuid=ka(),this.name="",this.source=new id(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ze(0,0),this.repeat=new ze(1,1),this.center=new ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==yf)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case bf:e.x=e.x-Math.floor(e.x);break;case gs:e.x=e.x<0?0:1;break;case Om:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case bf:e.y=e.y-Math.floor(e.y);break;case gs:e.y=e.y<0?0:1;break;case Om:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Zn.DEFAULT_IMAGE=null;Zn.DEFAULT_MAPPING=yf;Zn.DEFAULT_ANISOTROPY=1;class kn{constructor(e=0,t=0,i=0,s=1){kn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*s+a[12]*r,this.y=a[1]*t+a[5]*i+a[9]*s+a[13]*r,this.z=a[2]*t+a[6]*i+a[10]*s+a[14]*r,this.w=a[3]*t+a[7]*i+a[11]*s+a[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const c=e.elements,f=c[0],p=c[4],g=c[8],v=c[1],x=c[5],A=c[9],M=c[2],_=c[6],S=c[10];if(Math.abs(p-v)<.01&&Math.abs(g-M)<.01&&Math.abs(A-_)<.01){if(Math.abs(p+v)<.1&&Math.abs(g+M)<.1&&Math.abs(A+_)<.1&&Math.abs(f+x+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const C=(f+1)/2,B=(x+1)/2,N=(S+1)/2,L=(p+v)/4,F=(g+M)/4,P=(A+_)/4;return C>B&&C>N?C<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(C),s=L/i,r=F/i):B>N?B<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(B),i=L/s,r=P/s):N<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(N),i=F/r,s=P/r),this.set(i,s,r,t),this}let w=Math.sqrt((_-A)*(_-A)+(g-M)*(g-M)+(v-p)*(v-p));return Math.abs(w)<.001&&(w=1),this.x=(_-A)/w,this.y=(g-M)/w,this.z=(v-p)/w,this.w=Math.acos((f+x+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this.z=mn(this.z,e.z,t.z),this.w=mn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this.z=mn(this.z,e,t),this.w=mn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(mn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class yS extends Ya{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new kn(0,0,e,t),this.scissorTest=!1,this.viewport=new kn(0,0,e,t);const s={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:jn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new Zn(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let l=0;l<a;l++)this.textures[l]=r.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new id(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ki extends yS{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class uy extends Zn{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=wi,this.minFilter=wi,this.wrapR=gs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class yQ extends ki{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new uy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class xS extends Zn{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=wi,this.minFilter=wi,this.wrapR=gs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xQ extends ki{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new xS(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Hs{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,a,l){let c=i[s+0],f=i[s+1],p=i[s+2],g=i[s+3];const v=r[a+0],x=r[a+1],A=r[a+2],M=r[a+3];if(l===0){e[t+0]=c,e[t+1]=f,e[t+2]=p,e[t+3]=g;return}if(l===1){e[t+0]=v,e[t+1]=x,e[t+2]=A,e[t+3]=M;return}if(g!==M||c!==v||f!==x||p!==A){let _=1-l;const S=c*v+f*x+p*A+g*M,w=S>=0?1:-1,C=1-S*S;if(C>Number.EPSILON){const N=Math.sqrt(C),L=Math.atan2(N,S*w);_=Math.sin(_*L)/N,l=Math.sin(l*L)/N}const B=l*w;if(c=c*_+v*B,f=f*_+x*B,p=p*_+A*B,g=g*_+M*B,_===1-l){const N=1/Math.sqrt(c*c+f*f+p*p+g*g);c*=N,f*=N,p*=N,g*=N}}e[t]=c,e[t+1]=f,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,s,r,a){const l=i[s],c=i[s+1],f=i[s+2],p=i[s+3],g=r[a],v=r[a+1],x=r[a+2],A=r[a+3];return e[t]=l*A+p*g+c*x-f*v,e[t+1]=c*A+p*v+f*g-l*x,e[t+2]=f*A+p*x+l*v-c*g,e[t+3]=p*A-l*g-c*v-f*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,r=e._z,a=e._order,l=Math.cos,c=Math.sin,f=l(i/2),p=l(s/2),g=l(r/2),v=c(i/2),x=c(s/2),A=c(r/2);switch(a){case"XYZ":this._x=v*p*g+f*x*A,this._y=f*x*g-v*p*A,this._z=f*p*A+v*x*g,this._w=f*p*g-v*x*A;break;case"YXZ":this._x=v*p*g+f*x*A,this._y=f*x*g-v*p*A,this._z=f*p*A-v*x*g,this._w=f*p*g+v*x*A;break;case"ZXY":this._x=v*p*g-f*x*A,this._y=f*x*g+v*p*A,this._z=f*p*A+v*x*g,this._w=f*p*g-v*x*A;break;case"ZYX":this._x=v*p*g-f*x*A,this._y=f*x*g+v*p*A,this._z=f*p*A-v*x*g,this._w=f*p*g+v*x*A;break;case"YZX":this._x=v*p*g+f*x*A,this._y=f*x*g+v*p*A,this._z=f*p*A-v*x*g,this._w=f*p*g-v*x*A;break;case"XZY":this._x=v*p*g-f*x*A,this._y=f*x*g-v*p*A,this._z=f*p*A+v*x*g,this._w=f*p*g+v*x*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],a=t[1],l=t[5],c=t[9],f=t[2],p=t[6],g=t[10],v=i+l+g;if(v>0){const x=.5/Math.sqrt(v+1);this._w=.25/x,this._x=(p-c)*x,this._y=(r-f)*x,this._z=(a-s)*x}else if(i>l&&i>g){const x=2*Math.sqrt(1+i-l-g);this._w=(p-c)/x,this._x=.25*x,this._y=(s+a)/x,this._z=(r+f)/x}else if(l>g){const x=2*Math.sqrt(1+l-i-g);this._w=(r-f)/x,this._x=(s+a)/x,this._y=.25*x,this._z=(c+p)/x}else{const x=2*Math.sqrt(1+g-i-l);this._w=(a-s)/x,this._x=(r+f)/x,this._y=(c+p)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,a=e._w,l=t._x,c=t._y,f=t._z,p=t._w;return this._x=i*p+a*l+s*f-r*c,this._y=s*p+a*c+r*l-i*f,this._z=r*p+a*f+i*c-s*l,this._w=a*p-i*l-s*c-r*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,a=this._w;let l=a*e._w+i*e._x+s*e._y+r*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=i,this._y=s,this._z=r,this;const c=1-l*l;if(c<=Number.EPSILON){const x=1-t;return this._w=x*a+t*this._w,this._x=x*i+t*this._x,this._y=x*s+t*this._y,this._z=x*r+t*this._z,this.normalize(),this}const f=Math.sqrt(c),p=Math.atan2(f,l),g=Math.sin((1-t)*p)/f,v=Math.sin(t*p)/f;return this._w=a*g+this._w*v,this._x=i*g+this._x*v,this._y=s*g+this._y*v,this._z=r*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(e=0,t=0,i=0){te.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(MN.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(MN.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,a=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*a,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*a,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,a=e.y,l=e.z,c=e.w,f=2*(a*s-l*i),p=2*(l*t-r*s),g=2*(r*i-a*t);return this.x=t+c*f+a*g-l*p,this.y=i+c*p+l*f-r*g,this.z=s+c*g+r*p-a*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this.z=mn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this.z=mn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(mn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,a=t.x,l=t.y,c=t.z;return this.x=s*c-r*l,this.y=r*a-i*c,this.z=i*l-s*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return SM.copy(this).projectOnVector(e),this.sub(SM)}reflect(e){return this.sub(SM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(mn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const SM=new te,MN=new Hs;class Lr{constructor(e=new te(1/0,1/0,1/0),t=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Jo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Jo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Jo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=r.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,Jo):Jo.fromBufferAttribute(r,a),Jo.applyMatrix4(e.matrixWorld),this.expandByPoint(Jo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),c1.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),c1.copy(i.boundingBox)),c1.applyMatrix4(e.matrixWorld),this.union(c1)}const s=e.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Jo),Jo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(E0),u1.subVectors(this.max,E0),Up.subVectors(e.a,E0),Pp.subVectors(e.b,E0),Ip.subVectors(e.c,E0),Ju.subVectors(Pp,Up),Zu.subVectors(Ip,Pp),Ch.subVectors(Up,Ip);let t=[0,-Ju.z,Ju.y,0,-Zu.z,Zu.y,0,-Ch.z,Ch.y,Ju.z,0,-Ju.x,Zu.z,0,-Zu.x,Ch.z,0,-Ch.x,-Ju.y,Ju.x,0,-Zu.y,Zu.x,0,-Ch.y,Ch.x,0];return!_M(t,Up,Pp,Ip,u1)||(t=[1,0,0,0,1,0,0,0,1],!_M(t,Up,Pp,Ip,u1))?!1:(f1.crossVectors(Ju,Zu),t=[f1.x,f1.y,f1.z],_M(t,Up,Pp,Ip,u1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Jo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Jo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Uc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Uc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Uc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Uc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Uc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Uc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Uc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Uc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Uc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Uc=[new te,new te,new te,new te,new te,new te,new te,new te],Jo=new te,c1=new Lr,Up=new te,Pp=new te,Ip=new te,Ju=new te,Zu=new te,Ch=new te,E0=new te,u1=new te,f1=new te,wh=new te;function _M(n,e,t,i,s){for(let r=0,a=n.length-3;r<=a;r+=3){wh.fromArray(n,r);const l=s.x*Math.abs(wh.x)+s.y*Math.abs(wh.y)+s.z*Math.abs(wh.z),c=e.dot(wh),f=t.dot(wh),p=i.dot(wh);if(Math.max(-Math.max(c,f,p),Math.min(c,f,p))>l)return!1}return!0}const bQ=new Lr,T0=new te,MM=new te;class dr{constructor(e=new te,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):bQ.setFromPoints(e).getCenter(i);let s=0;for(let r=0,a=e.length;r<a;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;T0.subVectors(e,this.center);const t=T0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(T0,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(MM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(T0.copy(e.center).add(MM)),this.expandByPoint(T0.copy(e.center).sub(MM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Pc=new te,EM=new te,h1=new te,Qu=new te,TM=new te,d1=new te,CM=new te;class Cd{constructor(e=new te,t=new te(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Pc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Pc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Pc.copy(this.origin).addScaledVector(this.direction,t),Pc.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){EM.copy(e).add(t).multiplyScalar(.5),h1.copy(t).sub(e).normalize(),Qu.copy(this.origin).sub(EM);const r=e.distanceTo(t)*.5,a=-this.direction.dot(h1),l=Qu.dot(this.direction),c=-Qu.dot(h1),f=Qu.lengthSq(),p=Math.abs(1-a*a);let g,v,x,A;if(p>0)if(g=a*c-l,v=a*l-c,A=r*p,g>=0)if(v>=-A)if(v<=A){const M=1/p;g*=M,v*=M,x=g*(g+a*v+2*l)+v*(a*g+v+2*c)+f}else v=r,g=Math.max(0,-(a*v+l)),x=-g*g+v*(v+2*c)+f;else v=-r,g=Math.max(0,-(a*v+l)),x=-g*g+v*(v+2*c)+f;else v<=-A?(g=Math.max(0,-(-a*r+l)),v=g>0?-r:Math.min(Math.max(-r,-c),r),x=-g*g+v*(v+2*c)+f):v<=A?(g=0,v=Math.min(Math.max(-r,-c),r),x=v*(v+2*c)+f):(g=Math.max(0,-(a*r+l)),v=g>0?r:Math.min(Math.max(-r,-c),r),x=-g*g+v*(v+2*c)+f);else v=a>0?-r:r,g=Math.max(0,-(a*v+l)),x=-g*g+v*(v+2*c)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,g),s&&s.copy(EM).addScaledVector(h1,v),x}intersectSphere(e,t){Pc.subVectors(e.center,this.origin);const i=Pc.dot(this.direction),s=Pc.dot(Pc)-i*i,r=e.radius*e.radius;if(s>r)return null;const a=Math.sqrt(r-s),l=i-a,c=i+a;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,a,l,c;const f=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,v=this.origin;return f>=0?(i=(e.min.x-v.x)*f,s=(e.max.x-v.x)*f):(i=(e.max.x-v.x)*f,s=(e.min.x-v.x)*f),p>=0?(r=(e.min.y-v.y)*p,a=(e.max.y-v.y)*p):(r=(e.max.y-v.y)*p,a=(e.min.y-v.y)*p),i>a||r>s||((r>i||isNaN(i))&&(i=r),(a<s||isNaN(s))&&(s=a),g>=0?(l=(e.min.z-v.z)*g,c=(e.max.z-v.z)*g):(l=(e.max.z-v.z)*g,c=(e.min.z-v.z)*g),i>c||l>s)||((l>i||i!==i)&&(i=l),(c<s||s!==s)&&(s=c),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,Pc)!==null}intersectTriangle(e,t,i,s,r){TM.subVectors(t,e),d1.subVectors(i,e),CM.crossVectors(TM,d1);let a=this.direction.dot(CM),l;if(a>0){if(s)return null;l=1}else if(a<0)l=-1,a=-a;else return null;Qu.subVectors(this.origin,e);const c=l*this.direction.dot(d1.crossVectors(Qu,d1));if(c<0)return null;const f=l*this.direction.dot(TM.cross(Qu));if(f<0||c+f>a)return null;const p=-l*Qu.dot(CM);return p<0?null:this.at(p/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Wt{constructor(e,t,i,s,r,a,l,c,f,p,g,v,x,A,M,_){Wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,a,l,c,f,p,g,v,x,A,M,_)}set(e,t,i,s,r,a,l,c,f,p,g,v,x,A,M,_){const S=this.elements;return S[0]=e,S[4]=t,S[8]=i,S[12]=s,S[1]=r,S[5]=a,S[9]=l,S[13]=c,S[2]=f,S[6]=p,S[10]=g,S[14]=v,S[3]=x,S[7]=A,S[11]=M,S[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Wt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/Fp.setFromMatrixColumn(e,0).length(),r=1/Fp.setFromMatrixColumn(e,1).length(),a=1/Fp.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,a=Math.cos(i),l=Math.sin(i),c=Math.cos(s),f=Math.sin(s),p=Math.cos(r),g=Math.sin(r);if(e.order==="XYZ"){const v=a*p,x=a*g,A=l*p,M=l*g;t[0]=c*p,t[4]=-c*g,t[8]=f,t[1]=x+A*f,t[5]=v-M*f,t[9]=-l*c,t[2]=M-v*f,t[6]=A+x*f,t[10]=a*c}else if(e.order==="YXZ"){const v=c*p,x=c*g,A=f*p,M=f*g;t[0]=v+M*l,t[4]=A*l-x,t[8]=a*f,t[1]=a*g,t[5]=a*p,t[9]=-l,t[2]=x*l-A,t[6]=M+v*l,t[10]=a*c}else if(e.order==="ZXY"){const v=c*p,x=c*g,A=f*p,M=f*g;t[0]=v-M*l,t[4]=-a*g,t[8]=A+x*l,t[1]=x+A*l,t[5]=a*p,t[9]=M-v*l,t[2]=-a*f,t[6]=l,t[10]=a*c}else if(e.order==="ZYX"){const v=a*p,x=a*g,A=l*p,M=l*g;t[0]=c*p,t[4]=A*f-x,t[8]=v*f+M,t[1]=c*g,t[5]=M*f+v,t[9]=x*f-A,t[2]=-f,t[6]=l*c,t[10]=a*c}else if(e.order==="YZX"){const v=a*c,x=a*f,A=l*c,M=l*f;t[0]=c*p,t[4]=M-v*g,t[8]=A*g+x,t[1]=g,t[5]=a*p,t[9]=-l*p,t[2]=-f*p,t[6]=x*g+A,t[10]=v-M*g}else if(e.order==="XZY"){const v=a*c,x=a*f,A=l*c,M=l*f;t[0]=c*p,t[4]=-g,t[8]=f*p,t[1]=v*g+M,t[5]=a*p,t[9]=x*g-A,t[2]=A*g-x,t[6]=l*p,t[10]=M*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(AQ,e,SQ)}lookAt(e,t,i){const s=this.elements;return Ha.subVectors(e,t),Ha.lengthSq()===0&&(Ha.z=1),Ha.normalize(),$u.crossVectors(i,Ha),$u.lengthSq()===0&&(Math.abs(i.z)===1?Ha.x+=1e-4:Ha.z+=1e-4,Ha.normalize(),$u.crossVectors(i,Ha)),$u.normalize(),p1.crossVectors(Ha,$u),s[0]=$u.x,s[4]=p1.x,s[8]=Ha.x,s[1]=$u.y,s[5]=p1.y,s[9]=Ha.y,s[2]=$u.z,s[6]=p1.z,s[10]=Ha.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,a=i[0],l=i[4],c=i[8],f=i[12],p=i[1],g=i[5],v=i[9],x=i[13],A=i[2],M=i[6],_=i[10],S=i[14],w=i[3],C=i[7],B=i[11],N=i[15],L=s[0],F=s[4],P=s[8],U=s[12],I=s[1],X=s[5],re=s[9],ee=s[13],$=s[2],ae=s[6],j=s[10],Q=s[14],J=s[3],xe=s[7],Y=s[11],oe=s[15];return r[0]=a*L+l*I+c*$+f*J,r[4]=a*F+l*X+c*ae+f*xe,r[8]=a*P+l*re+c*j+f*Y,r[12]=a*U+l*ee+c*Q+f*oe,r[1]=p*L+g*I+v*$+x*J,r[5]=p*F+g*X+v*ae+x*xe,r[9]=p*P+g*re+v*j+x*Y,r[13]=p*U+g*ee+v*Q+x*oe,r[2]=A*L+M*I+_*$+S*J,r[6]=A*F+M*X+_*ae+S*xe,r[10]=A*P+M*re+_*j+S*Y,r[14]=A*U+M*ee+_*Q+S*oe,r[3]=w*L+C*I+B*$+N*J,r[7]=w*F+C*X+B*ae+N*xe,r[11]=w*P+C*re+B*j+N*Y,r[15]=w*U+C*ee+B*Q+N*oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],a=e[1],l=e[5],c=e[9],f=e[13],p=e[2],g=e[6],v=e[10],x=e[14],A=e[3],M=e[7],_=e[11],S=e[15];return A*(+r*c*g-s*f*g-r*l*v+i*f*v+s*l*x-i*c*x)+M*(+t*c*x-t*f*v+r*a*v-s*a*x+s*f*p-r*c*p)+_*(+t*f*g-t*l*x-r*a*g+i*a*x+r*l*p-i*f*p)+S*(-s*l*p-t*c*g+t*l*v+s*a*g-i*a*v+i*c*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=e[9],v=e[10],x=e[11],A=e[12],M=e[13],_=e[14],S=e[15],w=g*_*f-M*v*f+M*c*x-l*_*x-g*c*S+l*v*S,C=A*v*f-p*_*f-A*c*x+a*_*x+p*c*S-a*v*S,B=p*M*f-A*g*f+A*l*x-a*M*x-p*l*S+a*g*S,N=A*g*c-p*M*c-A*l*v+a*M*v+p*l*_-a*g*_,L=t*w+i*C+s*B+r*N;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/L;return e[0]=w*F,e[1]=(M*v*r-g*_*r-M*s*x+i*_*x+g*s*S-i*v*S)*F,e[2]=(l*_*r-M*c*r+M*s*f-i*_*f-l*s*S+i*c*S)*F,e[3]=(g*c*r-l*v*r-g*s*f+i*v*f+l*s*x-i*c*x)*F,e[4]=C*F,e[5]=(p*_*r-A*v*r+A*s*x-t*_*x-p*s*S+t*v*S)*F,e[6]=(A*c*r-a*_*r-A*s*f+t*_*f+a*s*S-t*c*S)*F,e[7]=(a*v*r-p*c*r+p*s*f-t*v*f-a*s*x+t*c*x)*F,e[8]=B*F,e[9]=(A*g*r-p*M*r-A*i*x+t*M*x+p*i*S-t*g*S)*F,e[10]=(a*M*r-A*l*r+A*i*f-t*M*f-a*i*S+t*l*S)*F,e[11]=(p*l*r-a*g*r-p*i*f+t*g*f+a*i*x-t*l*x)*F,e[12]=N*F,e[13]=(p*M*s-A*g*s+A*i*v-t*M*v-p*i*_+t*g*_)*F,e[14]=(A*l*s-a*M*s-A*i*c+t*M*c+a*i*_-t*l*_)*F,e[15]=(a*g*s-p*l*s+p*i*c-t*g*c-a*i*v+t*l*v)*F,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,a=e.x,l=e.y,c=e.z,f=r*a,p=r*l;return this.set(f*a+i,f*l-s*c,f*c+s*l,0,f*l+s*c,p*l+i,p*c-s*a,0,f*c-s*l,p*c+s*a,r*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,a){return this.set(1,i,r,0,e,1,a,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,a=t._y,l=t._z,c=t._w,f=r+r,p=a+a,g=l+l,v=r*f,x=r*p,A=r*g,M=a*p,_=a*g,S=l*g,w=c*f,C=c*p,B=c*g,N=i.x,L=i.y,F=i.z;return s[0]=(1-(M+S))*N,s[1]=(x+B)*N,s[2]=(A-C)*N,s[3]=0,s[4]=(x-B)*L,s[5]=(1-(v+S))*L,s[6]=(_+w)*L,s[7]=0,s[8]=(A+C)*F,s[9]=(_-w)*F,s[10]=(1-(v+M))*F,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=Fp.set(s[0],s[1],s[2]).length();const a=Fp.set(s[4],s[5],s[6]).length(),l=Fp.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Zo.copy(this);const f=1/r,p=1/a,g=1/l;return Zo.elements[0]*=f,Zo.elements[1]*=f,Zo.elements[2]*=f,Zo.elements[4]*=p,Zo.elements[5]*=p,Zo.elements[6]*=p,Zo.elements[8]*=g,Zo.elements[9]*=g,Zo.elements[10]*=g,t.setFromRotationMatrix(Zo),i.x=r,i.y=a,i.z=l,this}makePerspective(e,t,i,s,r,a,l=ol){const c=this.elements,f=2*r/(t-e),p=2*r/(i-s),g=(t+e)/(t-e),v=(i+s)/(i-s);let x,A;if(l===ol)x=-(a+r)/(a-r),A=-2*a*r/(a-r);else if(l===Pv)x=-a/(a-r),A=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=f,c[4]=0,c[8]=g,c[12]=0,c[1]=0,c[5]=p,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=x,c[14]=A,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,s,r,a,l=ol){const c=this.elements,f=1/(t-e),p=1/(i-s),g=1/(a-r),v=(t+e)*f,x=(i+s)*p;let A,M;if(l===ol)A=(a+r)*g,M=-2*g;else if(l===Pv)A=r*g,M=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*f,c[4]=0,c[8]=0,c[12]=-v,c[1]=0,c[5]=2*p,c[9]=0,c[13]=-x,c[2]=0,c[6]=0,c[10]=M,c[14]=-A,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Fp=new te,Zo=new Wt,AQ=new te(0,0,0),SQ=new te(1,1,1),$u=new te,p1=new te,Ha=new te,EN=new Wt,TN=new Hs;class Xa{constructor(e=0,t=0,i=0,s=Xa.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,r=s[0],a=s[4],l=s[8],c=s[1],f=s[5],p=s[9],g=s[2],v=s[6],x=s[10];switch(t){case"XYZ":this._y=Math.asin(mn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,x),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-mn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,x),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(mn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,x),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(c,r));break;case"ZYX":this._y=Math.asin(-mn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,x),this._z=Math.atan2(c,r)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(mn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,f),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(l,x));break;case"XZY":this._z=Math.asin(-mn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(l,r)):(this._x=Math.atan2(-p,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return EN.makeRotationFromQuaternion(e),this.setFromRotationMatrix(EN,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return TN.setFromEuler(this),this.setFromQuaternion(TN,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Xa.DEFAULT_ORDER="XYZ";class zm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let _Q=0;const CN=new te,zp=new Hs,Ic=new Wt,m1=new te,C0=new te,MQ=new te,EQ=new Hs,wN=new te(1,0,0),RN=new te(0,1,0),BN=new te(0,0,1),DN={type:"added"},TQ={type:"removed"},Hp={type:"childadded",child:null},wM={type:"childremoved",child:null};class Pn extends Ya{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_Q++}),this.uuid=ka(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Pn.DEFAULT_UP.clone();const e=new te,t=new Xa,i=new Hs,s=new te(1,1,1);function r(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Wt},normalMatrix:{value:new bn}}),this.matrix=new Wt,this.matrixWorld=new Wt,this.matrixAutoUpdate=Pn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new zm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return zp.setFromAxisAngle(e,t),this.quaternion.multiply(zp),this}rotateOnWorldAxis(e,t){return zp.setFromAxisAngle(e,t),this.quaternion.premultiply(zp),this}rotateX(e){return this.rotateOnAxis(wN,e)}rotateY(e){return this.rotateOnAxis(RN,e)}rotateZ(e){return this.rotateOnAxis(BN,e)}translateOnAxis(e,t){return CN.copy(e).applyQuaternion(this.quaternion),this.position.add(CN.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(wN,e)}translateY(e){return this.translateOnAxis(RN,e)}translateZ(e){return this.translateOnAxis(BN,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ic.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?m1.copy(e):m1.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),C0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ic.lookAt(C0,m1,this.up):Ic.lookAt(m1,C0,this.up),this.quaternion.setFromRotationMatrix(Ic),s&&(Ic.extractRotation(s.matrixWorld),zp.setFromRotationMatrix(Ic),this.quaternion.premultiply(zp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(DN),Hp.child=e,this.dispatchEvent(Hp),Hp.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(TQ),wM.child=e,this.dispatchEvent(wM),wM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ic.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ic.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ic),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(DN),Hp.child=e,this.dispatchEvent(Hp),Hp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(C0,e,MQ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(C0,EQ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let f=0,p=c.length;f<p;f++){const g=c[f];r(e.shapes,g)}else r(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,f=this.material.length;c<f;c++)l.push(r(e.materials,this.material[c]));s.material=l}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];s.animations.push(r(e.animations,c))}}if(t){const l=a(e.geometries),c=a(e.materials),f=a(e.textures),p=a(e.images),g=a(e.shapes),v=a(e.skeletons),x=a(e.animations),A=a(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),p.length>0&&(i.images=p),g.length>0&&(i.shapes=g),v.length>0&&(i.skeletons=v),x.length>0&&(i.animations=x),A.length>0&&(i.nodes=A)}return i.object=s,i;function a(l){const c=[];for(const f in l){const p=l[f];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Pn.DEFAULT_UP=new te(0,1,0);Pn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Qo=new te,Fc=new te,RM=new te,zc=new te,Gp=new te,Vp=new te,NN=new te,BM=new te,DM=new te,NM=new te,LM=new kn,OM=new kn,UM=new kn;class Aa{constructor(e=new te,t=new te,i=new te){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Qo.subVectors(e,t),s.cross(Qo);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){Qo.subVectors(s,t),Fc.subVectors(i,t),RM.subVectors(e,t);const a=Qo.dot(Qo),l=Qo.dot(Fc),c=Qo.dot(RM),f=Fc.dot(Fc),p=Fc.dot(RM),g=a*f-l*l;if(g===0)return r.set(0,0,0),null;const v=1/g,x=(f*c-l*p)*v,A=(a*p-l*c)*v;return r.set(1-x-A,A,x)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,zc)===null?!1:zc.x>=0&&zc.y>=0&&zc.x+zc.y<=1}static getInterpolation(e,t,i,s,r,a,l,c){return this.getBarycoord(e,t,i,s,zc)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(r,zc.x),c.addScaledVector(a,zc.y),c.addScaledVector(l,zc.z),c)}static getInterpolatedAttribute(e,t,i,s,r,a){return LM.setScalar(0),OM.setScalar(0),UM.setScalar(0),LM.fromBufferAttribute(e,t),OM.fromBufferAttribute(e,i),UM.fromBufferAttribute(e,s),a.setScalar(0),a.addScaledVector(LM,r.x),a.addScaledVector(OM,r.y),a.addScaledVector(UM,r.z),a}static isFrontFacing(e,t,i,s){return Qo.subVectors(i,t),Fc.subVectors(e,t),Qo.cross(Fc).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Qo.subVectors(this.c,this.b),Fc.subVectors(this.a,this.b),Qo.cross(Fc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Aa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Aa.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,r){return Aa.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return Aa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Aa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let a,l;Gp.subVectors(s,i),Vp.subVectors(r,i),BM.subVectors(e,i);const c=Gp.dot(BM),f=Vp.dot(BM);if(c<=0&&f<=0)return t.copy(i);DM.subVectors(e,s);const p=Gp.dot(DM),g=Vp.dot(DM);if(p>=0&&g<=p)return t.copy(s);const v=c*g-p*f;if(v<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(Gp,a);NM.subVectors(e,r);const x=Gp.dot(NM),A=Vp.dot(NM);if(A>=0&&x<=A)return t.copy(r);const M=x*f-c*A;if(M<=0&&f>=0&&A<=0)return l=f/(f-A),t.copy(i).addScaledVector(Vp,l);const _=p*A-x*g;if(_<=0&&g-p>=0&&x-A>=0)return NN.subVectors(r,s),l=(g-p)/(g-p+(x-A)),t.copy(s).addScaledVector(NN,l);const S=1/(_+M+v);return a=M*S,l=v*S,t.copy(i).addScaledVector(Gp,a).addScaledVector(Vp,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const qz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ef={h:0,s:0,l:0},g1={h:0,s:0,l:0};function PM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class pt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Qn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Vn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Vn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Vn.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Vn.workingColorSpace){if(e=Qw(e,1),t=mn(t,0,1),i=mn(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,a=2*i-r;this.r=PM(a,r,e+1/3),this.g=PM(a,r,e),this.b=PM(a,r,e-1/3)}return Vn.toWorkingColorSpace(this,s),this}setStyle(e,t=Qn){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=s[1],l=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Qn){const i=qz[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Jc(e.r),this.g=Jc(e.g),this.b=Jc(e.b),this}copyLinearToSRGB(e){return this.r=Am(e.r),this.g=Am(e.g),this.b=Am(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qn){return Vn.fromWorkingColorSpace(Cr.copy(this),e),Math.round(mn(Cr.r*255,0,255))*65536+Math.round(mn(Cr.g*255,0,255))*256+Math.round(mn(Cr.b*255,0,255))}getHexString(e=Qn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Vn.workingColorSpace){Vn.fromWorkingColorSpace(Cr.copy(this),t);const i=Cr.r,s=Cr.g,r=Cr.b,a=Math.max(i,s,r),l=Math.min(i,s,r);let c,f;const p=(l+a)/2;if(l===a)c=0,f=0;else{const g=a-l;switch(f=p<=.5?g/(a+l):g/(2-a-l),a){case i:c=(s-r)/g+(s<r?6:0);break;case s:c=(r-i)/g+2;break;case r:c=(i-s)/g+4;break}c/=6}return e.h=c,e.s=f,e.l=p,e}getRGB(e,t=Vn.workingColorSpace){return Vn.fromWorkingColorSpace(Cr.copy(this),t),e.r=Cr.r,e.g=Cr.g,e.b=Cr.b,e}getStyle(e=Qn){Vn.fromWorkingColorSpace(Cr.copy(this),e);const t=Cr.r,i=Cr.g,s=Cr.b;return e!==Qn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(ef),this.setHSL(ef.h+e,ef.s+t,ef.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ef),e.getHSL(g1);const i=fv(ef.h,g1.h,t),s=fv(ef.s,g1.s,t),r=fv(ef.l,g1.l,t);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*s,this.g=r[1]*t+r[4]*i+r[7]*s,this.b=r[2]*t+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Cr=new pt;pt.NAMES=qz;let CQ=0;class ys extends Ya{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:CQ++}),this.uuid=ka(),this.name="",this.type="Material",this.blending=pd,this.side=hl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Kb,this.blendDst=Jb,this.blendEquation=hf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new pt(0,0,0),this.blendAlpha=0,this.depthFunc=xd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=VT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Yh,this.stencilZFail=Yh,this.stencilZPass=Yh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==pd&&(i.blending=this.blending),this.side!==hl&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Kb&&(i.blendSrc=this.blendSrc),this.blendDst!==Jb&&(i.blendDst=this.blendDst),this.blendEquation!==hf&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==xd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==VT&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Yh&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Yh&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Yh&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const a=[];for(const l in r){const c=r[l];delete c.metadata,a.push(c)}return a}if(t){const r=s(e.textures),a=s(e.images);r.length>0&&(i.textures=r),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class ia extends ys{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xa,this.combine=ay,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Yc=wQ();function wQ(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(i[c]=0,i[c|256]=32768,s[c]=24,s[c|256]=24):f<-14?(i[c]=1024>>-f-14,i[c|256]=1024>>-f-14|32768,s[c]=-f-1,s[c|256]=-f-1):f<=15?(i[c]=f+15<<10,i[c|256]=f+15<<10|32768,s[c]=13,s[c|256]=13):f<128?(i[c]=31744,i[c|256]=64512,s[c]=24,s[c|256]=24):(i[c]=31744,i[c|256]=64512,s[c]=13,s[c|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,p=0;for(;(f&8388608)===0;)f<<=1,p-=8388608;f&=-8388609,p+=947912704,r[c]=f|p}for(let c=1024;c<2048;++c)r[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:r,exponentTable:a,offsetTable:l}}function ba(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=mn(n,-65504,65504),Yc.floatView[0]=n;const e=Yc.uint32View[0],t=e>>23&511;return Yc.baseTable[t]+((e&8388607)>>Yc.shiftTable[t])}function X0(n){const e=n>>10;return Yc.uint32View[0]=Yc.mantissaTable[Yc.offsetTable[e]+(n&1023)]+Yc.exponentTable[e],Yc.floatView[0]}const sd={toHalfFloat:ba,fromHalfFloat:X0},Ts=new te,v1=new ze;let RQ=0;class Xn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:RQ++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Uv,this.updateRanges=[],this.gpuType=Vi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)v1.fromBufferAttribute(this,t),v1.applyMatrix3(e),this.setXY(t,v1.x,v1.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ts.fromBufferAttribute(this,t),Ts.applyMatrix3(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ts.fromBufferAttribute(this,t),Ts.applyMatrix4(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ts.fromBufferAttribute(this,t),Ts.applyNormalMatrix(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ts.fromBufferAttribute(this,t),Ts.transformDirection(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ea(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=_n(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ea(t,this.array)),t}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ea(t,this.array)),t}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ea(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ea(t,this.array)),t}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),s=_n(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),s=_n(s,this.array),r=_n(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Uv&&(e.usage=this.usage),e}}class BQ extends Xn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class DQ extends Xn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class NQ extends Xn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class LQ extends Xn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class $w extends Xn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class OQ extends Xn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class eR extends Xn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class UQ extends Xn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=X0(this.array[e*this.itemSize]);return this.normalized&&(t=ea(t,this.array)),t}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize]=ba(t),this}getY(e){let t=X0(this.array[e*this.itemSize+1]);return this.normalized&&(t=ea(t,this.array)),t}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+1]=ba(t),this}getZ(e){let t=X0(this.array[e*this.itemSize+2]);return this.normalized&&(t=ea(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+2]=ba(t),this}getW(e){let t=X0(this.array[e*this.itemSize+3]);return this.normalized&&(t=ea(t,this.array)),t}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+3]=ba(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.array[e+0]=ba(t),this.array[e+1]=ba(i),this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),s=_n(s,this.array)),this.array[e+0]=ba(t),this.array[e+1]=ba(i),this.array[e+2]=ba(s),this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),s=_n(s,this.array),r=_n(r,this.array)),this.array[e+0]=ba(t),this.array[e+1]=ba(i),this.array[e+2]=ba(s),this.array[e+3]=ba(r),this}}class zt extends Xn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let PQ=0;const mo=new Wt,IM=new Pn,kp=new te,Ga=new Lr,w0=new Lr,Ks=new te;class gn extends Ya{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:PQ++}),this.uuid=ka(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Xz(e)?eR:$w)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new bn().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return mo.makeRotationFromQuaternion(e),this.applyMatrix4(mo),this}rotateX(e){return mo.makeRotationX(e),this.applyMatrix4(mo),this}rotateY(e){return mo.makeRotationY(e),this.applyMatrix4(mo),this}rotateZ(e){return mo.makeRotationZ(e),this.applyMatrix4(mo),this}translate(e,t,i){return mo.makeTranslation(e,t,i),this.applyMatrix4(mo),this}scale(e,t,i){return mo.makeScale(e,t,i),this.applyMatrix4(mo),this}lookAt(e){return IM.lookAt(e),IM.updateMatrix(),this.applyMatrix4(IM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kp).negate(),this.translate(kp.x,kp.y,kp.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new zt(i,3))}else{const i=Math.min(e.length,t.count);for(let s=0;s<i;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Lr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const r=t[i];Ga.setFromBufferAttribute(r),this.morphTargetsRelative?(Ks.addVectors(this.boundingBox.min,Ga.min),this.boundingBox.expandByPoint(Ks),Ks.addVectors(this.boundingBox.max,Ga.max),this.boundingBox.expandByPoint(Ks)):(this.boundingBox.expandByPoint(Ga.min),this.boundingBox.expandByPoint(Ga.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new te,1/0);return}if(e){const i=this.boundingSphere.center;if(Ga.setFromBufferAttribute(e),t)for(let r=0,a=t.length;r<a;r++){const l=t[r];w0.setFromBufferAttribute(l),this.morphTargetsRelative?(Ks.addVectors(Ga.min,w0.min),Ga.expandByPoint(Ks),Ks.addVectors(Ga.max,w0.max),Ga.expandByPoint(Ks)):(Ga.expandByPoint(w0.min),Ga.expandByPoint(w0.max))}Ga.getCenter(i);let s=0;for(let r=0,a=e.count;r<a;r++)Ks.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(Ks));if(t)for(let r=0,a=t.length;r<a;r++){const l=t[r],c=this.morphTargetsRelative;for(let f=0,p=l.count;f<p;f++)Ks.fromBufferAttribute(l,f),c&&(kp.fromBufferAttribute(e,f),Ks.add(kp)),s=Math.max(s,i.distanceToSquared(Ks))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xn(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),l=[],c=[];for(let P=0;P<i.count;P++)l[P]=new te,c[P]=new te;const f=new te,p=new te,g=new te,v=new ze,x=new ze,A=new ze,M=new te,_=new te;function S(P,U,I){f.fromBufferAttribute(i,P),p.fromBufferAttribute(i,U),g.fromBufferAttribute(i,I),v.fromBufferAttribute(r,P),x.fromBufferAttribute(r,U),A.fromBufferAttribute(r,I),p.sub(f),g.sub(f),x.sub(v),A.sub(v);const X=1/(x.x*A.y-A.x*x.y);isFinite(X)&&(M.copy(p).multiplyScalar(A.y).addScaledVector(g,-x.y).multiplyScalar(X),_.copy(g).multiplyScalar(x.x).addScaledVector(p,-A.x).multiplyScalar(X),l[P].add(M),l[U].add(M),l[I].add(M),c[P].add(_),c[U].add(_),c[I].add(_))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let P=0,U=w.length;P<U;++P){const I=w[P],X=I.start,re=I.count;for(let ee=X,$=X+re;ee<$;ee+=3)S(e.getX(ee+0),e.getX(ee+1),e.getX(ee+2))}const C=new te,B=new te,N=new te,L=new te;function F(P){N.fromBufferAttribute(s,P),L.copy(N);const U=l[P];C.copy(U),C.sub(N.multiplyScalar(N.dot(U))).normalize(),B.crossVectors(L,U);const X=B.dot(c[P])<0?-1:1;a.setXYZW(P,C.x,C.y,C.z,X)}for(let P=0,U=w.length;P<U;++P){const I=w[P],X=I.start,re=I.count;for(let ee=X,$=X+re;ee<$;ee+=3)F(e.getX(ee+0)),F(e.getX(ee+1)),F(e.getX(ee+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Xn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,x=i.count;v<x;v++)i.setXYZ(v,0,0,0);const s=new te,r=new te,a=new te,l=new te,c=new te,f=new te,p=new te,g=new te;if(e)for(let v=0,x=e.count;v<x;v+=3){const A=e.getX(v+0),M=e.getX(v+1),_=e.getX(v+2);s.fromBufferAttribute(t,A),r.fromBufferAttribute(t,M),a.fromBufferAttribute(t,_),p.subVectors(a,r),g.subVectors(s,r),p.cross(g),l.fromBufferAttribute(i,A),c.fromBufferAttribute(i,M),f.fromBufferAttribute(i,_),l.add(p),c.add(p),f.add(p),i.setXYZ(A,l.x,l.y,l.z),i.setXYZ(M,c.x,c.y,c.z),i.setXYZ(_,f.x,f.y,f.z)}else for(let v=0,x=t.count;v<x;v+=3)s.fromBufferAttribute(t,v+0),r.fromBufferAttribute(t,v+1),a.fromBufferAttribute(t,v+2),p.subVectors(a,r),g.subVectors(s,r),p.cross(g),i.setXYZ(v+0,p.x,p.y,p.z),i.setXYZ(v+1,p.x,p.y,p.z),i.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ks.fromBufferAttribute(e,t),Ks.normalize(),e.setXYZ(t,Ks.x,Ks.y,Ks.z)}toNonIndexed(){function e(l,c){const f=l.array,p=l.itemSize,g=l.normalized,v=new f.constructor(c.length*p);let x=0,A=0;for(let M=0,_=c.length;M<_;M++){l.isInterleavedBufferAttribute?x=c[M]*l.data.stride+l.offset:x=c[M]*p;for(let S=0;S<p;S++)v[A++]=f[x++]}return new Xn(v,p,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gn,i=this.index.array,s=this.attributes;for(const l in s){const c=s[l],f=e(c,i);t.setAttribute(l,f)}const r=this.morphAttributes;for(const l in r){const c=[],f=r[l];for(let p=0,g=f.length;p<g;p++){const v=f[p],x=e(v,i);c.push(x)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const f=a[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const f=i[c];e.data.attributes[c]=f.toJSON(e.data)}const s={};let r=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],p=[];for(let g=0,v=f.length;g<v;g++){const x=f[g];p.push(x.toJSON(e.data))}p.length>0&&(s[c]=p,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const f in s){const p=s[f];this.setAttribute(f,p.clone(t))}const r=e.morphAttributes;for(const f in r){const p=[],g=r[f];for(let v=0,x=g.length;v<x;v++)p.push(g[v].clone(t));this.morphAttributes[f]=p}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let f=0,p=a.length;f<p;f++){const g=a[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const LN=new Wt,Rh=new Cd,y1=new dr,ON=new te,x1=new te,b1=new te,A1=new te,FM=new te,S1=new te,UN=new te,_1=new te;class Ci extends Pn{constructor(e=new gn,t=new ia){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const l=this.morphTargetInfluences;if(r&&l){S1.set(0,0,0);for(let c=0,f=r.length;c<f;c++){const p=l[c],g=r[c];p!==0&&(FM.fromBufferAttribute(g,e),a?S1.addScaledVector(FM,p):S1.addScaledVector(FM.sub(t),p))}t.add(S1)}return t}raycast(e,t){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),y1.copy(i.boundingSphere),y1.applyMatrix4(r),Rh.copy(e.ray).recast(e.near),!(y1.containsPoint(Rh.origin)===!1&&(Rh.intersectSphere(y1,ON)===null||Rh.origin.distanceToSquared(ON)>(e.far-e.near)**2))&&(LN.copy(r).invert(),Rh.copy(e.ray).applyMatrix4(LN),!(i.boundingBox!==null&&Rh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Rh)))}_computeIntersections(e,t,i){let s;const r=this.geometry,a=this.material,l=r.index,c=r.attributes.position,f=r.attributes.uv,p=r.attributes.uv1,g=r.attributes.normal,v=r.groups,x=r.drawRange;if(l!==null)if(Array.isArray(a))for(let A=0,M=v.length;A<M;A++){const _=v[A],S=a[_.materialIndex],w=Math.max(_.start,x.start),C=Math.min(l.count,Math.min(_.start+_.count,x.start+x.count));for(let B=w,N=C;B<N;B+=3){const L=l.getX(B),F=l.getX(B+1),P=l.getX(B+2);s=M1(this,S,e,i,f,p,g,L,F,P),s&&(s.faceIndex=Math.floor(B/3),s.face.materialIndex=_.materialIndex,t.push(s))}}else{const A=Math.max(0,x.start),M=Math.min(l.count,x.start+x.count);for(let _=A,S=M;_<S;_+=3){const w=l.getX(_),C=l.getX(_+1),B=l.getX(_+2);s=M1(this,a,e,i,f,p,g,w,C,B),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}}else if(c!==void 0)if(Array.isArray(a))for(let A=0,M=v.length;A<M;A++){const _=v[A],S=a[_.materialIndex],w=Math.max(_.start,x.start),C=Math.min(c.count,Math.min(_.start+_.count,x.start+x.count));for(let B=w,N=C;B<N;B+=3){const L=B,F=B+1,P=B+2;s=M1(this,S,e,i,f,p,g,L,F,P),s&&(s.faceIndex=Math.floor(B/3),s.face.materialIndex=_.materialIndex,t.push(s))}}else{const A=Math.max(0,x.start),M=Math.min(c.count,x.start+x.count);for(let _=A,S=M;_<S;_+=3){const w=_,C=_+1,B=_+2;s=M1(this,a,e,i,f,p,g,w,C,B),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}}}}function IQ(n,e,t,i,s,r,a,l){let c;if(e.side===zs?c=i.intersectTriangle(a,r,s,!0,l):c=i.intersectTriangle(s,r,a,e.side===hl,l),c===null)return null;_1.copy(l),_1.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(_1);return f<t.near||f>t.far?null:{distance:f,point:_1.clone(),object:n}}function M1(n,e,t,i,s,r,a,l,c,f){n.getVertexPosition(l,x1),n.getVertexPosition(c,b1),n.getVertexPosition(f,A1);const p=IQ(n,e,t,i,x1,b1,A1,UN);if(p){const g=new te;Aa.getBarycoord(UN,x1,b1,A1,g),s&&(p.uv=Aa.getInterpolatedAttribute(s,l,c,f,g,new ze)),r&&(p.uv1=Aa.getInterpolatedAttribute(r,l,c,f,g,new ze)),a&&(p.normal=Aa.getInterpolatedAttribute(a,l,c,f,g,new te),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const v={a:l,b:c,c:f,normal:new te,materialIndex:0};Aa.getNormal(x1,b1,A1,v.normal),p.face=v,p.barycoord=g}return p}class wd extends gn{constructor(e=1,t=1,i=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:a};const l=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const c=[],f=[],p=[],g=[];let v=0,x=0;A("z","y","x",-1,-1,i,t,e,a,r,0),A("z","y","x",1,-1,i,t,-e,a,r,1),A("x","z","y",1,1,e,i,t,s,a,2),A("x","z","y",1,-1,e,i,-t,s,a,3),A("x","y","z",1,-1,e,t,i,s,r,4),A("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(c),this.setAttribute("position",new zt(f,3)),this.setAttribute("normal",new zt(p,3)),this.setAttribute("uv",new zt(g,2));function A(M,_,S,w,C,B,N,L,F,P,U){const I=B/F,X=N/P,re=B/2,ee=N/2,$=L/2,ae=F+1,j=P+1;let Q=0,J=0;const xe=new te;for(let Y=0;Y<j;Y++){const oe=Y*X-ee;for(let be=0;be<ae;be++){const _e=be*I-re;xe[M]=_e*w,xe[_]=oe*C,xe[S]=$,f.push(xe.x,xe.y,xe.z),xe[M]=0,xe[_]=0,xe[S]=L>0?1:-1,p.push(xe.x,xe.y,xe.z),g.push(be/F),g.push(1-Y/P),Q+=1}}for(let Y=0;Y<P;Y++)for(let oe=0;oe<F;oe++){const be=v+oe+ae*Y,_e=v+oe+ae*(Y+1),ue=v+(oe+1)+ae*(Y+1),Ue=v+(oe+1)+ae*Y;c.push(be,_e,Ue),c.push(_e,ue,Ue),J+=6}l.addGroup(x,J,U),x+=J,v+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Hm(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function Zr(n){const e={};for(let t=0;t<n.length;t++){const i=Hm(n[t]);for(const s in i)e[s]=i[s]}return e}function FQ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Kz(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Vn.workingColorSpace}const tR={clone:Hm,merge:Zr};var zQ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,HQ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Oi extends ys{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=zQ,this.fragmentShader=HQ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hm(e.uniforms),this.uniformsGroups=FQ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?t.uniforms[s]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[s]={type:"m4",value:a.toArray()}:t.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class fy extends Pn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wt,this.projectionMatrix=new Wt,this.projectionMatrixInverse=new Wt,this.coordinateSystem=ol}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const tf=new te,PN=new ze,IN=new ze;class Zi extends fy{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Fm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(gd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Fm*2*Math.atan(Math.tan(gd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){tf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(tf.x,tf.y).multiplyScalar(-e/tf.z),tf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(tf.x,tf.y).multiplyScalar(-e/tf.z)}getViewSize(e,t){return this.getViewBounds(e,PN,IN),t.subVectors(IN,PN)}setViewOffset(e,t,i,s,r,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(gd*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,f=a.fullHeight;r+=a.offsetX*s/c,t-=a.offsetY*i/f,s*=a.width/c,i*=a.height/f}const l=this.filmOffset;l!==0&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const jp=-90,Xp=1;class nR extends Pn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Zi(jp,Xp,e,t);s.layers=this.layers,this.add(s);const r=new Zi(jp,Xp,e,t);r.layers=this.layers,this.add(r);const a=new Zi(jp,Xp,e,t);a.layers=this.layers,this.add(a);const l=new Zi(jp,Xp,e,t);l.layers=this.layers,this.add(l);const c=new Zi(jp,Xp,e,t);c.layers=this.layers,this.add(c);const f=new Zi(jp,Xp,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,r,a,l,c]=t;for(const f of t)this.remove(f);if(e===ol)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Pv)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,l,c,f,p]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,r),e.setRenderTarget(i,1,s),e.render(t,a),e.setRenderTarget(i,2,s),e.render(t,l),e.setRenderTarget(i,3,s),e.render(t,c),e.setRenderTarget(i,4,s),e.render(t,f),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,s),e.render(t,p),e.setRenderTarget(g,v,x),e.xr.enabled=A,i.texture.needsPMREMUpdate=!0}}class hy extends Zn{constructor(e,t,i,s,r,a,l,c,f,p){e=e!==void 0?e:[],t=t!==void 0?t:uc,super(e,t,i,s,r,a,l,c,f,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bS extends ki{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new hy(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:jn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new wd(5,5,5),r=new Oi({name:"CubemapFromEquirect",uniforms:Hm(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:zs,blending:hr});r.uniforms.tEquirect.value=t;const a=new Ci(s,r),l=t.minFilter;return t.minFilter===Ao&&(t.minFilter=jn),new nR(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,s);e.setRenderTarget(r)}}class Wc extends Pn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const GQ={type:"move"};class wb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Wc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Wc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Wc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,a=null;const l=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){a=!0;for(const M of e.hand.values()){const _=t.getJointPose(M,i),S=this._getHandJoint(f,M);_!==null&&(S.matrix.fromArray(_.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=_.radius),S.visible=_!==null}const p=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],v=p.position.distanceTo(g.position),x=.02,A=.005;f.inputState.pinching&&v>x+A?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&v<=x-A&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(GQ)))}return l!==null&&(l.visible=s!==null),c!==null&&(c.visible=r!==null),f!==null&&(f.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Wc;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class AS{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new pt(e),this.density=t}clone(){return new AS(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class SS{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new pt(e),this.near=t,this.far=i}clone(){return new SS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let bd=class extends Pn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Xa,this.environmentIntensity=1,this.environmentRotation=new Xa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class dy{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Uv,this.updateRanges=[],this.version=0,this.uuid=ka()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ka()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ka()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Jr=new te;class _f{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Jr.fromBufferAttribute(this,t),Jr.applyMatrix4(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Jr.fromBufferAttribute(this,t),Jr.applyNormalMatrix(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Jr.fromBufferAttribute(this,t),Jr.transformDirection(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ea(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=_n(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ea(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ea(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ea(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ea(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),s=_n(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),s=_n(s,this.array),r=_n(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new Xn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _f(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class iR extends ys{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new pt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Yp;const R0=new te,Wp=new te,qp=new te,Kp=new ze,B0=new ze,Jz=new Wt,E1=new te,D0=new te,T1=new te,FN=new ze,zM=new ze,zN=new ze;class Zz extends Pn{constructor(e=new iR){if(super(),this.isSprite=!0,this.type="Sprite",Yp===void 0){Yp=new gn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new dy(t,5);Yp.setIndex([0,1,2,0,2,3]),Yp.setAttribute("position",new _f(i,3,0,!1)),Yp.setAttribute("uv",new _f(i,2,3,!1))}this.geometry=Yp,this.material=e,this.center=new ze(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wp.setFromMatrixScale(this.matrixWorld),Jz.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),qp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Wp.multiplyScalar(-qp.z);const i=this.material.rotation;let s,r;i!==0&&(r=Math.cos(i),s=Math.sin(i));const a=this.center;C1(E1.set(-.5,-.5,0),qp,a,Wp,s,r),C1(D0.set(.5,-.5,0),qp,a,Wp,s,r),C1(T1.set(.5,.5,0),qp,a,Wp,s,r),FN.set(0,0),zM.set(1,0),zN.set(1,1);let l=e.ray.intersectTriangle(E1,D0,T1,!1,R0);if(l===null&&(C1(D0.set(-.5,.5,0),qp,a,Wp,s,r),zM.set(0,1),l=e.ray.intersectTriangle(E1,T1,D0,!1,R0),l===null))return;const c=e.ray.origin.distanceTo(R0);c<e.near||c>e.far||t.push({distance:c,point:R0.clone(),uv:Aa.getInterpolation(R0,E1,D0,T1,FN,zM,zN,new ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function C1(n,e,t,i,s,r){Kp.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(B0.x=r*Kp.x-s*Kp.y,B0.y=s*Kp.x+r*Kp.y):B0.copy(Kp),n.copy(e),n.x+=B0.x,n.y+=B0.y,n.applyMatrix4(Jz)}const w1=new te,HN=new te;class Qz extends Pn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const r=t[i];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const s=t.splice(i,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s;i++){let r=t[i].distance;if(t[i].object.visible&&(r-=r*t[i].hysteresis),e<r)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){w1.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(w1);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){w1.setFromMatrixPosition(e.matrixWorld),HN.setFromMatrixPosition(this.matrixWorld);const i=w1.distanceTo(HN)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let a=t[s].distance;if(t[s].object.visible&&(a-=a*t[s].hysteresis),i>=a)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,r=i.length;s<r;s++){const a=i[s];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const GN=new te,VN=new kn,kN=new kn,VQ=new te,jN=new Wt,R1=new te,HM=new dr,XN=new Wt,GM=new Cd;class sR extends Ci{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=HT,this.bindMatrix=new Wt,this.bindMatrixInverse=new Wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Lr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,R1),this.boundingBox.expandByPoint(R1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new dr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,R1),this.boundingSphere.expandByPoint(R1)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),HM.copy(this.boundingSphere),HM.applyMatrix4(s),e.ray.intersectsSphere(HM)!==!1&&(XN.copy(s).invert(),GM.copy(e.ray).applyMatrix4(XN),!(this.boundingBox!==null&&GM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,GM)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new kn,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===HT?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Dz?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;VN.fromBufferAttribute(s.attributes.skinIndex,e),kN.fromBufferAttribute(s.attributes.skinWeight,e),GN.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const a=kN.getComponent(r);if(a!==0){const l=VN.getComponent(r);jN.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(VQ.copy(GN).applyMatrix4(jN),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class _S extends Pn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ul extends Zn{constructor(e=null,t=1,i=1,s,r,a,l,c,f=wi,p=wi,g,v){super(null,a,l,c,f,p,s,r,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const YN=new Wt,kQ=new Wt;class py{constructor(e=[],t=[]){this.uuid=ka(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Wt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const l=e[r]?e[r].matrixWorld:kQ;YN.multiplyMatrices(l,t[r]),YN.toArray(i,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new py(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ul(t,e,e,vs,Vi);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const r=e.bones[i];let a=t[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new _S),this.bones.push(a),this.boneInverses.push(new Wt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const a=t[s];e.bones.push(a.uuid);const l=i[s];e.boneInverses.push(l.toArray())}return e}}class Ad extends Xn{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Jp=new Wt,WN=new Wt,B1=[],qN=new Lr,jQ=new Wt,N0=new Ci,L0=new dr;class rR extends Ci{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ad(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,jQ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Lr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Jp),qN.copy(e.boundingBox).applyMatrix4(Jp),this.boundingBox.union(qN)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new dr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Jp),L0.copy(e.boundingSphere).applyMatrix4(Jp),this.boundingSphere.union(L0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=i.length+1,a=e*r+1;for(let l=0;l<i.length;l++)i[l]=s[a+l]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(N0.geometry=this.geometry,N0.material=this.material,N0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),L0.copy(this.boundingSphere),L0.applyMatrix4(i),e.ray.intersectsSphere(L0)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Jp),WN.multiplyMatrices(i,Jp),N0.matrixWorld=WN,N0.raycast(e,B1);for(let a=0,l=B1.length;a<l;a++){const c=B1[a];c.instanceId=r,c.object=this,t.push(c)}B1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ad(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new ul(new Float32Array(s*this.count),s,this.count,ly,Vi));const r=this.morphTexture.source.data.data;let a=0;for(let f=0;f<i.length;f++)a+=i[f];const l=this.geometry.morphTargetsRelative?1:1-a,c=s*e;r[c]=l,r.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const VM=new te,XQ=new te,YQ=new bn;class Xc{constructor(e=new te(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=VM.subVectors(i,t).cross(XQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(VM),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||YQ.getNormalMatrix(e),s=this.coplanarPoint(VM).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Bh=new dr,D1=new te;class my{constructor(e=new Xc,t=new Xc,i=new Xc,s=new Xc,r=new Xc,a=new Xc){this.planes=[e,t,i,s,r,a]}set(e,t,i,s,r,a){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(s),l[4].copy(r),l[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ol){const i=this.planes,s=e.elements,r=s[0],a=s[1],l=s[2],c=s[3],f=s[4],p=s[5],g=s[6],v=s[7],x=s[8],A=s[9],M=s[10],_=s[11],S=s[12],w=s[13],C=s[14],B=s[15];if(i[0].setComponents(c-r,v-f,_-x,B-S).normalize(),i[1].setComponents(c+r,v+f,_+x,B+S).normalize(),i[2].setComponents(c+a,v+p,_+A,B+w).normalize(),i[3].setComponents(c-a,v-p,_-A,B-w).normalize(),i[4].setComponents(c-l,v-g,_-M,B-C).normalize(),t===ol)i[5].setComponents(c+l,v+g,_+M,B+C).normalize();else if(t===Pv)i[5].setComponents(l,g,M,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Bh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Bh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Bh)}intersectsSprite(e){return Bh.center.set(0,0,0),Bh.radius=.7071067811865476,Bh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Bh)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(D1.x=s.normal.x>0?e.max.x:e.min.x,D1.y=s.normal.y>0?e.max.y:e.min.y,D1.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(D1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function kM(n,e){return n-e}function WQ(n,e){return n.z-e.z}function qQ(n,e){return e.z-n.z}class KQ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,s){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const l=r[this.index];a.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=s}reset(){this.list.length=0,this.index=0}}const xa=new Wt,JQ=new pt(1,1,1),jM=new my,N1=new Lr,Dh=new dr,O0=new te,KN=new te,ZQ=new te,XM=new KQ,wr=new Ci,L1=[];function QQ(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const s=n.count;for(let r=0;r<s;r++)for(let a=0;a<i;a++)e.setComponent(r+t,a,n.getComponent(r,a))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Nh(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class $z extends Ci{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,s){super(new gn,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new ul(t,e,e,vs,Vi);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new ul(t,e,e,cy,dl);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new ul(t,e,e,vs,Vi);i.colorSpace=Vn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const a=e.getAttribute(r),{array:l,itemSize:c,normalized:f}=a,p=new l.constructor(i*c),g=new Xn(p,c,f);t.setAttribute(r,g)}if(e.getIndex()!==null){const r=i>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Xn(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const s=e.getAttribute(i),r=t.getAttribute(i);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Lr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const r=t[i].geometryIndex;this.getMatrixAt(i,xa),this.getBoundingBoxAt(r,N1).applyMatrix4(xa),e.union(N1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const r=t[i].geometryIndex;this.getMatrixAt(i,xa),this.getBoundingSphereAt(r,Dh).applyMatrix4(xa),e.union(Dh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(kM),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=i):(s=this._instanceInfo.length,this._instanceInfo.push(i));const r=this._matricesTexture;xa.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const a=this._colorsTexture;return a&&(JQ.toArray(a.image.data,s*4),a.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=i===-1?a.count:i),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(kM),c=this._availableGeometryIds.shift(),r[c]=s):(c=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(c,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,s=i.getIndex()!==null,r=i.getIndex(),a=t.getIndex(),l=this._geometryInfo[e];if(s&&a.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const p in i.attributes){const g=t.getAttribute(p),v=i.getAttribute(p);QQ(g,v,c);const x=g.itemSize;for(let A=g.count,M=f;A<M;A++){const _=c+A;for(let S=0;S<x;S++)v.setComponent(_,S,0)}v.needsUpdate=!0,v.addUpdateRange(c*x,f*x)}if(s){const p=l.indexStart,g=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<a.count;v++)r.setX(p+v,c+a.getX(v));for(let v=a.count,x=g;v<x;v++)r.setX(p+v,c);r.needsUpdate=!0,r.addUpdateRange(p,l.reservedIndexCount)}return l.start=s?l.indexStart:l.vertexStart,l.count=s?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let s=0,r=i.length;s<r;s++)i[s].active&&i[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,s=i.map((a,l)=>l).sort((a,l)=>i[a].vertexStart-i[l].vertexStart),r=this.geometry;for(let a=0,l=i.length;a<l;a++){const c=s[a],f=i[c];if(f.active!==!1){if(r.index!==null){if(f.indexStart!==t){const{indexStart:p,vertexStart:g,reservedIndexCount:v}=f,x=r.index,A=x.array,M=e-g;for(let _=p;_<p+v;_++)A[_]=A[_]+M;x.array.copyWithin(t,p,p+v),x.addUpdateRange(t,v),f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:p,reservedVertexCount:g}=f,v=r.attributes;for(const x in v){const A=v[x],{array:M,itemSize:_}=A;M.copyWithin(e*_,p*_,(p+g)*_),A.addUpdateRange(e*_,g*_)}f.vertexStart=e}e+=f.reservedVertexCount,f.start=r.index?f.indexStart:f.vertexStart,this._nextIndexStart=r.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const r=new Lr,a=i.index,l=i.attributes.position;for(let c=s.start,f=s.start+s.count;c<f;c++){let p=c;a&&(p=a.getX(p)),r.expandByPoint(O0.fromBufferAttribute(l,p))}s.boundingBox=r}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const r=new dr;this.getBoundingBoxAt(e,N1),N1.getCenter(r.center);const a=i.index,l=i.attributes.position;let c=0;for(let f=s.start,p=s.start+s.count;f<p;f++){let g=f;a&&(g=a.getX(g)),O0.fromBufferAttribute(l,g),c=Math.max(c,r.center.distanceToSquared(O0))}r.radius=Math.sqrt(c),s.boundingSphere=r}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(kM);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),r=new Int32Array(e);Nh(this._multiDrawCounts,s),Nh(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=e;const a=this._indirectTexture,l=this._matricesTexture,c=this._colorsTexture;a.dispose(),this._initIndirectTexture(),Nh(a.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Nh(l.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Nh(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new gn,this._initializeGeometry(r));const a=this.geometry;r.index&&Nh(r.index.array,a.index.array);for(const l in r.attributes)Nh(r.attributes[l].array,a.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,a=this.geometry;wr.material=this.material,wr.geometry.index=a.index,wr.geometry.attributes=a.attributes,wr.geometry.boundingBox===null&&(wr.geometry.boundingBox=new Lr),wr.geometry.boundingSphere===null&&(wr.geometry.boundingSphere=new dr);for(let l=0,c=i.length;l<c;l++){if(!i[l].visible||!i[l].active)continue;const f=i[l].geometryIndex,p=s[f];wr.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(l,wr.matrixWorld).premultiply(r),this.getBoundingBoxAt(f,wr.geometry.boundingBox),this.getBoundingSphereAt(f,wr.geometry.boundingSphere),wr.raycast(e,L1);for(let g=0,v=L1.length;g<v;g++){const x=L1[g];x.object=this,x.batchId=l,t.push(x)}L1.length=0}wr.material=null,wr.geometry.index=null,wr.geometry.attributes={},wr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,c=this._instanceInfo,f=this._multiDrawStarts,p=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,x=this._indirectTexture,A=x.image.data;v&&(xa.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),jM.setFromProjectionMatrix(xa,e.coordinateSystem));let M=0;if(this.sortObjects){xa.copy(this.matrixWorld).invert(),O0.setFromMatrixPosition(i.matrixWorld).applyMatrix4(xa),KN.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(xa);for(let w=0,C=c.length;w<C;w++)if(c[w].visible&&c[w].active){const B=c[w].geometryIndex;this.getMatrixAt(w,xa),this.getBoundingSphereAt(B,Dh).applyMatrix4(xa);let N=!1;if(v&&(N=!jM.intersectsSphere(Dh)),!N){const L=g[B],F=ZQ.subVectors(Dh.center,O0).dot(KN);XM.push(L.start,L.count,F,w)}}const _=XM.list,S=this.customSort;S===null?_.sort(r.transparent?qQ:WQ):S.call(this,_,i);for(let w=0,C=_.length;w<C;w++){const B=_[w];f[M]=B.start*l,p[M]=B.count,A[M]=B.index,M++}XM.reset()}else for(let _=0,S=c.length;_<S;_++)if(c[_].visible&&c[_].active){const w=c[_].geometryIndex;let C=!1;if(v&&(this.getMatrixAt(_,xa),this.getBoundingSphereAt(w,Dh).applyMatrix4(xa),C=!jM.intersectsSphere(Dh)),!C){const B=g[w];f[M]=B.start*l,p[M]=B.count,A[M]=_,M++}}x.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,i,s,r,a){this.onBeforeRender(e,null,s,r,a)}}class Or extends ys{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new pt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const DA=new te,NA=new te,JN=new Wt,U0=new Cd,O1=new dr,YM=new te,ZN=new te;class nu extends Pn{constructor(e=new gn,t=new Or){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,r=t.count;s<r;s++)DA.fromBufferAttribute(t,s-1),NA.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=DA.distanceTo(NA);e.setAttribute("lineDistance",new zt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),O1.copy(i.boundingSphere),O1.applyMatrix4(s),O1.radius+=r,e.ray.intersectsSphere(O1)===!1)return;JN.copy(s).invert(),U0.copy(e.ray).applyMatrix4(JN);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(p!==null){const x=Math.max(0,a.start),A=Math.min(p.count,a.start+a.count);for(let M=x,_=A-1;M<_;M+=f){const S=p.getX(M),w=p.getX(M+1),C=U1(this,e,U0,c,S,w,M);C&&t.push(C)}if(this.isLineLoop){const M=p.getX(A-1),_=p.getX(x),S=U1(this,e,U0,c,M,_,A-1);S&&t.push(S)}}else{const x=Math.max(0,a.start),A=Math.min(v.count,a.start+a.count);for(let M=x,_=A-1;M<_;M+=f){const S=U1(this,e,U0,c,M,M+1,M);S&&t.push(S)}if(this.isLineLoop){const M=U1(this,e,U0,c,A-1,x,A-1);M&&t.push(M)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function U1(n,e,t,i,s,r,a){const l=n.geometry.attributes.position;if(DA.fromBufferAttribute(l,s),NA.fromBufferAttribute(l,r),t.distanceSqToSegment(DA,NA,YM,ZN)>i)return;YM.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(YM);if(!(f<e.near||f>e.far))return{distance:f,point:ZN.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}const QN=new te,$N=new te;class pl extends nu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,r=t.count;s<r;s+=2)QN.fromBufferAttribute(t,s),$N.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+QN.distanceTo($N);e.setAttribute("lineDistance",new zt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class aR extends nu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class MS extends ys{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new pt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const eL=new Wt,jT=new Cd,P1=new dr,I1=new te;class oR extends Pn{constructor(e=new gn,t=new MS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),P1.copy(i.boundingSphere),P1.applyMatrix4(s),P1.radius+=r,e.ray.intersectsSphere(P1)===!1)return;eL.copy(s).invert(),jT.copy(e.ray).applyMatrix4(eL);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=i.index,g=i.attributes.position;if(f!==null){const v=Math.max(0,a.start),x=Math.min(f.count,a.start+a.count);for(let A=v,M=x;A<M;A++){const _=f.getX(A);I1.fromBufferAttribute(g,_),tL(I1,_,c,s,e,t,this)}}else{const v=Math.max(0,a.start),x=Math.min(g.count,a.start+a.count);for(let A=v,M=x;A<M;A++)I1.fromBufferAttribute(g,A),tL(I1,A,c,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function tL(n,e,t,i,s,r,a){const l=jT.distanceSqToPoint(n);if(l<t){const c=new te;jT.closestPointToPoint(n,c),c.applyMatrix4(i);const f=s.ray.origin.distanceTo(c);if(f<s.near||f>s.far)return;r.push({distance:f,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class e4 extends Zn{constructor(e,t,i,s,r,a,l,c,f){super(e,t,i,s,r,a,l,c,f),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:jn,this.magFilter=r!==void 0?r:jn,this.generateMipmaps=!1;const p=this;function g(){p.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class $Q extends e4{constructor(e,t,i,s,r,a,l,c){super({},e,t,i,s,r,a,l,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class e$ extends Zn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=wi,this.minFilter=wi,this.generateMipmaps=!1,this.needsUpdate=!0}}class ES extends Zn{constructor(e,t,i,s,r,a,l,c,f,p,g,v){super(null,a,l,c,f,p,s,r,g,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class t$ extends ES{constructor(e,t,i,s,r,a){super(e,t,i,r,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=gs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class n$ extends ES{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,uc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class i$ extends Zn{constructor(e,t,i,s,r,a,l,c,f){super(e,t,i,s,r,a,l,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class TS extends Zn{constructor(e,t,i,s,r,a,l,c,f,p=md){if(p!==md&&p!==Sf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&p===md&&(i=dl),i===void 0&&p===Sf&&(i=Af),super(null,s,r,a,l,c,p,i,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:wi,this.minFilter=c!==void 0?c:wi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class ml{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),r+=i.distanceTo(s),t.push(r),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const r=i.length;let a;t?a=t:a=e*i[r-1];let l=0,c=r-1,f;for(;l<=c;)if(s=Math.floor(l+(c-l)/2),f=i[s]-a,f<0)l=s+1;else if(f>0)c=s-1;else{c=s;break}if(s=c,i[s]===a)return s/(r-1);const p=i[s],v=i[s+1]-p,x=(a-p)/v;return(s+x)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),l=this.getPoint(r),c=t||(a.isVector2?new ze:new te);return c.copy(l).sub(a).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new te,s=[],r=[],a=[],l=new te,c=new Wt;for(let x=0;x<=e;x++){const A=x/e;s[x]=this.getTangentAt(A,new te)}r[0]=new te,a[0]=new te;let f=Number.MAX_VALUE;const p=Math.abs(s[0].x),g=Math.abs(s[0].y),v=Math.abs(s[0].z);p<=f&&(f=p,i.set(1,0,0)),g<=f&&(f=g,i.set(0,1,0)),v<=f&&i.set(0,0,1),l.crossVectors(s[0],i).normalize(),r[0].crossVectors(s[0],l),a[0].crossVectors(s[0],r[0]);for(let x=1;x<=e;x++){if(r[x]=r[x-1].clone(),a[x]=a[x-1].clone(),l.crossVectors(s[x-1],s[x]),l.length()>Number.EPSILON){l.normalize();const A=Math.acos(mn(s[x-1].dot(s[x]),-1,1));r[x].applyMatrix4(c.makeRotationAxis(l,A))}a[x].crossVectors(s[x],r[x])}if(t===!0){let x=Math.acos(mn(r[0].dot(r[e]),-1,1));x/=e,s[0].dot(l.crossVectors(r[0],r[e]))>0&&(x=-x);for(let A=1;A<=e;A++)r[A].applyMatrix4(c.makeRotationAxis(s[A],x*A)),a[A].crossVectors(s[A],r[A])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class CS extends ml{constructor(e=0,t=0,i=1,s=1,r=0,a=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new ze){const i=t,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(a?r=0:r=s),this.aClockwise===!0&&!a&&(r===s?r=-s:r=r-s);const l=this.aStartAngle+e*r;let c=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=c-this.aX,x=f-this.aY;c=v*p-x*g+this.aX,f=v*g+x*p+this.aY}return i.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class t4 extends CS{constructor(e,t,i,s,r,a){super(e,t,i,i,s,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function lR(){let n=0,e=0,t=0,i=0;function s(r,a,l,c){n=r,e=l,t=-3*r+3*a-2*l-c,i=2*r-2*a+l+c}return{initCatmullRom:function(r,a,l,c,f){s(a,l,f*(l-r),f*(c-a))},initNonuniformCatmullRom:function(r,a,l,c,f,p,g){let v=(a-r)/f-(l-r)/(f+p)+(l-a)/p,x=(l-a)/p-(c-a)/(p+g)+(c-l)/g;v*=p,x*=p,s(a,l,v,x)},calc:function(r){const a=r*r,l=a*r;return n+e*r+t*a+i*l}}}const F1=new te,WM=new lR,qM=new lR,KM=new lR;class n4 extends ml{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new te){const i=t,s=this.points,r=s.length,a=(r-(this.closed?0:1))*e;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:c===0&&l===r-1&&(l=r-2,c=1);let f,p;this.closed||l>0?f=s[(l-1)%r]:(F1.subVectors(s[0],s[1]).add(s[0]),f=F1);const g=s[l%r],v=s[(l+1)%r];if(this.closed||l+2<r?p=s[(l+2)%r]:(F1.subVectors(s[r-1],s[r-2]).add(s[r-1]),p=F1),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let A=Math.pow(f.distanceToSquared(g),x),M=Math.pow(g.distanceToSquared(v),x),_=Math.pow(v.distanceToSquared(p),x);M<1e-4&&(M=1),A<1e-4&&(A=M),_<1e-4&&(_=M),WM.initNonuniformCatmullRom(f.x,g.x,v.x,p.x,A,M,_),qM.initNonuniformCatmullRom(f.y,g.y,v.y,p.y,A,M,_),KM.initNonuniformCatmullRom(f.z,g.z,v.z,p.z,A,M,_)}else this.curveType==="catmullrom"&&(WM.initCatmullRom(f.x,g.x,v.x,p.x,this.tension),qM.initCatmullRom(f.y,g.y,v.y,p.y,this.tension),KM.initCatmullRom(f.z,g.z,v.z,p.z,this.tension));return i.set(WM.calc(c),qM.calc(c),KM.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new te().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function nL(n,e,t,i,s){const r=(i-e)*.5,a=(s-t)*.5,l=n*n,c=n*l;return(2*t-2*i+r+a)*c+(-3*t+3*i-2*r-a)*l+r*n+t}function s$(n,e){const t=1-n;return t*t*e}function r$(n,e){return 2*(1-n)*n*e}function a$(n,e){return n*n*e}function hv(n,e,t,i){return s$(n,e)+r$(n,t)+a$(n,i)}function o$(n,e){const t=1-n;return t*t*t*e}function l$(n,e){const t=1-n;return 3*t*t*n*e}function c$(n,e){return 3*(1-n)*n*n*e}function u$(n,e){return n*n*n*e}function dv(n,e,t,i,s){return o$(n,e)+l$(n,t)+c$(n,i)+u$(n,s)}class cR extends ml{constructor(e=new ze,t=new ze,i=new ze,s=new ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new ze){const i=t,s=this.v0,r=this.v1,a=this.v2,l=this.v3;return i.set(dv(e,s.x,r.x,a.x,l.x),dv(e,s.y,r.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class i4 extends ml{constructor(e=new te,t=new te,i=new te,s=new te){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new te){const i=t,s=this.v0,r=this.v1,a=this.v2,l=this.v3;return i.set(dv(e,s.x,r.x,a.x,l.x),dv(e,s.y,r.y,a.y,l.y),dv(e,s.z,r.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uR extends ml{constructor(e=new ze,t=new ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ze){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class s4 extends ml{constructor(e=new te,t=new te){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new te){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new te){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fR extends ml{constructor(e=new ze,t=new ze,i=new ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ze){const i=t,s=this.v0,r=this.v1,a=this.v2;return i.set(hv(e,s.x,r.x,a.x),hv(e,s.y,r.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hR extends ml{constructor(e=new te,t=new te,i=new te){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new te){const i=t,s=this.v0,r=this.v1,a=this.v2;return i.set(hv(e,s.x,r.x,a.x),hv(e,s.y,r.y,a.y),hv(e,s.z,r.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dR extends ml{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ze){const i=t,s=this.points,r=(s.length-1)*e,a=Math.floor(r),l=r-a,c=s[a===0?a:a-1],f=s[a],p=s[a>s.length-2?s.length-1:a+1],g=s[a>s.length-3?s.length-1:a+2];return i.set(nL(l,c.x,f.x,p.x,g.x),nL(l,c.y,f.y,p.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new ze().fromArray(s))}return this}}var LA=Object.freeze({__proto__:null,ArcCurve:t4,CatmullRomCurve3:n4,CubicBezierCurve:cR,CubicBezierCurve3:i4,EllipseCurve:CS,LineCurve:uR,LineCurve3:s4,QuadraticBezierCurve:fR,QuadraticBezierCurve3:hR,SplineCurve:dR});class r4 extends ml{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new LA[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=i){const a=s[r]-i,l=this.curves[r],c=l.getLength(),f=c===0?0:1-a/c;return l.getPointAt(f,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,r=this.curves;s<r.length;s++){const a=r[s],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,c=a.getPoints(l);for(let f=0;f<c.length;f++){const p=c[f];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new LA[s.type]().fromJSON(s))}return this}}class Fv extends r4{constructor(e){super(),this.type="Path",this.currentPoint=new ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new uR(this.currentPoint.clone(),new ze(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const r=new fR(this.currentPoint.clone(),new ze(e,t),new ze(i,s));return this.curves.push(r),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,r,a){const l=new cR(this.currentPoint.clone(),new ze(e,t),new ze(i,s),new ze(r,a));return this.curves.push(l),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new dR(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,r,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,i,s,r,a),this}absarc(e,t,i,s,r,a){return this.absellipse(e,t,i,i,s,r,a),this}ellipse(e,t,i,s,r,a,l,c){const f=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+f,t+p,i,s,r,a,l,c),this}absellipse(e,t,i,s,r,a,l,c){const f=new CS(e,t,i,s,r,a,l,c);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const p=f.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class gy extends gn{constructor(e=[new ze(0,-.5),new ze(.5,0),new ze(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=mn(s,0,Math.PI*2);const r=[],a=[],l=[],c=[],f=[],p=1/t,g=new te,v=new ze,x=new te,A=new te,M=new te;let _=0,S=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:_=e[w+1].x-e[w].x,S=e[w+1].y-e[w].y,x.x=S*1,x.y=-_,x.z=S*0,M.copy(x),x.normalize(),c.push(x.x,x.y,x.z);break;case e.length-1:c.push(M.x,M.y,M.z);break;default:_=e[w+1].x-e[w].x,S=e[w+1].y-e[w].y,x.x=S*1,x.y=-_,x.z=S*0,A.copy(x),x.x+=M.x,x.y+=M.y,x.z+=M.z,x.normalize(),c.push(x.x,x.y,x.z),M.copy(A)}for(let w=0;w<=t;w++){const C=i+w*p*s,B=Math.sin(C),N=Math.cos(C);for(let L=0;L<=e.length-1;L++){g.x=e[L].x*B,g.y=e[L].y,g.z=e[L].x*N,a.push(g.x,g.y,g.z),v.x=w/t,v.y=L/(e.length-1),l.push(v.x,v.y);const F=c[3*L+0]*B,P=c[3*L+1],U=c[3*L+0]*N;f.push(F,P,U)}}for(let w=0;w<t;w++)for(let C=0;C<e.length-1;C++){const B=C+w*e.length,N=B,L=B+e.length,F=B+e.length+1,P=B+1;r.push(N,L,P),r.push(F,P,L)}this.setIndex(r),this.setAttribute("position",new zt(a,3)),this.setAttribute("uv",new zt(l,2)),this.setAttribute("normal",new zt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gy(e.points,e.segments,e.phiStart,e.phiLength)}}class wS extends gy{constructor(e=1,t=1,i=4,s=8){const r=new Fv;r.absarc(0,-t/2,e,Math.PI*1.5,0),r.absarc(0,t/2,e,0,Math.PI*.5),super(r.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new wS(e.radius,e.length,e.capSegments,e.radialSegments)}}class RS extends gn{constructor(e=1,t=32,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const r=[],a=[],l=[],c=[],f=new te,p=new ze;a.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const x=i+g/t*s;f.x=e*Math.cos(x),f.y=e*Math.sin(x),a.push(f.x,f.y,f.z),l.push(0,0,1),p.x=(a[v]/e+1)/2,p.y=(a[v+1]/e+1)/2,c.push(p.x,p.y)}for(let g=1;g<=t;g++)r.push(g,g+1,0);this.setIndex(r),this.setAttribute("position",new zt(a,3)),this.setAttribute("normal",new zt(l,3)),this.setAttribute("uv",new zt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new RS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class $m extends gn{constructor(e=1,t=1,i=1,s=32,r=1,a=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:r,openEnded:a,thetaStart:l,thetaLength:c};const f=this;s=Math.floor(s),r=Math.floor(r);const p=[],g=[],v=[],x=[];let A=0;const M=[],_=i/2;let S=0;w(),a===!1&&(e>0&&C(!0),t>0&&C(!1)),this.setIndex(p),this.setAttribute("position",new zt(g,3)),this.setAttribute("normal",new zt(v,3)),this.setAttribute("uv",new zt(x,2));function w(){const B=new te,N=new te;let L=0;const F=(t-e)/i;for(let P=0;P<=r;P++){const U=[],I=P/r,X=I*(t-e)+e;for(let re=0;re<=s;re++){const ee=re/s,$=ee*c+l,ae=Math.sin($),j=Math.cos($);N.x=X*ae,N.y=-I*i+_,N.z=X*j,g.push(N.x,N.y,N.z),B.set(ae,F,j).normalize(),v.push(B.x,B.y,B.z),x.push(ee,1-I),U.push(A++)}M.push(U)}for(let P=0;P<s;P++)for(let U=0;U<r;U++){const I=M[U][P],X=M[U+1][P],re=M[U+1][P+1],ee=M[U][P+1];(e>0||U!==0)&&(p.push(I,X,ee),L+=3),(t>0||U!==r-1)&&(p.push(X,re,ee),L+=3)}f.addGroup(S,L,0),S+=L}function C(B){const N=A,L=new ze,F=new te;let P=0;const U=B===!0?e:t,I=B===!0?1:-1;for(let re=1;re<=s;re++)g.push(0,_*I,0),v.push(0,I,0),x.push(.5,.5),A++;const X=A;for(let re=0;re<=s;re++){const $=re/s*c+l,ae=Math.cos($),j=Math.sin($);F.x=U*j,F.y=_*I,F.z=U*ae,g.push(F.x,F.y,F.z),v.push(0,I,0),L.x=ae*.5+.5,L.y=j*.5*I+.5,x.push(L.x,L.y),A++}for(let re=0;re<s;re++){const ee=N+re,$=X+re;B===!0?p.push($,$+1,ee):p.push($+1,$,ee),P+=3}f.addGroup(S,P,B===!0?1:2),S+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $m(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class BS extends $m{constructor(e=1,t=1,i=32,s=1,r=!1,a=0,l=Math.PI*2){super(0,e,t,i,s,r,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:r,thetaStart:a,thetaLength:l}}static fromJSON(e){return new BS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Df extends gn{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const r=[],a=[];l(s),f(i),p(),this.setAttribute("position",new zt(r,3)),this.setAttribute("normal",new zt(r.slice(),3)),this.setAttribute("uv",new zt(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function l(w){const C=new te,B=new te,N=new te;for(let L=0;L<t.length;L+=3)x(t[L+0],C),x(t[L+1],B),x(t[L+2],N),c(C,B,N,w)}function c(w,C,B,N){const L=N+1,F=[];for(let P=0;P<=L;P++){F[P]=[];const U=w.clone().lerp(B,P/L),I=C.clone().lerp(B,P/L),X=L-P;for(let re=0;re<=X;re++)re===0&&P===L?F[P][re]=U:F[P][re]=U.clone().lerp(I,re/X)}for(let P=0;P<L;P++)for(let U=0;U<2*(L-P)-1;U++){const I=Math.floor(U/2);U%2===0?(v(F[P][I+1]),v(F[P+1][I]),v(F[P][I])):(v(F[P][I+1]),v(F[P+1][I+1]),v(F[P+1][I]))}}function f(w){const C=new te;for(let B=0;B<r.length;B+=3)C.x=r[B+0],C.y=r[B+1],C.z=r[B+2],C.normalize().multiplyScalar(w),r[B+0]=C.x,r[B+1]=C.y,r[B+2]=C.z}function p(){const w=new te;for(let C=0;C<r.length;C+=3){w.x=r[C+0],w.y=r[C+1],w.z=r[C+2];const B=_(w)/2/Math.PI+.5,N=S(w)/Math.PI+.5;a.push(B,1-N)}A(),g()}function g(){for(let w=0;w<a.length;w+=6){const C=a[w+0],B=a[w+2],N=a[w+4],L=Math.max(C,B,N),F=Math.min(C,B,N);L>.9&&F<.1&&(C<.2&&(a[w+0]+=1),B<.2&&(a[w+2]+=1),N<.2&&(a[w+4]+=1))}}function v(w){r.push(w.x,w.y,w.z)}function x(w,C){const B=w*3;C.x=e[B+0],C.y=e[B+1],C.z=e[B+2]}function A(){const w=new te,C=new te,B=new te,N=new te,L=new ze,F=new ze,P=new ze;for(let U=0,I=0;U<r.length;U+=9,I+=6){w.set(r[U+0],r[U+1],r[U+2]),C.set(r[U+3],r[U+4],r[U+5]),B.set(r[U+6],r[U+7],r[U+8]),L.set(a[I+0],a[I+1]),F.set(a[I+2],a[I+3]),P.set(a[I+4],a[I+5]),N.copy(w).add(C).add(B).divideScalar(3);const X=_(N);M(L,I+0,w,X),M(F,I+2,C,X),M(P,I+4,B,X)}}function M(w,C,B,N){N<0&&w.x===1&&(a[C]=w.x-1),B.x===0&&B.z===0&&(a[C]=N/2/Math.PI+.5)}function _(w){return Math.atan2(w.z,-w.x)}function S(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Df(e.vertices,e.indices,e.radius,e.details)}}class DS extends Df{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new DS(e.radius,e.detail)}}const z1=new te,H1=new te,JM=new te,G1=new Aa;class a4 extends gn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(gd*t),a=e.getIndex(),l=e.getAttribute("position"),c=a?a.count:l.count,f=[0,0,0],p=["a","b","c"],g=new Array(3),v={},x=[];for(let A=0;A<c;A+=3){a?(f[0]=a.getX(A),f[1]=a.getX(A+1),f[2]=a.getX(A+2)):(f[0]=A,f[1]=A+1,f[2]=A+2);const{a:M,b:_,c:S}=G1;if(M.fromBufferAttribute(l,f[0]),_.fromBufferAttribute(l,f[1]),S.fromBufferAttribute(l,f[2]),G1.getNormal(JM),g[0]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,g[1]=`${Math.round(_.x*s)},${Math.round(_.y*s)},${Math.round(_.z*s)}`,g[2]=`${Math.round(S.x*s)},${Math.round(S.y*s)},${Math.round(S.z*s)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let w=0;w<3;w++){const C=(w+1)%3,B=g[w],N=g[C],L=G1[p[w]],F=G1[p[C]],P=`${B}_${N}`,U=`${N}_${B}`;U in v&&v[U]?(JM.dot(v[U].normal)<=r&&(x.push(L.x,L.y,L.z),x.push(F.x,F.y,F.z)),v[U]=null):P in v||(v[P]={index0:f[w],index1:f[C],normal:JM.clone()})}}for(const A in v)if(v[A]){const{index0:M,index1:_}=v[A];z1.fromBufferAttribute(l,M),H1.fromBufferAttribute(l,_),x.push(z1.x,z1.y,z1.z),x.push(H1.x,H1.y,H1.z)}this.setAttribute("position",new zt(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class vd extends Fv{constructor(e){super(e),this.uuid=ka(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new Fv().fromJSON(s))}return this}}const f$={triangulate:function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let r=o4(n,0,s,t,!0);const a=[];if(!r||r.next===r.prev)return a;let l,c,f,p,g,v,x;if(i&&(r=g$(n,e,r,t)),n.length>80*t){l=f=n[0],c=p=n[1];for(let A=t;A<s;A+=t)g=n[A],v=n[A+1],g<l&&(l=g),v<c&&(c=v),g>f&&(f=g),v>p&&(p=v);x=Math.max(f-l,p-c),x=x!==0?32767/x:0}return zv(r,a,t,l,c,x,0),a}};function o4(n,e,t,i,s){let r,a;if(s===C$(n,e,t,i)>0)for(r=e;r<t;r+=i)a=iL(r,n[r],n[r+1],a);else for(r=t-i;r>=e;r-=i)a=iL(r,n[r],n[r+1],a);return a&&NS(a,a.next)&&(Gv(a),a=a.next),a}function Sd(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(NS(t,t.next)||es(t.prev,t,t.next)===0)){if(Gv(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function zv(n,e,t,i,s,r,a){if(!n)return;!a&&r&&A$(n,i,s,r);let l=n,c,f;for(;n.prev!==n.next;){if(c=n.prev,f=n.next,r?d$(n,i,s,r):h$(n)){e.push(c.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),Gv(n),n=f.next,l=f.next;continue}if(n=f,n===l){a?a===1?(n=p$(Sd(n),e,t),zv(n,e,t,i,s,r,2)):a===2&&m$(n,e,t,i,s,r):zv(Sd(n),e,t,i,s,r,1);break}}}function h$(n){const e=n.prev,t=n,i=n.next;if(es(e,t,i)>=0)return!1;const s=e.x,r=t.x,a=i.x,l=e.y,c=t.y,f=i.y,p=s<r?s<a?s:a:r<a?r:a,g=l<c?l<f?l:f:c<f?c:f,v=s>r?s>a?s:a:r>a?r:a,x=l>c?l>f?l:f:c>f?c:f;let A=i.next;for(;A!==e;){if(A.x>=p&&A.x<=v&&A.y>=g&&A.y<=x&&gm(s,l,r,c,a,f,A.x,A.y)&&es(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function d$(n,e,t,i){const s=n.prev,r=n,a=n.next;if(es(s,r,a)>=0)return!1;const l=s.x,c=r.x,f=a.x,p=s.y,g=r.y,v=a.y,x=l<c?l<f?l:f:c<f?c:f,A=p<g?p<v?p:v:g<v?g:v,M=l>c?l>f?l:f:c>f?c:f,_=p>g?p>v?p:v:g>v?g:v,S=XT(x,A,e,t,i),w=XT(M,_,e,t,i);let C=n.prevZ,B=n.nextZ;for(;C&&C.z>=S&&B&&B.z<=w;){if(C.x>=x&&C.x<=M&&C.y>=A&&C.y<=_&&C!==s&&C!==a&&gm(l,p,c,g,f,v,C.x,C.y)&&es(C.prev,C,C.next)>=0||(C=C.prevZ,B.x>=x&&B.x<=M&&B.y>=A&&B.y<=_&&B!==s&&B!==a&&gm(l,p,c,g,f,v,B.x,B.y)&&es(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;C&&C.z>=S;){if(C.x>=x&&C.x<=M&&C.y>=A&&C.y<=_&&C!==s&&C!==a&&gm(l,p,c,g,f,v,C.x,C.y)&&es(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;B&&B.z<=w;){if(B.x>=x&&B.x<=M&&B.y>=A&&B.y<=_&&B!==s&&B!==a&&gm(l,p,c,g,f,v,B.x,B.y)&&es(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function p$(n,e,t){let i=n;do{const s=i.prev,r=i.next.next;!NS(s,r)&&l4(s,i,i.next,r)&&Hv(s,r)&&Hv(r,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(r.i/t|0),Gv(i),Gv(i.next),i=n=r),i=i.next}while(i!==n);return Sd(i)}function m$(n,e,t,i,s,r){let a=n;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&M$(a,l)){let c=c4(a,l);a=Sd(a,a.next),c=Sd(c,c.next),zv(a,e,t,i,s,r,0),zv(c,e,t,i,s,r,0);return}l=l.next}a=a.next}while(a!==n)}function g$(n,e,t,i){const s=[];let r,a,l,c,f;for(r=0,a=e.length;r<a;r++)l=e[r]*i,c=r<a-1?e[r+1]*i:n.length,f=o4(n,l,c,i,!1),f===f.next&&(f.steiner=!0),s.push(_$(f));for(s.sort(v$),r=0;r<s.length;r++)t=y$(s[r],t);return t}function v$(n,e){return n.x-e.x}function y$(n,e){const t=x$(n,e);if(!t)return e;const i=c4(t,n);return Sd(i,i.next),Sd(t,t.next)}function x$(n,e){let t=e,i=-1/0,s;const r=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const v=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=r&&v>i&&(i=v,s=t.x<t.next.x?t:t.next,v===r))return s}t=t.next}while(t!==e);if(!s)return null;const l=s,c=s.x,f=s.y;let p=1/0,g;t=s;do r>=t.x&&t.x>=c&&r!==t.x&&gm(a<f?r:i,a,c,f,a<f?i:r,a,t.x,t.y)&&(g=Math.abs(a-t.y)/(r-t.x),Hv(t,n)&&(g<p||g===p&&(t.x>s.x||t.x===s.x&&b$(s,t)))&&(s=t,p=g)),t=t.next;while(t!==l);return s}function b$(n,e){return es(n.prev,n,e.prev)<0&&es(e.next,n,n.next)<0}function A$(n,e,t,i){let s=n;do s.z===0&&(s.z=XT(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,S$(s)}function S$(n){let e,t,i,s,r,a,l,c,f=1;do{for(t=n,n=null,r=null,a=0;t;){for(a++,i=t,l=0,e=0;e<f&&(l++,i=i.nextZ,!!i);e++);for(c=f;l>0||c>0&&i;)l!==0&&(c===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,l--):(s=i,i=i.nextZ,c--),r?r.nextZ=s:n=s,s.prevZ=r,r=s;t=i}r.nextZ=null,f*=2}while(a>1);return n}function XT(n,e,t,i,s){return n=(n-t)*s|0,e=(e-i)*s|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function _$(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function gm(n,e,t,i,s,r,a,l){return(s-a)*(e-l)>=(n-a)*(r-l)&&(n-a)*(i-l)>=(t-a)*(e-l)&&(t-a)*(r-l)>=(s-a)*(i-l)}function M$(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!E$(n,e)&&(Hv(n,e)&&Hv(e,n)&&T$(n,e)&&(es(n.prev,n,e.prev)||es(n,e.prev,e))||NS(n,e)&&es(n.prev,n,n.next)>0&&es(e.prev,e,e.next)>0)}function es(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function NS(n,e){return n.x===e.x&&n.y===e.y}function l4(n,e,t,i){const s=k1(es(n,e,t)),r=k1(es(n,e,i)),a=k1(es(t,i,n)),l=k1(es(t,i,e));return!!(s!==r&&a!==l||s===0&&V1(n,t,e)||r===0&&V1(n,i,e)||a===0&&V1(t,n,i)||l===0&&V1(t,e,i))}function V1(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function k1(n){return n>0?1:n<0?-1:0}function E$(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&l4(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Hv(n,e){return es(n.prev,n,n.next)<0?es(n,e,n.next)>=0&&es(n,n.prev,e)>=0:es(n,e,n.prev)<0||es(n,n.next,e)<0}function T$(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,r=(n.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function c4(n,e){const t=new YT(n.i,n.x,n.y),i=new YT(e.i,e.x,e.y),s=n.next,r=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,r.next=i,i.prev=r,i}function iL(n,e,t,i){const s=new YT(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Gv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function YT(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C$(n,e,t,i){let s=0;for(let r=e,a=t-i;r<t;r+=i)s+=(n[a]-n[r])*(n[r+1]+n[a+1]),a=r;return s}class ac{static area(e){const t=e.length;let i=0;for(let s=t-1,r=0;r<t;s=r++)i+=e[s].x*e[r].y-e[r].x*e[s].y;return i*.5}static isClockWise(e){return ac.area(e)<0}static triangulateShape(e,t){const i=[],s=[],r=[];sL(e),rL(i,e);let a=e.length;t.forEach(sL);for(let c=0;c<t.length;c++)s.push(a),a+=t[c].length,rL(i,t[c]);const l=f$.triangulate(i,s);for(let c=0;c<l.length;c+=3)r.push(l.slice(c,c+3));return r}}function sL(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function rL(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class LS extends gn{constructor(e=new vd([new ze(.5,.5),new ze(-.5,.5),new ze(-.5,-.5),new ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],r=[];for(let l=0,c=e.length;l<c;l++){const f=e[l];a(f)}this.setAttribute("position",new zt(s,3)),this.setAttribute("uv",new zt(r,2)),this.computeVertexNormals();function a(l){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,A=t.bevelSize!==void 0?t.bevelSize:x-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:w$;let C,B=!1,N,L,F,P;S&&(C=S.getSpacedPoints(p),B=!0,v=!1,N=S.computeFrenetFrames(p,!1),L=new te,F=new te,P=new te),v||(_=0,x=0,A=0,M=0);const U=l.extractPoints(f);let I=U.shape;const X=U.holes;if(!ac.isClockWise(I)){I=I.reverse();for(let Ye=0,Ze=X.length;Ye<Ze;Ye++){const ie=X[Ye];ac.isClockWise(ie)&&(X[Ye]=ie.reverse())}}const ee=ac.triangulateShape(I,X),$=I;for(let Ye=0,Ze=X.length;Ye<Ze;Ye++){const ie=X[Ye];I=I.concat(ie)}function ae(Ye,Ze,ie){return Ze||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ye.clone().addScaledVector(Ze,ie)}const j=I.length,Q=ee.length;function J(Ye,Ze,ie){let Bt,it,ft;const lt=Ye.x-Ze.x,Ft=Ye.y-Ze.y,dt=ie.x-Ye.x,ne=ie.y-Ye.y,W=lt*lt+Ft*Ft,Me=lt*ne-Ft*dt;if(Math.abs(Me)>Number.EPSILON){const ke=Math.sqrt(W),Qe=Math.sqrt(dt*dt+ne*ne),je=Ze.x-Ft/ke,gt=Ze.y+lt/ke,ct=ie.x-ne/Qe,ht=ie.y+dt/Qe,hn=((ct-je)*ne-(ht-gt)*dt)/(lt*ne-Ft*dt);Bt=je+lt*hn-Ye.x,it=gt+Ft*hn-Ye.y;const st=Bt*Bt+it*it;if(st<=2)return new ze(Bt,it);ft=Math.sqrt(st/2)}else{let ke=!1;lt>Number.EPSILON?dt>Number.EPSILON&&(ke=!0):lt<-Number.EPSILON?dt<-Number.EPSILON&&(ke=!0):Math.sign(Ft)===Math.sign(ne)&&(ke=!0),ke?(Bt=-Ft,it=lt,ft=Math.sqrt(W)):(Bt=lt,it=Ft,ft=Math.sqrt(W/2))}return new ze(Bt/ft,it/ft)}const xe=[];for(let Ye=0,Ze=$.length,ie=Ze-1,Bt=Ye+1;Ye<Ze;Ye++,ie++,Bt++)ie===Ze&&(ie=0),Bt===Ze&&(Bt=0),xe[Ye]=J($[Ye],$[ie],$[Bt]);const Y=[];let oe,be=xe.concat();for(let Ye=0,Ze=X.length;Ye<Ze;Ye++){const ie=X[Ye];oe=[];for(let Bt=0,it=ie.length,ft=it-1,lt=Bt+1;Bt<it;Bt++,ft++,lt++)ft===it&&(ft=0),lt===it&&(lt=0),oe[Bt]=J(ie[Bt],ie[ft],ie[lt]);Y.push(oe),be=be.concat(oe)}for(let Ye=0;Ye<_;Ye++){const Ze=Ye/_,ie=x*Math.cos(Ze*Math.PI/2),Bt=A*Math.sin(Ze*Math.PI/2)+M;for(let it=0,ft=$.length;it<ft;it++){const lt=ae($[it],xe[it],Bt);He(lt.x,lt.y,-ie)}for(let it=0,ft=X.length;it<ft;it++){const lt=X[it];oe=Y[it];for(let Ft=0,dt=lt.length;Ft<dt;Ft++){const ne=ae(lt[Ft],oe[Ft],Bt);He(ne.x,ne.y,-ie)}}}const _e=A+M;for(let Ye=0;Ye<j;Ye++){const Ze=v?ae(I[Ye],be[Ye],_e):I[Ye];B?(F.copy(N.normals[0]).multiplyScalar(Ze.x),L.copy(N.binormals[0]).multiplyScalar(Ze.y),P.copy(C[0]).add(F).add(L),He(P.x,P.y,P.z)):He(Ze.x,Ze.y,0)}for(let Ye=1;Ye<=p;Ye++)for(let Ze=0;Ze<j;Ze++){const ie=v?ae(I[Ze],be[Ze],_e):I[Ze];B?(F.copy(N.normals[Ye]).multiplyScalar(ie.x),L.copy(N.binormals[Ye]).multiplyScalar(ie.y),P.copy(C[Ye]).add(F).add(L),He(P.x,P.y,P.z)):He(ie.x,ie.y,g/p*Ye)}for(let Ye=_-1;Ye>=0;Ye--){const Ze=Ye/_,ie=x*Math.cos(Ze*Math.PI/2),Bt=A*Math.sin(Ze*Math.PI/2)+M;for(let it=0,ft=$.length;it<ft;it++){const lt=ae($[it],xe[it],Bt);He(lt.x,lt.y,g+ie)}for(let it=0,ft=X.length;it<ft;it++){const lt=X[it];oe=Y[it];for(let Ft=0,dt=lt.length;Ft<dt;Ft++){const ne=ae(lt[Ft],oe[Ft],Bt);B?He(ne.x,ne.y+C[p-1].y,C[p-1].x+ie):He(ne.x,ne.y,g+ie)}}}ue(),Ue();function ue(){const Ye=s.length/3;if(v){let Ze=0,ie=j*Ze;for(let Bt=0;Bt<Q;Bt++){const it=ee[Bt];et(it[2]+ie,it[1]+ie,it[0]+ie)}Ze=p+_*2,ie=j*Ze;for(let Bt=0;Bt<Q;Bt++){const it=ee[Bt];et(it[0]+ie,it[1]+ie,it[2]+ie)}}else{for(let Ze=0;Ze<Q;Ze++){const ie=ee[Ze];et(ie[2],ie[1],ie[0])}for(let Ze=0;Ze<Q;Ze++){const ie=ee[Ze];et(ie[0]+j*p,ie[1]+j*p,ie[2]+j*p)}}i.addGroup(Ye,s.length/3-Ye,0)}function Ue(){const Ye=s.length/3;let Ze=0;Be($,Ze),Ze+=$.length;for(let ie=0,Bt=X.length;ie<Bt;ie++){const it=X[ie];Be(it,Ze),Ze+=it.length}i.addGroup(Ye,s.length/3-Ye,1)}function Be(Ye,Ze){let ie=Ye.length;for(;--ie>=0;){const Bt=ie;let it=ie-1;it<0&&(it=Ye.length-1);for(let ft=0,lt=p+_*2;ft<lt;ft++){const Ft=j*ft,dt=j*(ft+1),ne=Ze+Bt+Ft,W=Ze+it+Ft,Me=Ze+it+dt,ke=Ze+Bt+dt;Lt(ne,W,Me,ke)}}}function He(Ye,Ze,ie){c.push(Ye),c.push(Ze),c.push(ie)}function et(Ye,Ze,ie){_t(Ye),_t(Ze),_t(ie);const Bt=s.length/3,it=w.generateTopUV(i,s,Bt-3,Bt-2,Bt-1);jt(it[0]),jt(it[1]),jt(it[2])}function Lt(Ye,Ze,ie,Bt){_t(Ye),_t(Ze),_t(Bt),_t(Ze),_t(ie),_t(Bt);const it=s.length/3,ft=w.generateSideWallUV(i,s,it-6,it-3,it-2,it-1);jt(ft[0]),jt(ft[1]),jt(ft[3]),jt(ft[1]),jt(ft[2]),jt(ft[3])}function _t(Ye){s.push(c[Ye*3+0]),s.push(c[Ye*3+1]),s.push(c[Ye*3+2])}function jt(Ye){r.push(Ye.x),r.push(Ye.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return R$(t,i,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const l=t[e.shapes[r]];i.push(l)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new LA[s.type]().fromJSON(s)),new LS(i,e.options)}}const w$={generateTopUV:function(n,e,t,i,s){const r=e[t*3],a=e[t*3+1],l=e[i*3],c=e[i*3+1],f=e[s*3],p=e[s*3+1];return[new ze(r,a),new ze(l,c),new ze(f,p)]},generateSideWallUV:function(n,e,t,i,s,r){const a=e[t*3],l=e[t*3+1],c=e[t*3+2],f=e[i*3],p=e[i*3+1],g=e[i*3+2],v=e[s*3],x=e[s*3+1],A=e[s*3+2],M=e[r*3],_=e[r*3+1],S=e[r*3+2];return Math.abs(l-p)<Math.abs(a-f)?[new ze(a,1-c),new ze(f,1-g),new ze(v,1-A),new ze(M,1-S)]:[new ze(l,1-c),new ze(p,1-g),new ze(x,1-A),new ze(_,1-S)]}};function R$(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const r=n[i];t.shapes.push(r.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class vy extends Df{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vy(e.radius,e.detail)}}class yy extends Df{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yy(e.radius,e.detail)}}class Nf extends gn{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,a=t/2,l=Math.floor(i),c=Math.floor(s),f=l+1,p=c+1,g=e/l,v=t/c,x=[],A=[],M=[],_=[];for(let S=0;S<p;S++){const w=S*v-a;for(let C=0;C<f;C++){const B=C*g-r;A.push(B,-w,0),M.push(0,0,1),_.push(C/l),_.push(1-S/c)}}for(let S=0;S<c;S++)for(let w=0;w<l;w++){const C=w+f*S,B=w+f*(S+1),N=w+1+f*(S+1),L=w+1+f*S;x.push(C,B,L),x.push(B,N,L)}this.setIndex(x),this.setAttribute("position",new zt(A,3)),this.setAttribute("normal",new zt(M,3)),this.setAttribute("uv",new zt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nf(e.width,e.height,e.widthSegments,e.heightSegments)}}class OS extends gn{constructor(e=.5,t=1,i=32,s=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:r,thetaLength:a},i=Math.max(3,i),s=Math.max(1,s);const l=[],c=[],f=[],p=[];let g=e;const v=(t-e)/s,x=new te,A=new ze;for(let M=0;M<=s;M++){for(let _=0;_<=i;_++){const S=r+_/i*a;x.x=g*Math.cos(S),x.y=g*Math.sin(S),c.push(x.x,x.y,x.z),f.push(0,0,1),A.x=(x.x/t+1)/2,A.y=(x.y/t+1)/2,p.push(A.x,A.y)}g+=v}for(let M=0;M<s;M++){const _=M*(i+1);for(let S=0;S<i;S++){const w=S+_,C=w,B=w+i+1,N=w+i+2,L=w+1;l.push(C,B,L),l.push(B,N,L)}}this.setIndex(l),this.setAttribute("position",new zt(c,3)),this.setAttribute("normal",new zt(f,3)),this.setAttribute("uv",new zt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new OS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class US extends gn{constructor(e=new vd([new ze(0,.5),new ze(-.5,-.5),new ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],r=[],a=[];let l=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let p=0;p<e.length;p++)f(e[p]),this.addGroup(l,c,p),l+=c,c=0;this.setIndex(i),this.setAttribute("position",new zt(s,3)),this.setAttribute("normal",new zt(r,3)),this.setAttribute("uv",new zt(a,2));function f(p){const g=s.length/3,v=p.extractPoints(t);let x=v.shape;const A=v.holes;ac.isClockWise(x)===!1&&(x=x.reverse());for(let _=0,S=A.length;_<S;_++){const w=A[_];ac.isClockWise(w)===!0&&(A[_]=w.reverse())}const M=ac.triangulateShape(x,A);for(let _=0,S=A.length;_<S;_++){const w=A[_];x=x.concat(w)}for(let _=0,S=x.length;_<S;_++){const w=x[_];s.push(w.x,w.y,0),r.push(0,0,1),a.push(w.x,w.y)}for(let _=0,S=M.length;_<S;_++){const w=M[_],C=w[0]+g,B=w[1]+g,N=w[2]+g;i.push(C,B,N),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return B$(t,e)}static fromJSON(e,t){const i=[];for(let s=0,r=e.shapes.length;s<r;s++){const a=t[e.shapes[s]];i.push(a)}return new US(i,e.curveSegments)}}function B$(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class xy extends gn{constructor(e=1,t=32,i=16,s=0,r=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:r,thetaStart:a,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(a+l,Math.PI);let f=0;const p=[],g=new te,v=new te,x=[],A=[],M=[],_=[];for(let S=0;S<=i;S++){const w=[],C=S/i;let B=0;S===0&&a===0?B=.5/t:S===i&&c===Math.PI&&(B=-.5/t);for(let N=0;N<=t;N++){const L=N/t;g.x=-e*Math.cos(s+L*r)*Math.sin(a+C*l),g.y=e*Math.cos(a+C*l),g.z=e*Math.sin(s+L*r)*Math.sin(a+C*l),A.push(g.x,g.y,g.z),v.copy(g).normalize(),M.push(v.x,v.y,v.z),_.push(L+B,1-C),w.push(f++)}p.push(w)}for(let S=0;S<i;S++)for(let w=0;w<t;w++){const C=p[S][w+1],B=p[S][w],N=p[S+1][w],L=p[S+1][w+1];(S!==0||a>0)&&x.push(C,B,L),(S!==i-1||c<Math.PI)&&x.push(B,N,L)}this.setIndex(x),this.setAttribute("position",new zt(A,3)),this.setAttribute("normal",new zt(M,3)),this.setAttribute("uv",new zt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class PS extends Df{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new PS(e.radius,e.detail)}}class by extends gn{constructor(e=1,t=.4,i=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:r},i=Math.floor(i),s=Math.floor(s);const a=[],l=[],c=[],f=[],p=new te,g=new te,v=new te;for(let x=0;x<=i;x++)for(let A=0;A<=s;A++){const M=A/s*r,_=x/i*Math.PI*2;g.x=(e+t*Math.cos(_))*Math.cos(M),g.y=(e+t*Math.cos(_))*Math.sin(M),g.z=t*Math.sin(_),l.push(g.x,g.y,g.z),p.x=e*Math.cos(M),p.y=e*Math.sin(M),v.subVectors(g,p).normalize(),c.push(v.x,v.y,v.z),f.push(A/s),f.push(x/i)}for(let x=1;x<=i;x++)for(let A=1;A<=s;A++){const M=(s+1)*x+A-1,_=(s+1)*(x-1)+A-1,S=(s+1)*(x-1)+A,w=(s+1)*x+A;a.push(M,_,w),a.push(_,S,w)}this.setIndex(a),this.setAttribute("position",new zt(l,3)),this.setAttribute("normal",new zt(c,3)),this.setAttribute("uv",new zt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new by(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class IS extends gn{constructor(e=1,t=.4,i=64,s=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:r,q:a},i=Math.floor(i),s=Math.floor(s);const l=[],c=[],f=[],p=[],g=new te,v=new te,x=new te,A=new te,M=new te,_=new te,S=new te;for(let C=0;C<=i;++C){const B=C/i*r*Math.PI*2;w(B,r,a,e,x),w(B+.01,r,a,e,A),_.subVectors(A,x),S.addVectors(A,x),M.crossVectors(_,S),S.crossVectors(M,_),M.normalize(),S.normalize();for(let N=0;N<=s;++N){const L=N/s*Math.PI*2,F=-t*Math.cos(L),P=t*Math.sin(L);g.x=x.x+(F*S.x+P*M.x),g.y=x.y+(F*S.y+P*M.y),g.z=x.z+(F*S.z+P*M.z),c.push(g.x,g.y,g.z),v.subVectors(g,x).normalize(),f.push(v.x,v.y,v.z),p.push(C/i),p.push(N/s)}}for(let C=1;C<=i;C++)for(let B=1;B<=s;B++){const N=(s+1)*(C-1)+(B-1),L=(s+1)*C+(B-1),F=(s+1)*C+B,P=(s+1)*(C-1)+B;l.push(N,L,P),l.push(L,F,P)}this.setIndex(l),this.setAttribute("position",new zt(c,3)),this.setAttribute("normal",new zt(f,3)),this.setAttribute("uv",new zt(p,2));function w(C,B,N,L,F){const P=Math.cos(C),U=Math.sin(C),I=N/B*C,X=Math.cos(I);F.x=L*(2+X)*.5*P,F.y=L*(2+X)*U*.5,F.z=L*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new IS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class FS extends gn{constructor(e=new hR(new te(-1,-1,0),new te(-1,1,0),new te(1,1,0)),t=64,i=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new te,c=new te,f=new ze;let p=new te;const g=[],v=[],x=[],A=[];M(),this.setIndex(A),this.setAttribute("position",new zt(g,3)),this.setAttribute("normal",new zt(v,3)),this.setAttribute("uv",new zt(x,2));function M(){for(let C=0;C<t;C++)_(C);_(r===!1?t:0),w(),S()}function _(C){p=e.getPointAt(C/t,p);const B=a.normals[C],N=a.binormals[C];for(let L=0;L<=s;L++){const F=L/s*Math.PI*2,P=Math.sin(F),U=-Math.cos(F);c.x=U*B.x+P*N.x,c.y=U*B.y+P*N.y,c.z=U*B.z+P*N.z,c.normalize(),v.push(c.x,c.y,c.z),l.x=p.x+i*c.x,l.y=p.y+i*c.y,l.z=p.z+i*c.z,g.push(l.x,l.y,l.z)}}function S(){for(let C=1;C<=t;C++)for(let B=1;B<=s;B++){const N=(s+1)*(C-1)+(B-1),L=(s+1)*C+(B-1),F=(s+1)*C+B,P=(s+1)*(C-1)+B;A.push(N,L,P),A.push(L,F,P)}}function w(){for(let C=0;C<=t;C++)for(let B=0;B<=s;B++)f.x=C/t,f.y=B/s,x.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new FS(new LA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class u4 extends gn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new te,r=new te;if(e.index!==null){const a=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,p=c.length;f<p;++f){const g=c[f],v=g.start,x=g.count;for(let A=v,M=v+x;A<M;A+=3)for(let _=0;_<3;_++){const S=l.getX(A+_),w=l.getX(A+(_+1)%3);s.fromBufferAttribute(a,S),r.fromBufferAttribute(a,w),aL(s,r,i)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const a=e.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let f=0;f<3;f++){const p=3*l+f,g=3*l+(f+1)%3;s.fromBufferAttribute(a,p),r.fromBufferAttribute(a,g),aL(s,r,i)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new zt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function aL(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var oL=Object.freeze({__proto__:null,BoxGeometry:wd,CapsuleGeometry:wS,CircleGeometry:RS,ConeGeometry:BS,CylinderGeometry:$m,DodecahedronGeometry:DS,EdgesGeometry:a4,ExtrudeGeometry:LS,IcosahedronGeometry:vy,LatheGeometry:gy,OctahedronGeometry:yy,PlaneGeometry:Nf,PolyhedronGeometry:Df,RingGeometry:OS,ShapeGeometry:US,SphereGeometry:xy,TetrahedronGeometry:PS,TorusGeometry:by,TorusKnotGeometry:IS,TubeGeometry:FS,WireframeGeometry:u4});class f4 extends ys{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new pt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class h4 extends Oi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ay extends ys{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new pt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xa,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Eo extends Ay{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new pt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new pt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class d4 extends ys{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new pt(16777215),this.specular=new pt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xa,this.combine=ay,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pR extends ys{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new pt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class mR extends ys{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class gR extends ys{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xa,this.combine=ay,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vR extends ys{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Rf,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class yR extends ys{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class p4 extends ys{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new pt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class m4 extends Or{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function rd(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function g4(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function v4(n){function e(s,r){return n[s]-n[r]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function WT(n,e,t){const i=n.length,s=new n.constructor(i);for(let r=0,a=0;a!==i;++r){const l=t[r]*e;for(let c=0;c!==e;++c)s[a++]=n[l+c]}return s}function xR(n,e,t,i){let s=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[s++];if(r===void 0)return;let a=r[i];if(a!==void 0)if(Array.isArray(a))do a=r[i],a!==void 0&&(e.push(r.time),t.push.apply(t,a)),r=n[s++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[i],a!==void 0&&(e.push(r.time),a.toArray(t,t.length)),r=n[s++];while(r!==void 0);else do a=r[i],a!==void 0&&(e.push(r.time),t.push(a)),r=n[s++];while(r!==void 0)}function D$(n,e,t,i,s=30){const r=n.clone();r.name=e;const a=[];for(let c=0;c<r.tracks.length;++c){const f=r.tracks[c],p=f.getValueSize(),g=[],v=[];for(let x=0;x<f.times.length;++x){const A=f.times[x]*s;if(!(A<t||A>=i)){g.push(f.times[x]);for(let M=0;M<p;++M)v.push(f.values[x*p+M])}}g.length!==0&&(f.times=rd(g,f.times.constructor),f.values=rd(v,f.values.constructor),a.push(f))}r.tracks=a;let l=1/0;for(let c=0;c<r.tracks.length;++c)l>r.tracks[c].times[0]&&(l=r.tracks[c].times[0]);for(let c=0;c<r.tracks.length;++c)r.tracks[c].shift(-1*l);return r.resetDuration(),r}function N$(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,r=e/i;for(let a=0;a<s;++a){const l=t.tracks[a],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===c});if(f===void 0)continue;let p=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let v=0;const x=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=x/3);const A=l.times.length-1;let M;if(r<=l.times[0]){const S=p,w=g-p;M=l.values.slice(S,w)}else if(r>=l.times[A]){const S=A*g+p,w=S+g-p;M=l.values.slice(S,w)}else{const S=l.createInterpolant(),w=p,C=g-p;S.evaluate(r),M=S.resultBuffer.slice(w,C)}c==="quaternion"&&new Hs().fromArray(M).normalize().conjugate().toArray(M);const _=f.times.length;for(let S=0;S<_;++S){const w=S*x+v;if(c==="quaternion")Hs.multiplyQuaternionsFlat(f.values,w,M,0,f.values,w);else{const C=x-v*2;for(let B=0;B<C;++B)f.values[w+B]-=M[B]}}}return n.blendMode=Kw,n}const L$={convertArray:rd,isTypedArray:g4,getKeyframeOrder:v4,sortedArray:WT,flattenJSON:xR,subclip:D$,makeClipAdditive:N$};class eg{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],r=t[i-1];e:{t:{let a;n:{i:if(!(e<s)){for(let l=i+2;;){if(s===void 0){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(r=s,s=t[++i],e<s)break t}a=t.length;break n}if(!(e>=r)){const l=t[1];e<l&&(i=2,r=l);for(let c=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(s=r,r=t[--i-1],e>=r)break t}a=i,i=0;break n}break e}for(;i<a;){const l=i+a>>>1;e<t[l]?a=l:i=l+1}if(s=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s;for(let a=0;a!==s;++a)t[a]=i[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class y4 extends eg{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:td,endingEnd:td}}intervalChanged_(e,t,i){const s=this.parameterPositions;let r=e-2,a=e+1,l=s[r],c=s[a];if(l===void 0)switch(this.getSettings_().endingStart){case nd:r=e,l=2*t-i;break;case Lv:r=s.length-2,l=t+s[r]-s[r+1];break;default:r=e,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case nd:a=e,c=2*i-t;break;case Lv:a=1,c=i+s[1]-s[0];break;default:a=e-1,c=t}const f=(i-t)*.5,p=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(c-i),this._offsetPrev=r*p,this._offsetNext=a*p}interpolate_(e,t,i,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,p=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,x=this._weightNext,A=(i-t)/(s-t),M=A*A,_=M*A,S=-v*_+2*v*M-v*A,w=(1+v)*_+(-1.5-2*v)*M+(-.5+v)*A+1,C=(-1-x)*_+(1.5+x)*M+.5*A,B=x*_-x*M;for(let N=0;N!==l;++N)r[N]=S*a[p+N]+w*a[f+N]+C*a[c+N]+B*a[g+N];return r}}class bR extends eg{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,p=(i-t)/(s-t),g=1-p;for(let v=0;v!==l;++v)r[v]=a[f+v]*g+a[c+v]*p;return r}}class x4 extends eg{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class gl{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rd(t,this.TimeBufferType),this.values=rd(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:rd(e.times,Array),values:rd(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new x4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new bR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new y4(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Pm:t=this.InterpolantFactoryMethodDiscrete;break;case Im:t=this.InterpolantFactoryMethodLinear;break;case Cb:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pm;case this.InterpolantFactoryMethodLinear:return Im;case this.InterpolantFactoryMethodSmooth:return Cb}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let r=0,a=s-1;for(;r!==s&&i[r]<e;)++r;for(;a!==-1&&i[a]>t;)--a;if(++a,r!==0||a!==s){r>=a&&(a=Math.max(a,1),r=a-1);const l=this.getValueSize();this.times=i.slice(r,a),this.values=this.values.slice(r*l,a*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==r;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,a),e=!1;break}a=c}if(s!==void 0&&g4(s))for(let l=0,c=s.length;l!==c;++l){const f=s[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===Cb,r=e.length-1;let a=1;for(let l=1;l<r;++l){let c=!1;const f=e[l],p=e[l+1];if(f!==p&&(l!==1||f!==e[0]))if(s)c=!0;else{const g=l*i,v=g-i,x=g+i;for(let A=0;A!==i;++A){const M=t[g+A];if(M!==t[v+A]||M!==t[x+A]){c=!0;break}}}if(c){if(l!==a){e[a]=e[l];const g=l*i,v=a*i;for(let x=0;x!==i;++x)t[v+x]=t[g+x]}++a}}if(r>0){e[a]=e[r];for(let l=r*i,c=a*i,f=0;f!==i;++f)t[c+f]=t[l+f];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}gl.prototype.TimeBufferType=Float32Array;gl.prototype.ValueBufferType=Float32Array;gl.prototype.DefaultInterpolation=Im;class Rd extends gl{constructor(e,t,i){super(e,t,i)}}Rd.prototype.ValueTypeName="bool";Rd.prototype.ValueBufferType=Array;Rd.prototype.DefaultInterpolation=Pm;Rd.prototype.InterpolantFactoryMethodLinear=void 0;Rd.prototype.InterpolantFactoryMethodSmooth=void 0;class AR extends gl{}AR.prototype.ValueTypeName="color";class _d extends gl{}_d.prototype.ValueTypeName="number";class b4 extends eg{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=(i-t)/(s-t);let f=e*l;for(let p=f+l;f!==p;f+=4)Hs.slerpFlat(r,0,a,f-l,a,f,c);return r}}class Mf extends gl{InterpolantFactoryMethodLinear(e){return new b4(this.times,this.values,this.getValueSize(),e)}}Mf.prototype.ValueTypeName="quaternion";Mf.prototype.InterpolantFactoryMethodSmooth=void 0;class Bd extends gl{constructor(e,t,i){super(e,t,i)}}Bd.prototype.ValueTypeName="string";Bd.prototype.ValueBufferType=Array;Bd.prototype.DefaultInterpolation=Pm;Bd.prototype.InterpolantFactoryMethodLinear=void 0;Bd.prototype.InterpolantFactoryMethodSmooth=void 0;class Ef extends gl{}Ef.prototype.ValueTypeName="vector";class Md{constructor(e="",t=-1,i=[],s=vS){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=ka(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let a=0,l=i.length;a!==l;++a)t.push(U$(i[a]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=i.length;r!==a;++r)t.push(gl.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const r=t.length,a=[];for(let l=0;l<r;l++){let c=[],f=[];c.push((l+r-1)%r,l,(l+1)%r),f.push(0,1,0);const p=v4(c);c=WT(c,1,p),f=WT(f,1,p),!s&&c[0]===0&&(c.push(r),f.push(f[0])),a.push(new _d(".morphTargetInfluences["+t[l].name+"]",c,f).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const f=e[l],p=f.name.match(r);if(p&&p.length>1){const g=p[1];let v=s[g];v||(s[g]=v=[]),v.push(f)}}const a=[];for(const l in s)a.push(this.CreateFromMorphTargetSequence(l,s[l],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(g,v,x,A,M){if(x.length!==0){const _=[],S=[];xR(x,_,S,A),_.length!==0&&M.push(new g(v,_,S))}},s=[],r=e.name||"default",a=e.fps||30,l=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let g=0;g<f.length;g++){const v=f[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const x={};let A;for(A=0;A<v.length;A++)if(v[A].morphTargets)for(let M=0;M<v[A].morphTargets.length;M++)x[v[A].morphTargets[M]]=-1;for(const M in x){const _=[],S=[];for(let w=0;w!==v[A].morphTargets.length;++w){const C=v[A];_.push(C.time),S.push(C.morphTarget===M?1:0)}s.push(new _d(".morphTargetInfluence["+M+"]",_,S))}c=x.length*a}else{const x=".bones["+t[g].name+"]";i(Ef,x+".position",v,"pos",s),i(Mf,x+".quaternion",v,"rot",s),i(Ef,x+".scale",v,"scl",s)}}return s.length===0?null:new this(r,c,s,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function O$(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _d;case"vector":case"vector2":case"vector3":case"vector4":return Ef;case"color":return AR;case"quaternion":return Mf;case"bool":case"boolean":return Rd;case"string":return Bd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function U$(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=O$(n.type);if(n.times===void 0){const t=[],i=[];xR(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const qc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class zS{constructor(e,t,i){const s=this;let r=!1,a=0,l=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(p){l++,r===!1&&s.onStart!==void 0&&s.onStart(p,a,l),r=!0},this.itemEnd=function(p){a++,s.onProgress!==void 0&&s.onProgress(p,a,l),a===l&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(p){s.onError!==void 0&&s.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,g){return f.push(p,g),this},this.removeHandler=function(p){const g=f.indexOf(p);return g!==-1&&f.splice(g,2),this},this.getHandler=function(p){for(let g=0,v=f.length;g<v;g+=2){const x=f[g],A=f[g+1];if(x.global&&(x.lastIndex=0),x.test(p))return A}return null}}}const A4=new zS;class mr{constructor(e){this.manager=e!==void 0?e:A4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}mr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Hc={};class P$ extends Error{constructor(e,t){super(e),this.response=t}}class pr extends mr{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=qc.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Hc[e]!==void 0){Hc[e].push({onLoad:t,onProgress:i,onError:s});return}Hc[e]=[],Hc[e].push({onLoad:t,onProgress:i,onError:s});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(a).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const p=Hc[e],g=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),x=v?parseInt(v):0,A=x!==0;let M=0;const _=new ReadableStream({start(S){w();function w(){g.read().then(({done:C,value:B})=>{if(C)S.close();else{M+=B.byteLength;const N=new ProgressEvent("progress",{lengthComputable:A,loaded:M,total:x});for(let L=0,F=p.length;L<F;L++){const P=p[L];P.onProgress&&P.onProgress(N)}S.enqueue(B),w()}},C=>{S.error(C)})}}});return new Response(_)}else throw new P$(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return f.json();default:if(l===void 0)return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,x=new TextDecoder(v);return f.arrayBuffer().then(A=>x.decode(A))}}}).then(f=>{qc.add(e,f);const p=Hc[e];delete Hc[e];for(let g=0,v=p.length;g<v;g++){const x=p[g];x.onLoad&&x.onLoad(f)}}).catch(f=>{const p=Hc[e];if(p===void 0)throw this.manager.itemError(e),f;delete Hc[e];for(let g=0,v=p.length;g<v;g++){const x=p[g];x.onError&&x.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class I$ extends mr{constructor(e){super(e)}load(e,t,i,s){const r=this,a=new pr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(r.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),r.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=Md.parse(e[i]);t.push(s)}return t}}class F$ extends mr{constructor(e){super(e)}load(e,t,i,s){const r=this,a=[],l=new ES,c=new pr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(r.withCredentials);let f=0;function p(g){c.load(e[g],function(v){const x=r.parse(v,!0);a[g]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},f+=1,f===6&&(x.mipmapCount===1&&(l.minFilter=jn),l.image=a,l.format=x.format,l.needsUpdate=!0,t&&t(l))},i,s)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)p(g);else c.load(e,function(g){const v=r.parse(g,!0);if(v.isCubemap){const x=v.mipmaps.length/v.mipmapCount;for(let A=0;A<x;A++){a[A]={mipmaps:[]};for(let M=0;M<v.mipmapCount;M++)a[A].mipmaps.push(v.mipmaps[A*v.mipmapCount+M]),a[A].format=v.format,a[A].width=v.width,a[A].height=v.height}l.image=a}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=jn),l.format=v.format,l.needsUpdate=!0,t&&t(l)},i,s);return l}}class Vv extends mr{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=qc.get(e);if(a!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const l=Iv("img");function c(){p(),qc.add(e,this),t&&t(this),r.manager.itemEnd(e)}function f(g){p(),s&&s(g),r.manager.itemError(e),r.manager.itemEnd(e)}function p(){l.removeEventListener("load",c,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),r.manager.itemStart(e),l.src=e,l}}class S4 extends mr{constructor(e){super(e)}load(e,t,i,s){const r=new hy;r.colorSpace=Qn;const a=new Vv(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function c(f){a.load(e[f],function(p){r.images[f]=p,l++,l===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let f=0;f<e.length;++f)c(f);return r}}class SR extends mr{constructor(e){super(e)}load(e,t,i,s){const r=this,a=new ul,l=new pr(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(r.withCredentials),l.load(e,function(c){let f;try{f=r.parse(c)}catch(p){if(s!==void 0)s(p);else{console.error(p);return}}f.image!==void 0?a.image=f.image:f.data!==void 0&&(a.image.width=f.width,a.image.height=f.height,a.image.data=f.data),a.wrapS=f.wrapS!==void 0?f.wrapS:gs,a.wrapT=f.wrapT!==void 0?f.wrapT:gs,a.magFilter=f.magFilter!==void 0?f.magFilter:jn,a.minFilter=f.minFilter!==void 0?f.minFilter:jn,a.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(a.colorSpace=f.colorSpace),f.flipY!==void 0&&(a.flipY=f.flipY),f.format!==void 0&&(a.format=f.format),f.type!==void 0&&(a.type=f.type),f.mipmaps!==void 0&&(a.mipmaps=f.mipmaps,a.minFilter=Ao),f.mipmapCount===1&&(a.minFilter=jn),f.generateMipmaps!==void 0&&(a.generateMipmaps=f.generateMipmaps),a.needsUpdate=!0,t&&t(a,f)},i,s),a}}class Sy extends mr{constructor(e){super(e)}load(e,t,i,s){const r=new Zn,a=new Vv(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){r.image=l,r.needsUpdate=!0,t!==void 0&&t(r)},i,s),r}}class Lf extends Pn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new pt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class _4 extends Lf{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Pn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new pt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ZM=new Wt,lL=new te,cL=new te;class _R{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ze(512,512),this.map=null,this.mapPass=null,this.matrix=new Wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new my,this._frameExtents=new ze(1,1),this._viewportCount=1,this._viewports=[new kn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;lL.setFromMatrixPosition(e.matrixWorld),t.position.copy(lL),cL.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(cL),t.updateMatrixWorld(),ZM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ZM),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(ZM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class z$ extends _R{constructor(){super(new Zi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Fm*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class MR extends Lf{constructor(e,t,i=0,s=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Pn.DEFAULT_UP),this.updateMatrix(),this.target=new Pn,this.distance=i,this.angle=s,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new z$}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const uL=new Wt,P0=new te,QM=new te;class H$ extends _R{constructor(){super(new Zi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ze(4,2),this._viewportCount=6,this._viewports=[new kn(2,1,1,1),new kn(0,1,1,1),new kn(3,1,1,1),new kn(1,1,1,1),new kn(3,0,1,1),new kn(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),P0.setFromMatrixPosition(e.matrixWorld),i.position.copy(P0),QM.copy(i.position),QM.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(QM),i.updateMatrixWorld(),s.makeTranslation(-P0.x,-P0.y,-P0.z),uL.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uL)}}class ER extends Lf{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new H$}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class oc extends fy{constructor(e=-1,t=1,i=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,a=i+e,l=s+t,c=s-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=f*this.view.offsetX,a=r+f*this.view.width,l-=p*this.view.offsetY,c=l-p*this.view.height}this.projectionMatrix.makeOrthographic(r,a,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class G$ extends _R{constructor(){super(new oc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class TR extends Lf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Pn.DEFAULT_UP),this.updateMatrix(),this.target=new Pn,this.shadow=new G$}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class M4 extends Lf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class CR extends Lf{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class E4{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new te)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*s),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*s)),t.addScaledVector(a[5],1.092548*(s*r)),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],1.092548*(i*r)),t.addScaledVector(a[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*s),t.addScaledVector(a[2],2*.511664*r),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*s),t.addScaledVector(a[5],2*.429043*s*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],2*.429043*i*r),t.addScaledVector(a[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-s*s)}}class T4 extends Lf{constructor(e=new E4,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class HS extends mr{constructor(e){super(e),this.textures={}}load(e,t,i,s){const r=this,a=new pr(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(l){try{t(r.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),r.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new pt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const a=e.uniforms[r];switch(s.uniforms[r]={},a.type){case"t":s.uniforms[r].value=i(a.value);break;case"c":s.uniforms[r].value=new pt().setHex(a.value);break;case"v2":s.uniforms[r].value=new ze().fromArray(a.value);break;case"v3":s.uniforms[r].value=new te().fromArray(a.value);break;case"v4":s.uniforms[r].value=new kn().fromArray(a.value);break;case"m3":s.uniforms[r].value=new bn().fromArray(a.value);break;case"m4":s.uniforms[r].value=new Wt().fromArray(a.value);break;default:s.uniforms[r].value=a.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new ze().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return HS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:f4,SpriteMaterial:iR,RawShaderMaterial:h4,ShaderMaterial:Oi,PointsMaterial:MS,MeshPhysicalMaterial:Eo,MeshStandardMaterial:Ay,MeshPhongMaterial:d4,MeshToonMaterial:pR,MeshNormalMaterial:mR,MeshLambertMaterial:gR,MeshDepthMaterial:vR,MeshDistanceMaterial:yR,MeshBasicMaterial:ia,MeshMatcapMaterial:p4,LineDashedMaterial:m4,LineBasicMaterial:Or,Material:ys};return new t[e]}}class pf{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class C4 extends gn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class w4 extends mr{constructor(e){super(e)}load(e,t,i,s){const r=this,a=new pr(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(l){try{t(r.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),r.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(x,A){if(t[A]!==void 0)return t[A];const _=x.interleavedBuffers[A],S=r(x,_.buffer),w=mm(_.type,S),C=new dy(w,_.stride);return C.uuid=_.uuid,t[A]=C,C}function r(x,A){if(i[A]!==void 0)return i[A];const _=x.arrayBuffers[A],S=new Uint32Array(_).buffer;return i[A]=S,S}const a=e.isInstancedBufferGeometry?new C4:new gn,l=e.data.index;if(l!==void 0){const x=mm(l.type,l.array);a.setIndex(new Xn(x,1))}const c=e.data.attributes;for(const x in c){const A=c[x];let M;if(A.isInterleavedBufferAttribute){const _=s(e.data,A.data);M=new _f(_,A.itemSize,A.offset,A.normalized)}else{const _=mm(A.type,A.array),S=A.isInstancedBufferAttribute?Ad:Xn;M=new S(_,A.itemSize,A.normalized)}A.name!==void 0&&(M.name=A.name),A.usage!==void 0&&M.setUsage(A.usage),a.setAttribute(x,M)}const f=e.data.morphAttributes;if(f)for(const x in f){const A=f[x],M=[];for(let _=0,S=A.length;_<S;_++){const w=A[_];let C;if(w.isInterleavedBufferAttribute){const B=s(e.data,w.data);C=new _f(B,w.itemSize,w.offset,w.normalized)}else{const B=mm(w.type,w.array);C=new Xn(B,w.itemSize,w.normalized)}w.name!==void 0&&(C.name=w.name),M.push(C)}a.morphAttributes[x]=M}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let x=0,A=g.length;x!==A;++x){const M=g[x];a.addGroup(M.start,M.count,M.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const x=new te;v.center!==void 0&&x.fromArray(v.center),a.boundingSphere=new dr(x,v.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class V$ extends mr{constructor(e){super(e)}load(e,t,i,s){const r=this,a=this.path===""?pf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new pr(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(g){s!==void 0&&s(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const p=f.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(f,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?pf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new pr(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(e,t),l=JSON.parse(a),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),a=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,r,c,l,i),p=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,p),this.bindLightTargets(f),t!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),r=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,r),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const r=new vd().fromJSON(e[i]);t[r.uuid]=r}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,a=e.length;r<a;r++){const l=new py().fromJSON(e[r],s);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new w4;for(let r=0,a=e.length;r<a;r++){let l;const c=e[r];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=s.parse(c);break;default:c.type in oL?l=oL[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const r=new HS;r.setTextures(t);for(let a=0,l=e.length;a<l;a++){const c=e[a];i[c.uuid]===void 0&&(i[c.uuid]=r.parse(c)),s[c.uuid]=i[c.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],r=Md.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const i=this,s={};let r;function a(c){return i.manager.itemStart(c),r.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const f=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return a(p)}else return c.data?{data:mm(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new zS(t);r=new Vv(c),r.setCrossOrigin(this.crossOrigin);for(let f=0,p=e.length;f<p;f++){const g=e[f],v=g.url;if(Array.isArray(v)){const x=[];for(let A=0,M=v.length;A<M;A++){const _=v[A],S=l(_);S!==null&&(S instanceof HTMLImageElement?x.push(S):x.push(new ul(S.data,S.width,S.height)))}s[g.uuid]=new id(x)}else{const x=l(g.url);s[g.uuid]=new id(x)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function r(a){if(typeof a=="string"){const l=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await s.loadAsync(c)}else return a.data?{data:mm(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){s=new Vv(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const c=e[a],f=c.url;if(Array.isArray(f)){const p=[];for(let g=0,v=f.length;g<v;g++){const x=f[g],A=await r(x);A!==null&&(A instanceof HTMLImageElement?p.push(A):p.push(new ul(A.data,A.width,A.height)))}i[c.uuid]=new id(p)}else{const p=await r(c.url);i[c.uuid]=new id(p)}}}return i}parseTextures(e,t){function i(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}const s={};if(e!==void 0)for(let r=0,a=e.length;r<a;r++){const l=e[r];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],f=c.data;let p;Array.isArray(f)?(p=new hy,f.length===6&&(p.needsUpdate=!0)):(f&&f.data?p=new ul:p=new Zn,f&&(p.needsUpdate=!0)),p.source=c,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=i(l.mapping,k$)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=i(l.wrap[0],fL),p.wrapT=i(l.wrap[1],fL)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.minFilter!==void 0&&(p.minFilter=i(l.minFilter,hL)),l.magFilter!==void 0&&(p.magFilter=i(l.magFilter,hL)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),s[l.uuid]=p}return s}parseObject(e,t,i,s,r){let a;function l(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const x=[];for(let A=0,M=v.length;A<M;A++){const _=v[A];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),x.push(i[_])}return x}return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),i[v]}}function f(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let p,g;switch(e.type){case"Scene":a=new bd,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new pt(e.background):a.background=f(e.background)),e.environment!==void 0&&(a.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new SS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new AS(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Zi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new oc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new M4(e.color,e.intensity);break;case"DirectionalLight":a=new TR(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new ER(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new CR(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new MR(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new _4(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new T4().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),g=c(e.material),a=new sR(p,g),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),g=c(e.material),a=new Ci(p,g);break;case"InstancedMesh":p=l(e.geometry),g=c(e.material);const v=e.count,x=e.instanceMatrix,A=e.instanceColor;a=new rR(p,g,v),a.instanceMatrix=new Ad(new Float32Array(x.array),16),A!==void 0&&(a.instanceColor=new Ad(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":p=l(e.geometry),g=c(e.material),a=new $z(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),a.geometry=p,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(M=>{const _=new Lr;_.min.fromArray(M.boxMin),_.max.fromArray(M.boxMax);const S=new dr;return S.radius=M.sphereRadius,S.center.fromArray(M.sphereCenter),{boxInitialized:M.boxInitialized,box:_,sphereInitialized:M.sphereInitialized,sphere:S}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=f(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=f(e.colorsTexture.uuid));break;case"LOD":a=new Qz;break;case"Line":a=new nu(l(e.geometry),c(e.material));break;case"LineLoop":a=new aR(l(e.geometry),c(e.material));break;case"LineSegments":a=new pl(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new oR(l(e.geometry),c(e.material));break;case"Sprite":a=new Zz(c(e.material));break;case"Group":a=new Wc;break;case"Bone":a=new _S;break;default:a=new Pn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let x=0;x<v.length;x++)a.add(this.parseObject(v[x],t,i,s,r))}if(e.animations!==void 0){const v=e.animations;for(let x=0;x<v.length;x++){const A=v[x];a.animations.push(r[A])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const v=e.levels;for(let x=0;x<v.length;x++){const A=v[x],M=a.getObjectByProperty("uuid",A.object);M!==void 0&&a.addLevel(M,A.distance,A.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,s=e.getObjectByProperty("uuid",i);s!==void 0?t.target=s:t.target=new Pn}})}}const k$={UVMapping:yf,CubeReflectionMapping:uc,CubeRefractionMapping:xf,EquirectangularReflectionMapping:Lm,EquirectangularRefractionMapping:Nv,CubeUVReflectionMapping:Qm},fL={RepeatWrapping:bf,ClampToEdgeWrapping:gs,MirroredRepeatWrapping:Om},hL={NearestFilter:wi,NearestMipmapNearestFilter:uS,NearestMipmapLinearFilter:ed,LinearFilter:jn,LinearMipmapNearestFilter:xm,LinearMipmapLinearFilter:Ao};class R4 extends mr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=qc.get(e);if(a!==void 0){if(r.manager.itemStart(e),a.then){a.then(f=>{t&&t(f),r.manager.itemEnd(e)}).catch(f=>{s&&s(f)});return}return setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(f){return qc.add(e,f),t&&t(f),r.manager.itemEnd(e),f}).catch(function(f){s&&s(f),qc.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});qc.add(e,c),r.manager.itemStart(e)}}let j1;class wR{static getContext(){return j1===void 0&&(j1=new(window.AudioContext||window.webkitAudioContext)),j1}static setContext(e){j1=e}}class j$ extends mr{constructor(e){super(e)}load(e,t,i,s){const r=this,a=new pr(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{const f=c.slice(0);wR.getContext().decodeAudioData(f,function(g){t(g)}).catch(l)}catch(f){l(f)}},i,s);function l(c){s?s(c):console.error(c),r.manager.itemError(e)}}}const dL=new Wt,pL=new Wt,Lh=new Wt;class X${constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Zi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Zi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Lh.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,a=t.near*Math.tan(gd*t.fov*.5)/t.zoom;let l,c;pL.elements[12]=-s,dL.elements[12]=s,l=-a*t.aspect+r,c=a*t.aspect+r,Lh.elements[0]=2*t.near/(c-l),Lh.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(Lh),l=-a*t.aspect-r,c=a*t.aspect-r,Lh.elements[0]=2*t.near/(c-l),Lh.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(Lh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(pL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(dL)}}class B4 extends Zi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class RR{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=mL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=mL();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function mL(){return performance.now()}const Oh=new te,gL=new Hs,Y$=new te,Uh=new te;class W$ extends Pn{constructor(){super(),this.type="AudioListener",this.context=wR.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new RR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Oh,gL,Y$),Uh.set(0,0,-1).applyQuaternion(gL),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Oh.x,s),t.positionY.linearRampToValueAtTime(Oh.y,s),t.positionZ.linearRampToValueAtTime(Oh.z,s),t.forwardX.linearRampToValueAtTime(Uh.x,s),t.forwardY.linearRampToValueAtTime(Uh.y,s),t.forwardZ.linearRampToValueAtTime(Uh.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(Oh.x,Oh.y,Oh.z),t.setOrientation(Uh.x,Uh.y,Uh.z,i.x,i.y,i.z)}}class D4 extends Pn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Ph=new te,vL=new Hs,q$=new te,Ih=new te;class K$ extends D4{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ph,vL,q$),Ih.set(0,0,1).applyQuaternion(vL);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ph.x,i),t.positionY.linearRampToValueAtTime(Ph.y,i),t.positionZ.linearRampToValueAtTime(Ph.z,i),t.orientationX.linearRampToValueAtTime(Ih.x,i),t.orientationY.linearRampToValueAtTime(Ih.y,i),t.orientationZ.linearRampToValueAtTime(Ih.z,i)}else t.setPosition(Ph.x,Ph.y,Ph.z),t.setOrientation(Ih.x,Ih.y,Ih.z)}}class J${constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class N4{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,r,a;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,r=e*s+s;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==s;++l)i[r+l]=i[l];a=t}else{a+=t;const l=t/a;this._mixBufferRegion(i,r,0,l,s)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const c=t*this._origIndex;this._mixBufferRegion(i,s,c,1-r,t)}a>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(i[c]!==i[c+t]){l.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let r=i,a=s;r!==a;++r)t[r]=t[s+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,r){if(s>=.5)for(let a=0;a!==r;++a)e[t+a]=e[i+a]}_slerp(e,t,i,s){Hs.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,r){const a=this._workIndex*r;Hs.multiplyQuaternionsFlat(e,a,e,t,e,i),Hs.slerpFlat(e,t,e,t,e,a,s)}_lerp(e,t,i,s,r){const a=1-s;for(let l=0;l!==r;++l){const c=t+l;e[c]=e[c]*a+e[i+l]*s}}_lerpAdditive(e,t,i,s,r){for(let a=0;a!==r;++a){const l=t+a;e[l]=e[l]+e[i+a]*s}}}const BR="\\[\\]\\.:\\/",Z$=new RegExp("["+BR+"]","g"),DR="[^"+BR+"]",Q$="[^"+BR.replace("\\.","")+"]",$$=/((?:WC+[\/:])*)/.source.replace("WC",DR),eee=/(WCOD+)?/.source.replace("WCOD",Q$),tee=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",DR),nee=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",DR),iee=new RegExp("^"+$$+eee+tee+nee+"$"),see=["material","materials","bones","map"];class ree{constructor(e,t,i){const s=i||Kn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Kn{constructor(e,t,i){this.path=t,this.parsedPath=i||Kn.parseTrackName(t),this.node=Kn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Kn.Composite(e,t,i):new Kn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Z$,"")}static parseTrackName(e){const t=iee.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=i.nodeName.substring(s+1);see.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let a=0;a<r.length;a++){const l=r[a];if(l.name===t||l.uuid===t)return l;const c=i(l.children);if(c)return c}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=Kn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===f){f=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const a=e[s];if(a===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Kn.Composite=ree;Kn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Kn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Kn.prototype.GetterByBindingType=[Kn.prototype._getValue_direct,Kn.prototype._getValue_array,Kn.prototype._getValue_arrayElement,Kn.prototype._getValue_toArray];Kn.prototype.SetterByBindingTypeAndVersioning=[[Kn.prototype._setValue_direct,Kn.prototype._setValue_direct_setNeedsUpdate,Kn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Kn.prototype._setValue_array,Kn.prototype._setValue_array_setNeedsUpdate,Kn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Kn.prototype._setValue_arrayElement,Kn.prototype._setValue_arrayElement_setNeedsUpdate,Kn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Kn.prototype._setValue_fromArray,Kn.prototype._setValue_fromArray_setNeedsUpdate,Kn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class aee{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ka(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,r=this._bindings,a=r.length;let l,c=e.length,f=this.nCachedObjects_;for(let p=0,g=arguments.length;p!==g;++p){const v=arguments[p],x=v.uuid;let A=t[x];if(A===void 0){A=c++,t[x]=A,e.push(v);for(let M=0,_=a;M!==_;++M)r[M].push(new Kn(v,i[M],s[M]))}else if(A<f){l=e[A];const M=--f,_=e[M];t[_.uuid]=A,e[A]=_,t[x]=M,e[M]=v;for(let S=0,w=a;S!==w;++S){const C=r[S],B=C[M];let N=C[A];C[A]=B,N===void 0&&(N=new Kn(v,i[S],s[S])),C[M]=N}}else e[A]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],f=c.uuid,p=t[f];if(p!==void 0&&p>=r){const g=r++,v=e[g];t[v.uuid]=p,e[p]=v,t[f]=g,e[g]=c;for(let x=0,A=s;x!==A;++x){const M=i[x],_=M[g],S=M[p];M[p]=_,M[g]=S}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_,a=e.length;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],p=f.uuid,g=t[p];if(g!==void 0)if(delete t[p],g<r){const v=--r,x=e[v],A=--a,M=e[A];t[x.uuid]=g,e[g]=x,t[M.uuid]=v,e[v]=M,e.pop();for(let _=0,S=s;_!==S;++_){const w=i[_],C=w[v],B=w[A];w[g]=C,w[v]=B,w.pop()}}else{const v=--a,x=e[v];v>0&&(t[x.uuid]=g),e[g]=x,e.pop();for(let A=0,M=s;A!==M;++A){const _=i[A];_[g]=_[v],_.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const r=this._bindings;if(s!==void 0)return r[s];const a=this._paths,l=this._parsedPaths,c=this._objects,f=c.length,p=this.nCachedObjects_,g=new Array(f);s=r.length,i[e]=s,a.push(e),l.push(t),r.push(g);for(let v=p,x=c.length;v!==x;++v){const A=c[v];g[v]=new Kn(A,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length-1,c=a[l],f=e[l];t[f]=i,a[i]=c,a.pop(),r[i]=r[l],r.pop(),s[i]=s[l],s.pop()}}}class L4{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const r=t.tracks,a=r.length,l=new Array(a),c={endingStart:td,endingEnd:td};for(let f=0;f!==a;++f){const p=r[f].createInterpolant(null);l[f]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Lz,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,r=e._clip.duration,a=r/s,l=s/r;e.warp(1,a,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,r=s.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=s._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=r,c[1]=r+i,f[0]=e/a,f[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const c=(e-r)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const a=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Kw:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(a),f[p].accumulateAdditive(l);break;case vS:default:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(a),f[p].accumulate(s,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,r=this._loopCount;const a=i===Oz;if(e===0)return r===-1?s:a&&(r&1)===1?t-s:s;if(i===Nz){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=t||s<0){const l=Math.floor(s/t);s-=t*l,r+=Math.abs(l);const c=this.repetitions-r;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=s;if(a&&(r&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=nd,s.endingEnd=nd):(e?s.endingStart=this.zeroSlopeAtStart?nd:td:s.endingStart=Lv,t?s.endingEnd=this.zeroSlopeAtEnd?nd:td:s.endingEnd=Lv)}_scheduleFading(e,t,i){const s=this._mixer,r=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=r,c[0]=t,l[1]=r+e,c[1]=i,this}}const oee=new Float32Array(1);class NR extends Ya{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,r=s.length,a=e._propertyBindings,l=e._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let p=f[c];p===void 0&&(p={},f[c]=p);for(let g=0;g!==r;++g){const v=s[g],x=v.name;let A=p[x];if(A!==void 0)++A.referenceCount,a[g]=A;else{if(A=a[g],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,c,x));continue}const M=t&&t._propertyBindings[g].binding.parsedPath;A=new N4(Kn.create(i,x,M),v.ValueTypeName,v.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,c,x),a[g]=A}l[g].resultBuffer=A.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,r=this._actionsByClip;let a=r[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=s.length,s.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,l=a[r],c=l.knownActions,f=c[c.length-1],p=e._byClipCacheIndex;f._byClipCacheIndex=p,c[p]=f,c.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],c.length===0&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,r=this._bindings;let a=s[t];a===void 0&&(a={},s[t]=a),a[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,r=i.path,a=this._bindingsByRootAndName,l=a[s],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete l[r],Object.keys(l).length===0&&delete a[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new bR(new Float32Array(2),new Float32Array(2),1,oee),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const s=t||this._root,r=s.uuid;let a=typeof e=="string"?Md.findByName(s,e):e;const l=a!==null?a.uuid:e,c=this._actionsByClip[l];let f=null;if(i===void 0&&(a!==null?i=a.blendMode:i=vS),c!==void 0){const g=c.actionByRoot[r];if(g!==void 0&&g.blendMode===i)return g;f=c.knownActions[0],a===null&&(a=f._clip)}if(a===null)return null;const p=new L4(this,a,t,i);return this._bindAction(p,f),this._addInactiveAction(p,l,r),p}existingAction(e,t){const i=t||this._root,s=i.uuid,r=typeof e=="string"?Md.findByName(i,e):e,a=r?r.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(s,e,r,a);const l=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)l[f].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,r=s[i];if(r!==void 0){const a=r.knownActions;for(let l=0,c=a.length;l!==c;++l){const f=a[l];this._deactivateAction(f);const p=f._cacheIndex,g=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(f)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const l=i[a].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const a in r){const l=r[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class lee extends yS{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=i,this.texture=new xS(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class cee extends yS{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isRenderTargetArray=!0,this.depth=i,this.texture=new uy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Jn{constructor(e){this.value=e}clone(){return new Jn(this.value.clone===void 0?this.value:this.value.clone())}}let uee=0;class fee extends Ya{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:uee++}),this.name="",this.usage=Uv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++){const r=Array.isArray(t[i])?t[i]:[t[i]];for(let a=0;a<r.length;a++)this.uniforms.push(r[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class hee extends dy{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class dee{constructor(e,t,i,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const yL=new Wt;class GS{constructor(e,t,i=0,s=1/0){this.ray=new Cd(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new zm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return yL.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(yL),this}intersectObject(e,t=!0,i=[]){return qT(e,this,i,t),i.sort(xL),i}intersectObjects(e,t=!0,i=[]){for(let s=0,r=e.length;s<r;s++)qT(e[s],this,i,t);return i.sort(xL),i}}function xL(n,e){return n.distance-e.distance}function qT(n,e,t,i){let s=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(s=!1),s===!0&&i===!0){const r=n.children;for(let a=0,l=r.length;a<l;a++)qT(r[a],e,t,!0)}}class KT{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=mn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(mn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class pee{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class LR{constructor(e,t,i,s){LR.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=i,r[3]=s,this}}const bL=new ze;class mee{constructor(e=new ze(1/0,1/0),t=new ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=bL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,bL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const AL=new te,X1=new te;class gee{constructor(e=new te,t=new te){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){AL.subVectors(e,this.start),X1.subVectors(this.end,this.start);const i=X1.dot(X1);let r=X1.dot(AL)/i;return t&&(r=mn(r,0,1)),r}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const SL=new te;class vee extends Pn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new gn,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,c=32;a<c;a++,l++){const f=a/c*Math.PI*2,p=l/c*Math.PI*2;s.push(Math.cos(f),Math.sin(f),1,Math.cos(p),Math.sin(p),1)}i.setAttribute("position",new zt(s,3));const r=new Or({fog:!1,toneMapped:!1});this.cone=new pl(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),SL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(SL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const nf=new te,Y1=new Wt,$M=new Wt;class O4 extends pl{constructor(e){const t=U4(e),i=new gn,s=[],r=[],a=new pt(0,0,1),l=new pt(0,1,0);for(let f=0;f<t.length;f++){const p=t[f];p.parent&&p.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(a.r,a.g,a.b),r.push(l.r,l.g,l.b))}i.setAttribute("position",new zt(s,3)),i.setAttribute("color",new zt(r,3));const c=new Or({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");$M.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<t.length;r++){const l=t[r];l.parent&&l.parent.isBone&&(Y1.multiplyMatrices($M,l.matrixWorld),nf.setFromMatrixPosition(Y1),s.setXYZ(a,nf.x,nf.y,nf.z),Y1.multiplyMatrices($M,l.parent.matrixWorld),nf.setFromMatrixPosition(Y1),s.setXYZ(a+1,nf.x,nf.y,nf.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function U4(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,U4(n.children[t]));return e}class yee extends Ci{constructor(e,t,i){const s=new xy(t,4,2),r=new ia({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const xee=new te,_L=new pt,ML=new pt;class bee extends Pn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const s=new yy(t);s.rotateY(Math.PI*.5),this.material=new ia({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),a=new Float32Array(r.count*3);s.setAttribute("color",new Xn(a,3)),this.add(new Ci(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");_L.copy(this.light.color),ML.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const r=i<s/2?_L:ML;t.setXYZ(i,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(xee.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Aee extends pl{constructor(e=10,t=10,i=4473924,s=8947848){i=new pt(i),s=new pt(s);const r=t/2,a=e/t,l=e/2,c=[],f=[];for(let v=0,x=0,A=-l;v<=t;v++,A+=a){c.push(-l,0,A,l,0,A),c.push(A,0,-l,A,0,l);const M=v===r?i:s;M.toArray(f,x),x+=3,M.toArray(f,x),x+=3,M.toArray(f,x),x+=3,M.toArray(f,x),x+=3}const p=new gn;p.setAttribute("position",new zt(c,3)),p.setAttribute("color",new zt(f,3));const g=new Or({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class See extends pl{constructor(e=10,t=16,i=8,s=64,r=4473924,a=8947848){r=new pt(r),a=new pt(a);const l=[],c=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),x=Math.sin(v)*e,A=Math.cos(v)*e;l.push(0,0,0),l.push(x,0,A);const M=g&1?r:a;c.push(M.r,M.g,M.b),c.push(M.r,M.g,M.b)}for(let g=0;g<i;g++){const v=g&1?r:a,x=e-e/i*g;for(let A=0;A<s;A++){let M=A/s*(Math.PI*2),_=Math.sin(M)*x,S=Math.cos(M)*x;l.push(_,0,S),c.push(v.r,v.g,v.b),M=(A+1)/s*(Math.PI*2),_=Math.sin(M)*x,S=Math.cos(M)*x,l.push(_,0,S),c.push(v.r,v.g,v.b)}}const f=new gn;f.setAttribute("position",new zt(l,3)),f.setAttribute("color",new zt(c,3));const p=new Or({vertexColors:!0,toneMapped:!1});super(f,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const EL=new te,W1=new te,TL=new te;class _ee extends Pn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new gn;s.setAttribute("position",new zt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Or({fog:!1,toneMapped:!1});this.lightPlane=new nu(s,r),this.add(this.lightPlane),s=new gn,s.setAttribute("position",new zt([0,0,0,0,0,1],3)),this.targetLine=new nu(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),EL.setFromMatrixPosition(this.light.matrixWorld),W1.setFromMatrixPosition(this.light.target.matrixWorld),TL.subVectors(W1,EL),this.lightPlane.lookAt(W1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(W1),this.targetLine.scale.z=TL.length()}}const q1=new te,as=new fy;class Mee extends pl{constructor(e){const t=new gn,i=new Or({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(A,M){c(A),c(M)}function c(A){s.push(0,0,0),r.push(0,0,0),a[A]===void 0&&(a[A]=[]),a[A].push(s.length/3-1)}t.setAttribute("position",new zt(s,3)),t.setAttribute("color",new zt(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const f=new pt(16755200),p=new pt(16711680),g=new pt(43775),v=new pt(16777215),x=new pt(3355443);this.setColors(f,p,g,v,x)}setColors(e,t,i,s,r){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,r.r,r.g,r.b),l.setXYZ(41,r.r,r.g,r.b),l.setXYZ(42,r.r,r.g,r.b),l.setXYZ(43,r.r,r.g,r.b),l.setXYZ(44,r.r,r.g,r.b),l.setXYZ(45,r.r,r.g,r.b),l.setXYZ(46,r.r,r.g,r.b),l.setXYZ(47,r.r,r.g,r.b),l.setXYZ(48,r.r,r.g,r.b),l.setXYZ(49,r.r,r.g,r.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;as.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===ol?-1:0;ds("c",t,e,as,0,0,r),ds("t",t,e,as,0,0,1),ds("n1",t,e,as,-1,-1,r),ds("n2",t,e,as,i,-1,r),ds("n3",t,e,as,-1,s,r),ds("n4",t,e,as,i,s,r),ds("f1",t,e,as,-1,-1,1),ds("f2",t,e,as,i,-1,1),ds("f3",t,e,as,-1,s,1),ds("f4",t,e,as,i,s,1),ds("u1",t,e,as,i*.7,s*1.1,r),ds("u2",t,e,as,-1*.7,s*1.1,r),ds("u3",t,e,as,0,s*2,r),ds("cf1",t,e,as,-1,0,1),ds("cf2",t,e,as,i,0,1),ds("cf3",t,e,as,0,-1,1),ds("cf4",t,e,as,0,s,1),ds("cn1",t,e,as,-1,0,r),ds("cn2",t,e,as,i,0,r),ds("cn3",t,e,as,0,-1,r),ds("cn4",t,e,as,0,s,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ds(n,e,t,i,s,r,a){q1.set(s,r,a).unproject(i);const l=e[n];if(l!==void 0){const c=t.getAttribute("position");for(let f=0,p=l.length;f<p;f++)c.setXYZ(l[f],q1.x,q1.y,q1.z)}}const K1=new Lr;class Eee extends pl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new gn;r.setIndex(new Xn(i,1)),r.setAttribute("position",new Xn(s,3)),super(r,new Or({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&K1.setFromObject(this.object),K1.isEmpty())return;const t=K1.min,i=K1.max,s=this.geometry.attributes.position,r=s.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=t.x,r[4]=i.y,r[5]=i.z,r[6]=t.x,r[7]=t.y,r[8]=i.z,r[9]=i.x,r[10]=t.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=t.z,r[15]=t.x,r[16]=i.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=i.x,r[22]=t.y,r[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tee extends pl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new gn;r.setIndex(new Xn(i,1)),r.setAttribute("position",new zt(s,3)),super(r,new Or({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Cee extends nu{constructor(e,t=1,i=16776960){const s=i,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new gn;a.setAttribute("position",new zt(r,3)),a.computeBoundingSphere(),super(a,new Or({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new gn;c.setAttribute("position",new zt(l,3)),c.computeBoundingSphere(),this.add(new Ci(c,new ia({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const CL=new te;let J1,eE;class wee extends Pn{constructor(e=new te(0,0,1),t=new te(0,0,0),i=1,s=16776960,r=i*.2,a=r*.2){super(),this.type="ArrowHelper",J1===void 0&&(J1=new gn,J1.setAttribute("position",new zt([0,0,0,0,1,0],3)),eE=new $m(0,.5,1,5,1),eE.translate(0,-.5,0)),this.position.copy(t),this.line=new nu(J1,new Or({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ci(eE,new ia({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{CL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(CL,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Ree extends pl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new gn;s.setAttribute("position",new zt(t,3)),s.setAttribute("color",new zt(i,3));const r=new Or({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,i){const s=new pt,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(i),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bee{constructor(){this.type="ShapePath",this.color=new pt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Fv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,r,a){return this.currentPath.bezierCurveTo(e,t,i,s,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const w=[];for(let C=0,B=S.length;C<B;C++){const N=S[C],L=new vd;L.curves=N.curves,w.push(L)}return w}function i(S,w){const C=w.length;let B=!1;for(let N=C-1,L=0;L<C;N=L++){let F=w[N],P=w[L],U=P.x-F.x,I=P.y-F.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(F=w[L],U=-U,P=w[N],I=-I),S.y<F.y||S.y>P.y)continue;if(S.y===F.y){if(S.x===F.x)return!0}else{const X=I*(S.x-F.x)-U*(S.y-F.y);if(X===0)return!0;if(X<0)continue;B=!B}}else{if(S.y!==F.y)continue;if(P.x<=S.x&&S.x<=F.x||F.x<=S.x&&S.x<=P.x)return!0}}return B}const s=ac.isClockWise,r=this.subPaths;if(r.length===0)return[];let a,l,c;const f=[];if(r.length===1)return l=r[0],c=new vd,c.curves=l.curves,f.push(c),f;let p=!s(r[0].getPoints());p=e?!p:p;const g=[],v=[];let x=[],A=0,M;v[A]=void 0,x[A]=[];for(let S=0,w=r.length;S<w;S++)l=r[S],M=l.getPoints(),a=s(M),a=e?!a:a,a?(!p&&v[A]&&A++,v[A]={s:new vd,p:M},v[A].s.curves=l.curves,p&&A++,x[A]=[]):x[A].push({h:l,p:M[0]});if(!v[0])return t(r);if(v.length>1){let S=!1,w=0;for(let C=0,B=v.length;C<B;C++)g[C]=[];for(let C=0,B=v.length;C<B;C++){const N=x[C];for(let L=0;L<N.length;L++){const F=N[L];let P=!0;for(let U=0;U<v.length;U++)i(F.p,v[U].p)&&(C!==U&&w++,P?(P=!1,g[U].push(F)):S=!0);P&&g[C].push(F)}}w>0&&S===!1&&(x=g)}let _;for(let S=0,w=v.length;S<w;S++){c=v[S].s,f.push(c),_=x[S];for(let C=0,B=_.length;C<B;C++)c.holes.push(_[C].h)}return f}}class Dee extends Ya{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Nee(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Lee(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Oee(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function JT(n,e,t,i){const s=Uee(i);switch(t){case kw:return n*e;case Xw:return n*e;case Yw:return n*e*2;case ly:return n*e/s.components*s.byteLength;case cy:return n*e/s.components*s.byteLength;case Ww:return n*e*2/s.components*s.byteLength;case mS:return n*e*2/s.components*s.byteLength;case jw:return n*e*3/s.components*s.byteLength;case vs:return n*e*4/s.components*s.byteLength;case gS:return n*e*4/s.components*s.byteLength;case av:case ov:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case lv:case cv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case rA:case oA:return Math.max(n,16)*Math.max(e,8)/4;case sA:case aA:return Math.max(n,8)*Math.max(e,8)/2;case lA:case cA:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case uA:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case fA:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case hA:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case dA:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case pA:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case mA:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case gA:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case vA:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case yA:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case xA:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case bA:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case AA:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case SA:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case _A:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case MA:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case uv:case EA:case TA:return Math.ceil(n/4)*Math.ceil(e/4)*16;case qw:case CA:return Math.ceil(n/4)*Math.ceil(e/4)*8;case wA:case RA:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Uee(n){switch(n){case xs:case fS:return{byteLength:1,components:1};case Um:case hS:case ws:return{byteLength:2,components:1};case dS:case pS:return{byteLength:2,components:4};case dl:case oy:case Vi:return{byteLength:4,components:1};case Vw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const Pee={contain:Nee,cover:Lee,fill:Oee,getByteLength:JT};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:wf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=wf);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function P4(){let n=null,e=!1,t=null,i=null;function s(r,a){t(r,a),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function Iee(n){const e=new WeakMap;function t(l,c){const f=l.array,p=l.usage,g=f.byteLength,v=n.createBuffer();n.bindBuffer(c,v),n.bufferData(c,f,p),l.onUploadCallback();let x;if(f instanceof Float32Array)x=n.FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?x=n.HALF_FLOAT:x=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)x=n.SHORT;else if(f instanceof Uint32Array)x=n.UNSIGNED_INT;else if(f instanceof Int32Array)x=n.INT;else if(f instanceof Int8Array)x=n.BYTE;else if(f instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:x,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:g}}function i(l,c,f){const p=c.array,g=c.updateRanges;if(n.bindBuffer(f,l),g.length===0)n.bufferSubData(f,0,p);else{g.sort((x,A)=>x.start-A.start);let v=0;for(let x=1;x<g.length;x++){const A=g[v],M=g[x];M.start<=A.start+A.count+1?A.count=Math.max(A.count,M.start+M.count-A.start):(++v,g[v]=M)}g.length=v+1;for(let x=0,A=g.length;x<A;x++){const M=g[x];n.bufferSubData(f,M.start*p.BYTES_PER_ELEMENT,p,M.start,M.count)}c.clearUpdateRanges()}c.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function r(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(n.deleteBuffer(c.buffer),e.delete(l))}function a(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=e.get(l);if(f===void 0)e.set(l,t(l,c));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,l,c),f.version=l.version}}return{get:s,remove:r,update:a}}var Fee=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,zee=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Hee=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Gee=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vee=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,kee=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,jee=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Xee=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Yee=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Wee=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,qee=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Kee=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Jee=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Zee=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Qee=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$ee=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,ete=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,tte=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,nte=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ite=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ste=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,rte=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ate=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,ote=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,lte=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,cte=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ute=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,fte=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,hte=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dte=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,pte="gl_FragColor = linearToOutputTexel( gl_FragColor );",mte=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,gte=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,vte=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,yte=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,xte=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,bte=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ate=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Ste=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_te=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Mte=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ete=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Tte=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Cte=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wte=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Rte=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Bte=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Dte=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Nte=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Lte=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ote=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Ute=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Pte=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ite=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Fte=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,zte=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Hte=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Gte=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Vte=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kte=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,jte=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Xte=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Yte=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Wte=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qte=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Kte=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Jte=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Zte=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Qte=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,$te=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,ene=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,tne=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,nne=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ine=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sne=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,rne=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ane=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,one=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,lne=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,cne=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,une=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,fne=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,hne=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,dne=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,pne=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,mne=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,gne=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,vne=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,yne=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,xne=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,bne=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Ane=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Sne=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_ne=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Mne=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Ene=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Tne=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Cne=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,wne=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Rne=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Bne=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Dne=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Nne=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Lne=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,One=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Une=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Pne=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ine=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Fne=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Hne=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Vne=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kne=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,jne=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Xne=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Yne=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Wne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qne=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Kne=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Jne=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Zne=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Qne=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$ne=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eie=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tie=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,nie=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iie=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,sie=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,rie=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aie=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oie=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,lie=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cie=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uie=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fie=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,hie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,die=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pie=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,mie=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,gie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Tn={alphahash_fragment:Fee,alphahash_pars_fragment:zee,alphamap_fragment:Hee,alphamap_pars_fragment:Gee,alphatest_fragment:Vee,alphatest_pars_fragment:kee,aomap_fragment:jee,aomap_pars_fragment:Xee,batching_pars_vertex:Yee,batching_vertex:Wee,begin_vertex:qee,beginnormal_vertex:Kee,bsdfs:Jee,iridescence_fragment:Zee,bumpmap_pars_fragment:Qee,clipping_planes_fragment:$ee,clipping_planes_pars_fragment:ete,clipping_planes_pars_vertex:tte,clipping_planes_vertex:nte,color_fragment:ite,color_pars_fragment:ste,color_pars_vertex:rte,color_vertex:ate,common:ote,cube_uv_reflection_fragment:lte,defaultnormal_vertex:cte,displacementmap_pars_vertex:ute,displacementmap_vertex:fte,emissivemap_fragment:hte,emissivemap_pars_fragment:dte,colorspace_fragment:pte,colorspace_pars_fragment:mte,envmap_fragment:gte,envmap_common_pars_fragment:vte,envmap_pars_fragment:yte,envmap_pars_vertex:xte,envmap_physical_pars_fragment:Bte,envmap_vertex:bte,fog_vertex:Ate,fog_pars_vertex:Ste,fog_fragment:_te,fog_pars_fragment:Mte,gradientmap_pars_fragment:Ete,lightmap_pars_fragment:Tte,lights_lambert_fragment:Cte,lights_lambert_pars_fragment:wte,lights_pars_begin:Rte,lights_toon_fragment:Dte,lights_toon_pars_fragment:Nte,lights_phong_fragment:Lte,lights_phong_pars_fragment:Ote,lights_physical_fragment:Ute,lights_physical_pars_fragment:Pte,lights_fragment_begin:Ite,lights_fragment_maps:Fte,lights_fragment_end:zte,logdepthbuf_fragment:Hte,logdepthbuf_pars_fragment:Gte,logdepthbuf_pars_vertex:Vte,logdepthbuf_vertex:kte,map_fragment:jte,map_pars_fragment:Xte,map_particle_fragment:Yte,map_particle_pars_fragment:Wte,metalnessmap_fragment:qte,metalnessmap_pars_fragment:Kte,morphinstance_vertex:Jte,morphcolor_vertex:Zte,morphnormal_vertex:Qte,morphtarget_pars_vertex:$te,morphtarget_vertex:ene,normal_fragment_begin:tne,normal_fragment_maps:nne,normal_pars_fragment:ine,normal_pars_vertex:sne,normal_vertex:rne,normalmap_pars_fragment:ane,clearcoat_normal_fragment_begin:one,clearcoat_normal_fragment_maps:lne,clearcoat_pars_fragment:cne,iridescence_pars_fragment:une,opaque_fragment:fne,packing:hne,premultiplied_alpha_fragment:dne,project_vertex:pne,dithering_fragment:mne,dithering_pars_fragment:gne,roughnessmap_fragment:vne,roughnessmap_pars_fragment:yne,shadowmap_pars_fragment:xne,shadowmap_pars_vertex:bne,shadowmap_vertex:Ane,shadowmask_pars_fragment:Sne,skinbase_vertex:_ne,skinning_pars_vertex:Mne,skinning_vertex:Ene,skinnormal_vertex:Tne,specularmap_fragment:Cne,specularmap_pars_fragment:wne,tonemapping_fragment:Rne,tonemapping_pars_fragment:Bne,transmission_fragment:Dne,transmission_pars_fragment:Nne,uv_pars_fragment:Lne,uv_pars_vertex:One,uv_vertex:Une,worldpos_vertex:Pne,background_vert:Ine,background_frag:Fne,backgroundCube_vert:zne,backgroundCube_frag:Hne,cube_vert:Gne,cube_frag:Vne,depth_vert:kne,depth_frag:jne,distanceRGBA_vert:Xne,distanceRGBA_frag:Yne,equirect_vert:Wne,equirect_frag:qne,linedashed_vert:Kne,linedashed_frag:Jne,meshbasic_vert:Zne,meshbasic_frag:Qne,meshlambert_vert:$ne,meshlambert_frag:eie,meshmatcap_vert:tie,meshmatcap_frag:nie,meshnormal_vert:iie,meshnormal_frag:sie,meshphong_vert:rie,meshphong_frag:aie,meshphysical_vert:oie,meshphysical_frag:lie,meshtoon_vert:cie,meshtoon_frag:uie,points_vert:fie,points_frag:hie,shadow_vert:die,shadow_frag:pie,sprite_vert:mie,sprite_frag:gie},Et={common:{diffuse:{value:new pt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bn}},envmap:{envMap:{value:null},envMapRotation:{value:new bn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bn},normalScale:{value:new ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0},uvTransform:{value:new bn}},sprite:{diffuse:{value:new pt(16777215)},opacity:{value:1},center:{value:new ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}}},il={basic:{uniforms:Zr([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.fog]),vertexShader:Tn.meshbasic_vert,fragmentShader:Tn.meshbasic_frag},lambert:{uniforms:Zr([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new pt(0)}}]),vertexShader:Tn.meshlambert_vert,fragmentShader:Tn.meshlambert_frag},phong:{uniforms:Zr([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new pt(0)},specular:{value:new pt(1118481)},shininess:{value:30}}]),vertexShader:Tn.meshphong_vert,fragmentShader:Tn.meshphong_frag},standard:{uniforms:Zr([Et.common,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.roughnessmap,Et.metalnessmap,Et.fog,Et.lights,{emissive:{value:new pt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tn.meshphysical_vert,fragmentShader:Tn.meshphysical_frag},toon:{uniforms:Zr([Et.common,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.gradientmap,Et.fog,Et.lights,{emissive:{value:new pt(0)}}]),vertexShader:Tn.meshtoon_vert,fragmentShader:Tn.meshtoon_frag},matcap:{uniforms:Zr([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,{matcap:{value:null}}]),vertexShader:Tn.meshmatcap_vert,fragmentShader:Tn.meshmatcap_frag},points:{uniforms:Zr([Et.points,Et.fog]),vertexShader:Tn.points_vert,fragmentShader:Tn.points_frag},dashed:{uniforms:Zr([Et.common,Et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tn.linedashed_vert,fragmentShader:Tn.linedashed_frag},depth:{uniforms:Zr([Et.common,Et.displacementmap]),vertexShader:Tn.depth_vert,fragmentShader:Tn.depth_frag},normal:{uniforms:Zr([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,{opacity:{value:1}}]),vertexShader:Tn.meshnormal_vert,fragmentShader:Tn.meshnormal_frag},sprite:{uniforms:Zr([Et.sprite,Et.fog]),vertexShader:Tn.sprite_vert,fragmentShader:Tn.sprite_frag},background:{uniforms:{uvTransform:{value:new bn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tn.background_vert,fragmentShader:Tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new bn}},vertexShader:Tn.backgroundCube_vert,fragmentShader:Tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tn.cube_vert,fragmentShader:Tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tn.equirect_vert,fragmentShader:Tn.equirect_frag},distanceRGBA:{uniforms:Zr([Et.common,Et.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tn.distanceRGBA_vert,fragmentShader:Tn.distanceRGBA_frag},shadow:{uniforms:Zr([Et.lights,Et.fog,{color:{value:new pt(0)},opacity:{value:1}}]),vertexShader:Tn.shadow_vert,fragmentShader:Tn.shadow_frag}};il.physical={uniforms:Zr([il.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bn},clearcoatNormalScale:{value:new ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bn},sheen:{value:0},sheenColor:{value:new pt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bn},transmissionSamplerSize:{value:new ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bn},attenuationDistance:{value:0},attenuationColor:{value:new pt(0)},specularColor:{value:new pt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bn},anisotropyVector:{value:new ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new bn}}]),vertexShader:Tn.meshphysical_vert,fragmentShader:Tn.meshphysical_frag};const Z1={r:0,b:0,g:0},Fh=new Xa,vie=new Wt;function yie(n,e,t,i,s,r,a){const l=new pt(0);let c=r===!0?0:1,f,p,g=null,v=0,x=null;function A(C){let B=C.isScene===!0?C.background:null;return B&&B.isTexture&&(B=(C.backgroundBlurriness>0?t:e).get(B)),B}function M(C){let B=!1;const N=A(C);N===null?S(l,c):N&&N.isColor&&(S(N,1),B=!0);const L=n.xr.getEnvironmentBlendMode();L==="additive"?i.buffers.color.setClear(0,0,0,1,a):L==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||B)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function _(C,B){const N=A(B);N&&(N.isCubeTexture||N.mapping===Qm)?(p===void 0&&(p=new Ci(new wd(1,1,1),new Oi({name:"BackgroundCubeMaterial",uniforms:Hm(il.backgroundCube.uniforms),vertexShader:il.backgroundCube.vertexShader,fragmentShader:il.backgroundCube.fragmentShader,side:zs,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(L,F,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(p)),Fh.copy(B.backgroundRotation),Fh.x*=-1,Fh.y*=-1,Fh.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Fh.y*=-1,Fh.z*=-1),p.material.uniforms.envMap.value=N,p.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(vie.makeRotationFromEuler(Fh)),p.material.toneMapped=Vn.getTransfer(N.colorSpace)!==mi,(g!==N||v!==N.version||x!==n.toneMapping)&&(p.material.needsUpdate=!0,g=N,v=N.version,x=n.toneMapping),p.layers.enableAll(),C.unshift(p,p.geometry,p.material,0,0,null)):N&&N.isTexture&&(f===void 0&&(f=new Ci(new Nf(2,2),new Oi({name:"BackgroundMaterial",uniforms:Hm(il.background.uniforms),vertexShader:il.background.vertexShader,fragmentShader:il.background.fragmentShader,side:hl,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(f)),f.material.uniforms.t2D.value=N,f.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,f.material.toneMapped=Vn.getTransfer(N.colorSpace)!==mi,N.matrixAutoUpdate===!0&&N.updateMatrix(),f.material.uniforms.uvTransform.value.copy(N.matrix),(g!==N||v!==N.version||x!==n.toneMapping)&&(f.material.needsUpdate=!0,g=N,v=N.version,x=n.toneMapping),f.layers.enableAll(),C.unshift(f,f.geometry,f.material,0,0,null))}function S(C,B){C.getRGB(Z1,Kz(n)),i.buffers.color.setClear(Z1.r,Z1.g,Z1.b,B,a)}function w(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(C,B=1){l.set(C),c=B,S(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(C){c=C,S(l,c)},render:M,addToRenderList:_,dispose:w}}function xie(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=v(null);let r=s,a=!1;function l(I,X,re,ee,$){let ae=!1;const j=g(ee,re,X);r!==j&&(r=j,f(r.object)),ae=x(I,ee,re,$),ae&&A(I,ee,re,$),$!==null&&e.update($,n.ELEMENT_ARRAY_BUFFER),(ae||a)&&(a=!1,B(I,X,re,ee),$!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function c(){return n.createVertexArray()}function f(I){return n.bindVertexArray(I)}function p(I){return n.deleteVertexArray(I)}function g(I,X,re){const ee=re.wireframe===!0;let $=i[I.id];$===void 0&&($={},i[I.id]=$);let ae=$[X.id];ae===void 0&&(ae={},$[X.id]=ae);let j=ae[ee];return j===void 0&&(j=v(c()),ae[ee]=j),j}function v(I){const X=[],re=[],ee=[];for(let $=0;$<t;$++)X[$]=0,re[$]=0,ee[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:re,attributeDivisors:ee,object:I,attributes:{},index:null}}function x(I,X,re,ee){const $=r.attributes,ae=X.attributes;let j=0;const Q=re.getAttributes();for(const J in Q)if(Q[J].location>=0){const Y=$[J];let oe=ae[J];if(oe===void 0&&(J==="instanceMatrix"&&I.instanceMatrix&&(oe=I.instanceMatrix),J==="instanceColor"&&I.instanceColor&&(oe=I.instanceColor)),Y===void 0||Y.attribute!==oe||oe&&Y.data!==oe.data)return!0;j++}return r.attributesNum!==j||r.index!==ee}function A(I,X,re,ee){const $={},ae=X.attributes;let j=0;const Q=re.getAttributes();for(const J in Q)if(Q[J].location>=0){let Y=ae[J];Y===void 0&&(J==="instanceMatrix"&&I.instanceMatrix&&(Y=I.instanceMatrix),J==="instanceColor"&&I.instanceColor&&(Y=I.instanceColor));const oe={};oe.attribute=Y,Y&&Y.data&&(oe.data=Y.data),$[J]=oe,j++}r.attributes=$,r.attributesNum=j,r.index=ee}function M(){const I=r.newAttributes;for(let X=0,re=I.length;X<re;X++)I[X]=0}function _(I){S(I,0)}function S(I,X){const re=r.newAttributes,ee=r.enabledAttributes,$=r.attributeDivisors;re[I]=1,ee[I]===0&&(n.enableVertexAttribArray(I),ee[I]=1),$[I]!==X&&(n.vertexAttribDivisor(I,X),$[I]=X)}function w(){const I=r.newAttributes,X=r.enabledAttributes;for(let re=0,ee=X.length;re<ee;re++)X[re]!==I[re]&&(n.disableVertexAttribArray(re),X[re]=0)}function C(I,X,re,ee,$,ae,j){j===!0?n.vertexAttribIPointer(I,X,re,$,ae):n.vertexAttribPointer(I,X,re,ee,$,ae)}function B(I,X,re,ee){M();const $=ee.attributes,ae=re.getAttributes(),j=X.defaultAttributeValues;for(const Q in ae){const J=ae[Q];if(J.location>=0){let xe=$[Q];if(xe===void 0&&(Q==="instanceMatrix"&&I.instanceMatrix&&(xe=I.instanceMatrix),Q==="instanceColor"&&I.instanceColor&&(xe=I.instanceColor)),xe!==void 0){const Y=xe.normalized,oe=xe.itemSize,be=e.get(xe);if(be===void 0)continue;const _e=be.buffer,ue=be.type,Ue=be.bytesPerElement,Be=ue===n.INT||ue===n.UNSIGNED_INT||xe.gpuType===oy;if(xe.isInterleavedBufferAttribute){const He=xe.data,et=He.stride,Lt=xe.offset;if(He.isInstancedInterleavedBuffer){for(let _t=0;_t<J.locationSize;_t++)S(J.location+_t,He.meshPerAttribute);I.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=He.meshPerAttribute*He.count)}else for(let _t=0;_t<J.locationSize;_t++)_(J.location+_t);n.bindBuffer(n.ARRAY_BUFFER,_e);for(let _t=0;_t<J.locationSize;_t++)C(J.location+_t,oe/J.locationSize,ue,Y,et*Ue,(Lt+oe/J.locationSize*_t)*Ue,Be)}else{if(xe.isInstancedBufferAttribute){for(let He=0;He<J.locationSize;He++)S(J.location+He,xe.meshPerAttribute);I.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let He=0;He<J.locationSize;He++)_(J.location+He);n.bindBuffer(n.ARRAY_BUFFER,_e);for(let He=0;He<J.locationSize;He++)C(J.location+He,oe/J.locationSize,ue,Y,oe*Ue,oe/J.locationSize*He*Ue,Be)}}else if(j!==void 0){const Y=j[Q];if(Y!==void 0)switch(Y.length){case 2:n.vertexAttrib2fv(J.location,Y);break;case 3:n.vertexAttrib3fv(J.location,Y);break;case 4:n.vertexAttrib4fv(J.location,Y);break;default:n.vertexAttrib1fv(J.location,Y)}}}}w()}function N(){P();for(const I in i){const X=i[I];for(const re in X){const ee=X[re];for(const $ in ee)p(ee[$].object),delete ee[$];delete X[re]}delete i[I]}}function L(I){if(i[I.id]===void 0)return;const X=i[I.id];for(const re in X){const ee=X[re];for(const $ in ee)p(ee[$].object),delete ee[$];delete X[re]}delete i[I.id]}function F(I){for(const X in i){const re=i[X];if(re[I.id]===void 0)continue;const ee=re[I.id];for(const $ in ee)p(ee[$].object),delete ee[$];delete re[I.id]}}function P(){U(),a=!0,r!==s&&(r=s,f(r.object))}function U(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:l,reset:P,resetDefaultState:U,dispose:N,releaseStatesOfGeometry:L,releaseStatesOfProgram:F,initAttributes:M,enableAttribute:_,disableUnusedAttributes:w}}function bie(n,e,t){let i;function s(f){i=f}function r(f,p){n.drawArrays(i,f,p),t.update(p,i,1)}function a(f,p,g){g!==0&&(n.drawArraysInstanced(i,f,p,g),t.update(p,i,g))}function l(f,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,p,0,g);let x=0;for(let A=0;A<g;A++)x+=p[A];t.update(x,i,1)}function c(f,p,g,v){if(g===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let A=0;A<f.length;A++)a(f[A],p[A],v[A]);else{x.multiDrawArraysInstancedWEBGL(i,f,0,p,0,v,0,g);let A=0;for(let M=0;M<g;M++)A+=p[M]*v[M];t.update(A,i,1)}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function Aie(n,e,t,i){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(F){return!(F!==vs&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(F){const P=F===ws&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(F!==xs&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==Vi&&!P)}function c(F){if(F==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const p=c(f);p!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",p,"instead."),f=p);const g=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),x=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),S=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),C=n.getParameter(n.MAX_VARYING_VECTORS),B=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),N=A>0,L=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:x,maxVertexTextures:A,maxTextureSize:M,maxCubemapSize:_,maxAttributes:S,maxVertexUniforms:w,maxVaryings:C,maxFragmentUniforms:B,vertexTextures:N,maxSamples:L}}function Sie(n){const e=this;let t=null,i=0,s=!1,r=!1;const a=new Xc,l=new bn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const x=g.length!==0||v||i!==0||s;return s=v,i=g.length,x},this.beginShadows=function(){r=!0,p(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(g,v){t=p(g,v,0)},this.setState=function(g,v,x){const A=g.clippingPlanes,M=g.clipIntersection,_=g.clipShadows,S=n.get(g);if(!s||A===null||A.length===0||r&&!_)r?p(null):f();else{const w=r?0:i,C=w*4;let B=S.clippingState||null;c.value=B,B=p(A,v,C,x);for(let N=0;N!==C;++N)B[N]=t[N];S.clippingState=B,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=w}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(g,v,x,A){const M=g!==null?g.length:0;let _=null;if(M!==0){if(_=c.value,A!==!0||_===null){const S=x+M*4,w=v.matrixWorldInverse;l.getNormalMatrix(w),(_===null||_.length<S)&&(_=new Float32Array(S));for(let C=0,B=x;C!==M;++C,B+=4)a.copy(g[C]).applyMatrix4(w,l),a.normal.toArray(_,B),_[B+3]=a.constant}c.value=_,c.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,_}}function _ie(n){let e=new WeakMap;function t(a,l){return l===Lm?a.mapping=uc:l===Nv&&(a.mapping=xf),a}function i(a){if(a&&a.isTexture){const l=a.mapping;if(l===Lm||l===Nv)if(e.has(a)){const c=e.get(a).texture;return t(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const f=new bS(c.height);return f.fromEquirectangularTexture(n,a),e.set(a,f),a.addEventListener("dispose",s),t(f.texture,a.mapping)}else return null}}return a}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}const vm=4,wL=[.125,.215,.35,.446,.526,.582],qh=20,tE=new oc,RL=new pt;let nE=null,iE=0,sE=0,rE=!1;const Wh=(1+Math.sqrt(5))/2,Zp=1/Wh,BL=[new te(-Wh,Zp,0),new te(Wh,Zp,0),new te(-Zp,0,Wh),new te(Zp,0,Wh),new te(0,Wh,-Zp),new te(0,Wh,Zp),new te(-1,1,-1),new te(1,1,-1),new te(-1,1,1),new te(1,1,1)];class ZT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){nE=this._renderer.getRenderTarget(),iE=this._renderer.getActiveCubeFace(),sE=this._renderer.getActiveMipmapLevel(),rE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=LL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=NL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(nE,iE,sE),this._renderer.xr.enabled=rE,e.scissorTest=!1,Q1(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===uc||e.mapping===xf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),nE=this._renderer.getRenderTarget(),iE=this._renderer.getActiveCubeFace(),sE=this._renderer.getActiveMipmapLevel(),rE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:jn,minFilter:jn,generateMipmaps:!1,type:ws,format:vs,colorSpace:ja,depthBuffer:!1},s=DL(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=DL(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Mie(r)),this._blurMaterial=Eie(r,e,t)}return s}_compileMaterial(e){const t=new Ci(this._lodPlanes[0],e);this._renderer.compile(t,tE)}_sceneToCubeUV(e,t,i,s){const l=new Zi(90,1,t,i),c=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],p=this._renderer,g=p.autoClear,v=p.toneMapping;p.getClearColor(RL),p.toneMapping=cl,p.autoClear=!1;const x=new ia({name:"PMREM.Background",side:zs,depthWrite:!1,depthTest:!1}),A=new Ci(new wd,x);let M=!1;const _=e.background;_?_.isColor&&(x.color.copy(_),e.background=null,M=!0):(x.color.copy(RL),M=!0);for(let S=0;S<6;S++){const w=S%3;w===0?(l.up.set(0,c[S],0),l.lookAt(f[S],0,0)):w===1?(l.up.set(0,0,c[S]),l.lookAt(0,f[S],0)):(l.up.set(0,c[S],0),l.lookAt(0,0,f[S]));const C=this._cubeSize;Q1(s,w*C,S>2?C:0,C,C),p.setRenderTarget(s),M&&p.render(A,l),p.render(e,l)}A.geometry.dispose(),A.material.dispose(),p.toneMapping=v,p.autoClear=g,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===uc||e.mapping===xf;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=LL()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=NL());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new Ci(this._lodPlanes[0],r),l=r.uniforms;l.envMap.value=e;const c=this._cubeSize;Q1(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(a,tE)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),l=BL[(s-r-1)%BL.length];this._blur(e,r-1,r,a,l)}t.autoClear=i}_blur(e,t,i,s,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,s,"latitudinal",r),this._halfBlur(a,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,a,l){const c=this._renderer,f=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,g=new Ci(this._lodPlanes[s],f),v=f.uniforms,x=this._sizeLods[i]-1,A=isFinite(r)?Math.PI/(2*x):2*Math.PI/(2*qh-1),M=r/A,_=isFinite(r)?1+Math.floor(p*M):qh;_>qh&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${qh}`);const S=[];let w=0;for(let F=0;F<qh;++F){const P=F/M,U=Math.exp(-P*P/2);S.push(U),F===0?w+=U:F<_&&(w+=2*U)}for(let F=0;F<S.length;F++)S[F]=S[F]/w;v.envMap.value=e.texture,v.samples.value=_,v.weights.value=S,v.latitudinal.value=a==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:C}=this;v.dTheta.value=A,v.mipInt.value=C-i;const B=this._sizeLods[s],N=3*B*(s>C-vm?s-C+vm:0),L=4*(this._cubeSize-B);Q1(t,N,L,3*B,2*B),c.setRenderTarget(t),c.render(g,tE)}}function Mie(n){const e=[],t=[],i=[];let s=n;const r=n-vm+1+wL.length;for(let a=0;a<r;a++){const l=Math.pow(2,s);t.push(l);let c=1/l;a>n-vm?c=wL[a-n+vm-1]:a===0&&(c=0),i.push(c);const f=1/(l-2),p=-f,g=1+f,v=[p,p,g,p,g,g,p,p,g,g,p,g],x=6,A=6,M=3,_=2,S=1,w=new Float32Array(M*A*x),C=new Float32Array(_*A*x),B=new Float32Array(S*A*x);for(let L=0;L<x;L++){const F=L%3*2/3-1,P=L>2?0:-1,U=[F,P,0,F+2/3,P,0,F+2/3,P+1,0,F,P,0,F+2/3,P+1,0,F,P+1,0];w.set(U,M*A*L),C.set(v,_*A*L);const I=[L,L,L,L,L,L];B.set(I,S*A*L)}const N=new gn;N.setAttribute("position",new Xn(w,M)),N.setAttribute("uv",new Xn(C,_)),N.setAttribute("faceIndex",new Xn(B,S)),e.push(N),s>vm&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function DL(n,e,t){const i=new ki(n,e,t);return i.texture.mapping=Qm,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Q1(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function Eie(n,e,t){const i=new Float32Array(qh),s=new te(0,1,0);return new Oi({name:"SphericalGaussianBlur",defines:{n:qh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:OR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:hr,depthTest:!1,depthWrite:!1})}function NL(){return new Oi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:OR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:hr,depthTest:!1,depthWrite:!1})}function LL(){return new Oi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:OR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:hr,depthTest:!1,depthWrite:!1})}function OR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Tie(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const c=l.mapping,f=c===Lm||c===Nv,p=c===uc||c===xf;if(f||p){let g=e.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return t===null&&(t=new ZT(n)),g=f?t.fromEquirectangular(l,g):t.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),g.texture;if(g!==void 0)return g.texture;{const x=l.image;return f&&x&&x.height>0||p&&x&&s(x)?(t===null&&(t=new ZT(n)),g=f?t.fromEquirectangular(l):t.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),l.addEventListener("dispose",r),g.texture):null}}}return l}function s(l){let c=0;const f=6;for(let p=0;p<f;p++)l[p]!==void 0&&c++;return c===f}function r(l){const c=l.target;c.removeEventListener("dispose",r);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function Cie(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&nm("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function wie(n,e,t,i){const s={},r=new WeakMap;function a(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const A in v.attributes)e.remove(v.attributes[A]);v.removeEventListener("dispose",a),delete s[v.id];const x=r.get(v);x&&(e.remove(x),r.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(g,v){return s[v.id]===!0||(v.addEventListener("dispose",a),s[v.id]=!0,t.memory.geometries++),v}function c(g){const v=g.attributes;for(const x in v)e.update(v[x],n.ARRAY_BUFFER)}function f(g){const v=[],x=g.index,A=g.attributes.position;let M=0;if(x!==null){const w=x.array;M=x.version;for(let C=0,B=w.length;C<B;C+=3){const N=w[C+0],L=w[C+1],F=w[C+2];v.push(N,L,L,F,F,N)}}else if(A!==void 0){const w=A.array;M=A.version;for(let C=0,B=w.length/3-1;C<B;C+=3){const N=C+0,L=C+1,F=C+2;v.push(N,L,L,F,F,N)}}else return;const _=new(Xz(v)?eR:$w)(v,1);_.version=M;const S=r.get(g);S&&e.remove(S),r.set(g,_)}function p(g){const v=r.get(g);if(v){const x=g.index;x!==null&&v.version<x.version&&f(g)}else f(g);return r.get(g)}return{get:l,update:c,getWireframeAttribute:p}}function Rie(n,e,t){let i;function s(v){i=v}let r,a;function l(v){r=v.type,a=v.bytesPerElement}function c(v,x){n.drawElements(i,x,r,v*a),t.update(x,i,1)}function f(v,x,A){A!==0&&(n.drawElementsInstanced(i,x,r,v*a,A),t.update(x,i,A))}function p(v,x,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,x,0,r,v,0,A);let _=0;for(let S=0;S<A;S++)_+=x[S];t.update(_,i,1)}function g(v,x,A,M){if(A===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let S=0;S<v.length;S++)f(v[S]/a,x[S],M[S]);else{_.multiDrawElementsInstancedWEBGL(i,x,0,r,v,0,M,0,A);let S=0;for(let w=0;w<A;w++)S+=x[w]*M[w];t.update(S,i,1)}}this.setMode=s,this.setIndex=l,this.render=c,this.renderInstances=f,this.renderMultiDraw=p,this.renderMultiDrawInstances=g}function Bie(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,a,l){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=l*(r/3);break;case n.LINES:t.lines+=l*(r/2);break;case n.LINE_STRIP:t.lines+=l*(r-1);break;case n.LINE_LOOP:t.lines+=l*r;break;case n.POINTS:t.points+=l*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function Die(n,e,t){const i=new WeakMap,s=new kn;function r(a,l,c){const f=a.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=p!==void 0?p.length:0;let v=i.get(l);if(v===void 0||v.count!==g){let I=function(){P.dispose(),i.delete(l),l.removeEventListener("dispose",I)};var x=I;v!==void 0&&v.texture.dispose();const A=l.morphAttributes.position!==void 0,M=l.morphAttributes.normal!==void 0,_=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],w=l.morphAttributes.normal||[],C=l.morphAttributes.color||[];let B=0;A===!0&&(B=1),M===!0&&(B=2),_===!0&&(B=3);let N=l.attributes.position.count*B,L=1;N>e.maxTextureSize&&(L=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const F=new Float32Array(N*L*4*g),P=new uy(F,N,L,g);P.type=Vi,P.needsUpdate=!0;const U=B*4;for(let X=0;X<g;X++){const re=S[X],ee=w[X],$=C[X],ae=N*L*4*X;for(let j=0;j<re.count;j++){const Q=j*U;A===!0&&(s.fromBufferAttribute(re,j),F[ae+Q+0]=s.x,F[ae+Q+1]=s.y,F[ae+Q+2]=s.z,F[ae+Q+3]=0),M===!0&&(s.fromBufferAttribute(ee,j),F[ae+Q+4]=s.x,F[ae+Q+5]=s.y,F[ae+Q+6]=s.z,F[ae+Q+7]=0),_===!0&&(s.fromBufferAttribute($,j),F[ae+Q+8]=s.x,F[ae+Q+9]=s.y,F[ae+Q+10]=s.z,F[ae+Q+11]=$.itemSize===4?s.w:1)}}v={count:g,texture:P,size:new ze(N,L)},i.set(l,v),l.addEventListener("dispose",I)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let A=0;for(let _=0;_<f.length;_++)A+=f[_];const M=l.morphTargetsRelative?1:1-A;c.getUniforms().setValue(n,"morphTargetBaseInfluence",M),c.getUniforms().setValue(n,"morphTargetInfluences",f)}c.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:r}}function Nie(n,e,t,i){let s=new WeakMap;function r(c){const f=i.render.frame,p=c.geometry,g=e.get(c,p);if(s.get(g)!==f&&(e.update(g),s.set(g,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),s.get(c)!==f&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),s.set(c,f))),c.isSkinnedMesh){const v=c.skeleton;s.get(v)!==f&&(v.update(),s.set(v,f))}return g}function a(){s=new WeakMap}function l(c){const f=c.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:r,dispose:a}}const I4=new Zn,OL=new TS(1,1),F4=new uy,z4=new xS,H4=new hy,UL=[],PL=[],IL=new Float32Array(16),FL=new Float32Array(9),zL=new Float32Array(4);function tg(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=UL[s];if(r===void 0&&(r=new Float32Array(s),UL[s]=r),e!==0){i.toArray(r,0);for(let a=1,l=0;a!==e;++a)l+=t,n[a].toArray(r,l)}return r}function Gs(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Vs(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function VS(n,e){let t=PL[e];t===void 0&&(t=new Int32Array(e),PL[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Lie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Oie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gs(t,e))return;n.uniform2fv(this.addr,e),Vs(t,e)}}function Uie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Gs(t,e))return;n.uniform3fv(this.addr,e),Vs(t,e)}}function Pie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gs(t,e))return;n.uniform4fv(this.addr,e),Vs(t,e)}}function Iie(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Gs(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Vs(t,e)}else{if(Gs(t,i))return;zL.set(i),n.uniformMatrix2fv(this.addr,!1,zL),Vs(t,i)}}function Fie(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Gs(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Vs(t,e)}else{if(Gs(t,i))return;FL.set(i),n.uniformMatrix3fv(this.addr,!1,FL),Vs(t,i)}}function zie(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Gs(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Vs(t,e)}else{if(Gs(t,i))return;IL.set(i),n.uniformMatrix4fv(this.addr,!1,IL),Vs(t,i)}}function Hie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Gie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gs(t,e))return;n.uniform2iv(this.addr,e),Vs(t,e)}}function Vie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Gs(t,e))return;n.uniform3iv(this.addr,e),Vs(t,e)}}function kie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gs(t,e))return;n.uniform4iv(this.addr,e),Vs(t,e)}}function jie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Xie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gs(t,e))return;n.uniform2uiv(this.addr,e),Vs(t,e)}}function Yie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Gs(t,e))return;n.uniform3uiv(this.addr,e),Vs(t,e)}}function Wie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gs(t,e))return;n.uniform4uiv(this.addr,e),Vs(t,e)}}function qie(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let r;this.type===n.SAMPLER_2D_SHADOW?(OL.compareFunction=Zw,r=OL):r=I4,t.setTexture2D(e||r,s)}function Kie(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||z4,s)}function Jie(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||H4,s)}function Zie(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||F4,s)}function Qie(n){switch(n){case 5126:return Lie;case 35664:return Oie;case 35665:return Uie;case 35666:return Pie;case 35674:return Iie;case 35675:return Fie;case 35676:return zie;case 5124:case 35670:return Hie;case 35667:case 35671:return Gie;case 35668:case 35672:return Vie;case 35669:case 35673:return kie;case 5125:return jie;case 36294:return Xie;case 36295:return Yie;case 36296:return Wie;case 35678:case 36198:case 36298:case 36306:case 35682:return qie;case 35679:case 36299:case 36307:return Kie;case 35680:case 36300:case 36308:case 36293:return Jie;case 36289:case 36303:case 36311:case 36292:return Zie}}function $ie(n,e){n.uniform1fv(this.addr,e)}function ese(n,e){const t=tg(e,this.size,2);n.uniform2fv(this.addr,t)}function tse(n,e){const t=tg(e,this.size,3);n.uniform3fv(this.addr,t)}function nse(n,e){const t=tg(e,this.size,4);n.uniform4fv(this.addr,t)}function ise(n,e){const t=tg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function sse(n,e){const t=tg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function rse(n,e){const t=tg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function ase(n,e){n.uniform1iv(this.addr,e)}function ose(n,e){n.uniform2iv(this.addr,e)}function lse(n,e){n.uniform3iv(this.addr,e)}function cse(n,e){n.uniform4iv(this.addr,e)}function use(n,e){n.uniform1uiv(this.addr,e)}function fse(n,e){n.uniform2uiv(this.addr,e)}function hse(n,e){n.uniform3uiv(this.addr,e)}function dse(n,e){n.uniform4uiv(this.addr,e)}function pse(n,e,t){const i=this.cache,s=e.length,r=VS(t,s);Gs(i,r)||(n.uniform1iv(this.addr,r),Vs(i,r));for(let a=0;a!==s;++a)t.setTexture2D(e[a]||I4,r[a])}function mse(n,e,t){const i=this.cache,s=e.length,r=VS(t,s);Gs(i,r)||(n.uniform1iv(this.addr,r),Vs(i,r));for(let a=0;a!==s;++a)t.setTexture3D(e[a]||z4,r[a])}function gse(n,e,t){const i=this.cache,s=e.length,r=VS(t,s);Gs(i,r)||(n.uniform1iv(this.addr,r),Vs(i,r));for(let a=0;a!==s;++a)t.setTextureCube(e[a]||H4,r[a])}function vse(n,e,t){const i=this.cache,s=e.length,r=VS(t,s);Gs(i,r)||(n.uniform1iv(this.addr,r),Vs(i,r));for(let a=0;a!==s;++a)t.setTexture2DArray(e[a]||F4,r[a])}function yse(n){switch(n){case 5126:return $ie;case 35664:return ese;case 35665:return tse;case 35666:return nse;case 35674:return ise;case 35675:return sse;case 35676:return rse;case 5124:case 35670:return ase;case 35667:case 35671:return ose;case 35668:case 35672:return lse;case 35669:case 35673:return cse;case 5125:return use;case 36294:return fse;case 36295:return hse;case 36296:return dse;case 35678:case 36198:case 36298:case 36306:case 35682:return pse;case 35679:case 36299:case 36307:return mse;case 35680:case 36300:case 36308:case 36293:return gse;case 36289:case 36303:case 36311:case 36292:return vse}}class xse{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Qie(t.type)}}class bse{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=yse(t.type)}}class Ase{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const l=s[r];l.setValue(e,t[l.id],i)}}}const aE=/(\w+)(\])?(\[|\.)?/g;function HL(n,e){n.seq.push(e),n.map[e.id]=e}function Sse(n,e,t){const i=n.name,s=i.length;for(aE.lastIndex=0;;){const r=aE.exec(i),a=aE.lastIndex;let l=r[1];const c=r[2]==="]",f=r[3];if(c&&(l=l|0),f===void 0||f==="["&&a+2===s){HL(t,f===void 0?new xse(l,n,e):new bse(l,n,e));break}else{let g=t.map[l];g===void 0&&(g=new Ase(l),HL(t,g)),t=g}}}class Rb{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s),a=e.getUniformLocation(t,r.name);Sse(r,a,this)}}setValue(e,t,i,s){const r=this.map[t];r!==void 0&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,a=t.length;r!==a;++r){const l=t[r],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const a=e[s];a.id in t&&i.push(a)}return i}}function GL(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const _se=37297;let Mse=0;function Ese(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let a=s;a<r;a++){const l=a+1;i.push(`${l===e?">":" "} ${l}: ${t[a]}`)}return i.join(`
`)}const VL=new bn;function Tse(n){Vn._getMatrix(VL,Vn.workingColorSpace,n);const e=`mat3( ${VL.elements.map(t=>t.toFixed(4))} )`;switch(Vn.getTransfer(n)){case Ov:return[e,"LinearTransferOETF"];case mi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function kL(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const a=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+Ese(n.getShaderSource(e),a)}else return s}function Cse(n,e){const t=Tse(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function wse(n,e){let t;switch(e){case Ez:t="Linear";break;case Tz:t="Reinhard";break;case Cz:t="Cineon";break;case Gw:t="ACESFilmic";break;case Rz:t="AgX";break;case Bz:t="Neutral";break;case wz:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const $1=new te;function Rse(){Vn.getLuminanceCoefficients($1);const n=$1.x.toFixed(4),e=$1.y.toFixed(4),t=$1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Bse(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Y0).join(`
`)}function Dse(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Nse(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),a=r.name;let l=1;r.type===n.FLOAT_MAT2&&(l=2),r.type===n.FLOAT_MAT3&&(l=3),r.type===n.FLOAT_MAT4&&(l=4),t[a]={type:r.type,location:n.getAttribLocation(e,a),locationSize:l}}return t}function Y0(n){return n!==""}function jL(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function XL(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Lse=/^[ \t]*#include +<([\w\d./]+)>/gm;function QT(n){return n.replace(Lse,Use)}const Ose=new Map;function Use(n,e){let t=Tn[e];if(t===void 0){const i=Ose.get(e);if(i!==void 0)t=Tn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return QT(t)}const Pse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function YL(n){return n.replace(Pse,Ise)}function Ise(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function WL(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Fse(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===cS?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ym?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===nl&&(e="SHADOWMAP_TYPE_VSM"),e}function zse(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case uc:case xf:e="ENVMAP_TYPE_CUBE";break;case Qm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Hse(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case xf:e="ENVMAP_MODE_REFRACTION";break}return e}function Gse(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case ay:e="ENVMAP_BLENDING_MULTIPLY";break;case _z:e="ENVMAP_BLENDING_MIX";break;case Mz:e="ENVMAP_BLENDING_ADD";break}return e}function Vse(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function kse(n,e,t,i){const s=n.getContext(),r=t.defines;let a=t.vertexShader,l=t.fragmentShader;const c=Fse(t),f=zse(t),p=Hse(t),g=Gse(t),v=Vse(t),x=Bse(t),A=Dse(r),M=s.createProgram();let _,S,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(Y0).join(`
`),_.length>0&&(_+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(Y0).join(`
`),S.length>0&&(S+=`
`)):(_=[WL(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Y0).join(`
`),S=[WL(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==cl?"#define TONE_MAPPING":"",t.toneMapping!==cl?Tn.tonemapping_pars_fragment:"",t.toneMapping!==cl?wse("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Tn.colorspace_pars_fragment,Cse("linearToOutputTexel",t.outputColorSpace),Rse(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Y0).join(`
`)),a=QT(a),a=jL(a,t),a=XL(a,t),l=QT(l),l=jL(l,t),l=XL(l,t),a=YL(a),l=YL(l),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,_=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,S=["#define varying in",t.glslVersion===kT?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===kT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const C=w+_+a,B=w+S+l,N=GL(s,s.VERTEX_SHADER,C),L=GL(s,s.FRAGMENT_SHADER,B);s.attachShader(M,N),s.attachShader(M,L),t.index0AttributeName!==void 0?s.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(M,0,"position"),s.linkProgram(M);function F(X){if(n.debug.checkShaderErrors){const re=s.getProgramInfoLog(M).trim(),ee=s.getShaderInfoLog(N).trim(),$=s.getShaderInfoLog(L).trim();let ae=!0,j=!0;if(s.getProgramParameter(M,s.LINK_STATUS)===!1)if(ae=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,M,N,L);else{const Q=kL(s,N,"vertex"),J=kL(s,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(M,s.VALIDATE_STATUS)+`

Material Name: `+X.name+`
Material Type: `+X.type+`

Program Info Log: `+re+`
`+Q+`
`+J)}else re!==""?console.warn("THREE.WebGLProgram: Program Info Log:",re):(ee===""||$==="")&&(j=!1);j&&(X.diagnostics={runnable:ae,programLog:re,vertexShader:{log:ee,prefix:_},fragmentShader:{log:$,prefix:S}})}s.deleteShader(N),s.deleteShader(L),P=new Rb(s,M),U=Nse(s,M)}let P;this.getUniforms=function(){return P===void 0&&F(this),P};let U;this.getAttributes=function(){return U===void 0&&F(this),U};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=s.getProgramParameter(M,_se)),I},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(M),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Mse++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=N,this.fragmentShader=L,this}let jse=0;class Xse{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Yse(e),t.set(e,i)),i}}class Yse{constructor(e){this.id=jse++,this.code=e,this.usedTimes=0}}function Wse(n,e,t,i,s,r,a){const l=new zm,c=new Xse,f=new Set,p=[],g=s.logarithmicDepthBuffer,v=s.vertexTextures;let x=s.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(U){return f.add(U),U===0?"uv":`uv${U}`}function _(U,I,X,re,ee){const $=re.fog,ae=ee.geometry,j=U.isMeshStandardMaterial?re.environment:null,Q=(U.isMeshStandardMaterial?t:e).get(U.envMap||j),J=Q&&Q.mapping===Qm?Q.image.height:null,xe=A[U.type];U.precision!==null&&(x=s.getMaxPrecision(U.precision),x!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",x,"instead."));const Y=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,oe=Y!==void 0?Y.length:0;let be=0;ae.morphAttributes.position!==void 0&&(be=1),ae.morphAttributes.normal!==void 0&&(be=2),ae.morphAttributes.color!==void 0&&(be=3);let _e,ue,Ue,Be;if(xe){const cn=il[xe];_e=cn.vertexShader,ue=cn.fragmentShader}else _e=U.vertexShader,ue=U.fragmentShader,c.update(U),Ue=c.getVertexShaderID(U),Be=c.getFragmentShaderID(U);const He=n.getRenderTarget(),et=n.state.buffers.depth.getReversed(),Lt=ee.isInstancedMesh===!0,_t=ee.isBatchedMesh===!0,jt=!!U.map,Ye=!!U.matcap,Ze=!!Q,ie=!!U.aoMap,Bt=!!U.lightMap,it=!!U.bumpMap,ft=!!U.normalMap,lt=!!U.displacementMap,Ft=!!U.emissiveMap,dt=!!U.metalnessMap,ne=!!U.roughnessMap,W=U.anisotropy>0,Me=U.clearcoat>0,ke=U.dispersion>0,Qe=U.iridescence>0,je=U.sheen>0,gt=U.transmission>0,ct=W&&!!U.anisotropyMap,ht=Me&&!!U.clearcoatMap,hn=Me&&!!U.clearcoatNormalMap,st=Me&&!!U.clearcoatRoughnessMap,Tt=Qe&&!!U.iridescenceMap,Rt=Qe&&!!U.iridescenceThicknessMap,St=je&&!!U.sheenColorMap,mt=je&&!!U.sheenRoughnessMap,me=!!U.specularMap,Fe=!!U.specularColorMap,rt=!!U.specularIntensityMap,de=gt&&!!U.transmissionMap,Ee=gt&&!!U.thicknessMap,Oe=!!U.gradientMap,Xe=!!U.alphaMap,xt=U.alphaTest>0,vt=!!U.alphaHash,Ht=!!U.extensions;let vn=cl;U.toneMapped&&(He===null||He.isXRRenderTarget===!0)&&(vn=n.toneMapping);const Yn={shaderID:xe,shaderType:U.type,shaderName:U.name,vertexShader:_e,fragmentShader:ue,defines:U.defines,customVertexShaderID:Ue,customFragmentShaderID:Be,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:x,batching:_t,batchingColor:_t&&ee._colorsTexture!==null,instancing:Lt,instancingColor:Lt&&ee.instanceColor!==null,instancingMorph:Lt&&ee.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:He===null?n.outputColorSpace:He.isXRRenderTarget===!0?He.texture.colorSpace:ja,alphaToCoverage:!!U.alphaToCoverage,map:jt,matcap:Ye,envMap:Ze,envMapMode:Ze&&Q.mapping,envMapCubeUVHeight:J,aoMap:ie,lightMap:Bt,bumpMap:it,normalMap:ft,displacementMap:v&&lt,emissiveMap:Ft,normalMapObjectSpace:ft&&U.normalMapType===Iz,normalMapTangentSpace:ft&&U.normalMapType===Bf,metalnessMap:dt,roughnessMap:ne,anisotropy:W,anisotropyMap:ct,clearcoat:Me,clearcoatMap:ht,clearcoatNormalMap:hn,clearcoatRoughnessMap:st,dispersion:ke,iridescence:Qe,iridescenceMap:Tt,iridescenceThicknessMap:Rt,sheen:je,sheenColorMap:St,sheenRoughnessMap:mt,specularMap:me,specularColorMap:Fe,specularIntensityMap:rt,transmission:gt,transmissionMap:de,thicknessMap:Ee,gradientMap:Oe,opaque:U.transparent===!1&&U.blending===pd&&U.alphaToCoverage===!1,alphaMap:Xe,alphaTest:xt,alphaHash:vt,combine:U.combine,mapUv:jt&&M(U.map.channel),aoMapUv:ie&&M(U.aoMap.channel),lightMapUv:Bt&&M(U.lightMap.channel),bumpMapUv:it&&M(U.bumpMap.channel),normalMapUv:ft&&M(U.normalMap.channel),displacementMapUv:lt&&M(U.displacementMap.channel),emissiveMapUv:Ft&&M(U.emissiveMap.channel),metalnessMapUv:dt&&M(U.metalnessMap.channel),roughnessMapUv:ne&&M(U.roughnessMap.channel),anisotropyMapUv:ct&&M(U.anisotropyMap.channel),clearcoatMapUv:ht&&M(U.clearcoatMap.channel),clearcoatNormalMapUv:hn&&M(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:st&&M(U.clearcoatRoughnessMap.channel),iridescenceMapUv:Tt&&M(U.iridescenceMap.channel),iridescenceThicknessMapUv:Rt&&M(U.iridescenceThicknessMap.channel),sheenColorMapUv:St&&M(U.sheenColorMap.channel),sheenRoughnessMapUv:mt&&M(U.sheenRoughnessMap.channel),specularMapUv:me&&M(U.specularMap.channel),specularColorMapUv:Fe&&M(U.specularColorMap.channel),specularIntensityMapUv:rt&&M(U.specularIntensityMap.channel),transmissionMapUv:de&&M(U.transmissionMap.channel),thicknessMapUv:Ee&&M(U.thicknessMap.channel),alphaMapUv:Xe&&M(U.alphaMap.channel),vertexTangents:!!ae.attributes.tangent&&(ft||W),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,pointsUvs:ee.isPoints===!0&&!!ae.attributes.uv&&(jt||Xe),fog:!!$,useFog:U.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:et,skinning:ee.isSkinnedMesh===!0,morphTargets:ae.morphAttributes.position!==void 0,morphNormals:ae.morphAttributes.normal!==void 0,morphColors:ae.morphAttributes.color!==void 0,morphTargetsCount:oe,morphTextureStride:be,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:U.dithering,shadowMapEnabled:n.shadowMap.enabled&&X.length>0,shadowMapType:n.shadowMap.type,toneMapping:vn,decodeVideoTexture:jt&&U.map.isVideoTexture===!0&&Vn.getTransfer(U.map.colorSpace)===mi,decodeVideoTextureEmissive:Ft&&U.emissiveMap.isVideoTexture===!0&&Vn.getTransfer(U.emissiveMap.colorSpace)===mi,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===fr,flipSided:U.side===zs,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:Ht&&U.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ht&&U.extensions.multiDraw===!0||_t)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return Yn.vertexUv1s=f.has(1),Yn.vertexUv2s=f.has(2),Yn.vertexUv3s=f.has(3),f.clear(),Yn}function S(U){const I=[];if(U.shaderID?I.push(U.shaderID):(I.push(U.customVertexShaderID),I.push(U.customFragmentShaderID)),U.defines!==void 0)for(const X in U.defines)I.push(X),I.push(U.defines[X]);return U.isRawShaderMaterial===!1&&(w(I,U),C(I,U),I.push(n.outputColorSpace)),I.push(U.customProgramCacheKey),I.join()}function w(U,I){U.push(I.precision),U.push(I.outputColorSpace),U.push(I.envMapMode),U.push(I.envMapCubeUVHeight),U.push(I.mapUv),U.push(I.alphaMapUv),U.push(I.lightMapUv),U.push(I.aoMapUv),U.push(I.bumpMapUv),U.push(I.normalMapUv),U.push(I.displacementMapUv),U.push(I.emissiveMapUv),U.push(I.metalnessMapUv),U.push(I.roughnessMapUv),U.push(I.anisotropyMapUv),U.push(I.clearcoatMapUv),U.push(I.clearcoatNormalMapUv),U.push(I.clearcoatRoughnessMapUv),U.push(I.iridescenceMapUv),U.push(I.iridescenceThicknessMapUv),U.push(I.sheenColorMapUv),U.push(I.sheenRoughnessMapUv),U.push(I.specularMapUv),U.push(I.specularColorMapUv),U.push(I.specularIntensityMapUv),U.push(I.transmissionMapUv),U.push(I.thicknessMapUv),U.push(I.combine),U.push(I.fogExp2),U.push(I.sizeAttenuation),U.push(I.morphTargetsCount),U.push(I.morphAttributeCount),U.push(I.numDirLights),U.push(I.numPointLights),U.push(I.numSpotLights),U.push(I.numSpotLightMaps),U.push(I.numHemiLights),U.push(I.numRectAreaLights),U.push(I.numDirLightShadows),U.push(I.numPointLightShadows),U.push(I.numSpotLightShadows),U.push(I.numSpotLightShadowsWithMaps),U.push(I.numLightProbes),U.push(I.shadowMapType),U.push(I.toneMapping),U.push(I.numClippingPlanes),U.push(I.numClipIntersection),U.push(I.depthPacking)}function C(U,I){l.disableAll(),I.supportsVertexTextures&&l.enable(0),I.instancing&&l.enable(1),I.instancingColor&&l.enable(2),I.instancingMorph&&l.enable(3),I.matcap&&l.enable(4),I.envMap&&l.enable(5),I.normalMapObjectSpace&&l.enable(6),I.normalMapTangentSpace&&l.enable(7),I.clearcoat&&l.enable(8),I.iridescence&&l.enable(9),I.alphaTest&&l.enable(10),I.vertexColors&&l.enable(11),I.vertexAlphas&&l.enable(12),I.vertexUv1s&&l.enable(13),I.vertexUv2s&&l.enable(14),I.vertexUv3s&&l.enable(15),I.vertexTangents&&l.enable(16),I.anisotropy&&l.enable(17),I.alphaHash&&l.enable(18),I.batching&&l.enable(19),I.dispersion&&l.enable(20),I.batchingColor&&l.enable(21),U.push(l.mask),l.disableAll(),I.fog&&l.enable(0),I.useFog&&l.enable(1),I.flatShading&&l.enable(2),I.logarithmicDepthBuffer&&l.enable(3),I.reverseDepthBuffer&&l.enable(4),I.skinning&&l.enable(5),I.morphTargets&&l.enable(6),I.morphNormals&&l.enable(7),I.morphColors&&l.enable(8),I.premultipliedAlpha&&l.enable(9),I.shadowMapEnabled&&l.enable(10),I.doubleSided&&l.enable(11),I.flipSided&&l.enable(12),I.useDepthPacking&&l.enable(13),I.dithering&&l.enable(14),I.transmission&&l.enable(15),I.sheen&&l.enable(16),I.opaque&&l.enable(17),I.pointsUvs&&l.enable(18),I.decodeVideoTexture&&l.enable(19),I.decodeVideoTextureEmissive&&l.enable(20),I.alphaToCoverage&&l.enable(21),U.push(l.mask)}function B(U){const I=A[U.type];let X;if(I){const re=il[I];X=tR.clone(re.uniforms)}else X=U.uniforms;return X}function N(U,I){let X;for(let re=0,ee=p.length;re<ee;re++){const $=p[re];if($.cacheKey===I){X=$,++X.usedTimes;break}}return X===void 0&&(X=new kse(n,I,U,r),p.push(X)),X}function L(U){if(--U.usedTimes===0){const I=p.indexOf(U);p[I]=p[p.length-1],p.pop(),U.destroy()}}function F(U){c.remove(U)}function P(){c.dispose()}return{getParameters:_,getProgramCacheKey:S,getUniforms:B,acquireProgram:N,releaseProgram:L,releaseShaderCache:F,programs:p,dispose:P}}function qse(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let l=n.get(a);return l===void 0&&(l={},n.set(a,l)),l}function i(a){n.delete(a)}function s(a,l,c){n.get(a)[l]=c}function r(){n=new WeakMap}return{has:e,get:t,remove:i,update:s,dispose:r}}function Kse(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function qL(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function KL(){const n=[];let e=0;const t=[],i=[],s=[];function r(){e=0,t.length=0,i.length=0,s.length=0}function a(g,v,x,A,M,_){let S=n[e];return S===void 0?(S={id:g.id,object:g,geometry:v,material:x,groupOrder:A,renderOrder:g.renderOrder,z:M,group:_},n[e]=S):(S.id=g.id,S.object=g,S.geometry=v,S.material=x,S.groupOrder=A,S.renderOrder=g.renderOrder,S.z=M,S.group=_),e++,S}function l(g,v,x,A,M,_){const S=a(g,v,x,A,M,_);x.transmission>0?i.push(S):x.transparent===!0?s.push(S):t.push(S)}function c(g,v,x,A,M,_){const S=a(g,v,x,A,M,_);x.transmission>0?i.unshift(S):x.transparent===!0?s.unshift(S):t.unshift(S)}function f(g,v){t.length>1&&t.sort(g||Kse),i.length>1&&i.sort(v||qL),s.length>1&&s.sort(v||qL)}function p(){for(let g=e,v=n.length;g<v;g++){const x=n[g];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:i,transparent:s,init:r,push:l,unshift:c,finish:p,sort:f}}function Jse(){let n=new WeakMap;function e(i,s){const r=n.get(i);let a;return r===void 0?(a=new KL,n.set(i,[a])):s>=r.length?(a=new KL,r.push(a)):a=r[s],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function Zse(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new te,color:new pt};break;case"SpotLight":t={position:new te,direction:new te,color:new pt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new te,color:new pt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new te,skyColor:new pt,groundColor:new pt};break;case"RectAreaLight":t={color:new pt,position:new te,halfWidth:new te,halfHeight:new te};break}return n[e.id]=t,t}}}function Qse(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let $se=0;function ere(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function tre(n){const e=new Zse,t=Qse(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new te);const s=new te,r=new Wt,a=new Wt;function l(f){let p=0,g=0,v=0;for(let U=0;U<9;U++)i.probe[U].set(0,0,0);let x=0,A=0,M=0,_=0,S=0,w=0,C=0,B=0,N=0,L=0,F=0;f.sort(ere);for(let U=0,I=f.length;U<I;U++){const X=f[U],re=X.color,ee=X.intensity,$=X.distance,ae=X.shadow&&X.shadow.map?X.shadow.map.texture:null;if(X.isAmbientLight)p+=re.r*ee,g+=re.g*ee,v+=re.b*ee;else if(X.isLightProbe){for(let j=0;j<9;j++)i.probe[j].addScaledVector(X.sh.coefficients[j],ee);F++}else if(X.isDirectionalLight){const j=e.get(X);if(j.color.copy(X.color).multiplyScalar(X.intensity),X.castShadow){const Q=X.shadow,J=t.get(X);J.shadowIntensity=Q.intensity,J.shadowBias=Q.bias,J.shadowNormalBias=Q.normalBias,J.shadowRadius=Q.radius,J.shadowMapSize=Q.mapSize,i.directionalShadow[x]=J,i.directionalShadowMap[x]=ae,i.directionalShadowMatrix[x]=X.shadow.matrix,w++}i.directional[x]=j,x++}else if(X.isSpotLight){const j=e.get(X);j.position.setFromMatrixPosition(X.matrixWorld),j.color.copy(re).multiplyScalar(ee),j.distance=$,j.coneCos=Math.cos(X.angle),j.penumbraCos=Math.cos(X.angle*(1-X.penumbra)),j.decay=X.decay,i.spot[M]=j;const Q=X.shadow;if(X.map&&(i.spotLightMap[N]=X.map,N++,Q.updateMatrices(X),X.castShadow&&L++),i.spotLightMatrix[M]=Q.matrix,X.castShadow){const J=t.get(X);J.shadowIntensity=Q.intensity,J.shadowBias=Q.bias,J.shadowNormalBias=Q.normalBias,J.shadowRadius=Q.radius,J.shadowMapSize=Q.mapSize,i.spotShadow[M]=J,i.spotShadowMap[M]=ae,B++}M++}else if(X.isRectAreaLight){const j=e.get(X);j.color.copy(re).multiplyScalar(ee),j.halfWidth.set(X.width*.5,0,0),j.halfHeight.set(0,X.height*.5,0),i.rectArea[_]=j,_++}else if(X.isPointLight){const j=e.get(X);if(j.color.copy(X.color).multiplyScalar(X.intensity),j.distance=X.distance,j.decay=X.decay,X.castShadow){const Q=X.shadow,J=t.get(X);J.shadowIntensity=Q.intensity,J.shadowBias=Q.bias,J.shadowNormalBias=Q.normalBias,J.shadowRadius=Q.radius,J.shadowMapSize=Q.mapSize,J.shadowCameraNear=Q.camera.near,J.shadowCameraFar=Q.camera.far,i.pointShadow[A]=J,i.pointShadowMap[A]=ae,i.pointShadowMatrix[A]=X.shadow.matrix,C++}i.point[A]=j,A++}else if(X.isHemisphereLight){const j=e.get(X);j.skyColor.copy(X.color).multiplyScalar(ee),j.groundColor.copy(X.groundColor).multiplyScalar(ee),i.hemi[S]=j,S++}}_>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Et.LTC_FLOAT_1,i.rectAreaLTC2=Et.LTC_FLOAT_2):(i.rectAreaLTC1=Et.LTC_HALF_1,i.rectAreaLTC2=Et.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=g,i.ambient[2]=v;const P=i.hash;(P.directionalLength!==x||P.pointLength!==A||P.spotLength!==M||P.rectAreaLength!==_||P.hemiLength!==S||P.numDirectionalShadows!==w||P.numPointShadows!==C||P.numSpotShadows!==B||P.numSpotMaps!==N||P.numLightProbes!==F)&&(i.directional.length=x,i.spot.length=M,i.rectArea.length=_,i.point.length=A,i.hemi.length=S,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=B,i.spotShadowMap.length=B,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=B+N-L,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=F,P.directionalLength=x,P.pointLength=A,P.spotLength=M,P.rectAreaLength=_,P.hemiLength=S,P.numDirectionalShadows=w,P.numPointShadows=C,P.numSpotShadows=B,P.numSpotMaps=N,P.numLightProbes=F,i.version=$se++)}function c(f,p){let g=0,v=0,x=0,A=0,M=0;const _=p.matrixWorldInverse;for(let S=0,w=f.length;S<w;S++){const C=f[S];if(C.isDirectionalLight){const B=i.directional[g];B.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),B.direction.sub(s),B.direction.transformDirection(_),g++}else if(C.isSpotLight){const B=i.spot[x];B.position.setFromMatrixPosition(C.matrixWorld),B.position.applyMatrix4(_),B.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),B.direction.sub(s),B.direction.transformDirection(_),x++}else if(C.isRectAreaLight){const B=i.rectArea[A];B.position.setFromMatrixPosition(C.matrixWorld),B.position.applyMatrix4(_),a.identity(),r.copy(C.matrixWorld),r.premultiply(_),a.extractRotation(r),B.halfWidth.set(C.width*.5,0,0),B.halfHeight.set(0,C.height*.5,0),B.halfWidth.applyMatrix4(a),B.halfHeight.applyMatrix4(a),A++}else if(C.isPointLight){const B=i.point[v];B.position.setFromMatrixPosition(C.matrixWorld),B.position.applyMatrix4(_),v++}else if(C.isHemisphereLight){const B=i.hemi[M];B.direction.setFromMatrixPosition(C.matrixWorld),B.direction.transformDirection(_),M++}}}return{setup:l,setupView:c,state:i}}function JL(n){const e=new tre(n),t=[],i=[];function s(p){f.camera=p,t.length=0,i.length=0}function r(p){t.push(p)}function a(p){i.push(p)}function l(){e.setup(t)}function c(p){e.setupView(t,p)}const f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:f,setupLights:l,setupLightsView:c,pushLight:r,pushShadow:a}}function nre(n){let e=new WeakMap;function t(s,r=0){const a=e.get(s);let l;return a===void 0?(l=new JL(n),e.set(s,[l])):r>=a.length?(l=new JL(n),a.push(l)):l=a[r],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const ire=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sre=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function rre(n,e,t){let i=new my;const s=new ze,r=new ze,a=new kn,l=new vR({depthPacking:Pz}),c=new yR,f={},p=t.maxTextureSize,g={[hl]:zs,[zs]:hl,[fr]:fr},v=new Oi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ze},radius:{value:4}},vertexShader:ire,fragmentShader:sre}),x=v.clone();x.defines.HORIZONTAL_PASS=1;const A=new gn;A.setAttribute("position",new Xn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Ci(A,v),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=cS;let S=this.type;this.render=function(L,F,P){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||L.length===0)return;const U=n.getRenderTarget(),I=n.getActiveCubeFace(),X=n.getActiveMipmapLevel(),re=n.state;re.setBlending(hr),re.buffers.color.setClear(1,1,1,1),re.buffers.depth.setTest(!0),re.setScissorTest(!1);const ee=S!==nl&&this.type===nl,$=S===nl&&this.type!==nl;for(let ae=0,j=L.length;ae<j;ae++){const Q=L[ae],J=Q.shadow;if(J===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;s.copy(J.mapSize);const xe=J.getFrameExtents();if(s.multiply(xe),r.copy(J.mapSize),(s.x>p||s.y>p)&&(s.x>p&&(r.x=Math.floor(p/xe.x),s.x=r.x*xe.x,J.mapSize.x=r.x),s.y>p&&(r.y=Math.floor(p/xe.y),s.y=r.y*xe.y,J.mapSize.y=r.y)),J.map===null||ee===!0||$===!0){const oe=this.type!==nl?{minFilter:wi,magFilter:wi}:{};J.map!==null&&J.map.dispose(),J.map=new ki(s.x,s.y,oe),J.map.texture.name=Q.name+".shadowMap",J.camera.updateProjectionMatrix()}n.setRenderTarget(J.map),n.clear();const Y=J.getViewportCount();for(let oe=0;oe<Y;oe++){const be=J.getViewport(oe);a.set(r.x*be.x,r.y*be.y,r.x*be.z,r.y*be.w),re.viewport(a),J.updateMatrices(Q,oe),i=J.getFrustum(),B(F,P,J.camera,Q,this.type)}J.isPointLightShadow!==!0&&this.type===nl&&w(J,P),J.needsUpdate=!1}S=this.type,_.needsUpdate=!1,n.setRenderTarget(U,I,X)};function w(L,F){const P=e.update(M);v.defines.VSM_SAMPLES!==L.blurSamples&&(v.defines.VSM_SAMPLES=L.blurSamples,x.defines.VSM_SAMPLES=L.blurSamples,v.needsUpdate=!0,x.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new ki(s.x,s.y)),v.uniforms.shadow_pass.value=L.map.texture,v.uniforms.resolution.value=L.mapSize,v.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(F,null,P,v,M,null),x.uniforms.shadow_pass.value=L.mapPass.texture,x.uniforms.resolution.value=L.mapSize,x.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(F,null,P,x,M,null)}function C(L,F,P,U){let I=null;const X=P.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(X!==void 0)I=X;else if(I=P.isPointLight===!0?c:l,n.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0){const re=I.uuid,ee=F.uuid;let $=f[re];$===void 0&&($={},f[re]=$);let ae=$[ee];ae===void 0&&(ae=I.clone(),$[ee]=ae,F.addEventListener("dispose",N)),I=ae}if(I.visible=F.visible,I.wireframe=F.wireframe,U===nl?I.side=F.shadowSide!==null?F.shadowSide:F.side:I.side=F.shadowSide!==null?F.shadowSide:g[F.side],I.alphaMap=F.alphaMap,I.alphaTest=F.alphaTest,I.map=F.map,I.clipShadows=F.clipShadows,I.clippingPlanes=F.clippingPlanes,I.clipIntersection=F.clipIntersection,I.displacementMap=F.displacementMap,I.displacementScale=F.displacementScale,I.displacementBias=F.displacementBias,I.wireframeLinewidth=F.wireframeLinewidth,I.linewidth=F.linewidth,P.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const re=n.properties.get(I);re.light=P}return I}function B(L,F,P,U,I){if(L.visible===!1)return;if(L.layers.test(F.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&I===nl)&&(!L.frustumCulled||i.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,L.matrixWorld);const ee=e.update(L),$=L.material;if(Array.isArray($)){const ae=ee.groups;for(let j=0,Q=ae.length;j<Q;j++){const J=ae[j],xe=$[J.materialIndex];if(xe&&xe.visible){const Y=C(L,xe,U,I);L.onBeforeShadow(n,L,F,P,ee,Y,J),n.renderBufferDirect(P,null,ee,Y,L,J),L.onAfterShadow(n,L,F,P,ee,Y,J)}}}else if($.visible){const ae=C(L,$,U,I);L.onBeforeShadow(n,L,F,P,ee,ae,null),n.renderBufferDirect(P,null,ee,ae,L,null),L.onAfterShadow(n,L,F,P,ee,ae,null)}}const re=L.children;for(let ee=0,$=re.length;ee<$;ee++)B(re[ee],F,P,U,I)}function N(L){L.target.removeEventListener("dispose",N);for(const P in f){const U=f[P],I=L.target.uuid;I in U&&(U[I].dispose(),delete U[I])}}}const are={[Zb]:Qb,[$b]:nA,[eA]:iA,[xd]:tA,[Qb]:Zb,[nA]:$b,[iA]:eA,[tA]:xd};function ore(n,e){function t(){let de=!1;const Ee=new kn;let Oe=null;const Xe=new kn(0,0,0,0);return{setMask:function(xt){Oe!==xt&&!de&&(n.colorMask(xt,xt,xt,xt),Oe=xt)},setLocked:function(xt){de=xt},setClear:function(xt,vt,Ht,vn,Yn){Yn===!0&&(xt*=vn,vt*=vn,Ht*=vn),Ee.set(xt,vt,Ht,vn),Xe.equals(Ee)===!1&&(n.clearColor(xt,vt,Ht,vn),Xe.copy(Ee))},reset:function(){de=!1,Oe=null,Xe.set(-1,0,0,0)}}}function i(){let de=!1,Ee=!1,Oe=null,Xe=null,xt=null;return{setReversed:function(vt){if(Ee!==vt){const Ht=e.get("EXT_clip_control");Ee?Ht.clipControlEXT(Ht.LOWER_LEFT_EXT,Ht.ZERO_TO_ONE_EXT):Ht.clipControlEXT(Ht.LOWER_LEFT_EXT,Ht.NEGATIVE_ONE_TO_ONE_EXT);const vn=xt;xt=null,this.setClear(vn)}Ee=vt},getReversed:function(){return Ee},setTest:function(vt){vt?He(n.DEPTH_TEST):et(n.DEPTH_TEST)},setMask:function(vt){Oe!==vt&&!de&&(n.depthMask(vt),Oe=vt)},setFunc:function(vt){if(Ee&&(vt=are[vt]),Xe!==vt){switch(vt){case Zb:n.depthFunc(n.NEVER);break;case Qb:n.depthFunc(n.ALWAYS);break;case $b:n.depthFunc(n.LESS);break;case xd:n.depthFunc(n.LEQUAL);break;case eA:n.depthFunc(n.EQUAL);break;case tA:n.depthFunc(n.GEQUAL);break;case nA:n.depthFunc(n.GREATER);break;case iA:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Xe=vt}},setLocked:function(vt){de=vt},setClear:function(vt){xt!==vt&&(Ee&&(vt=1-vt),n.clearDepth(vt),xt=vt)},reset:function(){de=!1,Oe=null,Xe=null,xt=null,Ee=!1}}}function s(){let de=!1,Ee=null,Oe=null,Xe=null,xt=null,vt=null,Ht=null,vn=null,Yn=null;return{setTest:function(cn){de||(cn?He(n.STENCIL_TEST):et(n.STENCIL_TEST))},setMask:function(cn){Ee!==cn&&!de&&(n.stencilMask(cn),Ee=cn)},setFunc:function(cn,Ui,vi){(Oe!==cn||Xe!==Ui||xt!==vi)&&(n.stencilFunc(cn,Ui,vi),Oe=cn,Xe=Ui,xt=vi)},setOp:function(cn,Ui,vi){(vt!==cn||Ht!==Ui||vn!==vi)&&(n.stencilOp(cn,Ui,vi),vt=cn,Ht=Ui,vn=vi)},setLocked:function(cn){de=cn},setClear:function(cn){Yn!==cn&&(n.clearStencil(cn),Yn=cn)},reset:function(){de=!1,Ee=null,Oe=null,Xe=null,xt=null,vt=null,Ht=null,vn=null,Yn=null}}}const r=new t,a=new i,l=new s,c=new WeakMap,f=new WeakMap;let p={},g={},v=new WeakMap,x=[],A=null,M=!1,_=null,S=null,w=null,C=null,B=null,N=null,L=null,F=new pt(0,0,0),P=0,U=!1,I=null,X=null,re=null,ee=null,$=null;const ae=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,Q=0;const J=n.getParameter(n.VERSION);J.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(J)[1]),j=Q>=1):J.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),j=Q>=2);let xe=null,Y={};const oe=n.getParameter(n.SCISSOR_BOX),be=n.getParameter(n.VIEWPORT),_e=new kn().fromArray(oe),ue=new kn().fromArray(be);function Ue(de,Ee,Oe,Xe){const xt=new Uint8Array(4),vt=n.createTexture();n.bindTexture(de,vt),n.texParameteri(de,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(de,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ht=0;Ht<Oe;Ht++)de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?n.texImage3D(Ee,0,n.RGBA,1,1,Xe,0,n.RGBA,n.UNSIGNED_BYTE,xt):n.texImage2D(Ee+Ht,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,xt);return vt}const Be={};Be[n.TEXTURE_2D]=Ue(n.TEXTURE_2D,n.TEXTURE_2D,1),Be[n.TEXTURE_CUBE_MAP]=Ue(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Be[n.TEXTURE_2D_ARRAY]=Ue(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Be[n.TEXTURE_3D]=Ue(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),l.setClear(0),He(n.DEPTH_TEST),a.setFunc(xd),it(!1),ft(PT),He(n.CULL_FACE),ie(hr);function He(de){p[de]!==!0&&(n.enable(de),p[de]=!0)}function et(de){p[de]!==!1&&(n.disable(de),p[de]=!1)}function Lt(de,Ee){return g[de]!==Ee?(n.bindFramebuffer(de,Ee),g[de]=Ee,de===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=Ee),de===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=Ee),!0):!1}function _t(de,Ee){let Oe=x,Xe=!1;if(de){Oe=v.get(Ee),Oe===void 0&&(Oe=[],v.set(Ee,Oe));const xt=de.textures;if(Oe.length!==xt.length||Oe[0]!==n.COLOR_ATTACHMENT0){for(let vt=0,Ht=xt.length;vt<Ht;vt++)Oe[vt]=n.COLOR_ATTACHMENT0+vt;Oe.length=xt.length,Xe=!0}}else Oe[0]!==n.BACK&&(Oe[0]=n.BACK,Xe=!0);Xe&&n.drawBuffers(Oe)}function jt(de){return A!==de?(n.useProgram(de),A=de,!0):!1}const Ye={[hf]:n.FUNC_ADD,[az]:n.FUNC_SUBTRACT,[oz]:n.FUNC_REVERSE_SUBTRACT};Ye[lz]=n.MIN,Ye[cz]=n.MAX;const Ze={[uz]:n.ZERO,[fz]:n.ONE,[hz]:n.SRC_COLOR,[Kb]:n.SRC_ALPHA,[yz]:n.SRC_ALPHA_SATURATE,[gz]:n.DST_COLOR,[pz]:n.DST_ALPHA,[dz]:n.ONE_MINUS_SRC_COLOR,[Jb]:n.ONE_MINUS_SRC_ALPHA,[vz]:n.ONE_MINUS_DST_COLOR,[mz]:n.ONE_MINUS_DST_ALPHA,[xz]:n.CONSTANT_COLOR,[bz]:n.ONE_MINUS_CONSTANT_COLOR,[Az]:n.CONSTANT_ALPHA,[Sz]:n.ONE_MINUS_CONSTANT_ALPHA};function ie(de,Ee,Oe,Xe,xt,vt,Ht,vn,Yn,cn){if(de===hr){M===!0&&(et(n.BLEND),M=!1);return}if(M===!1&&(He(n.BLEND),M=!0),de!==rz){if(de!==_||cn!==U){if((S!==hf||B!==hf)&&(n.blendEquation(n.FUNC_ADD),S=hf,B=hf),cn)switch(de){case pd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case IT:n.blendFunc(n.ONE,n.ONE);break;case FT:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case zT:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case pd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case IT:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case FT:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case zT:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}w=null,C=null,N=null,L=null,F.set(0,0,0),P=0,_=de,U=cn}return}xt=xt||Ee,vt=vt||Oe,Ht=Ht||Xe,(Ee!==S||xt!==B)&&(n.blendEquationSeparate(Ye[Ee],Ye[xt]),S=Ee,B=xt),(Oe!==w||Xe!==C||vt!==N||Ht!==L)&&(n.blendFuncSeparate(Ze[Oe],Ze[Xe],Ze[vt],Ze[Ht]),w=Oe,C=Xe,N=vt,L=Ht),(vn.equals(F)===!1||Yn!==P)&&(n.blendColor(vn.r,vn.g,vn.b,Yn),F.copy(vn),P=Yn),_=de,U=!1}function Bt(de,Ee){de.side===fr?et(n.CULL_FACE):He(n.CULL_FACE);let Oe=de.side===zs;Ee&&(Oe=!Oe),it(Oe),de.blending===pd&&de.transparent===!1?ie(hr):ie(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),a.setFunc(de.depthFunc),a.setTest(de.depthTest),a.setMask(de.depthWrite),r.setMask(de.colorWrite);const Xe=de.stencilWrite;l.setTest(Xe),Xe&&(l.setMask(de.stencilWriteMask),l.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),l.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),Ft(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?He(n.SAMPLE_ALPHA_TO_COVERAGE):et(n.SAMPLE_ALPHA_TO_COVERAGE)}function it(de){I!==de&&(de?n.frontFace(n.CW):n.frontFace(n.CCW),I=de)}function ft(de){de!==nz?(He(n.CULL_FACE),de!==X&&(de===PT?n.cullFace(n.BACK):de===iz?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):et(n.CULL_FACE),X=de}function lt(de){de!==re&&(j&&n.lineWidth(de),re=de)}function Ft(de,Ee,Oe){de?(He(n.POLYGON_OFFSET_FILL),(ee!==Ee||$!==Oe)&&(n.polygonOffset(Ee,Oe),ee=Ee,$=Oe)):et(n.POLYGON_OFFSET_FILL)}function dt(de){de?He(n.SCISSOR_TEST):et(n.SCISSOR_TEST)}function ne(de){de===void 0&&(de=n.TEXTURE0+ae-1),xe!==de&&(n.activeTexture(de),xe=de)}function W(de,Ee,Oe){Oe===void 0&&(xe===null?Oe=n.TEXTURE0+ae-1:Oe=xe);let Xe=Y[Oe];Xe===void 0&&(Xe={type:void 0,texture:void 0},Y[Oe]=Xe),(Xe.type!==de||Xe.texture!==Ee)&&(xe!==Oe&&(n.activeTexture(Oe),xe=Oe),n.bindTexture(de,Ee||Be[de]),Xe.type=de,Xe.texture=Ee)}function Me(){const de=Y[xe];de!==void 0&&de.type!==void 0&&(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function ke(){try{n.compressedTexImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Qe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function je(){try{n.texSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function gt(){try{n.texSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ct(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ht(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function hn(){try{n.texStorage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function st(){try{n.texStorage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Tt(){try{n.texImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Rt(){try{n.texImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function St(de){_e.equals(de)===!1&&(n.scissor(de.x,de.y,de.z,de.w),_e.copy(de))}function mt(de){ue.equals(de)===!1&&(n.viewport(de.x,de.y,de.z,de.w),ue.copy(de))}function me(de,Ee){let Oe=f.get(Ee);Oe===void 0&&(Oe=new WeakMap,f.set(Ee,Oe));let Xe=Oe.get(de);Xe===void 0&&(Xe=n.getUniformBlockIndex(Ee,de.name),Oe.set(de,Xe))}function Fe(de,Ee){const Xe=f.get(Ee).get(de);c.get(Ee)!==Xe&&(n.uniformBlockBinding(Ee,Xe,de.__bindingPointIndex),c.set(Ee,Xe))}function rt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},xe=null,Y={},g={},v=new WeakMap,x=[],A=null,M=!1,_=null,S=null,w=null,C=null,B=null,N=null,L=null,F=new pt(0,0,0),P=0,U=!1,I=null,X=null,re=null,ee=null,$=null,_e.set(0,0,n.canvas.width,n.canvas.height),ue.set(0,0,n.canvas.width,n.canvas.height),r.reset(),a.reset(),l.reset()}return{buffers:{color:r,depth:a,stencil:l},enable:He,disable:et,bindFramebuffer:Lt,drawBuffers:_t,useProgram:jt,setBlending:ie,setMaterial:Bt,setFlipSided:it,setCullFace:ft,setLineWidth:lt,setPolygonOffset:Ft,setScissorTest:dt,activeTexture:ne,bindTexture:W,unbindTexture:Me,compressedTexImage2D:ke,compressedTexImage3D:Qe,texImage2D:Tt,texImage3D:Rt,updateUBOMapping:me,uniformBlockBinding:Fe,texStorage2D:hn,texStorage3D:st,texSubImage2D:je,texSubImage3D:gt,compressedTexSubImage2D:ct,compressedTexSubImage3D:ht,scissor:St,viewport:mt,reset:rt}}function lre(n,e,t,i,s,r,a){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new ze,p=new WeakMap;let g;const v=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(ne,W){return x?new OffscreenCanvas(ne,W):Iv("canvas")}function M(ne,W,Me){let ke=1;const Qe=dt(ne);if((Qe.width>Me||Qe.height>Me)&&(ke=Me/Math.max(Qe.width,Qe.height)),ke<1)if(typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ne instanceof ImageBitmap||typeof VideoFrame<"u"&&ne instanceof VideoFrame){const je=Math.floor(ke*Qe.width),gt=Math.floor(ke*Qe.height);g===void 0&&(g=A(je,gt));const ct=W?A(je,gt):g;return ct.width=je,ct.height=gt,ct.getContext("2d").drawImage(ne,0,0,je,gt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Qe.width+"x"+Qe.height+") to ("+je+"x"+gt+")."),ct}else return"data"in ne&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Qe.width+"x"+Qe.height+")."),ne;return ne}function _(ne){return ne.generateMipmaps}function S(ne){n.generateMipmap(ne)}function w(ne){return ne.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ne.isWebGL3DRenderTarget?n.TEXTURE_3D:ne.isWebGLArrayRenderTarget||ne.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function C(ne,W,Me,ke,Qe=!1){if(ne!==null){if(n[ne]!==void 0)return n[ne];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ne+"'")}let je=W;if(W===n.RED&&(Me===n.FLOAT&&(je=n.R32F),Me===n.HALF_FLOAT&&(je=n.R16F),Me===n.UNSIGNED_BYTE&&(je=n.R8)),W===n.RED_INTEGER&&(Me===n.UNSIGNED_BYTE&&(je=n.R8UI),Me===n.UNSIGNED_SHORT&&(je=n.R16UI),Me===n.UNSIGNED_INT&&(je=n.R32UI),Me===n.BYTE&&(je=n.R8I),Me===n.SHORT&&(je=n.R16I),Me===n.INT&&(je=n.R32I)),W===n.RG&&(Me===n.FLOAT&&(je=n.RG32F),Me===n.HALF_FLOAT&&(je=n.RG16F),Me===n.UNSIGNED_BYTE&&(je=n.RG8)),W===n.RG_INTEGER&&(Me===n.UNSIGNED_BYTE&&(je=n.RG8UI),Me===n.UNSIGNED_SHORT&&(je=n.RG16UI),Me===n.UNSIGNED_INT&&(je=n.RG32UI),Me===n.BYTE&&(je=n.RG8I),Me===n.SHORT&&(je=n.RG16I),Me===n.INT&&(je=n.RG32I)),W===n.RGB_INTEGER&&(Me===n.UNSIGNED_BYTE&&(je=n.RGB8UI),Me===n.UNSIGNED_SHORT&&(je=n.RGB16UI),Me===n.UNSIGNED_INT&&(je=n.RGB32UI),Me===n.BYTE&&(je=n.RGB8I),Me===n.SHORT&&(je=n.RGB16I),Me===n.INT&&(je=n.RGB32I)),W===n.RGBA_INTEGER&&(Me===n.UNSIGNED_BYTE&&(je=n.RGBA8UI),Me===n.UNSIGNED_SHORT&&(je=n.RGBA16UI),Me===n.UNSIGNED_INT&&(je=n.RGBA32UI),Me===n.BYTE&&(je=n.RGBA8I),Me===n.SHORT&&(je=n.RGBA16I),Me===n.INT&&(je=n.RGBA32I)),W===n.RGB&&Me===n.UNSIGNED_INT_5_9_9_9_REV&&(je=n.RGB9_E5),W===n.RGBA){const gt=Qe?Ov:Vn.getTransfer(ke);Me===n.FLOAT&&(je=n.RGBA32F),Me===n.HALF_FLOAT&&(je=n.RGBA16F),Me===n.UNSIGNED_BYTE&&(je=gt===mi?n.SRGB8_ALPHA8:n.RGBA8),Me===n.UNSIGNED_SHORT_4_4_4_4&&(je=n.RGBA4),Me===n.UNSIGNED_SHORT_5_5_5_1&&(je=n.RGB5_A1)}return(je===n.R16F||je===n.R32F||je===n.RG16F||je===n.RG32F||je===n.RGBA16F||je===n.RGBA32F)&&e.get("EXT_color_buffer_float"),je}function B(ne,W){let Me;return ne?W===null||W===dl||W===Af?Me=n.DEPTH24_STENCIL8:W===Vi?Me=n.DEPTH32F_STENCIL8:W===Um&&(Me=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):W===null||W===dl||W===Af?Me=n.DEPTH_COMPONENT24:W===Vi?Me=n.DEPTH_COMPONENT32F:W===Um&&(Me=n.DEPTH_COMPONENT16),Me}function N(ne,W){return _(ne)===!0||ne.isFramebufferTexture&&ne.minFilter!==wi&&ne.minFilter!==jn?Math.log2(Math.max(W.width,W.height))+1:ne.mipmaps!==void 0&&ne.mipmaps.length>0?ne.mipmaps.length:ne.isCompressedTexture&&Array.isArray(ne.image)?W.mipmaps.length:1}function L(ne){const W=ne.target;W.removeEventListener("dispose",L),P(W),W.isVideoTexture&&p.delete(W)}function F(ne){const W=ne.target;W.removeEventListener("dispose",F),I(W)}function P(ne){const W=i.get(ne);if(W.__webglInit===void 0)return;const Me=ne.source,ke=v.get(Me);if(ke){const Qe=ke[W.__cacheKey];Qe.usedTimes--,Qe.usedTimes===0&&U(ne),Object.keys(ke).length===0&&v.delete(Me)}i.remove(ne)}function U(ne){const W=i.get(ne);n.deleteTexture(W.__webglTexture);const Me=ne.source,ke=v.get(Me);delete ke[W.__cacheKey],a.memory.textures--}function I(ne){const W=i.get(ne);if(ne.depthTexture&&(ne.depthTexture.dispose(),i.remove(ne.depthTexture)),ne.isWebGLCubeRenderTarget)for(let ke=0;ke<6;ke++){if(Array.isArray(W.__webglFramebuffer[ke]))for(let Qe=0;Qe<W.__webglFramebuffer[ke].length;Qe++)n.deleteFramebuffer(W.__webglFramebuffer[ke][Qe]);else n.deleteFramebuffer(W.__webglFramebuffer[ke]);W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer[ke])}else{if(Array.isArray(W.__webglFramebuffer))for(let ke=0;ke<W.__webglFramebuffer.length;ke++)n.deleteFramebuffer(W.__webglFramebuffer[ke]);else n.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&n.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let ke=0;ke<W.__webglColorRenderbuffer.length;ke++)W.__webglColorRenderbuffer[ke]&&n.deleteRenderbuffer(W.__webglColorRenderbuffer[ke]);W.__webglDepthRenderbuffer&&n.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const Me=ne.textures;for(let ke=0,Qe=Me.length;ke<Qe;ke++){const je=i.get(Me[ke]);je.__webglTexture&&(n.deleteTexture(je.__webglTexture),a.memory.textures--),i.remove(Me[ke])}i.remove(ne)}let X=0;function re(){X=0}function ee(){const ne=X;return ne>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ne+" texture units while this GPU supports only "+s.maxTextures),X+=1,ne}function $(ne){const W=[];return W.push(ne.wrapS),W.push(ne.wrapT),W.push(ne.wrapR||0),W.push(ne.magFilter),W.push(ne.minFilter),W.push(ne.anisotropy),W.push(ne.internalFormat),W.push(ne.format),W.push(ne.type),W.push(ne.generateMipmaps),W.push(ne.premultiplyAlpha),W.push(ne.flipY),W.push(ne.unpackAlignment),W.push(ne.colorSpace),W.join()}function ae(ne,W){const Me=i.get(ne);if(ne.isVideoTexture&&lt(ne),ne.isRenderTargetTexture===!1&&ne.version>0&&Me.__version!==ne.version){const ke=ne.image;if(ke===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ke.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ue(Me,ne,W);return}}t.bindTexture(n.TEXTURE_2D,Me.__webglTexture,n.TEXTURE0+W)}function j(ne,W){const Me=i.get(ne);if(ne.version>0&&Me.__version!==ne.version){ue(Me,ne,W);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Me.__webglTexture,n.TEXTURE0+W)}function Q(ne,W){const Me=i.get(ne);if(ne.version>0&&Me.__version!==ne.version){ue(Me,ne,W);return}t.bindTexture(n.TEXTURE_3D,Me.__webglTexture,n.TEXTURE0+W)}function J(ne,W){const Me=i.get(ne);if(ne.version>0&&Me.__version!==ne.version){Ue(Me,ne,W);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Me.__webglTexture,n.TEXTURE0+W)}const xe={[bf]:n.REPEAT,[gs]:n.CLAMP_TO_EDGE,[Om]:n.MIRRORED_REPEAT},Y={[wi]:n.NEAREST,[uS]:n.NEAREST_MIPMAP_NEAREST,[ed]:n.NEAREST_MIPMAP_LINEAR,[jn]:n.LINEAR,[xm]:n.LINEAR_MIPMAP_NEAREST,[Ao]:n.LINEAR_MIPMAP_LINEAR},oe={[Fz]:n.NEVER,[jz]:n.ALWAYS,[zz]:n.LESS,[Zw]:n.LEQUAL,[Hz]:n.EQUAL,[kz]:n.GEQUAL,[Gz]:n.GREATER,[Vz]:n.NOTEQUAL};function be(ne,W){if(W.type===Vi&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===jn||W.magFilter===xm||W.magFilter===ed||W.magFilter===Ao||W.minFilter===jn||W.minFilter===xm||W.minFilter===ed||W.minFilter===Ao)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ne,n.TEXTURE_WRAP_S,xe[W.wrapS]),n.texParameteri(ne,n.TEXTURE_WRAP_T,xe[W.wrapT]),(ne===n.TEXTURE_3D||ne===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ne,n.TEXTURE_WRAP_R,xe[W.wrapR]),n.texParameteri(ne,n.TEXTURE_MAG_FILTER,Y[W.magFilter]),n.texParameteri(ne,n.TEXTURE_MIN_FILTER,Y[W.minFilter]),W.compareFunction&&(n.texParameteri(ne,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ne,n.TEXTURE_COMPARE_FUNC,oe[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(W.magFilter===wi||W.minFilter!==ed&&W.minFilter!==Ao||W.type===Vi&&e.has("OES_texture_float_linear")===!1)return;if(W.anisotropy>1||i.get(W).__currentAnisotropy){const Me=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ne,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,s.getMaxAnisotropy())),i.get(W).__currentAnisotropy=W.anisotropy}}}function _e(ne,W){let Me=!1;ne.__webglInit===void 0&&(ne.__webglInit=!0,W.addEventListener("dispose",L));const ke=W.source;let Qe=v.get(ke);Qe===void 0&&(Qe={},v.set(ke,Qe));const je=$(W);if(je!==ne.__cacheKey){Qe[je]===void 0&&(Qe[je]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,Me=!0),Qe[je].usedTimes++;const gt=Qe[ne.__cacheKey];gt!==void 0&&(Qe[ne.__cacheKey].usedTimes--,gt.usedTimes===0&&U(W)),ne.__cacheKey=je,ne.__webglTexture=Qe[je].texture}return Me}function ue(ne,W,Me){let ke=n.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(ke=n.TEXTURE_2D_ARRAY),W.isData3DTexture&&(ke=n.TEXTURE_3D);const Qe=_e(ne,W),je=W.source;t.bindTexture(ke,ne.__webglTexture,n.TEXTURE0+Me);const gt=i.get(je);if(je.version!==gt.__version||Qe===!0){t.activeTexture(n.TEXTURE0+Me);const ct=Vn.getPrimaries(Vn.workingColorSpace),ht=W.colorSpace===sl?null:Vn.getPrimaries(W.colorSpace),hn=W.colorSpace===sl||ct===ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,W.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,W.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,hn);let st=M(W.image,!1,s.maxTextureSize);st=Ft(W,st);const Tt=r.convert(W.format,W.colorSpace),Rt=r.convert(W.type);let St=C(W.internalFormat,Tt,Rt,W.colorSpace,W.isVideoTexture);be(ke,W);let mt;const me=W.mipmaps,Fe=W.isVideoTexture!==!0,rt=gt.__version===void 0||Qe===!0,de=je.dataReady,Ee=N(W,st);if(W.isDepthTexture)St=B(W.format===Sf,W.type),rt&&(Fe?t.texStorage2D(n.TEXTURE_2D,1,St,st.width,st.height):t.texImage2D(n.TEXTURE_2D,0,St,st.width,st.height,0,Tt,Rt,null));else if(W.isDataTexture)if(me.length>0){Fe&&rt&&t.texStorage2D(n.TEXTURE_2D,Ee,St,me[0].width,me[0].height);for(let Oe=0,Xe=me.length;Oe<Xe;Oe++)mt=me[Oe],Fe?de&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,mt.width,mt.height,Tt,Rt,mt.data):t.texImage2D(n.TEXTURE_2D,Oe,St,mt.width,mt.height,0,Tt,Rt,mt.data);W.generateMipmaps=!1}else Fe?(rt&&t.texStorage2D(n.TEXTURE_2D,Ee,St,st.width,st.height),de&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,st.width,st.height,Tt,Rt,st.data)):t.texImage2D(n.TEXTURE_2D,0,St,st.width,st.height,0,Tt,Rt,st.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){Fe&&rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ee,St,me[0].width,me[0].height,st.depth);for(let Oe=0,Xe=me.length;Oe<Xe;Oe++)if(mt=me[Oe],W.format!==vs)if(Tt!==null)if(Fe){if(de)if(W.layerUpdates.size>0){const xt=JT(mt.width,mt.height,W.format,W.type);for(const vt of W.layerUpdates){const Ht=mt.data.subarray(vt*xt/mt.data.BYTES_PER_ELEMENT,(vt+1)*xt/mt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,vt,mt.width,mt.height,1,Tt,Ht)}W.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,0,mt.width,mt.height,st.depth,Tt,mt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Oe,St,mt.width,mt.height,st.depth,0,mt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Fe?de&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,0,mt.width,mt.height,st.depth,Tt,Rt,mt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Oe,St,mt.width,mt.height,st.depth,0,Tt,Rt,mt.data)}else{Fe&&rt&&t.texStorage2D(n.TEXTURE_2D,Ee,St,me[0].width,me[0].height);for(let Oe=0,Xe=me.length;Oe<Xe;Oe++)mt=me[Oe],W.format!==vs?Tt!==null?Fe?de&&t.compressedTexSubImage2D(n.TEXTURE_2D,Oe,0,0,mt.width,mt.height,Tt,mt.data):t.compressedTexImage2D(n.TEXTURE_2D,Oe,St,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Fe?de&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,mt.width,mt.height,Tt,Rt,mt.data):t.texImage2D(n.TEXTURE_2D,Oe,St,mt.width,mt.height,0,Tt,Rt,mt.data)}else if(W.isDataArrayTexture)if(Fe){if(rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ee,St,st.width,st.height,st.depth),de)if(W.layerUpdates.size>0){const Oe=JT(st.width,st.height,W.format,W.type);for(const Xe of W.layerUpdates){const xt=st.data.subarray(Xe*Oe/st.data.BYTES_PER_ELEMENT,(Xe+1)*Oe/st.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Xe,st.width,st.height,1,Tt,Rt,xt)}W.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,st.width,st.height,st.depth,Tt,Rt,st.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,St,st.width,st.height,st.depth,0,Tt,Rt,st.data);else if(W.isData3DTexture)Fe?(rt&&t.texStorage3D(n.TEXTURE_3D,Ee,St,st.width,st.height,st.depth),de&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,st.width,st.height,st.depth,Tt,Rt,st.data)):t.texImage3D(n.TEXTURE_3D,0,St,st.width,st.height,st.depth,0,Tt,Rt,st.data);else if(W.isFramebufferTexture){if(rt)if(Fe)t.texStorage2D(n.TEXTURE_2D,Ee,St,st.width,st.height);else{let Oe=st.width,Xe=st.height;for(let xt=0;xt<Ee;xt++)t.texImage2D(n.TEXTURE_2D,xt,St,Oe,Xe,0,Tt,Rt,null),Oe>>=1,Xe>>=1}}else if(me.length>0){if(Fe&&rt){const Oe=dt(me[0]);t.texStorage2D(n.TEXTURE_2D,Ee,St,Oe.width,Oe.height)}for(let Oe=0,Xe=me.length;Oe<Xe;Oe++)mt=me[Oe],Fe?de&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,Tt,Rt,mt):t.texImage2D(n.TEXTURE_2D,Oe,St,Tt,Rt,mt);W.generateMipmaps=!1}else if(Fe){if(rt){const Oe=dt(st);t.texStorage2D(n.TEXTURE_2D,Ee,St,Oe.width,Oe.height)}de&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Tt,Rt,st)}else t.texImage2D(n.TEXTURE_2D,0,St,Tt,Rt,st);_(W)&&S(ke),gt.__version=je.version,W.onUpdate&&W.onUpdate(W)}ne.__version=W.version}function Ue(ne,W,Me){if(W.image.length!==6)return;const ke=_e(ne,W),Qe=W.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+Me);const je=i.get(Qe);if(Qe.version!==je.__version||ke===!0){t.activeTexture(n.TEXTURE0+Me);const gt=Vn.getPrimaries(Vn.workingColorSpace),ct=W.colorSpace===sl?null:Vn.getPrimaries(W.colorSpace),ht=W.colorSpace===sl||gt===ct?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,W.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,W.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ht);const hn=W.isCompressedTexture||W.image[0].isCompressedTexture,st=W.image[0]&&W.image[0].isDataTexture,Tt=[];for(let Xe=0;Xe<6;Xe++)!hn&&!st?Tt[Xe]=M(W.image[Xe],!0,s.maxCubemapSize):Tt[Xe]=st?W.image[Xe].image:W.image[Xe],Tt[Xe]=Ft(W,Tt[Xe]);const Rt=Tt[0],St=r.convert(W.format,W.colorSpace),mt=r.convert(W.type),me=C(W.internalFormat,St,mt,W.colorSpace),Fe=W.isVideoTexture!==!0,rt=je.__version===void 0||ke===!0,de=Qe.dataReady;let Ee=N(W,Rt);be(n.TEXTURE_CUBE_MAP,W);let Oe;if(hn){Fe&&rt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ee,me,Rt.width,Rt.height);for(let Xe=0;Xe<6;Xe++){Oe=Tt[Xe].mipmaps;for(let xt=0;xt<Oe.length;xt++){const vt=Oe[xt];W.format!==vs?St!==null?Fe?de&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt,0,0,vt.width,vt.height,St,vt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt,me,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Fe?de&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt,0,0,vt.width,vt.height,St,mt,vt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt,me,vt.width,vt.height,0,St,mt,vt.data)}}}else{if(Oe=W.mipmaps,Fe&&rt){Oe.length>0&&Ee++;const Xe=dt(Tt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ee,me,Xe.width,Xe.height)}for(let Xe=0;Xe<6;Xe++)if(st){Fe?de&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,Tt[Xe].width,Tt[Xe].height,St,mt,Tt[Xe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,me,Tt[Xe].width,Tt[Xe].height,0,St,mt,Tt[Xe].data);for(let xt=0;xt<Oe.length;xt++){const Ht=Oe[xt].image[Xe].image;Fe?de&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt+1,0,0,Ht.width,Ht.height,St,mt,Ht.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt+1,me,Ht.width,Ht.height,0,St,mt,Ht.data)}}else{Fe?de&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,St,mt,Tt[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,me,St,mt,Tt[Xe]);for(let xt=0;xt<Oe.length;xt++){const vt=Oe[xt];Fe?de&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt+1,0,0,St,mt,vt.image[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt+1,me,St,mt,vt.image[Xe])}}}_(W)&&S(n.TEXTURE_CUBE_MAP),je.__version=Qe.version,W.onUpdate&&W.onUpdate(W)}ne.__version=W.version}function Be(ne,W,Me,ke,Qe,je){const gt=r.convert(Me.format,Me.colorSpace),ct=r.convert(Me.type),ht=C(Me.internalFormat,gt,ct,Me.colorSpace),hn=i.get(W),st=i.get(Me);if(st.__renderTarget=W,!hn.__hasExternalTextures){const Tt=Math.max(1,W.width>>je),Rt=Math.max(1,W.height>>je);Qe===n.TEXTURE_3D||Qe===n.TEXTURE_2D_ARRAY?t.texImage3D(Qe,je,ht,Tt,Rt,W.depth,0,gt,ct,null):t.texImage2D(Qe,je,ht,Tt,Rt,0,gt,ct,null)}t.bindFramebuffer(n.FRAMEBUFFER,ne),ft(W)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ke,Qe,st.__webglTexture,0,it(W)):(Qe===n.TEXTURE_2D||Qe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Qe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ke,Qe,st.__webglTexture,je),t.bindFramebuffer(n.FRAMEBUFFER,null)}function He(ne,W,Me){if(n.bindRenderbuffer(n.RENDERBUFFER,ne),W.depthBuffer){const ke=W.depthTexture,Qe=ke&&ke.isDepthTexture?ke.type:null,je=B(W.stencilBuffer,Qe),gt=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ct=it(W);ft(W)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ct,je,W.width,W.height):Me?n.renderbufferStorageMultisample(n.RENDERBUFFER,ct,je,W.width,W.height):n.renderbufferStorage(n.RENDERBUFFER,je,W.width,W.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,gt,n.RENDERBUFFER,ne)}else{const ke=W.textures;for(let Qe=0;Qe<ke.length;Qe++){const je=ke[Qe],gt=r.convert(je.format,je.colorSpace),ct=r.convert(je.type),ht=C(je.internalFormat,gt,ct,je.colorSpace),hn=it(W);Me&&ft(W)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,hn,ht,W.width,W.height):ft(W)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,hn,ht,W.width,W.height):n.renderbufferStorage(n.RENDERBUFFER,ht,W.width,W.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function et(ne,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ne),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ke=i.get(W.depthTexture);ke.__renderTarget=W,(!ke.__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),ae(W.depthTexture,0);const Qe=ke.__webglTexture,je=it(W);if(W.depthTexture.format===md)ft(W)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Qe,0,je):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Qe,0);else if(W.depthTexture.format===Sf)ft(W)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Qe,0,je):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Qe,0);else throw new Error("Unknown depthTexture format")}function Lt(ne){const W=i.get(ne),Me=ne.isWebGLCubeRenderTarget===!0;if(W.__boundDepthTexture!==ne.depthTexture){const ke=ne.depthTexture;if(W.__depthDisposeCallback&&W.__depthDisposeCallback(),ke){const Qe=()=>{delete W.__boundDepthTexture,delete W.__depthDisposeCallback,ke.removeEventListener("dispose",Qe)};ke.addEventListener("dispose",Qe),W.__depthDisposeCallback=Qe}W.__boundDepthTexture=ke}if(ne.depthTexture&&!W.__autoAllocateDepthBuffer){if(Me)throw new Error("target.depthTexture not supported in Cube render targets");et(W.__webglFramebuffer,ne)}else if(Me){W.__webglDepthbuffer=[];for(let ke=0;ke<6;ke++)if(t.bindFramebuffer(n.FRAMEBUFFER,W.__webglFramebuffer[ke]),W.__webglDepthbuffer[ke]===void 0)W.__webglDepthbuffer[ke]=n.createRenderbuffer(),He(W.__webglDepthbuffer[ke],ne,!1);else{const Qe=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,je=W.__webglDepthbuffer[ke];n.bindRenderbuffer(n.RENDERBUFFER,je),n.framebufferRenderbuffer(n.FRAMEBUFFER,Qe,n.RENDERBUFFER,je)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer===void 0)W.__webglDepthbuffer=n.createRenderbuffer(),He(W.__webglDepthbuffer,ne,!1);else{const ke=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Qe=W.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Qe),n.framebufferRenderbuffer(n.FRAMEBUFFER,ke,n.RENDERBUFFER,Qe)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function _t(ne,W,Me){const ke=i.get(ne);W!==void 0&&Be(ke.__webglFramebuffer,ne,ne.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Me!==void 0&&Lt(ne)}function jt(ne){const W=ne.texture,Me=i.get(ne),ke=i.get(W);ne.addEventListener("dispose",F);const Qe=ne.textures,je=ne.isWebGLCubeRenderTarget===!0,gt=Qe.length>1;if(gt||(ke.__webglTexture===void 0&&(ke.__webglTexture=n.createTexture()),ke.__version=W.version,a.memory.textures++),je){Me.__webglFramebuffer=[];for(let ct=0;ct<6;ct++)if(W.mipmaps&&W.mipmaps.length>0){Me.__webglFramebuffer[ct]=[];for(let ht=0;ht<W.mipmaps.length;ht++)Me.__webglFramebuffer[ct][ht]=n.createFramebuffer()}else Me.__webglFramebuffer[ct]=n.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){Me.__webglFramebuffer=[];for(let ct=0;ct<W.mipmaps.length;ct++)Me.__webglFramebuffer[ct]=n.createFramebuffer()}else Me.__webglFramebuffer=n.createFramebuffer();if(gt)for(let ct=0,ht=Qe.length;ct<ht;ct++){const hn=i.get(Qe[ct]);hn.__webglTexture===void 0&&(hn.__webglTexture=n.createTexture(),a.memory.textures++)}if(ne.samples>0&&ft(ne)===!1){Me.__webglMultisampledFramebuffer=n.createFramebuffer(),Me.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Me.__webglMultisampledFramebuffer);for(let ct=0;ct<Qe.length;ct++){const ht=Qe[ct];Me.__webglColorRenderbuffer[ct]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Me.__webglColorRenderbuffer[ct]);const hn=r.convert(ht.format,ht.colorSpace),st=r.convert(ht.type),Tt=C(ht.internalFormat,hn,st,ht.colorSpace,ne.isXRRenderTarget===!0),Rt=it(ne);n.renderbufferStorageMultisample(n.RENDERBUFFER,Rt,Tt,ne.width,ne.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.RENDERBUFFER,Me.__webglColorRenderbuffer[ct])}n.bindRenderbuffer(n.RENDERBUFFER,null),ne.depthBuffer&&(Me.__webglDepthRenderbuffer=n.createRenderbuffer(),He(Me.__webglDepthRenderbuffer,ne,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(je){t.bindTexture(n.TEXTURE_CUBE_MAP,ke.__webglTexture),be(n.TEXTURE_CUBE_MAP,W);for(let ct=0;ct<6;ct++)if(W.mipmaps&&W.mipmaps.length>0)for(let ht=0;ht<W.mipmaps.length;ht++)Be(Me.__webglFramebuffer[ct][ht],ne,W,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,ht);else Be(Me.__webglFramebuffer[ct],ne,W,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0);_(W)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(gt){for(let ct=0,ht=Qe.length;ct<ht;ct++){const hn=Qe[ct],st=i.get(hn);t.bindTexture(n.TEXTURE_2D,st.__webglTexture),be(n.TEXTURE_2D,hn),Be(Me.__webglFramebuffer,ne,hn,n.COLOR_ATTACHMENT0+ct,n.TEXTURE_2D,0),_(hn)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let ct=n.TEXTURE_2D;if((ne.isWebGL3DRenderTarget||ne.isWebGLArrayRenderTarget)&&(ct=ne.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ct,ke.__webglTexture),be(ct,W),W.mipmaps&&W.mipmaps.length>0)for(let ht=0;ht<W.mipmaps.length;ht++)Be(Me.__webglFramebuffer[ht],ne,W,n.COLOR_ATTACHMENT0,ct,ht);else Be(Me.__webglFramebuffer,ne,W,n.COLOR_ATTACHMENT0,ct,0);_(W)&&S(ct),t.unbindTexture()}ne.depthBuffer&&Lt(ne)}function Ye(ne){const W=ne.textures;for(let Me=0,ke=W.length;Me<ke;Me++){const Qe=W[Me];if(_(Qe)){const je=w(ne),gt=i.get(Qe).__webglTexture;t.bindTexture(je,gt),S(je),t.unbindTexture()}}}const Ze=[],ie=[];function Bt(ne){if(ne.samples>0){if(ft(ne)===!1){const W=ne.textures,Me=ne.width,ke=ne.height;let Qe=n.COLOR_BUFFER_BIT;const je=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,gt=i.get(ne),ct=W.length>1;if(ct)for(let ht=0;ht<W.length;ht++)t.bindFramebuffer(n.FRAMEBUFFER,gt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ht,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,gt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ht,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,gt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,gt.__webglFramebuffer);for(let ht=0;ht<W.length;ht++){if(ne.resolveDepthBuffer&&(ne.depthBuffer&&(Qe|=n.DEPTH_BUFFER_BIT),ne.stencilBuffer&&ne.resolveStencilBuffer&&(Qe|=n.STENCIL_BUFFER_BIT)),ct){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,gt.__webglColorRenderbuffer[ht]);const hn=i.get(W[ht]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,hn,0)}n.blitFramebuffer(0,0,Me,ke,0,0,Me,ke,Qe,n.NEAREST),c===!0&&(Ze.length=0,ie.length=0,Ze.push(n.COLOR_ATTACHMENT0+ht),ne.depthBuffer&&ne.resolveDepthBuffer===!1&&(Ze.push(je),ie.push(je),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ie)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ze))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ct)for(let ht=0;ht<W.length;ht++){t.bindFramebuffer(n.FRAMEBUFFER,gt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ht,n.RENDERBUFFER,gt.__webglColorRenderbuffer[ht]);const hn=i.get(W[ht]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,gt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ht,n.TEXTURE_2D,hn,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,gt.__webglMultisampledFramebuffer)}else if(ne.depthBuffer&&ne.resolveDepthBuffer===!1&&c){const W=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[W])}}}function it(ne){return Math.min(s.maxSamples,ne.samples)}function ft(ne){const W=i.get(ne);return ne.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function lt(ne){const W=a.render.frame;p.get(ne)!==W&&(p.set(ne,W),ne.update())}function Ft(ne,W){const Me=ne.colorSpace,ke=ne.format,Qe=ne.type;return ne.isCompressedTexture===!0||ne.isVideoTexture===!0||Me!==ja&&Me!==sl&&(Vn.getTransfer(Me)===mi?(ke!==vs||Qe!==xs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Me)),W}function dt(ne){return typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement?(f.width=ne.naturalWidth||ne.width,f.height=ne.naturalHeight||ne.height):typeof VideoFrame<"u"&&ne instanceof VideoFrame?(f.width=ne.displayWidth,f.height=ne.displayHeight):(f.width=ne.width,f.height=ne.height),f}this.allocateTextureUnit=ee,this.resetTextureUnits=re,this.setTexture2D=ae,this.setTexture2DArray=j,this.setTexture3D=Q,this.setTextureCube=J,this.rebindTextures=_t,this.setupRenderTarget=jt,this.updateRenderTargetMipmap=Ye,this.updateMultisampleRenderTarget=Bt,this.setupDepthRenderbuffer=Lt,this.setupFrameBufferTexture=Be,this.useMultisampledRTT=ft}function G4(n,e){function t(i,s=sl){let r;const a=Vn.getTransfer(s);if(i===xs)return n.UNSIGNED_BYTE;if(i===dS)return n.UNSIGNED_SHORT_4_4_4_4;if(i===pS)return n.UNSIGNED_SHORT_5_5_5_1;if(i===Vw)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===fS)return n.BYTE;if(i===hS)return n.SHORT;if(i===Um)return n.UNSIGNED_SHORT;if(i===oy)return n.INT;if(i===dl)return n.UNSIGNED_INT;if(i===Vi)return n.FLOAT;if(i===ws)return n.HALF_FLOAT;if(i===kw)return n.ALPHA;if(i===jw)return n.RGB;if(i===vs)return n.RGBA;if(i===Xw)return n.LUMINANCE;if(i===Yw)return n.LUMINANCE_ALPHA;if(i===md)return n.DEPTH_COMPONENT;if(i===Sf)return n.DEPTH_STENCIL;if(i===ly)return n.RED;if(i===cy)return n.RED_INTEGER;if(i===Ww)return n.RG;if(i===mS)return n.RG_INTEGER;if(i===gS)return n.RGBA_INTEGER;if(i===av||i===ov||i===lv||i===cv)if(a===mi)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===av)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===ov)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===lv)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===cv)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===av)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===ov)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===lv)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===cv)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===sA||i===rA||i===aA||i===oA)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===sA)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===rA)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===aA)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===oA)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===lA||i===cA||i===uA)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===lA||i===cA)return a===mi?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===uA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===fA||i===hA||i===dA||i===pA||i===mA||i===gA||i===vA||i===yA||i===xA||i===bA||i===AA||i===SA||i===_A||i===MA)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===fA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===hA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===dA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===pA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===mA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===gA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===vA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===yA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===xA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===bA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===AA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===SA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===_A)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===MA)return a===mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===uv||i===EA||i===TA)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===uv)return a===mi?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===EA)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===TA)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===qw||i===CA||i===wA||i===RA)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===uv)return r.COMPRESSED_RED_RGTC1_EXT;if(i===CA)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===wA)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===RA)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Af?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const cre=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ure=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class fre{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new Zn,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Oi({vertexShader:cre,fragmentShader:ure,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ci(new Nf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class hre extends Ya{constructor(e,t){super();const i=this;let s=null,r=1,a=null,l="local-floor",c=1,f=null,p=null,g=null,v=null,x=null,A=null;const M=new fre,_=t.getContextAttributes();let S=null,w=null;const C=[],B=[],N=new ze;let L=null;const F=new Zi;F.viewport=new kn;const P=new Zi;P.viewport=new kn;const U=[F,P],I=new B4;let X=null,re=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let Ue=C[ue];return Ue===void 0&&(Ue=new wb,C[ue]=Ue),Ue.getTargetRaySpace()},this.getControllerGrip=function(ue){let Ue=C[ue];return Ue===void 0&&(Ue=new wb,C[ue]=Ue),Ue.getGripSpace()},this.getHand=function(ue){let Ue=C[ue];return Ue===void 0&&(Ue=new wb,C[ue]=Ue),Ue.getHandSpace()};function ee(ue){const Ue=B.indexOf(ue.inputSource);if(Ue===-1)return;const Be=C[Ue];Be!==void 0&&(Be.update(ue.inputSource,ue.frame,f||a),Be.dispatchEvent({type:ue.type,data:ue.inputSource}))}function $(){s.removeEventListener("select",ee),s.removeEventListener("selectstart",ee),s.removeEventListener("selectend",ee),s.removeEventListener("squeeze",ee),s.removeEventListener("squeezestart",ee),s.removeEventListener("squeezeend",ee),s.removeEventListener("end",$),s.removeEventListener("inputsourceschange",ae);for(let ue=0;ue<C.length;ue++){const Ue=B[ue];Ue!==null&&(B[ue]=null,C[ue].disconnect(Ue))}X=null,re=null,M.reset(),e.setRenderTarget(S),x=null,v=null,g=null,s=null,w=null,_e.stop(),i.isPresenting=!1,e.setPixelRatio(L),e.setSize(N.width,N.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){r=ue,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){l=ue,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||a},this.setReferenceSpace=function(ue){f=ue},this.getBaseLayer=function(){return v!==null?v:x},this.getBinding=function(){return g},this.getFrame=function(){return A},this.getSession=function(){return s},this.setSession=async function(ue){if(s=ue,s!==null){if(S=e.getRenderTarget(),s.addEventListener("select",ee),s.addEventListener("selectstart",ee),s.addEventListener("selectend",ee),s.addEventListener("squeeze",ee),s.addEventListener("squeezestart",ee),s.addEventListener("squeezeend",ee),s.addEventListener("end",$),s.addEventListener("inputsourceschange",ae),_.xrCompatible!==!0&&await t.makeXRCompatible(),L=e.getPixelRatio(),e.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Be=null,He=null,et=null;_.depth&&(et=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Be=_.stencil?Sf:md,He=_.stencil?Af:dl);const Lt={colorFormat:t.RGBA8,depthFormat:et,scaleFactor:r};g=new XRWebGLBinding(s,t),v=g.createProjectionLayer(Lt),s.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),w=new ki(v.textureWidth,v.textureHeight,{format:vs,type:xs,depthTexture:new TS(v.textureWidth,v.textureHeight,He,void 0,void 0,void 0,void 0,void 0,void 0,Be),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1})}else{const Be={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:r};x=new XRWebGLLayer(s,t,Be),s.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),w=new ki(x.framebufferWidth,x.framebufferHeight,{format:vs,type:xs,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}w.isXRRenderTarget=!0,this.setFoveation(c),f=null,a=await s.requestReferenceSpace(l),_e.setContext(s),_e.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function ae(ue){for(let Ue=0;Ue<ue.removed.length;Ue++){const Be=ue.removed[Ue],He=B.indexOf(Be);He>=0&&(B[He]=null,C[He].disconnect(Be))}for(let Ue=0;Ue<ue.added.length;Ue++){const Be=ue.added[Ue];let He=B.indexOf(Be);if(He===-1){for(let Lt=0;Lt<C.length;Lt++)if(Lt>=B.length){B.push(Be),He=Lt;break}else if(B[Lt]===null){B[Lt]=Be,He=Lt;break}if(He===-1)break}const et=C[He];et&&et.connect(Be)}}const j=new te,Q=new te;function J(ue,Ue,Be){j.setFromMatrixPosition(Ue.matrixWorld),Q.setFromMatrixPosition(Be.matrixWorld);const He=j.distanceTo(Q),et=Ue.projectionMatrix.elements,Lt=Be.projectionMatrix.elements,_t=et[14]/(et[10]-1),jt=et[14]/(et[10]+1),Ye=(et[9]+1)/et[5],Ze=(et[9]-1)/et[5],ie=(et[8]-1)/et[0],Bt=(Lt[8]+1)/Lt[0],it=_t*ie,ft=_t*Bt,lt=He/(-ie+Bt),Ft=lt*-ie;if(Ue.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(Ft),ue.translateZ(lt),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert(),et[10]===-1)ue.projectionMatrix.copy(Ue.projectionMatrix),ue.projectionMatrixInverse.copy(Ue.projectionMatrixInverse);else{const dt=_t+lt,ne=jt+lt,W=it-Ft,Me=ft+(He-Ft),ke=Ye*jt/ne*dt,Qe=Ze*jt/ne*dt;ue.projectionMatrix.makePerspective(W,Me,ke,Qe,dt,ne),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}}function xe(ue,Ue){Ue===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(Ue.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(s===null)return;let Ue=ue.near,Be=ue.far;M.texture!==null&&(M.depthNear>0&&(Ue=M.depthNear),M.depthFar>0&&(Be=M.depthFar)),I.near=P.near=F.near=Ue,I.far=P.far=F.far=Be,(X!==I.near||re!==I.far)&&(s.updateRenderState({depthNear:I.near,depthFar:I.far}),X=I.near,re=I.far),F.layers.mask=ue.layers.mask|2,P.layers.mask=ue.layers.mask|4,I.layers.mask=F.layers.mask|P.layers.mask;const He=ue.parent,et=I.cameras;xe(I,He);for(let Lt=0;Lt<et.length;Lt++)xe(et[Lt],He);et.length===2?J(I,F,P):I.projectionMatrix.copy(F.projectionMatrix),Y(ue,I,He)};function Y(ue,Ue,Be){Be===null?ue.matrix.copy(Ue.matrixWorld):(ue.matrix.copy(Be.matrixWorld),ue.matrix.invert(),ue.matrix.multiply(Ue.matrixWorld)),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.updateMatrixWorld(!0),ue.projectionMatrix.copy(Ue.projectionMatrix),ue.projectionMatrixInverse.copy(Ue.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=Fm*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(v===null&&x===null))return c},this.setFoveation=function(ue){c=ue,v!==null&&(v.fixedFoveation=ue),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=ue)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(I)};let oe=null;function be(ue,Ue){if(p=Ue.getViewerPose(f||a),A=Ue,p!==null){const Be=p.views;x!==null&&(e.setRenderTargetFramebuffer(w,x.framebuffer),e.setRenderTarget(w));let He=!1;Be.length!==I.cameras.length&&(I.cameras.length=0,He=!0);for(let _t=0;_t<Be.length;_t++){const jt=Be[_t];let Ye=null;if(x!==null)Ye=x.getViewport(jt);else{const ie=g.getViewSubImage(v,jt);Ye=ie.viewport,_t===0&&(e.setRenderTargetTextures(w,ie.colorTexture,v.ignoreDepthValues?void 0:ie.depthStencilTexture),e.setRenderTarget(w))}let Ze=U[_t];Ze===void 0&&(Ze=new Zi,Ze.layers.enable(_t),Ze.viewport=new kn,U[_t]=Ze),Ze.matrix.fromArray(jt.transform.matrix),Ze.matrix.decompose(Ze.position,Ze.quaternion,Ze.scale),Ze.projectionMatrix.fromArray(jt.projectionMatrix),Ze.projectionMatrixInverse.copy(Ze.projectionMatrix).invert(),Ze.viewport.set(Ye.x,Ye.y,Ye.width,Ye.height),_t===0&&(I.matrix.copy(Ze.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),He===!0&&I.cameras.push(Ze)}const et=s.enabledFeatures;if(et&&et.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&g){const _t=g.getDepthInformation(Be[0]);_t&&_t.isValid&&_t.texture&&M.init(e,_t,s.renderState)}}for(let Be=0;Be<C.length;Be++){const He=B[Be],et=C[Be];He!==null&&et!==void 0&&et.update(He,Ue,f||a)}oe&&oe(ue,Ue),Ue.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ue}),A=null}const _e=new P4;_e.setAnimationLoop(be),this.setAnimationLoop=function(ue){oe=ue},this.dispose=function(){}}}const zh=new Xa,dre=new Wt;function pre(n,e){function t(_,S){_.matrixAutoUpdate===!0&&_.updateMatrix(),S.value.copy(_.matrix)}function i(_,S){S.color.getRGB(_.fogColor.value,Kz(n)),S.isFog?(_.fogNear.value=S.near,_.fogFar.value=S.far):S.isFogExp2&&(_.fogDensity.value=S.density)}function s(_,S,w,C,B){S.isMeshBasicMaterial||S.isMeshLambertMaterial?r(_,S):S.isMeshToonMaterial?(r(_,S),g(_,S)):S.isMeshPhongMaterial?(r(_,S),p(_,S)):S.isMeshStandardMaterial?(r(_,S),v(_,S),S.isMeshPhysicalMaterial&&x(_,S,B)):S.isMeshMatcapMaterial?(r(_,S),A(_,S)):S.isMeshDepthMaterial?r(_,S):S.isMeshDistanceMaterial?(r(_,S),M(_,S)):S.isMeshNormalMaterial?r(_,S):S.isLineBasicMaterial?(a(_,S),S.isLineDashedMaterial&&l(_,S)):S.isPointsMaterial?c(_,S,w,C):S.isSpriteMaterial?f(_,S):S.isShadowMaterial?(_.color.value.copy(S.color),_.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function r(_,S){_.opacity.value=S.opacity,S.color&&_.diffuse.value.copy(S.color),S.emissive&&_.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(_.map.value=S.map,t(S.map,_.mapTransform)),S.alphaMap&&(_.alphaMap.value=S.alphaMap,t(S.alphaMap,_.alphaMapTransform)),S.bumpMap&&(_.bumpMap.value=S.bumpMap,t(S.bumpMap,_.bumpMapTransform),_.bumpScale.value=S.bumpScale,S.side===zs&&(_.bumpScale.value*=-1)),S.normalMap&&(_.normalMap.value=S.normalMap,t(S.normalMap,_.normalMapTransform),_.normalScale.value.copy(S.normalScale),S.side===zs&&_.normalScale.value.negate()),S.displacementMap&&(_.displacementMap.value=S.displacementMap,t(S.displacementMap,_.displacementMapTransform),_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias),S.emissiveMap&&(_.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,_.emissiveMapTransform)),S.specularMap&&(_.specularMap.value=S.specularMap,t(S.specularMap,_.specularMapTransform)),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest);const w=e.get(S),C=w.envMap,B=w.envMapRotation;C&&(_.envMap.value=C,zh.copy(B),zh.x*=-1,zh.y*=-1,zh.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(zh.y*=-1,zh.z*=-1),_.envMapRotation.value.setFromMatrix4(dre.makeRotationFromEuler(zh)),_.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=S.reflectivity,_.ior.value=S.ior,_.refractionRatio.value=S.refractionRatio),S.lightMap&&(_.lightMap.value=S.lightMap,_.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,_.lightMapTransform)),S.aoMap&&(_.aoMap.value=S.aoMap,_.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,_.aoMapTransform))}function a(_,S){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,S.map&&(_.map.value=S.map,t(S.map,_.mapTransform))}function l(_,S){_.dashSize.value=S.dashSize,_.totalSize.value=S.dashSize+S.gapSize,_.scale.value=S.scale}function c(_,S,w,C){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,_.size.value=S.size*w,_.scale.value=C*.5,S.map&&(_.map.value=S.map,t(S.map,_.uvTransform)),S.alphaMap&&(_.alphaMap.value=S.alphaMap,t(S.alphaMap,_.alphaMapTransform)),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest)}function f(_,S){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,_.rotation.value=S.rotation,S.map&&(_.map.value=S.map,t(S.map,_.mapTransform)),S.alphaMap&&(_.alphaMap.value=S.alphaMap,t(S.alphaMap,_.alphaMapTransform)),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest)}function p(_,S){_.specular.value.copy(S.specular),_.shininess.value=Math.max(S.shininess,1e-4)}function g(_,S){S.gradientMap&&(_.gradientMap.value=S.gradientMap)}function v(_,S){_.metalness.value=S.metalness,S.metalnessMap&&(_.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,_.metalnessMapTransform)),_.roughness.value=S.roughness,S.roughnessMap&&(_.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,_.roughnessMapTransform)),S.envMap&&(_.envMapIntensity.value=S.envMapIntensity)}function x(_,S,w){_.ior.value=S.ior,S.sheen>0&&(_.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),_.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(_.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,_.sheenColorMapTransform)),S.sheenRoughnessMap&&(_.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,_.sheenRoughnessMapTransform))),S.clearcoat>0&&(_.clearcoat.value=S.clearcoat,_.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(_.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,_.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(_.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===zs&&_.clearcoatNormalScale.value.negate())),S.dispersion>0&&(_.dispersion.value=S.dispersion),S.iridescence>0&&(_.iridescence.value=S.iridescence,_.iridescenceIOR.value=S.iridescenceIOR,_.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(_.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,_.iridescenceMapTransform)),S.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),S.transmission>0&&(_.transmission.value=S.transmission,_.transmissionSamplerMap.value=w.texture,_.transmissionSamplerSize.value.set(w.width,w.height),S.transmissionMap&&(_.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,_.transmissionMapTransform)),_.thickness.value=S.thickness,S.thicknessMap&&(_.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=S.attenuationDistance,_.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(_.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(_.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=S.specularIntensity,_.specularColor.value.copy(S.specularColor),S.specularColorMap&&(_.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,_.specularColorMapTransform)),S.specularIntensityMap&&(_.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,_.specularIntensityMapTransform))}function A(_,S){S.matcap&&(_.matcap.value=S.matcap)}function M(_,S){const w=e.get(S).light;_.referencePosition.value.setFromMatrixPosition(w.matrixWorld),_.nearDistance.value=w.shadow.camera.near,_.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function mre(n,e,t,i){let s={},r={},a=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(w,C){const B=C.program;i.uniformBlockBinding(w,B)}function f(w,C){let B=s[w.id];B===void 0&&(A(w),B=p(w),s[w.id]=B,w.addEventListener("dispose",_));const N=C.program;i.updateUBOMapping(w,N);const L=e.render.frame;r[w.id]!==L&&(v(w),r[w.id]=L)}function p(w){const C=g();w.__bindingPointIndex=C;const B=n.createBuffer(),N=w.__size,L=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,B),n.bufferData(n.UNIFORM_BUFFER,N,L),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,C,B),B}function g(){for(let w=0;w<l;w++)if(a.indexOf(w)===-1)return a.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(w){const C=s[w.id],B=w.uniforms,N=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,C);for(let L=0,F=B.length;L<F;L++){const P=Array.isArray(B[L])?B[L]:[B[L]];for(let U=0,I=P.length;U<I;U++){const X=P[U];if(x(X,L,U,N)===!0){const re=X.__offset,ee=Array.isArray(X.value)?X.value:[X.value];let $=0;for(let ae=0;ae<ee.length;ae++){const j=ee[ae],Q=M(j);typeof j=="number"||typeof j=="boolean"?(X.__data[0]=j,n.bufferSubData(n.UNIFORM_BUFFER,re+$,X.__data)):j.isMatrix3?(X.__data[0]=j.elements[0],X.__data[1]=j.elements[1],X.__data[2]=j.elements[2],X.__data[3]=0,X.__data[4]=j.elements[3],X.__data[5]=j.elements[4],X.__data[6]=j.elements[5],X.__data[7]=0,X.__data[8]=j.elements[6],X.__data[9]=j.elements[7],X.__data[10]=j.elements[8],X.__data[11]=0):(j.toArray(X.__data,$),$+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,re,X.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function x(w,C,B,N){const L=w.value,F=C+"_"+B;if(N[F]===void 0)return typeof L=="number"||typeof L=="boolean"?N[F]=L:N[F]=L.clone(),!0;{const P=N[F];if(typeof L=="number"||typeof L=="boolean"){if(P!==L)return N[F]=L,!0}else if(P.equals(L)===!1)return P.copy(L),!0}return!1}function A(w){const C=w.uniforms;let B=0;const N=16;for(let F=0,P=C.length;F<P;F++){const U=Array.isArray(C[F])?C[F]:[C[F]];for(let I=0,X=U.length;I<X;I++){const re=U[I],ee=Array.isArray(re.value)?re.value:[re.value];for(let $=0,ae=ee.length;$<ae;$++){const j=ee[$],Q=M(j),J=B%N,xe=J%Q.boundary,Y=J+xe;B+=xe,Y!==0&&N-Y<Q.storage&&(B+=N-Y),re.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),re.__offset=B,B+=Q.storage}}}const L=B%N;return L>0&&(B+=N-L),w.__size=B,w.__cache={},this}function M(w){const C={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(C.boundary=4,C.storage=4):w.isVector2?(C.boundary=8,C.storage=8):w.isVector3||w.isColor?(C.boundary=16,C.storage=12):w.isVector4?(C.boundary=16,C.storage=16):w.isMatrix3?(C.boundary=48,C.storage=48):w.isMatrix4?(C.boundary=64,C.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),C}function _(w){const C=w.target;C.removeEventListener("dispose",_);const B=a.indexOf(C.__bindingPointIndex);a.splice(B,1),n.deleteBuffer(s[C.id]),delete s[C.id],delete r[C.id]}function S(){for(const w in s)n.deleteBuffer(s[w]);a=[],s={},r={}}return{bind:c,update:f,dispose:S}}class UR{constructor(e={}){const{canvas:t=Yz(),context:i=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let x;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=i.getContextAttributes().alpha}else x=a;const A=new Uint32Array(4),M=new Int32Array(4);let _=null,S=null;const w=[],C=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Qn,this.toneMapping=cl,this.toneMappingExposure=1;const B=this;let N=!1,L=0,F=0,P=null,U=-1,I=null;const X=new kn,re=new kn;let ee=null;const $=new pt(0);let ae=0,j=t.width,Q=t.height,J=1,xe=null,Y=null;const oe=new kn(0,0,j,Q),be=new kn(0,0,j,Q);let _e=!1;const ue=new my;let Ue=!1,Be=!1;this.transmissionResolutionScale=1;const He=new Wt,et=new Wt,Lt=new te,_t=new kn,jt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ye=!1;function Ze(){return P===null?J:1}let ie=i;function Bt(V,se){return t.getContext(V,se)}try{const V={alpha:!0,depth:s,stencil:r,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${wf}`),t.addEventListener("webglcontextlost",Xe,!1),t.addEventListener("webglcontextrestored",xt,!1),t.addEventListener("webglcontextcreationerror",vt,!1),ie===null){const se="webgl2";if(ie=Bt(se,V),ie===null)throw Bt(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let it,ft,lt,Ft,dt,ne,W,Me,ke,Qe,je,gt,ct,ht,hn,st,Tt,Rt,St,mt,me,Fe,rt,de;function Ee(){it=new Cie(ie),it.init(),Fe=new G4(ie,it),ft=new Aie(ie,it,e,Fe),lt=new ore(ie,it),ft.reverseDepthBuffer&&v&&lt.buffers.depth.setReversed(!0),Ft=new Bie(ie),dt=new qse,ne=new lre(ie,it,lt,dt,ft,Fe,Ft),W=new _ie(B),Me=new Tie(B),ke=new Iee(ie),rt=new xie(ie,ke),Qe=new wie(ie,ke,Ft,rt),je=new Nie(ie,Qe,ke,Ft),St=new Die(ie,ft,ne),st=new Sie(dt),gt=new Wse(B,W,Me,it,ft,rt,st),ct=new pre(B,dt),ht=new Jse,hn=new nre(it),Rt=new yie(B,W,Me,lt,je,x,c),Tt=new rre(B,je,ft),de=new mre(ie,Ft,ft,lt),mt=new bie(ie,it,Ft),me=new Rie(ie,it,Ft),Ft.programs=gt.programs,B.capabilities=ft,B.extensions=it,B.properties=dt,B.renderLists=ht,B.shadowMap=Tt,B.state=lt,B.info=Ft}Ee();const Oe=new hre(B,ie);this.xr=Oe,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const V=it.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=it.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(V){V!==void 0&&(J=V,this.setSize(j,Q,!1))},this.getSize=function(V){return V.set(j,Q)},this.setSize=function(V,se,le=!0){if(Oe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=V,Q=se,t.width=Math.floor(V*J),t.height=Math.floor(se*J),le===!0&&(t.style.width=V+"px",t.style.height=se+"px"),this.setViewport(0,0,V,se)},this.getDrawingBufferSize=function(V){return V.set(j*J,Q*J).floor()},this.setDrawingBufferSize=function(V,se,le){j=V,Q=se,J=le,t.width=Math.floor(V*le),t.height=Math.floor(se*le),this.setViewport(0,0,V,se)},this.getCurrentViewport=function(V){return V.copy(X)},this.getViewport=function(V){return V.copy(oe)},this.setViewport=function(V,se,le,fe){V.isVector4?oe.set(V.x,V.y,V.z,V.w):oe.set(V,se,le,fe),lt.viewport(X.copy(oe).multiplyScalar(J).round())},this.getScissor=function(V){return V.copy(be)},this.setScissor=function(V,se,le,fe){V.isVector4?be.set(V.x,V.y,V.z,V.w):be.set(V,se,le,fe),lt.scissor(re.copy(be).multiplyScalar(J).round())},this.getScissorTest=function(){return _e},this.setScissorTest=function(V){lt.setScissorTest(_e=V)},this.setOpaqueSort=function(V){xe=V},this.setTransparentSort=function(V){Y=V},this.getClearColor=function(V){return V.copy(Rt.getClearColor())},this.setClearColor=function(){Rt.setClearColor.apply(Rt,arguments)},this.getClearAlpha=function(){return Rt.getClearAlpha()},this.setClearAlpha=function(){Rt.setClearAlpha.apply(Rt,arguments)},this.clear=function(V=!0,se=!0,le=!0){let fe=0;if(V){let ve=!1;if(P!==null){const Ce=P.texture.format;ve=Ce===gS||Ce===mS||Ce===cy}if(ve){const Ce=P.texture.type,Ve=Ce===xs||Ce===dl||Ce===Um||Ce===Af||Ce===dS||Ce===pS,We=Rt.getClearColor(),tt=Rt.getClearAlpha(),bt=We.r,yt=We.g,At=We.b;Ve?(A[0]=bt,A[1]=yt,A[2]=At,A[3]=tt,ie.clearBufferuiv(ie.COLOR,0,A)):(M[0]=bt,M[1]=yt,M[2]=At,M[3]=tt,ie.clearBufferiv(ie.COLOR,0,M))}else fe|=ie.COLOR_BUFFER_BIT}se&&(fe|=ie.DEPTH_BUFFER_BIT),le&&(fe|=ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ie.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Xe,!1),t.removeEventListener("webglcontextrestored",xt,!1),t.removeEventListener("webglcontextcreationerror",vt,!1),Rt.dispose(),ht.dispose(),hn.dispose(),dt.dispose(),W.dispose(),Me.dispose(),je.dispose(),rt.dispose(),de.dispose(),gt.dispose(),Oe.dispose(),Oe.removeEventListener("sessionstart",Pi),Oe.removeEventListener("sessionend",ji),Xi.stop()};function Xe(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function xt(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const V=Ft.autoReset,se=Tt.enabled,le=Tt.autoUpdate,fe=Tt.needsUpdate,ve=Tt.type;Ee(),Ft.autoReset=V,Tt.enabled=se,Tt.autoUpdate=le,Tt.needsUpdate=fe,Tt.type=ve}function vt(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function Ht(V){const se=V.target;se.removeEventListener("dispose",Ht),vn(se)}function vn(V){Yn(V),dt.remove(V)}function Yn(V){const se=dt.get(V).programs;se!==void 0&&(se.forEach(function(le){gt.releaseProgram(le)}),V.isShaderMaterial&&gt.releaseShaderCache(V))}this.renderBufferDirect=function(V,se,le,fe,ve,Ce){se===null&&(se=jt);const Ve=ve.isMesh&&ve.matrixWorld.determinant()<0,We=pe(V,se,le,fe,ve);lt.setMaterial(fe,Ve);let tt=le.index,bt=1;if(fe.wireframe===!0){if(tt=Qe.getWireframeAttribute(le),tt===void 0)return;bt=2}const yt=le.drawRange,At=le.attributes.position;let Xt=yt.start*bt,It=(yt.start+yt.count)*bt;Ce!==null&&(Xt=Math.max(Xt,Ce.start*bt),It=Math.min(It,(Ce.start+Ce.count)*bt)),tt!==null?(Xt=Math.max(Xt,0),It=Math.min(It,tt.count)):At!=null&&(Xt=Math.max(Xt,0),It=Math.min(It,At.count));const Ln=It-Xt;if(Ln<0||Ln===1/0)return;rt.setup(ve,fe,We,le,tt);let Dt,Vt=mt;if(tt!==null&&(Dt=ke.get(tt),Vt=me,Vt.setIndex(Dt)),ve.isMesh)fe.wireframe===!0?(lt.setLineWidth(fe.wireframeLinewidth*Ze()),Vt.setMode(ie.LINES)):Vt.setMode(ie.TRIANGLES);else if(ve.isLine){let Nt=fe.linewidth;Nt===void 0&&(Nt=1),lt.setLineWidth(Nt*Ze()),ve.isLineSegments?Vt.setMode(ie.LINES):ve.isLineLoop?Vt.setMode(ie.LINE_LOOP):Vt.setMode(ie.LINE_STRIP)}else ve.isPoints?Vt.setMode(ie.POINTS):ve.isSprite&&Vt.setMode(ie.TRIANGLES);if(ve.isBatchedMesh)if(ve._multiDrawInstances!==null)Vt.renderMultiDrawInstances(ve._multiDrawStarts,ve._multiDrawCounts,ve._multiDrawCount,ve._multiDrawInstances);else if(it.get("WEBGL_multi_draw"))Vt.renderMultiDraw(ve._multiDrawStarts,ve._multiDrawCounts,ve._multiDrawCount);else{const Nt=ve._multiDrawStarts,ri=ve._multiDrawCounts,tn=ve._multiDrawCount,ln=tt?ke.get(tt).bytesPerElement:1,ci=dt.get(fe).currentProgram.getUniforms();for(let qt=0;qt<tn;qt++)ci.setValue(ie,"_gl_DrawID",qt),Vt.render(Nt[qt]/ln,ri[qt])}else if(ve.isInstancedMesh)Vt.renderInstances(Xt,Ln,ve.count);else if(le.isInstancedBufferGeometry){const Nt=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,ri=Math.min(le.instanceCount,Nt);Vt.renderInstances(Xt,Ln,ri)}else Vt.render(Xt,Ln)};function cn(V,se,le){V.transparent===!0&&V.side===fr&&V.forceSinglePass===!1?(V.side=zs,V.needsUpdate=!0,$n(V,se,le),V.side=hl,V.needsUpdate=!0,$n(V,se,le),V.side=fr):$n(V,se,le)}this.compile=function(V,se,le=null){le===null&&(le=V),S=hn.get(le),S.init(se),C.push(S),le.traverseVisible(function(ve){ve.isLight&&ve.layers.test(se.layers)&&(S.pushLight(ve),ve.castShadow&&S.pushShadow(ve))}),V!==le&&V.traverseVisible(function(ve){ve.isLight&&ve.layers.test(se.layers)&&(S.pushLight(ve),ve.castShadow&&S.pushShadow(ve))}),S.setupLights();const fe=new Set;return V.traverse(function(ve){if(!(ve.isMesh||ve.isPoints||ve.isLine||ve.isSprite))return;const Ce=ve.material;if(Ce)if(Array.isArray(Ce))for(let Ve=0;Ve<Ce.length;Ve++){const We=Ce[Ve];cn(We,le,ve),fe.add(We)}else cn(Ce,le,ve),fe.add(Ce)}),C.pop(),S=null,fe},this.compileAsync=function(V,se,le=null){const fe=this.compile(V,se,le);return new Promise(ve=>{function Ce(){if(fe.forEach(function(Ve){dt.get(Ve).currentProgram.isReady()&&fe.delete(Ve)}),fe.size===0){ve(V);return}setTimeout(Ce,10)}it.get("KHR_parallel_shader_compile")!==null?Ce():setTimeout(Ce,10)})};let Ui=null;function vi(V){Ui&&Ui(V)}function Pi(){Xi.stop()}function ji(){Xi.start()}const Xi=new P4;Xi.setAnimationLoop(vi),typeof self<"u"&&Xi.setContext(self),this.setAnimationLoop=function(V){Ui=V,Oe.setAnimationLoop(V),V===null?Xi.stop():Xi.start()},Oe.addEventListener("sessionstart",Pi),Oe.addEventListener("sessionend",ji),this.render=function(V,se){if(se!==void 0&&se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),se.parent===null&&se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),Oe.enabled===!0&&Oe.isPresenting===!0&&(Oe.cameraAutoUpdate===!0&&Oe.updateCamera(se),se=Oe.getCamera()),V.isScene===!0&&V.onBeforeRender(B,V,se,P),S=hn.get(V,C.length),S.init(se),C.push(S),et.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),ue.setFromProjectionMatrix(et),Be=this.localClippingEnabled,Ue=st.init(this.clippingPlanes,Be),_=ht.get(V,w.length),_.init(),w.push(_),Oe.enabled===!0&&Oe.isPresenting===!0){const Ce=B.xr.getDepthSensingMesh();Ce!==null&&ks(Ce,se,-1/0,B.sortObjects)}ks(V,se,0,B.sortObjects),_.finish(),B.sortObjects===!0&&_.sort(xe,Y),Ye=Oe.enabled===!1||Oe.isPresenting===!1||Oe.hasDepthSensing()===!1,Ye&&Rt.addToRenderList(_,V),this.info.render.frame++,Ue===!0&&st.beginShadows();const le=S.state.shadowsArray;Tt.render(le,V,se),Ue===!0&&st.endShadows(),this.info.autoReset===!0&&this.info.reset();const fe=_.opaque,ve=_.transmissive;if(S.setupLights(),se.isArrayCamera){const Ce=se.cameras;if(ve.length>0)for(let Ve=0,We=Ce.length;Ve<We;Ve++){const tt=Ce[Ve];Rs(fe,ve,V,tt)}Ye&&Rt.render(V);for(let Ve=0,We=Ce.length;Ve<We;Ve++){const tt=Ce[Ve];Ca(_,V,tt,tt.viewport)}}else ve.length>0&&Rs(fe,ve,V,se),Ye&&Rt.render(V),Ca(_,V,se);P!==null&&F===0&&(ne.updateMultisampleRenderTarget(P),ne.updateRenderTargetMipmap(P)),V.isScene===!0&&V.onAfterRender(B,V,se),rt.resetDefaultState(),U=-1,I=null,C.pop(),C.length>0?(S=C[C.length-1],Ue===!0&&st.setGlobalState(B.clippingPlanes,S.state.camera)):S=null,w.pop(),w.length>0?_=w[w.length-1]:_=null};function ks(V,se,le,fe){if(V.visible===!1)return;if(V.layers.test(se.layers)){if(V.isGroup)le=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(se);else if(V.isLight)S.pushLight(V),V.castShadow&&S.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||ue.intersectsSprite(V)){fe&&_t.setFromMatrixPosition(V.matrixWorld).applyMatrix4(et);const Ve=je.update(V),We=V.material;We.visible&&_.push(V,Ve,We,le,_t.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||ue.intersectsObject(V))){const Ve=je.update(V),We=V.material;if(fe&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),_t.copy(V.boundingSphere.center)):(Ve.boundingSphere===null&&Ve.computeBoundingSphere(),_t.copy(Ve.boundingSphere.center)),_t.applyMatrix4(V.matrixWorld).applyMatrix4(et)),Array.isArray(We)){const tt=Ve.groups;for(let bt=0,yt=tt.length;bt<yt;bt++){const At=tt[bt],Xt=We[At.materialIndex];Xt&&Xt.visible&&_.push(V,Ve,Xt,le,_t.z,At)}}else We.visible&&_.push(V,Ve,We,le,_t.z,null)}}const Ce=V.children;for(let Ve=0,We=Ce.length;Ve<We;Ve++)ks(Ce[Ve],se,le,fe)}function Ca(V,se,le,fe){const ve=V.opaque,Ce=V.transmissive,Ve=V.transparent;S.setupLightsView(le),Ue===!0&&st.setGlobalState(B.clippingPlanes,le),fe&&lt.viewport(X.copy(fe)),ve.length>0&&Kt(ve,se,le),Ce.length>0&&Kt(Ce,se,le),Ve.length>0&&Kt(Ve,se,le),lt.buffers.depth.setTest(!0),lt.buffers.depth.setMask(!0),lt.buffers.color.setMask(!0),lt.setPolygonOffset(!1)}function Rs(V,se,le,fe){if((le.isScene===!0?le.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[fe.id]===void 0&&(S.state.transmissionRenderTarget[fe.id]=new ki(1,1,{generateMipmaps:!0,type:it.has("EXT_color_buffer_half_float")||it.has("EXT_color_buffer_float")?ws:xs,minFilter:Ao,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Vn.workingColorSpace}));const Ce=S.state.transmissionRenderTarget[fe.id],Ve=fe.viewport||X;Ce.setSize(Ve.z*B.transmissionResolutionScale,Ve.w*B.transmissionResolutionScale);const We=B.getRenderTarget();B.setRenderTarget(Ce),B.getClearColor($),ae=B.getClearAlpha(),ae<1&&B.setClearColor(16777215,.5),B.clear(),Ye&&Rt.render(le);const tt=B.toneMapping;B.toneMapping=cl;const bt=fe.viewport;if(fe.viewport!==void 0&&(fe.viewport=void 0),S.setupLightsView(fe),Ue===!0&&st.setGlobalState(B.clippingPlanes,fe),Kt(V,le,fe),ne.updateMultisampleRenderTarget(Ce),ne.updateRenderTargetMipmap(Ce),it.has("WEBGL_multisampled_render_to_texture")===!1){let yt=!1;for(let At=0,Xt=se.length;At<Xt;At++){const It=se[At],Ln=It.object,Dt=It.geometry,Vt=It.material,Nt=It.group;if(Vt.side===fr&&Ln.layers.test(fe.layers)){const ri=Vt.side;Vt.side=zs,Vt.needsUpdate=!0,gr(Ln,le,fe,Dt,Vt,Nt),Vt.side=ri,Vt.needsUpdate=!0,yt=!0}}yt===!0&&(ne.updateMultisampleRenderTarget(Ce),ne.updateRenderTargetMipmap(Ce))}B.setRenderTarget(We),B.setClearColor($,ae),bt!==void 0&&(fe.viewport=bt),B.toneMapping=tt}function Kt(V,se,le){const fe=se.isScene===!0?se.overrideMaterial:null;for(let ve=0,Ce=V.length;ve<Ce;ve++){const Ve=V[ve],We=Ve.object,tt=Ve.geometry,bt=fe===null?Ve.material:fe,yt=Ve.group;We.layers.test(le.layers)&&gr(We,se,le,tt,bt,yt)}}function gr(V,se,le,fe,ve,Ce){V.onBeforeRender(B,se,le,fe,ve,Ce),V.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),ve.onBeforeRender(B,se,le,fe,V,Ce),ve.transparent===!0&&ve.side===fr&&ve.forceSinglePass===!1?(ve.side=zs,ve.needsUpdate=!0,B.renderBufferDirect(le,se,fe,ve,V,Ce),ve.side=hl,ve.needsUpdate=!0,B.renderBufferDirect(le,se,fe,ve,V,Ce),ve.side=fr):B.renderBufferDirect(le,se,fe,ve,V,Ce),V.onAfterRender(B,se,le,fe,ve,Ce)}function $n(V,se,le){se.isScene!==!0&&(se=jt);const fe=dt.get(V),ve=S.state.lights,Ce=S.state.shadowsArray,Ve=ve.state.version,We=gt.getParameters(V,ve.state,Ce,se,le),tt=gt.getProgramCacheKey(We);let bt=fe.programs;fe.environment=V.isMeshStandardMaterial?se.environment:null,fe.fog=se.fog,fe.envMap=(V.isMeshStandardMaterial?Me:W).get(V.envMap||fe.environment),fe.envMapRotation=fe.environment!==null&&V.envMap===null?se.environmentRotation:V.envMapRotation,bt===void 0&&(V.addEventListener("dispose",Ht),bt=new Map,fe.programs=bt);let yt=bt.get(tt);if(yt!==void 0){if(fe.currentProgram===yt&&fe.lightsStateVersion===Ve)return Z(V,We),yt}else We.uniforms=gt.getUniforms(V),V.onBeforeCompile(We,B),yt=gt.acquireProgram(We,tt),bt.set(tt,yt),fe.uniforms=We.uniforms;const At=fe.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(At.clippingPlanes=st.uniform),Z(V,We),fe.needsLights=Ne(V),fe.lightsStateVersion=Ve,fe.needsLights&&(At.ambientLightColor.value=ve.state.ambient,At.lightProbe.value=ve.state.probe,At.directionalLights.value=ve.state.directional,At.directionalLightShadows.value=ve.state.directionalShadow,At.spotLights.value=ve.state.spot,At.spotLightShadows.value=ve.state.spotShadow,At.rectAreaLights.value=ve.state.rectArea,At.ltc_1.value=ve.state.rectAreaLTC1,At.ltc_2.value=ve.state.rectAreaLTC2,At.pointLights.value=ve.state.point,At.pointLightShadows.value=ve.state.pointShadow,At.hemisphereLights.value=ve.state.hemi,At.directionalShadowMap.value=ve.state.directionalShadowMap,At.directionalShadowMatrix.value=ve.state.directionalShadowMatrix,At.spotShadowMap.value=ve.state.spotShadowMap,At.spotLightMatrix.value=ve.state.spotLightMatrix,At.spotLightMap.value=ve.state.spotLightMap,At.pointShadowMap.value=ve.state.pointShadowMap,At.pointShadowMatrix.value=ve.state.pointShadowMatrix),fe.currentProgram=yt,fe.uniformsList=null,yt}function k(V){if(V.uniformsList===null){const se=V.currentProgram.getUniforms();V.uniformsList=Rb.seqWithValue(se.seq,V.uniforms)}return V.uniformsList}function Z(V,se){const le=dt.get(V);le.outputColorSpace=se.outputColorSpace,le.batching=se.batching,le.batchingColor=se.batchingColor,le.instancing=se.instancing,le.instancingColor=se.instancingColor,le.instancingMorph=se.instancingMorph,le.skinning=se.skinning,le.morphTargets=se.morphTargets,le.morphNormals=se.morphNormals,le.morphColors=se.morphColors,le.morphTargetsCount=se.morphTargetsCount,le.numClippingPlanes=se.numClippingPlanes,le.numIntersection=se.numClipIntersection,le.vertexAlphas=se.vertexAlphas,le.vertexTangents=se.vertexTangents,le.toneMapping=se.toneMapping}function pe(V,se,le,fe,ve){se.isScene!==!0&&(se=jt),ne.resetTextureUnits();const Ce=se.fog,Ve=fe.isMeshStandardMaterial?se.environment:null,We=P===null?B.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:ja,tt=(fe.isMeshStandardMaterial?Me:W).get(fe.envMap||Ve),bt=fe.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,yt=!!le.attributes.tangent&&(!!fe.normalMap||fe.anisotropy>0),At=!!le.morphAttributes.position,Xt=!!le.morphAttributes.normal,It=!!le.morphAttributes.color;let Ln=cl;fe.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(Ln=B.toneMapping);const Dt=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,Vt=Dt!==void 0?Dt.length:0,Nt=dt.get(fe),ri=S.state.lights;if(Ue===!0&&(Be===!0||V!==I)){const ui=V===I&&fe.id===U;st.setState(fe,V,ui)}let tn=!1;fe.version===Nt.__version?(Nt.needsLights&&Nt.lightsStateVersion!==ri.state.version||Nt.outputColorSpace!==We||ve.isBatchedMesh&&Nt.batching===!1||!ve.isBatchedMesh&&Nt.batching===!0||ve.isBatchedMesh&&Nt.batchingColor===!0&&ve.colorTexture===null||ve.isBatchedMesh&&Nt.batchingColor===!1&&ve.colorTexture!==null||ve.isInstancedMesh&&Nt.instancing===!1||!ve.isInstancedMesh&&Nt.instancing===!0||ve.isSkinnedMesh&&Nt.skinning===!1||!ve.isSkinnedMesh&&Nt.skinning===!0||ve.isInstancedMesh&&Nt.instancingColor===!0&&ve.instanceColor===null||ve.isInstancedMesh&&Nt.instancingColor===!1&&ve.instanceColor!==null||ve.isInstancedMesh&&Nt.instancingMorph===!0&&ve.morphTexture===null||ve.isInstancedMesh&&Nt.instancingMorph===!1&&ve.morphTexture!==null||Nt.envMap!==tt||fe.fog===!0&&Nt.fog!==Ce||Nt.numClippingPlanes!==void 0&&(Nt.numClippingPlanes!==st.numPlanes||Nt.numIntersection!==st.numIntersection)||Nt.vertexAlphas!==bt||Nt.vertexTangents!==yt||Nt.morphTargets!==At||Nt.morphNormals!==Xt||Nt.morphColors!==It||Nt.toneMapping!==Ln||Nt.morphTargetsCount!==Vt)&&(tn=!0):(tn=!0,Nt.__version=fe.version);let ln=Nt.currentProgram;tn===!0&&(ln=$n(fe,se,ve));let ci=!1,qt=!1,An=!1;const yn=ln.getUniforms(),_i=Nt.uniforms;if(lt.useProgram(ln.program)&&(ci=!0,qt=!0,An=!0),fe.id!==U&&(U=fe.id,qt=!0),ci||I!==V){lt.buffers.depth.getReversed()?(He.copy(V.projectionMatrix),dQ(He),pQ(He),yn.setValue(ie,"projectionMatrix",He)):yn.setValue(ie,"projectionMatrix",V.projectionMatrix),yn.setValue(ie,"viewMatrix",V.matrixWorldInverse);const bs=yn.map.cameraPosition;bs!==void 0&&bs.setValue(ie,Lt.setFromMatrixPosition(V.matrixWorld)),ft.logarithmicDepthBuffer&&yn.setValue(ie,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&yn.setValue(ie,"isOrthographic",V.isOrthographicCamera===!0),I!==V&&(I=V,qt=!0,An=!0)}if(ve.isSkinnedMesh){yn.setOptional(ie,ve,"bindMatrix"),yn.setOptional(ie,ve,"bindMatrixInverse");const ui=ve.skeleton;ui&&(ui.boneTexture===null&&ui.computeBoneTexture(),yn.setValue(ie,"boneTexture",ui.boneTexture,ne))}ve.isBatchedMesh&&(yn.setOptional(ie,ve,"batchingTexture"),yn.setValue(ie,"batchingTexture",ve._matricesTexture,ne),yn.setOptional(ie,ve,"batchingIdTexture"),yn.setValue(ie,"batchingIdTexture",ve._indirectTexture,ne),yn.setOptional(ie,ve,"batchingColorTexture"),ve._colorsTexture!==null&&yn.setValue(ie,"batchingColorTexture",ve._colorsTexture,ne));const In=le.morphAttributes;if((In.position!==void 0||In.normal!==void 0||In.color!==void 0)&&St.update(ve,le,ln),(qt||Nt.receiveShadow!==ve.receiveShadow)&&(Nt.receiveShadow=ve.receiveShadow,yn.setValue(ie,"receiveShadow",ve.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(_i.envMap.value=tt,_i.flipEnvMap.value=tt.isCubeTexture&&tt.isRenderTargetTexture===!1?-1:1),fe.isMeshStandardMaterial&&fe.envMap===null&&se.environment!==null&&(_i.envMapIntensity.value=se.environmentIntensity),qt&&(yn.setValue(ie,"toneMappingExposure",B.toneMappingExposure),Nt.needsLights&&Re(_i,An),Ce&&fe.fog===!0&&ct.refreshFogUniforms(_i,Ce),ct.refreshMaterialUniforms(_i,fe,J,Q,S.state.transmissionRenderTarget[V.id]),Rb.upload(ie,k(Nt),_i,ne)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(Rb.upload(ie,k(Nt),_i,ne),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&yn.setValue(ie,"center",ve.center),yn.setValue(ie,"modelViewMatrix",ve.modelViewMatrix),yn.setValue(ie,"normalMatrix",ve.normalMatrix),yn.setValue(ie,"modelMatrix",ve.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){const ui=fe.uniformsGroups;for(let bs=0,$s=ui.length;bs<$s;bs++){const Wa=ui[bs];de.update(Wa,ln),de.bind(Wa,ln)}}return ln}function Re(V,se){V.ambientLightColor.needsUpdate=se,V.lightProbe.needsUpdate=se,V.directionalLights.needsUpdate=se,V.directionalLightShadows.needsUpdate=se,V.pointLights.needsUpdate=se,V.pointLightShadows.needsUpdate=se,V.spotLights.needsUpdate=se,V.spotLightShadows.needsUpdate=se,V.rectAreaLights.needsUpdate=se,V.hemisphereLights.needsUpdate=se}function Ne(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(V,se,le){dt.get(V.texture).__webglTexture=se,dt.get(V.depthTexture).__webglTexture=le;const fe=dt.get(V);fe.__hasExternalTextures=!0,fe.__autoAllocateDepthBuffer=le===void 0,fe.__autoAllocateDepthBuffer||it.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),fe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(V,se){const le=dt.get(V);le.__webglFramebuffer=se,le.__useDefaultFramebuffer=se===void 0};const Ge=ie.createFramebuffer();this.setRenderTarget=function(V,se=0,le=0){P=V,L=se,F=le;let fe=!0,ve=null,Ce=!1,Ve=!1;if(V){const tt=dt.get(V);if(tt.__useDefaultFramebuffer!==void 0)lt.bindFramebuffer(ie.FRAMEBUFFER,null),fe=!1;else if(tt.__webglFramebuffer===void 0)ne.setupRenderTarget(V);else if(tt.__hasExternalTextures)ne.rebindTextures(V,dt.get(V.texture).__webglTexture,dt.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const At=V.depthTexture;if(tt.__boundDepthTexture!==At){if(At!==null&&dt.has(At)&&(V.width!==At.image.width||V.height!==At.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ne.setupDepthRenderbuffer(V)}}const bt=V.texture;(bt.isData3DTexture||bt.isDataArrayTexture||bt.isCompressedArrayTexture)&&(Ve=!0);const yt=dt.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(yt[se])?ve=yt[se][le]:ve=yt[se],Ce=!0):V.samples>0&&ne.useMultisampledRTT(V)===!1?ve=dt.get(V).__webglMultisampledFramebuffer:Array.isArray(yt)?ve=yt[le]:ve=yt,X.copy(V.viewport),re.copy(V.scissor),ee=V.scissorTest}else X.copy(oe).multiplyScalar(J).floor(),re.copy(be).multiplyScalar(J).floor(),ee=_e;if(le!==0&&(ve=Ge),lt.bindFramebuffer(ie.FRAMEBUFFER,ve)&&fe&&lt.drawBuffers(V,ve),lt.viewport(X),lt.scissor(re),lt.setScissorTest(ee),Ce){const tt=dt.get(V.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+se,tt.__webglTexture,le)}else if(Ve){const tt=dt.get(V.texture),bt=se;ie.framebufferTextureLayer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,tt.__webglTexture,le,bt)}else if(V!==null&&le!==0){const tt=dt.get(V.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,tt.__webglTexture,le)}U=-1},this.readRenderTargetPixels=function(V,se,le,fe,ve,Ce,Ve){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let We=dt.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&Ve!==void 0&&(We=We[Ve]),We){lt.bindFramebuffer(ie.FRAMEBUFFER,We);try{const tt=V.texture,bt=tt.format,yt=tt.type;if(!ft.textureFormatReadable(bt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ft.textureTypeReadable(yt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}se>=0&&se<=V.width-fe&&le>=0&&le<=V.height-ve&&ie.readPixels(se,le,fe,ve,Fe.convert(bt),Fe.convert(yt),Ce)}finally{const tt=P!==null?dt.get(P).__webglFramebuffer:null;lt.bindFramebuffer(ie.FRAMEBUFFER,tt)}}},this.readRenderTargetPixelsAsync=async function(V,se,le,fe,ve,Ce,Ve){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let We=dt.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&Ve!==void 0&&(We=We[Ve]),We){const tt=V.texture,bt=tt.format,yt=tt.type;if(!ft.textureFormatReadable(bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ft.textureTypeReadable(yt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(se>=0&&se<=V.width-fe&&le>=0&&le<=V.height-ve){lt.bindFramebuffer(ie.FRAMEBUFFER,We);const At=ie.createBuffer();ie.bindBuffer(ie.PIXEL_PACK_BUFFER,At),ie.bufferData(ie.PIXEL_PACK_BUFFER,Ce.byteLength,ie.STREAM_READ),ie.readPixels(se,le,fe,ve,Fe.convert(bt),Fe.convert(yt),0);const Xt=P!==null?dt.get(P).__webglFramebuffer:null;lt.bindFramebuffer(ie.FRAMEBUFFER,Xt);const It=ie.fenceSync(ie.SYNC_GPU_COMMANDS_COMPLETE,0);return ie.flush(),await hQ(ie,It,4),ie.bindBuffer(ie.PIXEL_PACK_BUFFER,At),ie.getBufferSubData(ie.PIXEL_PACK_BUFFER,0,Ce),ie.deleteBuffer(At),ie.deleteSync(It),Ce}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(V,se=null,le=0){V.isTexture!==!0&&(nm("WebGLRenderer: copyFramebufferToTexture function signature has changed."),se=arguments[0]||null,V=arguments[1]);const fe=Math.pow(2,-le),ve=Math.floor(V.image.width*fe),Ce=Math.floor(V.image.height*fe),Ve=se!==null?se.x:0,We=se!==null?se.y:0;ne.setTexture2D(V,0),ie.copyTexSubImage2D(ie.TEXTURE_2D,le,0,0,Ve,We,ve,Ce),lt.unbindTexture()};const at=ie.createFramebuffer(),nt=ie.createFramebuffer();this.copyTextureToTexture=function(V,se,le=null,fe=null,ve=0,Ce=null){V.isTexture!==!0&&(nm("WebGLRenderer: copyTextureToTexture function signature has changed."),fe=arguments[0]||null,V=arguments[1],se=arguments[2],Ce=arguments[3]||0,le=null),Ce===null&&(ve!==0?(nm("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ce=ve,ve=0):Ce=0);let Ve,We,tt,bt,yt,At,Xt,It,Ln;const Dt=V.isCompressedTexture?V.mipmaps[Ce]:V.image;if(le!==null)Ve=le.max.x-le.min.x,We=le.max.y-le.min.y,tt=le.isBox3?le.max.z-le.min.z:1,bt=le.min.x,yt=le.min.y,At=le.isBox3?le.min.z:0;else{const In=Math.pow(2,-ve);Ve=Math.floor(Dt.width*In),We=Math.floor(Dt.height*In),V.isDataArrayTexture?tt=Dt.depth:V.isData3DTexture?tt=Math.floor(Dt.depth*In):tt=1,bt=0,yt=0,At=0}fe!==null?(Xt=fe.x,It=fe.y,Ln=fe.z):(Xt=0,It=0,Ln=0);const Vt=Fe.convert(se.format),Nt=Fe.convert(se.type);let ri;se.isData3DTexture?(ne.setTexture3D(se,0),ri=ie.TEXTURE_3D):se.isDataArrayTexture||se.isCompressedArrayTexture?(ne.setTexture2DArray(se,0),ri=ie.TEXTURE_2D_ARRAY):(ne.setTexture2D(se,0),ri=ie.TEXTURE_2D),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,se.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,se.unpackAlignment);const tn=ie.getParameter(ie.UNPACK_ROW_LENGTH),ln=ie.getParameter(ie.UNPACK_IMAGE_HEIGHT),ci=ie.getParameter(ie.UNPACK_SKIP_PIXELS),qt=ie.getParameter(ie.UNPACK_SKIP_ROWS),An=ie.getParameter(ie.UNPACK_SKIP_IMAGES);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Dt.width),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Dt.height),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,bt),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,yt),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,At);const yn=V.isDataArrayTexture||V.isData3DTexture,_i=se.isDataArrayTexture||se.isData3DTexture;if(V.isDepthTexture){const In=dt.get(V),ui=dt.get(se),bs=dt.get(In.__renderTarget),$s=dt.get(ui.__renderTarget);lt.bindFramebuffer(ie.READ_FRAMEBUFFER,bs.__webglFramebuffer),lt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,$s.__webglFramebuffer);for(let Wa=0;Wa<tt;Wa++)yn&&(ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,dt.get(V).__webglTexture,ve,At+Wa),ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,dt.get(se).__webglTexture,Ce,Ln+Wa)),ie.blitFramebuffer(bt,yt,Ve,We,Xt,It,Ve,We,ie.DEPTH_BUFFER_BIT,ie.NEAREST);lt.bindFramebuffer(ie.READ_FRAMEBUFFER,null),lt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else if(ve!==0||V.isRenderTargetTexture||dt.has(V)){const In=dt.get(V),ui=dt.get(se);lt.bindFramebuffer(ie.READ_FRAMEBUFFER,at),lt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,nt);for(let bs=0;bs<tt;bs++)yn?ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,In.__webglTexture,ve,At+bs):ie.framebufferTexture2D(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,In.__webglTexture,ve),_i?ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ui.__webglTexture,Ce,Ln+bs):ie.framebufferTexture2D(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,ui.__webglTexture,Ce),ve!==0?ie.blitFramebuffer(bt,yt,Ve,We,Xt,It,Ve,We,ie.COLOR_BUFFER_BIT,ie.NEAREST):_i?ie.copyTexSubImage3D(ri,Ce,Xt,It,Ln+bs,bt,yt,Ve,We):ie.copyTexSubImage2D(ri,Ce,Xt,It,bt,yt,Ve,We);lt.bindFramebuffer(ie.READ_FRAMEBUFFER,null),lt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else _i?V.isDataTexture||V.isData3DTexture?ie.texSubImage3D(ri,Ce,Xt,It,Ln,Ve,We,tt,Vt,Nt,Dt.data):se.isCompressedArrayTexture?ie.compressedTexSubImage3D(ri,Ce,Xt,It,Ln,Ve,We,tt,Vt,Dt.data):ie.texSubImage3D(ri,Ce,Xt,It,Ln,Ve,We,tt,Vt,Nt,Dt):V.isDataTexture?ie.texSubImage2D(ie.TEXTURE_2D,Ce,Xt,It,Ve,We,Vt,Nt,Dt.data):V.isCompressedTexture?ie.compressedTexSubImage2D(ie.TEXTURE_2D,Ce,Xt,It,Dt.width,Dt.height,Vt,Dt.data):ie.texSubImage2D(ie.TEXTURE_2D,Ce,Xt,It,Ve,We,Vt,Nt,Dt);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,tn),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,ln),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,ci),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,qt),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,An),Ce===0&&se.generateMipmaps&&ie.generateMipmap(ri),lt.unbindTexture()},this.copyTextureToTexture3D=function(V,se,le=null,fe=null,ve=0){return V.isTexture!==!0&&(nm("WebGLRenderer: copyTextureToTexture3D function signature has changed."),le=arguments[0]||null,fe=arguments[1]||null,V=arguments[2],se=arguments[3],ve=arguments[4]||0),nm('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(V,se,le,fe,ve)},this.initRenderTarget=function(V){dt.get(V).__webglFramebuffer===void 0&&ne.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?ne.setTextureCube(V,0):V.isData3DTexture?ne.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?ne.setTexture2DArray(V,0):ne.setTexture2D(V,0),lt.unbindTexture()},this.resetState=function(){L=0,F=0,P=null,lt.reset(),rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ol}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Vn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Vn._getUnpackColorSpace()}}const V4=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Gw,AddEquation:hf,AddOperation:Mz,AdditiveAnimationBlendMode:Kw,AdditiveBlending:IT,AgXToneMapping:Rz,AlphaFormat:kw,AlwaysCompare:jz,AlwaysDepth:Qb,AlwaysStencilFunc:VT,AmbientLight:M4,AnimationAction:L4,AnimationClip:Md,AnimationLoader:I$,AnimationMixer:NR,AnimationObjectGroup:aee,AnimationUtils:L$,ArcCurve:t4,ArrayCamera:B4,ArrowHelper:wee,AttachedBindMode:HT,Audio:D4,AudioAnalyser:J$,AudioContext:wR,AudioListener:W$,AudioLoader:j$,AxesHelper:Ree,BackSide:zs,BasicDepthPacking:Rf,BasicShadowMap:sz,BatchedMesh:$z,Bone:_S,BooleanKeyframeTrack:Rd,Box2:mee,Box3:Lr,Box3Helper:Tee,BoxGeometry:wd,BoxHelper:Eee,BufferAttribute:Xn,BufferGeometry:gn,BufferGeometryLoader:w4,ByteType:fS,Cache:qc,Camera:fy,CameraHelper:Mee,CanvasTexture:i$,CapsuleGeometry:wS,CatmullRomCurve3:n4,CineonToneMapping:Cz,CircleGeometry:RS,ClampToEdgeWrapping:gs,Clock:RR,Color:pt,ColorKeyframeTrack:AR,ColorManagement:Vn,CompressedArrayTexture:t$,CompressedCubeTexture:n$,CompressedTexture:ES,CompressedTextureLoader:F$,ConeGeometry:BS,ConstantAlphaFactor:Az,ConstantColorFactor:xz,Controls:Dee,CubeCamera:nR,CubeReflectionMapping:uc,CubeRefractionMapping:xf,CubeTexture:hy,CubeTextureLoader:S4,CubeUVReflectionMapping:Qm,CubicBezierCurve:cR,CubicBezierCurve3:i4,CubicInterpolant:y4,CullFaceBack:PT,CullFaceFront:iz,CullFaceFrontBack:yZ,CullFaceNone:nz,Curve:ml,CurvePath:r4,CustomBlending:rz,CustomToneMapping:wz,CylinderGeometry:$m,Cylindrical:pee,Data3DTexture:xS,DataArrayTexture:uy,DataTexture:ul,DataTextureLoader:SR,DataUtils:sd,DecrementStencilOp:wZ,DecrementWrapStencilOp:BZ,DefaultLoadingManager:A4,DepthFormat:md,DepthStencilFormat:Sf,DepthTexture:TS,DetachedBindMode:Dz,DirectionalLight:TR,DirectionalLightHelper:_ee,DiscreteInterpolant:x4,DodecahedronGeometry:DS,DoubleSide:fr,DstAlphaFactor:pz,DstColorFactor:gz,DynamicCopyUsage:XZ,DynamicDrawUsage:zZ,DynamicReadUsage:VZ,EdgesGeometry:a4,EllipseCurve:CS,EqualCompare:Hz,EqualDepth:eA,EqualStencilFunc:OZ,EquirectangularReflectionMapping:Lm,EquirectangularRefractionMapping:Nv,Euler:Xa,EventDispatcher:Ya,ExtrudeGeometry:LS,FileLoader:pr,Float16BufferAttribute:UQ,Float32BufferAttribute:zt,FloatType:Vi,Fog:SS,FogExp2:AS,FramebufferTexture:e$,FrontSide:hl,Frustum:my,GLBufferAttribute:dee,GLSL1:WZ,GLSL3:kT,GreaterCompare:Gz,GreaterDepth:nA,GreaterEqualCompare:kz,GreaterEqualDepth:tA,GreaterEqualStencilFunc:FZ,GreaterStencilFunc:PZ,GridHelper:Aee,Group:Wc,HalfFloatType:ws,HemisphereLight:_4,HemisphereLightHelper:bee,IcosahedronGeometry:vy,ImageBitmapLoader:R4,ImageLoader:Vv,ImageUtils:Wz,IncrementStencilOp:CZ,IncrementWrapStencilOp:RZ,InstancedBufferAttribute:Ad,InstancedBufferGeometry:C4,InstancedInterleavedBuffer:hee,InstancedMesh:rR,Int16BufferAttribute:LQ,Int32BufferAttribute:OQ,Int8BufferAttribute:BQ,IntType:oy,InterleavedBuffer:dy,InterleavedBufferAttribute:_f,Interpolant:eg,InterpolateDiscrete:Pm,InterpolateLinear:Im,InterpolateSmooth:Cb,InvertStencilOp:DZ,KeepStencilOp:Yh,KeyframeTrack:gl,LOD:Qz,LatheGeometry:gy,Layers:zm,LessCompare:zz,LessDepth:$b,LessEqualCompare:Zw,LessEqualDepth:xd,LessEqualStencilFunc:UZ,LessStencilFunc:LZ,Light:Lf,LightProbe:T4,Line:nu,Line3:gee,LineBasicMaterial:Or,LineCurve:uR,LineCurve3:s4,LineDashedMaterial:m4,LineLoop:aR,LineSegments:pl,LinearFilter:jn,LinearInterpolant:bR,LinearMipMapLinearFilter:GT,LinearMipMapNearestFilter:AZ,LinearMipmapLinearFilter:Ao,LinearMipmapNearestFilter:xm,LinearSRGBColorSpace:ja,LinearToneMapping:Ez,LinearTransfer:Ov,Loader:mr,LoaderUtils:pf,LoadingManager:zS,LoopOnce:Nz,LoopPingPong:Oz,LoopRepeat:Lz,LuminanceAlphaFormat:Yw,LuminanceFormat:Xw,MOUSE:jh,Material:ys,MaterialLoader:HS,MathUtils:bm,Matrix2:LR,Matrix3:bn,Matrix4:Wt,MaxEquation:cz,Mesh:Ci,MeshBasicMaterial:ia,MeshDepthMaterial:vR,MeshDistanceMaterial:yR,MeshLambertMaterial:gR,MeshMatcapMaterial:p4,MeshNormalMaterial:mR,MeshPhongMaterial:d4,MeshPhysicalMaterial:Eo,MeshStandardMaterial:Ay,MeshToonMaterial:pR,MinEquation:lz,MirroredRepeatWrapping:Om,MixOperation:_z,MultiplyBlending:zT,MultiplyOperation:ay,NearestFilter:wi,NearestMipMapLinearFilter:bZ,NearestMipMapNearestFilter:xZ,NearestMipmapLinearFilter:ed,NearestMipmapNearestFilter:uS,NeutralToneMapping:Bz,NeverCompare:Fz,NeverDepth:Zb,NeverStencilFunc:NZ,NoBlending:hr,NoColorSpace:sl,NoToneMapping:cl,NormalAnimationBlendMode:vS,NormalBlending:pd,NotEqualCompare:Vz,NotEqualDepth:iA,NotEqualStencilFunc:IZ,NumberKeyframeTrack:_d,Object3D:Pn,ObjectLoader:V$,ObjectSpaceNormalMap:Iz,OctahedronGeometry:yy,OneFactor:fz,OneMinusConstantAlphaFactor:Sz,OneMinusConstantColorFactor:bz,OneMinusDstAlphaFactor:mz,OneMinusDstColorFactor:vz,OneMinusSrcAlphaFactor:Jb,OneMinusSrcColorFactor:dz,OrthographicCamera:oc,PCFShadowMap:cS,PCFSoftShadowMap:ym,PMREMGenerator:ZT,Path:Fv,PerspectiveCamera:Zi,Plane:Xc,PlaneGeometry:Nf,PlaneHelper:Cee,PointLight:ER,PointLightHelper:yee,Points:oR,PointsMaterial:MS,PolarGridHelper:See,PolyhedronGeometry:Df,PositionalAudio:K$,PropertyBinding:Kn,PropertyMixer:N4,QuadraticBezierCurve:fR,QuadraticBezierCurve3:hR,Quaternion:Hs,QuaternionKeyframeTrack:Mf,QuaternionLinearInterpolant:b4,RED_GREEN_RGTC2_Format:wA,RED_RGTC1_Format:qw,REVISION:wf,RGBADepthPacking:Pz,RGBAFormat:vs,RGBAIntegerFormat:gS,RGBA_ASTC_10x10_Format:SA,RGBA_ASTC_10x5_Format:xA,RGBA_ASTC_10x6_Format:bA,RGBA_ASTC_10x8_Format:AA,RGBA_ASTC_12x10_Format:_A,RGBA_ASTC_12x12_Format:MA,RGBA_ASTC_4x4_Format:fA,RGBA_ASTC_5x4_Format:hA,RGBA_ASTC_5x5_Format:dA,RGBA_ASTC_6x5_Format:pA,RGBA_ASTC_6x6_Format:mA,RGBA_ASTC_8x5_Format:gA,RGBA_ASTC_8x6_Format:vA,RGBA_ASTC_8x8_Format:yA,RGBA_BPTC_Format:uv,RGBA_ETC2_EAC_Format:uA,RGBA_PVRTC_2BPPV1_Format:oA,RGBA_PVRTC_4BPPV1_Format:aA,RGBA_S3TC_DXT1_Format:ov,RGBA_S3TC_DXT3_Format:lv,RGBA_S3TC_DXT5_Format:cv,RGBDepthPacking:_Z,RGBFormat:jw,RGBIntegerFormat:SZ,RGB_BPTC_SIGNED_Format:EA,RGB_BPTC_UNSIGNED_Format:TA,RGB_ETC1_Format:lA,RGB_ETC2_Format:cA,RGB_PVRTC_2BPPV1_Format:rA,RGB_PVRTC_4BPPV1_Format:sA,RGB_S3TC_DXT1_Format:av,RGDepthPacking:MZ,RGFormat:Ww,RGIntegerFormat:mS,RawShaderMaterial:h4,Ray:Cd,Raycaster:GS,RectAreaLight:CR,RedFormat:ly,RedIntegerFormat:cy,ReinhardToneMapping:Tz,RenderTarget:yS,RenderTarget3D:lee,RenderTargetArray:cee,RepeatWrapping:bf,ReplaceStencilOp:TZ,ReverseSubtractEquation:oz,RingGeometry:OS,SIGNED_RED_GREEN_RGTC2_Format:RA,SIGNED_RED_RGTC1_Format:CA,SRGBColorSpace:Qn,SRGBTransfer:mi,Scene:bd,ShaderChunk:Tn,ShaderLib:il,ShaderMaterial:Oi,ShadowMaterial:f4,Shape:vd,ShapeGeometry:US,ShapePath:Bee,ShapeUtils:ac,ShortType:hS,Skeleton:py,SkeletonHelper:O4,SkinnedMesh:sR,Source:id,Sphere:dr,SphereGeometry:xy,Spherical:KT,SphericalHarmonics3:E4,SplineCurve:dR,SpotLight:MR,SpotLightHelper:vee,Sprite:Zz,SpriteMaterial:iR,SrcAlphaFactor:Kb,SrcAlphaSaturateFactor:yz,SrcColorFactor:hz,StaticCopyUsage:jZ,StaticDrawUsage:Uv,StaticReadUsage:GZ,StereoCamera:X$,StreamCopyUsage:YZ,StreamDrawUsage:HZ,StreamReadUsage:kZ,StringKeyframeTrack:Bd,SubtractEquation:az,SubtractiveBlending:FT,TOUCH:Xh,TangentSpaceNormalMap:Bf,TetrahedronGeometry:PS,Texture:Zn,TextureLoader:Sy,TextureUtils:Pee,TimestampQuery:qZ,TorusGeometry:by,TorusKnotGeometry:IS,Triangle:Aa,TriangleFanDrawMode:BA,TriangleStripDrawMode:Jw,TrianglesDrawMode:Uz,TubeGeometry:FS,UVMapping:yf,Uint16BufferAttribute:$w,Uint32BufferAttribute:eR,Uint8BufferAttribute:DQ,Uint8ClampedBufferAttribute:NQ,Uniform:Jn,UniformsGroup:fee,UniformsLib:Et,UniformsUtils:tR,UnsignedByteType:xs,UnsignedInt248Type:Af,UnsignedInt5999Type:Vw,UnsignedIntType:dl,UnsignedShort4444Type:dS,UnsignedShort5551Type:pS,UnsignedShortType:Um,VSMShadowMap:nl,Vector2:ze,Vector3:te,Vector4:kn,VectorKeyframeTrack:Ef,VideoFrameTexture:$Q,VideoTexture:e4,WebGL3DRenderTarget:xQ,WebGLArrayRenderTarget:yQ,WebGLCoordinateSystem:ol,WebGLCubeRenderTarget:bS,WebGLRenderTarget:ki,WebGLRenderer:UR,WebGLUtils:G4,WebGPUCoordinateSystem:Pv,WebXRController:wb,WireframeGeometry:u4,WrapAroundEnding:Lv,ZeroCurvatureEnding:td,ZeroFactor:uz,ZeroSlopeEnding:nd,ZeroStencilOp:EZ,createCanvasElement:Yz},Symbol.toStringTag,{value:"Module"}));var oE={exports:{}},Gc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZL;function gre(){return ZL||(ZL=1,Gc.ConcurrentRoot=1,Gc.ContinuousEventPriority=8,Gc.DefaultEventPriority=32,Gc.DiscreteEventPriority=2,Gc.IdleEventPriority=268435456,Gc.LegacyRoot=0,Gc.NoEventPriority=0),Gc}var QL;function vre(){return QL||(QL=1,oE.exports=gre()),oE.exports}var Bb=vre(),lE={exports:{}},cE={},uE={exports:{}},fE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $L;function yre(){if($L)return fE;$L=1;var n=Vm();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,s=n.useEffect,r=n.useLayoutEffect,a=n.useDebugValue;function l(g,v){var x=v(),A=i({inst:{value:x,getSnapshot:v}}),M=A[0].inst,_=A[1];return r(function(){M.value=x,M.getSnapshot=v,c(M)&&_({inst:M})},[g,x,v]),s(function(){return c(M)&&_({inst:M}),g(function(){c(M)&&_({inst:M})})},[g]),a(x),x}function c(g){var v=g.getSnapshot;g=g.value;try{var x=v();return!t(g,x)}catch{return!0}}function f(g,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return fE.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,fE}var eO;function xre(){return eO||(eO=1,uE.exports=yre()),uE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tO;function bre(){if(tO)return cE;tO=1;var n=Vm(),e=xre();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var i=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=n.useRef,a=n.useEffect,l=n.useMemo,c=n.useDebugValue;return cE.useSyncExternalStoreWithSelector=function(f,p,g,v,x){var A=r(null);if(A.current===null){var M={hasValue:!1,value:null};A.current=M}else M=A.current;A=l(function(){function S(L){if(!w){if(w=!0,C=L,L=v(L),x!==void 0&&M.hasValue){var F=M.value;if(x(F,L))return B=F}return B=L}if(F=B,i(C,L))return F;var P=v(L);return x!==void 0&&x(F,P)?(C=L,F):(C=L,B=P)}var w=!1,C,B,N=g===void 0?null:g;return[function(){return S(p())},N===null?void 0:function(){return S(N())}]},[p,g,v,x]);var _=s(f,A[0],A[1]);return a(function(){M.hasValue=!0,M.value=_},[_]),c(_),_},cE}var nO;function Are(){return nO||(nO=1,lE.exports=bre()),lE.exports}var Sre=Are();const _re=Yv(Sre),iO=n=>{let e;const t=new Set,i=(f,p)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const v=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(x=>x(e,v))}},s=()=>e,l={setState:i,getState:s,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=n(i,s,l);return l},Mre=n=>n?iO(n):iO,{useSyncExternalStoreWithSelector:Ere}=_re,Tre=n=>n;function Cre(n,e=Tre,t){const i=Ere(n.subscribe,n.getState,n.getInitialState,e,t);return sa.useDebugValue(i),i}const sO=(n,e)=>{const t=Mre(n),i=(s,r=e)=>Cre(t,s,r);return Object.assign(i,t),i},k4=(n,e)=>n?sO(n,e):sO;var hE={exports:{}},dE={exports:{}},pE={exports:{}},mE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rO;function wre(){return rO||(rO=1,function(n){function e(j,Q){var J=j.length;j.push(Q);e:for(;0<J;){var xe=J-1>>>1,Y=j[xe];if(0<s(Y,Q))j[xe]=Q,j[J]=Y,J=xe;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Q=j[0],J=j.pop();if(J!==Q){j[0]=J;e:for(var xe=0,Y=j.length,oe=Y>>>1;xe<oe;){var be=2*(xe+1)-1,_e=j[be],ue=be+1,Ue=j[ue];if(0>s(_e,J))ue<Y&&0>s(Ue,_e)?(j[xe]=Ue,j[ue]=J,xe=ue):(j[xe]=_e,j[be]=J,xe=be);else if(ue<Y&&0>s(Ue,J))j[xe]=Ue,j[ue]=J,xe=ue;else break e}}return Q}function s(j,Q){var J=j.sortIndex-Q.sortIndex;return J!==0?J:j.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,g=null,v=3,x=!1,A=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function C(j){for(var Q=t(f);Q!==null;){if(Q.callback===null)i(f);else if(Q.startTime<=j)i(f),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=t(f)}}function B(j){if(M=!1,C(j),!A)if(t(c)!==null)A=!0,$();else{var Q=t(f);Q!==null&&ae(B,Q.startTime-j)}}var N=!1,L=-1,F=5,P=-1;function U(){return!(n.unstable_now()-P<F)}function I(){if(N){var j=n.unstable_now();P=j;var Q=!0;try{e:{A=!1,M&&(M=!1,S(L),L=-1),x=!0;var J=v;try{t:{for(C(j),g=t(c);g!==null&&!(g.expirationTime>j&&U());){var xe=g.callback;if(typeof xe=="function"){g.callback=null,v=g.priorityLevel;var Y=xe(g.expirationTime<=j);if(j=n.unstable_now(),typeof Y=="function"){g.callback=Y,C(j),Q=!0;break t}g===t(c)&&i(c),C(j)}else i(c);g=t(c)}if(g!==null)Q=!0;else{var oe=t(f);oe!==null&&ae(B,oe.startTime-j),Q=!1}}break e}finally{g=null,v=J,x=!1}Q=void 0}}finally{Q?X():N=!1}}}var X;if(typeof w=="function")X=function(){w(I)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ee=re.port2;re.port1.onmessage=I,X=function(){ee.postMessage(null)}}else X=function(){_(I,0)};function $(){N||(N=!0,X())}function ae(j,Q){L=_(function(){j(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){A||x||(A=!0,$())},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var J=v;v=Q;try{return j()}finally{v=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var J=v;v=j;try{return Q()}finally{v=J}},n.unstable_scheduleCallback=function(j,Q,J){var xe=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?xe+J:xe):J=xe,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=J+Y,j={id:p++,callback:Q,priorityLevel:j,startTime:J,expirationTime:Y,sortIndex:-1},J>xe?(j.sortIndex=J,e(f,j),t(c)===null&&j===t(f)&&(M?(S(L),L=-1):M=!0,ae(B,J-xe))):(j.sortIndex=Y,e(c,j),A||x||(A=!0,$())),j},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(j){var Q=v;return function(){var J=v;v=Q;try{return j.apply(this,arguments)}finally{v=J}}}}(mE)),mE}var aO;function j4(){return aO||(aO=1,pE.exports=wre()),pE.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oO;function Rre(){return oO||(oO=1,function(n){n.exports=function(e){function t(h,d,b,T){return new Lg(h,d,b,T)}function i(){}function s(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)d+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(h){return h===null||typeof h!="object"?null:(h=Fo&&h[Fo]||h["@@iterator"],typeof h=="function"?h:null)}function a(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===Ig?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case Nl:return"Fragment";case ca:return"Portal";case tp:return"Profiler";case oh:return"StrictMode";case np:return"Suspense";case Mu:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case Ba:return(h.displayName||"Context")+".Provider";case Ug:return(h._context.displayName||"Context")+".Consumer";case ch:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case ip:return d=h.displayName||null,d!==null?d:a(h.type)||"Memo";case ua:d=h._payload,h=h._init;try{return a(h(d))}catch{}}return null}function l(h){if(Qa===void 0)try{throw Error()}catch(b){var d=b.stack.trim().match(/\n( *(at )?)/);Qa=d&&d[1]||"",zo=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qa+h+zo}function c(h,d){if(!h||gc)return"";gc=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(d){var Mt=function(){throw Error()};if(Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(fn){var Ct=fn}Reflect.construct(h,[],Mt)}else{try{Mt.call()}catch(fn){Ct=fn}h.call(Mt.prototype)}}else{try{throw Error()}catch(fn){Ct=fn}(Mt=h())&&typeof Mt.catch=="function"&&Mt.catch(function(){})}}catch(fn){if(fn&&Ct&&typeof fn.stack=="string")return[fn.stack,Ct.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=T.DetermineComponentFrameRoot(),K=O[0],he=O[1];if(K&&he){var Se=K.split(`
`),qe=he.split(`
`);for(D=T=0;T<Se.length&&!Se[T].includes("DetermineComponentFrameRoot");)T++;for(;D<qe.length&&!qe[D].includes("DetermineComponentFrameRoot");)D++;if(T===Se.length||D===qe.length)for(T=Se.length-1,D=qe.length-1;1<=T&&0<=D&&Se[T]!==qe[D];)D--;for(;1<=T&&0<=D;T--,D--)if(Se[T]!==qe[D]){if(T!==1||D!==1)do if(T--,D--,0>D||Se[T]!==qe[D]){var ut=`
`+Se[T].replace(" at new "," at ");return h.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",h.displayName)),ut}while(1<=T&&0<=D);break}}}finally{gc=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?l(b):""}function f(h){switch(h.tag){case 26:case 27:case 5:return l(h.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return h=c(h.type,!1),h;case 11:return h=c(h.type.render,!1),h;case 1:return h=c(h.type,!0),h;default:return""}}function p(h){try{var d="";do d+=f(h),h=h.return;while(h);return d}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function g(h){var d=h,b=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,(d.flags&4098)!==0&&(b=d.return),h=d.return;while(h)}return d.tag===3?b:null}function v(h){if(g(h)!==h)throw Error(s(188))}function x(h){var d=h.alternate;if(!d){if(d=g(h),d===null)throw Error(s(188));return d!==h?null:h}for(var b=h,T=d;;){var D=b.return;if(D===null)break;var O=D.alternate;if(O===null){if(T=D.return,T!==null){b=T;continue}break}if(D.child===O.child){for(O=D.child;O;){if(O===b)return v(D),h;if(O===T)return v(D),d;O=O.sibling}throw Error(s(188))}if(b.return!==T.return)b=D,T=O;else{for(var K=!1,he=D.child;he;){if(he===b){K=!0,b=D,T=O;break}if(he===T){K=!0,T=D,b=O;break}he=he.sibling}if(!K){for(he=O.child;he;){if(he===b){K=!0,b=O,T=D;break}if(he===T){K=!0,T=O,b=D;break}he=he.sibling}if(!K)throw Error(s(189))}}if(b.alternate!==T)throw Error(s(190))}if(b.tag!==3)throw Error(s(188));return b.stateNode.current===b?h:d}function A(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(d=A(h),d!==null)return d;h=h.sibling}return null}function M(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(d=M(h),d!==null))return d;h=h.sibling}return null}function _(h){return{current:h}}function S(h){0>ko||(h.current=qi[ko],qi[ko]=null,ko--)}function w(h,d){ko++,qi[ko]=h.current,h.current=d}function C(h){return h>>>=0,h===0?32:31-(Bx(h)/Dx|0)|0}function B(h){var d=h&42;if(d!==0)return d;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function N(h,d){var b=h.pendingLanes;if(b===0)return 0;var T=0,D=h.suspendedLanes,O=h.pingedLanes,K=h.warmLanes;h=h.finishedLanes!==0;var he=b&134217727;return he!==0?(b=he&~D,b!==0?T=B(b):(O&=he,O!==0?T=B(O):h||(K=he&~K,K!==0&&(T=B(K))))):(he=b&~D,he!==0?T=B(he):O!==0?T=B(O):h||(K=b&~K,K!==0&&(T=B(K)))),T===0?0:d!==0&&d!==T&&(d&D)===0&&(D=T&-T,K=d&-d,D>=K||D===32&&(K&4194176)!==0)?d:T}function L(h,d){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&d)===0}function F(h,d){switch(h){case 1:case 2:case 4:case 8:return d+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P(){var h=eo;return eo<<=1,(eo&4194176)===0&&(eo=128),h}function U(){var h=xc;return xc<<=1,(xc&62914560)===0&&(xc=4194304),h}function I(h){for(var d=[],b=0;31>b;b++)d.push(h);return d}function X(h,d){h.pendingLanes|=d,d!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function re(h,d,b,T,D,O){var K=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var he=h.entanglements,Se=h.expirationTimes,qe=h.hiddenUpdates;for(b=K&~b;0<b;){var ut=31-rr(b),Mt=1<<ut;he[ut]=0,Se[ut]=-1;var Ct=qe[ut];if(Ct!==null)for(qe[ut]=null,ut=0;ut<Ct.length;ut++){var fn=Ct[ut];fn!==null&&(fn.lane&=-536870913)}b&=~Mt}T!==0&&ee(h,T,0),O!==0&&D===0&&h.tag!==0&&(h.suspendedLanes|=O&~(K&~d))}function ee(h,d,b){h.pendingLanes|=d,h.suspendedLanes&=~d;var T=31-rr(d);h.entangledLanes|=d,h.entanglements[T]=h.entanglements[T]|1073741824|b&4194218}function $(h,d){var b=h.entangledLanes|=d;for(h=h.entanglements;b;){var T=31-rr(b),D=1<<T;D&d|h[T]&d&&(h[T]|=d),b&=~D}}function ae(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function j(h){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(Ki,h,void 0,(h.current.flags&128)===128)}catch{}}function Q(h){if(typeof Ox=="function"&&_s(h),_r&&typeof _r.setStrictMode=="function")try{_r.setStrictMode(Ki,h)}catch{}}function J(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}function xe(h,d){if(typeof h=="object"&&h!==null){var b=n0.get(h);return b!==void 0?b:(d={value:h,source:d,stack:p(d)},n0.set(h,d),d)}return{value:h,source:d,stack:p(d)}}function Y(h,d){bc[Ac++]=Lu,bc[Ac++]=Sc,Sc=h,Lu=d}function oe(h,d,b){zr[Hr++]=La,zr[Hr++]=Oa,zr[Hr++]=zl,zl=h;var T=La;h=Oa;var D=32-rr(T)-1;T&=~(1<<D),b+=1;var O=32-rr(d)+D;if(30<O){var K=D-D%5;O=(T&(1<<K)-1).toString(32),T>>=K,D-=K,La=1<<32-rr(d)+D|b<<D|T,Oa=O+h}else La=1<<O|b<<D|T,Oa=h}function be(h){h.return!==null&&(Y(h,1),oe(h,1,0))}function _e(h){for(;h===Sc;)Sc=bc[--Ac],bc[Ac]=null,Lu=bc[--Ac],bc[Ac]=null;for(;h===zl;)zl=zr[--Hr],zr[Hr]=null,Oa=zr[--Hr],zr[Hr]=null,La=zr[--Hr],zr[Hr]=null}function ue(h,d){w(to,d),w(Ou,h),w(us,null),h=Ky(d),S(us),w(us,h)}function Ue(){S(us),S(Ou),S(to)}function Be(h){h.memoizedState!==null&&w(_c,h);var d=us.current,b=wu(d,h.type);d!==b&&(w(Ou,h),w(us,b))}function He(h){Ou.current===h&&(S(us),S(Ou)),_c.current===h&&(S(_c),ir?Da._currentValue=Ol:Da._currentValue2=Ol)}function et(h){var d=Error(s(418,""));throw Ze(xe(d,h)),yh}function Lt(h,d){if(!Us)throw Error(s(175));bx(h.stateNode,h.type,h.memoizedProps,d,h)||et(h)}function _t(h){for(Ps=h.return;Ps;)switch(Ps.tag){case 3:case 27:Ms=!0;return;case 5:case 13:Ms=!1;return;default:Ps=Ps.return}}function jt(h){if(!Us||h!==Ps)return!1;if(!Fn)return _t(h),Fn=!0,!1;var d=!1;if(fi?h.tag!==3&&h.tag!==27&&(h.tag!==5||hp(h.type)&&!pn(h.type,h.memoizedProps))&&(d=!0):h.tag!==3&&(h.tag!==5||hp(h.type)&&!pn(h.type,h.memoizedProps))&&(d=!0),d&&Is&&et(h),_t(h),h.tag===13){if(!Us)throw Error(s(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));Is=Sx(h)}else Is=Ps?Qg(h.stateNode):null;return!0}function Ye(){Us&&(Is=Ps=null,Fn=!1)}function Ze(h){da===null?da=[h]:da.push(h)}function ie(){for(var h=Mc,d=Ua=Mc=0;d<h;){var b=pa[d];pa[d++]=null;var T=pa[d];pa[d++]=null;var D=pa[d];pa[d++]=null;var O=pa[d];if(pa[d++]=null,T!==null&&D!==null){var K=T.pending;K===null?D.next=D:(D.next=K.next,K.next=D),T.pending=D}O!==0&&lt(b,D,O)}}function Bt(h,d,b,T){pa[Mc++]=h,pa[Mc++]=d,pa[Mc++]=b,pa[Mc++]=T,Ua|=T,h.lanes|=T,h=h.alternate,h!==null&&(h.lanes|=T)}function it(h,d,b,T){return Bt(h,d,b,T),Ft(h)}function ft(h,d){return Bt(h,null,null,d),Ft(h)}function lt(h,d,b){h.lanes|=b;var T=h.alternate;T!==null&&(T.lanes|=b);for(var D=!1,O=h.return;O!==null;)O.childLanes|=b,T=O.alternate,T!==null&&(T.childLanes|=b),O.tag===22&&(h=O.stateNode,h===null||h._visibility&1||(D=!0)),h=O,O=O.return;D&&d!==null&&h.tag===3&&(O=h.stateNode,D=31-rr(b),O=O.hiddenUpdates,h=O[D],h===null?O[D]=[d]:h.push(d),d.lane=b|536870912)}function Ft(h){if(50<ku)throw ku=0,Cp=null,Error(s(185));for(var d=h.return;d!==null;)h=d,d=h.return;return h.tag===3?h.stateNode:null}function dt(h){h!==jo&&h.next===null&&(jo===null?xh=jo=h:jo=jo.next=h),yi=!0,Ec||(Ec=!0,je(W))}function ne(h,d){if(!i0&&yi){i0=!0;do for(var b=!1,T=xh;T!==null;){if(h!==0){var D=T.pendingLanes;if(D===0)var O=0;else{var K=T.suspendedLanes,he=T.pingedLanes;O=(1<<31-rr(42|h)+1)-1,O&=D&~(K&~he),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(b=!0,Qe(T,O))}else O=Dn,O=N(T,T===ni?O:0),(O&3)===0||L(T,O)||(b=!0,Qe(T,O));T=T.next}while(b);i0=!1}}function W(){yi=Ec=!1;var h=0;Uu!==0&&($y()&&(h=Uu),Uu=0);for(var d=ha(),b=null,T=xh;T!==null;){var D=T.next,O=Me(T,d);O===0?(T.next=null,b===null?xh=D:b.next=D,D===null&&(jo=b)):(b=T,(h!==0||(O&3)!==0)&&(yi=!0)),T=D}ne(h)}function Me(h,d){for(var b=h.suspendedLanes,T=h.pingedLanes,D=h.expirationTimes,O=h.pendingLanes&-62914561;0<O;){var K=31-rr(O),he=1<<K,Se=D[K];Se===-1?((he&b)===0||(he&T)!==0)&&(D[K]=F(he,d)):Se<=d&&(h.expiredLanes|=he),O&=~he}if(d=ni,b=Dn,b=N(h,h===d?b:0),T=h.callbackNode,b===0||h===d&&oi===2||h.cancelPendingCommit!==null)return T!==null&&T!==null&&gp(T),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||L(h,b)){if(d=b&-b,d===h.callbackPriority)return d;switch(T!==null&&gp(T),ae(b)){case 2:case 8:b=Lx;break;case 32:b=xp;break;case 268435456:b=r_;break;default:b=xp}return T=ke.bind(null,h),b=vh(b,T),h.callbackPriority=d,h.callbackNode=b,d}return T!==null&&T!==null&&gp(T),h.callbackPriority=2,h.callbackNode=null,2}function ke(h,d){var b=h.callbackNode;if(Ra()&&h.callbackNode!==b)return null;var T=Dn;return T=N(h,h===ni?T:0),T===0?null:(Cl(h,T,d),Me(h,ha()),h.callbackNode!=null&&h.callbackNode===b?ke.bind(null,h):null)}function Qe(h,d){if(Ra())return null;Cl(h,d,!0)}function je(h){Vg?Vo(function(){(Gn&6)!==0?vh(yp,h):h()}):vh(yp,h)}function gt(){return Uu===0&&(Uu=P()),Uu}function ct(h,d){if(Pu===null){var b=Pu=[];Tc=0,Gr=gt(),Cc={status:"pending",value:void 0,then:function(T){b.push(T)}}}return Tc++,d.then(ht,ht),d}function ht(){if(--Tc===0&&Pu!==null){Cc!==null&&(Cc.status="fulfilled");var h=Pu;Pu=null,Gr=0,Cc=null;for(var d=0;d<h.length;d++)(0,h[d])()}}function hn(h,d){var b=[],T={status:"pending",value:null,reason:null,then:function(D){b.push(D)}};return h.then(function(){T.status="fulfilled",T.value=d;for(var D=0;D<b.length;D++)(0,b[D])(d)},function(D){for(T.status="rejected",T.reason=D,D=0;D<b.length;D++)(0,b[D])(void 0)}),T}function st(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tt(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Rt(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function St(h,d,b){var T=h.updateQueue;if(T===null)return null;if(T=T.shared,(Gn&2)!==0){var D=T.pending;return D===null?d.next=d:(d.next=D.next,D.next=d),T.pending=d,d=Ft(h),lt(h,null,b),d}return Bt(h,T,d,b),Ft(h)}function mt(h,d,b){if(d=d.updateQueue,d!==null&&(d=d.shared,(b&4194176)!==0)){var T=d.lanes;T&=h.pendingLanes,b|=T,d.lanes=b,$(h,b)}}function me(h,d){var b=h.updateQueue,T=h.alternate;if(T!==null&&(T=T.updateQueue,b===T)){var D=null,O=null;if(b=b.firstBaseUpdate,b!==null){do{var K={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};O===null?D=O=K:O=O.next=K,b=b.next}while(b!==null);O===null?D=O=d:O=O.next=d}else D=O=d;b={baseState:T.baseState,firstBaseUpdate:D,lastBaseUpdate:O,shared:T.shared,callbacks:T.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=d:h.next=d,b.lastBaseUpdate=d}function Fe(){if(wc){var h=Cc;if(h!==null)throw h}}function rt(h,d,b,T){wc=!1;var D=h.updateQueue;Xo=!1;var O=D.firstBaseUpdate,K=D.lastBaseUpdate,he=D.shared.pending;if(he!==null){D.shared.pending=null;var Se=he,qe=Se.next;Se.next=null,K===null?O=qe:K.next=qe,K=Se;var ut=h.alternate;ut!==null&&(ut=ut.updateQueue,he=ut.lastBaseUpdate,he!==K&&(he===null?ut.firstBaseUpdate=qe:he.next=qe,ut.lastBaseUpdate=Se))}if(O!==null){var Mt=D.baseState;K=0,ut=qe=Se=null,he=O;do{var Ct=he.lane&-536870913,fn=Ct!==he.lane;if(fn?(Dn&Ct)===Ct:(T&Ct)===Ct){Ct!==0&&Ct===Gr&&(wc=!0),ut!==null&&(ut=ut.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var Kr=h,ql=he;Ct=d;var Kl=b;switch(ql.tag){case 1:if(Kr=ql.payload,typeof Kr=="function"){Mt=Kr.call(Kl,Mt,Ct);break e}Mt=Kr;break e;case 3:Kr.flags=Kr.flags&-65537|128;case 0:if(Kr=ql.payload,Ct=typeof Kr=="function"?Kr.call(Kl,Mt,Ct):Kr,Ct==null)break e;Mt=ep({},Mt,Ct);break e;case 2:Xo=!0}}Ct=he.callback,Ct!==null&&(h.flags|=64,fn&&(h.flags|=8192),fn=D.callbacks,fn===null?D.callbacks=[Ct]:fn.push(Ct))}else fn={lane:Ct,tag:he.tag,payload:he.payload,callback:he.callback,next:null},ut===null?(qe=ut=fn,Se=Mt):ut=ut.next=fn,K|=Ct;if(he=he.next,he===null){if(he=D.shared.pending,he===null)break;fn=he,he=fn.next,fn.next=null,D.lastBaseUpdate=fn,D.shared.pending=null}}while(!0);ut===null&&(Se=Mt),D.baseState=Se,D.firstBaseUpdate=qe,D.lastBaseUpdate=ut,O===null&&(D.shared.lanes=0),Wr|=K,h.lanes=K,h.memoizedState=Mt}}function de(h,d){if(typeof h!="function")throw Error(s(191,h));h.call(d)}function Ee(h,d){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)de(b[h],d)}function Oe(h,d){if(Mr(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var b=Object.keys(h),T=Object.keys(d);if(b.length!==T.length)return!1;for(T=0;T<b.length;T++){var D=b[T];if(!no.call(d,D)||!Mr(h[D],d[D]))return!1}return!0}function Xe(h){return h=h.status,h==="fulfilled"||h==="rejected"}function xt(){}function vt(h,d,b){switch(b=h[b],b===void 0?h.push(d):b!==d&&(d.then(xt,xt),d=b),d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Iu?Error(s(483)):h;default:if(typeof d.status=="string")d.then(xt,xt);else{if(h=ni,h!==null&&100<h.shellSuspendCounter)throw Error(s(482));h=d,h.status="pending",h.then(function(T){if(d.status==="pending"){var D=d;D.status="fulfilled",D.value=T}},function(T){if(d.status==="pending"){var D=d;D.status="rejected",D.reason=T}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Iu?Error(s(483)):h}throw Hl=d,Iu}}function Ht(){if(Hl===null)throw Error(s(459));var h=Hl;return Hl=null,h}function vn(h){var d=Vl;return Vl+=1,Gl===null&&(Gl=[]),vt(Gl,h,d)}function Yn(h,d){d=d.props.ref,h.ref=d!==void 0?d:null}function cn(h,d){throw d.$$typeof===QS?Error(s(525)):(h=Object.prototype.toString.call(d),Error(s(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h)))}function Ui(h){var d=h._init;return d(h._payload)}function vi(h){function d(De,ge){if(h){var Ie=De.deletions;Ie===null?(De.deletions=[ge],De.flags|=16):Ie.push(ge)}}function b(De,ge){if(!h)return null;for(;ge!==null;)d(De,ge),ge=ge.sibling;return null}function T(De){for(var ge=new Map;De!==null;)De.key!==null?ge.set(De.key,De):ge.set(De.index,De),De=De.sibling;return ge}function D(De,ge){return De=la(De,ge),De.index=0,De.sibling=null,De}function O(De,ge,Ie){return De.index=Ie,h?(Ie=De.alternate,Ie!==null?(Ie=Ie.index,Ie<ge?(De.flags|=33554434,ge):Ie):(De.flags|=33554434,ge)):(De.flags|=1048576,ge)}function K(De){return h&&De.alternate===null&&(De.flags|=33554434),De}function he(De,ge,Ie,ot){return ge===null||ge.tag!==6?(ge=Qd(Ie,De.mode,ot),ge.return=De,ge):(ge=D(ge,Ie),ge.return=De,ge)}function Se(De,ge,Ie,ot){var Gt=Ie.type;return Gt===Nl?ut(De,ge,Ie.props.children,ot,Ie.key):ge!==null&&(ge.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===ua&&Ui(Gt)===ge.type)?(ge=D(ge,Ie.props),Yn(ge,Ie),ge.return=De,ge):(ge=Za(Ie.type,Ie.key,Ie.props,null,De.mode,ot),Yn(ge,Ie),ge.return=De,ge)}function qe(De,ge,Ie,ot){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Ie.containerInfo||ge.stateNode.implementation!==Ie.implementation?(ge=Og(Ie,De.mode,ot),ge.return=De,ge):(ge=D(ge,Ie.children||[]),ge.return=De,ge)}function ut(De,ge,Ie,ot,Gt){return ge===null||ge.tag!==7?(ge=Ii(Ie,De.mode,ot,Gt),ge.return=De,ge):(ge=D(ge,Ie),ge.return=De,ge)}function Mt(De,ge,Ie){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=Qd(""+ge,De.mode,Ie),ge.return=De,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case ah:return Ie=Za(ge.type,ge.key,ge.props,null,De.mode,Ie),Yn(Ie,ge),Ie.return=De,Ie;case ca:return ge=Og(ge,De.mode,Ie),ge.return=De,ge;case ua:var ot=ge._init;return ge=ot(ge._payload),Mt(De,ge,Ie)}if(Eu(ge)||r(ge))return ge=Ii(ge,De.mode,Ie,null),ge.return=De,ge;if(typeof ge.then=="function")return Mt(De,vn(ge),Ie);if(ge.$$typeof===Ba)return Mt(De,Xf(De,ge),Ie);cn(De,ge)}return null}function Ct(De,ge,Ie,ot){var Gt=ge!==null?ge.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Gt!==null?null:he(De,ge,""+Ie,ot);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case ah:return Ie.key===Gt?Se(De,ge,Ie,ot):null;case ca:return Ie.key===Gt?qe(De,ge,Ie,ot):null;case ua:return Gt=Ie._init,Ie=Gt(Ie._payload),Ct(De,ge,Ie,ot)}if(Eu(Ie)||r(Ie))return Gt!==null?null:ut(De,ge,Ie,ot,null);if(typeof Ie.then=="function")return Ct(De,ge,vn(Ie),ot);if(Ie.$$typeof===Ba)return Ct(De,ge,Xf(De,Ie),ot);cn(De,Ie)}return null}function fn(De,ge,Ie,ot,Gt){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return De=De.get(Ie)||null,he(ge,De,""+ot,Gt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case ah:return De=De.get(ot.key===null?Ie:ot.key)||null,Se(ge,De,ot,Gt);case ca:return De=De.get(ot.key===null?Ie:ot.key)||null,qe(ge,De,ot,Gt);case ua:var Ei=ot._init;return ot=Ei(ot._payload),fn(De,ge,Ie,ot,Gt)}if(Eu(ot)||r(ot))return De=De.get(Ie)||null,ut(ge,De,ot,Gt,null);if(typeof ot.then=="function")return fn(De,ge,Ie,vn(ot),Gt);if(ot.$$typeof===Ba)return fn(De,ge,Ie,Xf(ge,ot),Gt);cn(ge,ot)}return null}function Kr(De,ge,Ie,ot){for(var Gt=null,Ei=null,sn=ge,qn=ge=0,Ji=null;sn!==null&&qn<Ie.length;qn++){sn.index>qn?(Ji=sn,sn=null):Ji=sn.sibling;var Rn=Ct(De,sn,Ie[qn],ot);if(Rn===null){sn===null&&(sn=Ji);break}h&&sn&&Rn.alternate===null&&d(De,sn),ge=O(Rn,ge,qn),Ei===null?Gt=Rn:Ei.sibling=Rn,Ei=Rn,sn=Ji}if(qn===Ie.length)return b(De,sn),Fn&&Y(De,qn),Gt;if(sn===null){for(;qn<Ie.length;qn++)sn=Mt(De,Ie[qn],ot),sn!==null&&(ge=O(sn,ge,qn),Ei===null?Gt=sn:Ei.sibling=sn,Ei=sn);return Fn&&Y(De,qn),Gt}for(sn=T(sn);qn<Ie.length;qn++)Ji=fn(sn,De,qn,Ie[qn],ot),Ji!==null&&(h&&Ji.alternate!==null&&sn.delete(Ji.key===null?qn:Ji.key),ge=O(Ji,ge,qn),Ei===null?Gt=Ji:Ei.sibling=Ji,Ei=Ji);return h&&sn.forEach(function(uo){return d(De,uo)}),Fn&&Y(De,qn),Gt}function ql(De,ge,Ie,ot){if(Ie==null)throw Error(s(151));for(var Gt=null,Ei=null,sn=ge,qn=ge=0,Ji=null,Rn=Ie.next();sn!==null&&!Rn.done;qn++,Rn=Ie.next()){sn.index>qn?(Ji=sn,sn=null):Ji=sn.sibling;var uo=Ct(De,sn,Rn.value,ot);if(uo===null){sn===null&&(sn=Ji);break}h&&sn&&uo.alternate===null&&d(De,sn),ge=O(uo,ge,qn),Ei===null?Gt=uo:Ei.sibling=uo,Ei=uo,sn=Ji}if(Rn.done)return b(De,sn),Fn&&Y(De,qn),Gt;if(sn===null){for(;!Rn.done;qn++,Rn=Ie.next())Rn=Mt(De,Rn.value,ot),Rn!==null&&(ge=O(Rn,ge,qn),Ei===null?Gt=Rn:Ei.sibling=Rn,Ei=Rn);return Fn&&Y(De,qn),Gt}for(sn=T(sn);!Rn.done;qn++,Rn=Ie.next())Rn=fn(sn,De,qn,Rn.value,ot),Rn!==null&&(h&&Rn.alternate!==null&&sn.delete(Rn.key===null?qn:Rn.key),ge=O(Rn,ge,qn),Ei===null?Gt=Rn:Ei.sibling=Rn,Ei=Rn);return h&&sn.forEach(function(wp){return d(De,wp)}),Fn&&Y(De,qn),Gt}function Kl(De,ge,Ie,ot){if(typeof Ie=="object"&&Ie!==null&&Ie.type===Nl&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case ah:e:{for(var Gt=Ie.key;ge!==null;){if(ge.key===Gt){if(Gt=Ie.type,Gt===Nl){if(ge.tag===7){b(De,ge.sibling),ot=D(ge,Ie.props.children),ot.return=De,De=ot;break e}}else if(ge.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===ua&&Ui(Gt)===ge.type){b(De,ge.sibling),ot=D(ge,Ie.props),Yn(ot,Ie),ot.return=De,De=ot;break e}b(De,ge);break}else d(De,ge);ge=ge.sibling}Ie.type===Nl?(ot=Ii(Ie.props.children,De.mode,ot,Ie.key),ot.return=De,De=ot):(ot=Za(Ie.type,Ie.key,Ie.props,null,De.mode,ot),Yn(ot,Ie),ot.return=De,De=ot)}return K(De);case ca:e:{for(Gt=Ie.key;ge!==null;){if(ge.key===Gt)if(ge.tag===4&&ge.stateNode.containerInfo===Ie.containerInfo&&ge.stateNode.implementation===Ie.implementation){b(De,ge.sibling),ot=D(ge,Ie.children||[]),ot.return=De,De=ot;break e}else{b(De,ge);break}else d(De,ge);ge=ge.sibling}ot=Og(Ie,De.mode,ot),ot.return=De,De=ot}return K(De);case ua:return Gt=Ie._init,Ie=Gt(Ie._payload),Kl(De,ge,Ie,ot)}if(Eu(Ie))return Kr(De,ge,Ie,ot);if(r(Ie)){if(Gt=r(Ie),typeof Gt!="function")throw Error(s(150));return Ie=Gt.call(Ie),ql(De,ge,Ie,ot)}if(typeof Ie.then=="function")return Kl(De,ge,vn(Ie),ot);if(Ie.$$typeof===Ba)return Kl(De,ge,Xf(De,Ie),ot);cn(De,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,ge!==null&&ge.tag===6?(b(De,ge.sibling),ot=D(ge,Ie),ot.return=De,De=ot):(b(De,ge),ot=Qd(Ie,De.mode,ot),ot.return=De,De=ot),K(De)):b(De,ge)}return function(De,ge,Ie,ot){try{Vl=0;var Gt=Kl(De,ge,Ie,ot);return Gl=null,Gt}catch(sn){if(sn===Iu)throw sn;var Ei=t(29,sn,null,De.mode);return Ei.lanes=ot,Ei.return=De,Ei}finally{}}}function Pi(h,d){h=Ws,w(Fu,h),w(xi,d),Ws=h|d.baseLanes}function ji(){w(Fu,Ws),w(xi,xi.current)}function Xi(){Ws=Fu.current,S(xi),S(Fu)}function ks(h){var d=h.alternate;w(fs,fs.current&1),w(Vr,h),hi===null&&(d===null||xi.current!==null||d.memoizedState!==null)&&(hi=h)}function Ca(h){if(h.tag===22){if(w(fs,fs.current),w(Vr,h),hi===null){var d=h.alternate;d!==null&&d.memoizedState!==null&&(hi=h)}}else Rs()}function Rs(){w(fs,fs.current),w(Vr,Vr.current)}function Kt(h){S(Vr),hi===h&&(hi=null),S(fs)}function gr(h){for(var d=h;d!==null;){if(d.tag===13){var b=d.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||cp(b)||up(b)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function $n(){throw Error(s(321))}function k(h,d){if(d===null)return!1;for(var b=0;b<d.length&&b<h.length;b++)if(!Mr(h[b],d[b]))return!1;return!0}function Z(h,d,b,T,D,O){return Yo=O,Sn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,nn.H=h===null||h.memoizedState===null?Xl:ar,jl=!1,O=b(T,D),jl=!1,Rc&&(O=Re(d,b,T,D)),pe(h),O}function pe(h){nn.H=Fi;var d=Jt!==null&&Jt.next!==null;if(Yo=0,Hn=Jt=Sn=null,ma=!1,Bc=0,Es=null,d)throw Error(s(300));h===null||di||(h=h.dependencies,h!==null&&jf(h)&&(di=!0))}function Re(h,d,b,T){Sn=h;var D=0;do{if(Rc&&(Es=null),Bc=0,Rc=!1,25<=D)throw Error(s(301));if(D+=1,Hn=Jt=null,h.updateQueue!=null){var O=h.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}nn.H=kr,O=d(b,T)}while(Rc);return O}function Ne(){var h=nn.H,d=h.useState()[0];return d=typeof d.then=="function"?le(d):d,h=h.useState()[0],(Jt!==null?Jt.memoizedState:null)!==h&&(Sn.flags|=1024),d}function Ge(){var h=bp!==0;return bp=0,h}function at(h,d,b){d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~b}function nt(h){if(ma){for(h=h.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}ma=!1}Yo=0,Hn=Jt=Sn=null,Rc=!1,Bc=bp=0,Es=null}function V(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?Sn.memoizedState=Hn=h:Hn=Hn.next=h,Hn}function se(){if(Jt===null){var h=Sn.alternate;h=h!==null?h.memoizedState:null}else h=Jt.next;var d=Hn===null?Sn.memoizedState:Hn.next;if(d!==null)Hn=d,Jt=h;else{if(h===null)throw Sn.alternate===null?Error(s(467)):Error(s(310));Jt=h,h={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Hn===null?Sn.memoizedState=Hn=h:Hn=Hn.next=h}return Hn}function le(h){var d=Bc;return Bc+=1,Es===null&&(Es=[]),h=vt(Es,h,d),d=Sn,(Hn===null?d.memoizedState:Hn.next)===null&&(d=d.alternate,nn.H=d===null||d.memoizedState===null?Xl:ar),h}function fe(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return le(h);if(h.$$typeof===Ba)return Ds(h)}throw Error(s(438,String(h)))}function ve(h){var d=null,b=Sn.updateQueue;if(b!==null&&(d=b.memoCache),d==null){var T=Sn.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(d={data:T.data.map(function(D){return D.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),b===null&&(b=Ap(),Sn.updateQueue=b),b.memoCache=d,b=d.data[d.index],b===void 0)for(b=d.data[d.index]=Array(h),T=0;T<h;T++)b[T]=qy;return d.index++,b}function Ce(h,d){return typeof d=="function"?d(h):d}function Ve(h){var d=se();return We(d,Jt,h)}function We(h,d,b){var T=h.queue;if(T===null)throw Error(s(311));T.lastRenderedReducer=b;var D=h.baseQueue,O=T.pending;if(O!==null){if(D!==null){var K=D.next;D.next=O.next,O.next=K}d.baseQueue=D=O,T.pending=null}if(O=h.baseState,D===null)h.memoizedState=O;else{d=D.next;var he=K=null,Se=null,qe=d,ut=!1;do{var Mt=qe.lane&-536870913;if(Mt!==qe.lane?(Dn&Mt)===Mt:(Yo&Mt)===Mt){var Ct=qe.revertLane;if(Ct===0)Se!==null&&(Se=Se.next={lane:0,revertLane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),Mt===Gr&&(ut=!0);else if((Yo&Ct)===Ct){qe=qe.next,Ct===Gr&&(ut=!0);continue}else Mt={lane:0,revertLane:qe.revertLane,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Se===null?(he=Se=Mt,K=O):Se=Se.next=Mt,Sn.lanes|=Ct,Wr|=Ct;Mt=qe.action,jl&&b(O,Mt),O=qe.hasEagerState?qe.eagerState:b(O,Mt)}else Ct={lane:Mt,revertLane:qe.revertLane,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Se===null?(he=Se=Ct,K=O):Se=Se.next=Ct,Sn.lanes|=Mt,Wr|=Mt;qe=qe.next}while(qe!==null&&qe!==d);if(Se===null?K=O:Se.next=he,!Mr(O,h.memoizedState)&&(di=!0,ut&&(b=Cc,b!==null)))throw b;h.memoizedState=O,h.baseState=K,h.baseQueue=Se,T.lastRenderedState=O}return D===null&&(T.lanes=0),[h.memoizedState,T.dispatch]}function tt(h){var d=se(),b=d.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=h;var T=b.dispatch,D=b.pending,O=d.memoizedState;if(D!==null){b.pending=null;var K=D=D.next;do O=h(O,K.action),K=K.next;while(K!==D);Mr(O,d.memoizedState)||(di=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),b.lastRenderedState=O}return[O,T]}function bt(h,d,b){var T=Sn,D=se(),O=Fn;if(O){if(b===void 0)throw Error(s(407));b=b()}else b=d();var K=!Mr((Jt||D).memoizedState,b);if(K&&(D.memoizedState=b,di=!0),D=D.queue,rg(Xt.bind(null,T,D,h),[h]),D.getSnapshot!==d||K||Hn!==null&&Hn.memoizedState.tag&1){if(T.flags|=2048,$s(9,At.bind(null,T,D,b,d),{destroy:void 0},null),ni===null)throw Error(s(349));O||(Yo&60)!==0||yt(T,d,b)}return b}function yt(h,d,b){h.flags|=16384,h={getSnapshot:d,value:b},d=Sn.updateQueue,d===null?(d=Ap(),Sn.updateQueue=d,d.stores=[h]):(b=d.stores,b===null?d.stores=[h]:b.push(h))}function At(h,d,b,T){d.value=b,d.getSnapshot=T,It(d)&&Ln(h)}function Xt(h,d,b){return b(function(){It(d)&&Ln(h)})}function It(h){var d=h.getSnapshot;h=h.value;try{var b=d();return!Mr(h,b)}catch{return!0}}function Ln(h){var d=ft(h,2);d!==null&&Ss(d,h,2)}function Dt(h){var d=V();if(typeof h=="function"){var b=h;if(h=b(),jl){Q(!0);try{b()}finally{Q(!1)}}}return d.memoizedState=d.baseState=h,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ce,lastRenderedState:h},d}function Vt(h,d,b,T){return h.baseState=b,We(h,Jt,typeof T=="function"?T:Ce)}function Nt(h,d,b,T,D){if(zf(h))throw Error(s(485));if(h=d.action,h!==null){var O={payload:D,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){O.listeners.push(K)}};nn.T!==null?b(!0):O.isTransition=!1,T(O),b=d.pending,b===null?(O.next=d.pending=O,ri(d,O)):(O.next=b.next,d.pending=b.next=O)}}function ri(h,d){var b=d.action,T=d.payload,D=h.state;if(d.isTransition){var O=nn.T,K={};nn.T=K;try{var he=b(D,T),Se=nn.S;Se!==null&&Se(K,he),tn(h,d,he)}catch(qe){ci(h,d,qe)}finally{nn.T=O}}else try{O=b(D,T),tn(h,d,O)}catch(qe){ci(h,d,qe)}}function tn(h,d,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(T){ln(h,d,T)},function(T){return ci(h,d,T)}):ln(h,d,b)}function ln(h,d,b){d.status="fulfilled",d.value=b,qt(d),h.state=b,d=h.pending,d!==null&&(b=d.next,b===d?h.pending=null:(b=b.next,d.next=b,ri(h,b)))}function ci(h,d,b){var T=h.pending;if(h.pending=null,T!==null){T=T.next;do d.status="rejected",d.reason=b,qt(d),d=d.next;while(d!==T)}h.action=null}function qt(h){h=h.listeners;for(var d=0;d<h.length;d++)(0,h[d])()}function An(h,d){return d}function yn(h,d){if(Fn){var b=ni.formState;if(b!==null){e:{var T=Sn;if(Fn){if(Is){var D=Zg(Is,Ms);if(D){Is=Qg(D),T=gx(D);break e}}et(T)}T=!1}T&&(d=b[0])}}b=V(),b.memoizedState=b.baseState=d,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:An,lastRenderedState:d},b.queue=T,b=cg.bind(null,Sn,T),T.dispatch=b,T=Dt(!1);var O=ou.bind(null,Sn,!1,T.queue);return T=V(),D={state:d,dispatch:null,action:h,pending:null},T.queue=D,b=Nt.bind(null,Sn,D,O,b),D.dispatch=b,T.memoizedState=h,[d,b,!1]}function _i(h){var d=se();return In(d,Jt,h)}function In(h,d,b){d=We(h,d,An)[0],h=Ve(Ce)[0],d=typeof d=="object"&&d!==null&&typeof d.then=="function"?le(d):d;var T=se(),D=T.queue,O=D.dispatch;return b!==T.memoizedState&&(Sn.flags|=2048,$s(9,ui.bind(null,D,b),{destroy:void 0},null)),[d,O,h]}function ui(h,d){h.action=d}function bs(h){var d=se(),b=Jt;if(b!==null)return In(d,b,h);se(),d=d.memoizedState,b=se();var T=b.queue.dispatch;return b.memoizedState=h,[d,T,!1]}function $s(h,d,b,T){return h={tag:h,create:d,inst:b,deps:T,next:null},d=Sn.updateQueue,d===null&&(d=Ap(),Sn.updateQueue=d),b=d.lastEffect,b===null?d.lastEffect=h.next=h:(T=b.next,b.next=h,h.next=T,d.lastEffect=h),h}function Wa(){return se().memoizedState}function Of(h,d,b,T){var D=V();Sn.flags|=h,D.memoizedState=$s(1|d,b,{destroy:void 0},T===void 0?null:T)}function Uf(h,d,b,T){var D=se();T=T===void 0?null:T;var O=D.memoizedState.inst;Jt!==null&&T!==null&&k(T,Jt.memoizedState.deps)?D.memoizedState=$s(d,b,O,T):(Sn.flags|=h,D.memoizedState=$s(1|d,b,O,T))}function Nd(h,d){Of(8390656,8,h,d)}function rg(h,d){Uf(2048,8,h,d)}function Ty(h,d){return Uf(4,2,h,d)}function Pf(h,d){return Uf(4,4,h,d)}function Ld(h,d){if(typeof d=="function"){h=h();var b=d(h);return function(){typeof b=="function"?b():d(null)}}if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function Od(h,d,b){b=b!=null?b.concat([h]):null,Uf(4,4,Ld.bind(null,d,h),b)}function vl(){}function hc(h,d){var b=se();d=d===void 0?null:d;var T=b.memoizedState;return d!==null&&k(d,T[1])?T[0]:(b.memoizedState=[h,d],h)}function ag(h,d){var b=se();d=d===void 0?null:d;var T=b.memoizedState;if(d!==null&&k(d,T[1]))return T[0];if(T=h(),jl){Q(!0);try{h()}finally{Q(!1)}}return b.memoizedState=[T,d],T}function If(h,d,b){return b===void 0||(Yo&1073741824)!==0?h.memoizedState=d:(h.memoizedState=b,h=wg(),Sn.lanes|=h,Wr|=h,b)}function og(h,d,b,T){return Mr(b,d)?b:xi.current!==null?(h=If(h,b,T),Mr(h,d)||(di=!0),h):(Yo&42)===0?(di=!0,h.memoizedState=b):(h=wg(),Sn.lanes|=h,Wr|=h,d)}function ru(h,d,b,T,D){var O=Go();Xs(O!==0&&8>O?O:8);var K=nn.T,he={};nn.T=he,ou(h,!1,d,b);try{var Se=D(),qe=nn.S;if(qe!==null&&qe(he,Se),Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var ut=hn(Se,T);yl(h,d,ut,Yi(h))}else yl(h,d,T,Yi(h))}catch(Mt){yl(h,d,{then:function(){},status:"rejected",reason:Mt},Yi())}finally{Xs(O),nn.T=K}}function qa(h){var d=h.memoizedState;if(d!==null)return d;d={memoizedState:Ol,baseState:Ol,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ce,lastRenderedState:Ol},next:null};var b={};return d.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ce,lastRenderedState:b},next:null},h.memoizedState=d,h=h.alternate,h!==null&&(h.memoizedState=d),d}function Ff(){return Ds(Da)}function au(){return se().memoizedState}function To(){return se().memoizedState}function lg(h){for(var d=h.return;d!==null;){switch(d.tag){case 24:case 3:var b=Yi();h=Rt(b);var T=St(d,h,b);T!==null&&(Ss(T,d,b),mt(T,d,b)),d={cache:Sl()},h.payload=d;return}d=d.return}}function Ud(h,d,b){var T=Yi();b={lane:T,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},zf(h)?er(d,b):(b=it(h,d,b,T),b!==null&&(Ss(b,h,T),xl(b,d,T)))}function cg(h,d,b){var T=Yi();yl(h,d,b,T)}function yl(h,d,b,T){var D={lane:T,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(zf(h))er(d,D);else{var O=h.alternate;if(h.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var K=d.lastRenderedState,he=O(K,b);if(D.hasEagerState=!0,D.eagerState=he,Mr(he,K))return Bt(h,d,D,0),ni===null&&ie(),!1}catch{}finally{}if(b=it(h,d,D,T),b!==null)return Ss(b,h,T),xl(b,d,T),!0}return!1}function ou(h,d,b,T){if(T={lane:2,revertLane:gt(),action:T,hasEagerState:!1,eagerState:null,next:null},zf(h)){if(d)throw Error(s(479))}else d=it(h,b,T,2),d!==null&&Ss(d,h,2)}function zf(h){var d=h.alternate;return h===Sn||d!==null&&d===Sn}function er(h,d){Rc=ma=!0;var b=h.pending;b===null?d.next=d:(d.next=b.next,b.next=d),h.pending=d}function xl(h,d,b){if((b&4194176)!==0){var T=d.lanes;T&=h.pendingLanes,b|=T,d.lanes=b,$(h,b)}}function lu(h,d,b,T){d=h.memoizedState,b=b(T,d),b=b==null?d:ep({},d,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}function cu(h,d,b,T,D,O,K){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(T,O,K):d.prototype&&d.prototype.isPureReactComponent?!Oe(b,T)||!Oe(D,O):!0}function Cy(h,d,b,T){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(b,T),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(b,T),d.state!==h&&so.enqueueReplaceState(d,d.state,null)}function Co(h,d){var b=d;if("ref"in d){b={};for(var T in d)T!=="ref"&&(b[T]=d[T])}if(h=h.defaultProps){b===d&&(b=ep({},b));for(var D in h)b[D]===void 0&&(b[D]=h[D])}return b}function uu(h,d){try{var b=h.onUncaughtError;b(d.value,{componentStack:d.stack})}catch(T){setTimeout(function(){throw T})}}function fu(h,d,b){try{var T=h.onCaughtError;T(b.value,{componentStack:b.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function hu(h,d,b){return b=Rt(b),b.tag=3,b.payload={element:null},b.callback=function(){uu(h,d)},b}function ug(h){return h=Rt(h),h.tag=3,h}function wy(h,d,b,T){var D=b.type.getDerivedStateFromError;if(typeof D=="function"){var O=T.value;h.payload=function(){return D(O)},h.callback=function(){fu(d,b,T)}}var K=b.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(h.callback=function(){fu(d,b,T),typeof D!="function"&&(Yl===null?Yl=new Set([this]):Yl.add(this));var he=T.stack;this.componentDidCatch(T.value,{componentStack:he!==null?he:""})})}function qS(h,d,b,T,D){if(b.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(d=b.alternate,d!==null&&kf(d,b,D,!0),b=Vr.current,b!==null){switch(b.tag){case 13:return hi===null?Uo():b.alternate===null&&pi===0&&(pi=3),b.flags&=-257,b.flags|=65536,b.lanes=D,T===Ah?b.flags|=16384:(d=b.updateQueue,d===null?b.updateQueue=new Set([T]):d.add(T),mc(h,T,D)),!1;case 22:return b.flags|=65536,T===Ah?b.flags|=16384:(d=b.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([T])},b.updateQueue=d):(b=d.retryQueue,b===null?d.retryQueue=new Set([T]):b.add(T)),mc(h,T,D)),!1}throw Error(s(435,b.tag))}return mc(h,T,D),Uo(),!1}if(Fn)return d=Vr.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=D,T!==yh&&(h=Error(s(422),{cause:T}),Ze(xe(h,b)))):(T!==yh&&(d=Error(s(423),{cause:T}),Ze(xe(d,b))),h=h.current.alternate,h.flags|=65536,D&=-D,h.lanes|=D,T=xe(T,b),D=hu(h.stateNode,T,D),me(h,D),pi!==4&&(pi=2)),!1;var O=Error(s(520),{cause:T});if(O=xe(O,b),Nc===null?Nc=[O]:Nc.push(O),pi!==4&&(pi=2),d===null)return!0;T=xe(T,b),b=d;do{switch(b.tag){case 3:return b.flags|=65536,h=D&-D,b.lanes|=h,h=hu(b.stateNode,T,h),me(b,h),!1;case 1:if(d=b.type,O=b.stateNode,(b.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Yl===null||!Yl.has(O))))return b.flags|=65536,D&=-D,b.lanes|=D,D=ug(D),wy(D,h,b,T),me(b,D),!1}b=b.return}while(b!==null);return!1}function Bs(h,d,b,T){d.child=h===null?io(d,null,b,T):kl(d,h.child,b,T)}function Pd(h,d,b,T,D){b=b.render;var O=d.ref;if("ref"in T){var K={};for(var he in T)he!=="ref"&&(K[he]=T[he])}else K=T;return Al(d),T=Z(h,d,b,K,O,D),he=Ge(),h!==null&&!di?(at(h,d,D),wo(h,d,D)):(Fn&&he&&be(d),d.flags|=1,Bs(h,d,T,D),d.child)}function Ry(h,d,b,T,D){if(h===null){var O=b.type;return typeof O=="function"&&!nh(O)&&O.defaultProps===void 0&&b.compare===null?(d.tag=15,d.type=O,By(h,d,O,T,D)):(h=Za(b.type,null,T,d,d.mode,D),h.ref=d.ref,h.return=d,d.child=h)}if(O=h.child,!mg(h,D)){var K=O.memoizedProps;if(b=b.compare,b=b!==null?b:Oe,b(K,T)&&h.ref===d.ref)return wo(h,d,D)}return d.flags|=1,h=la(O,T),h.ref=d.ref,h.return=d,d.child=h}function By(h,d,b,T,D){if(h!==null){var O=h.memoizedProps;if(Oe(O,T)&&h.ref===d.ref)if(di=!1,d.pendingProps=T=O,mg(h,D))(h.flags&131072)!==0&&(di=!0);else return d.lanes=h.lanes,wo(h,d,D)}return Id(h,d,b,T,D)}function Dy(h,d,b){var T=d.pendingProps,D=T.children,O=(d.stateNode._pendingVisibility&2)!==0,K=h!==null?h.memoizedState:null;if(Hf(h,d),T.mode==="hidden"||O){if((d.flags&128)!==0){if(T=K!==null?K.baseLanes|b:b,h!==null){for(D=d.child=h.child,O=0;D!==null;)O=O|D.lanes|D.childLanes,D=D.sibling;d.childLanes=O&~T}else d.childLanes=0,d.child=null;return Ny(h,d,T,b)}if((b&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},h!==null&&zd(d,K!==null?K.cachePool:null),K!==null?Pi(d,K):ji(),Ca(d);else return d.lanes=d.childLanes=536870912,Ny(h,d,K!==null?K.baseLanes|b:b,b)}else K!==null?(zd(d,K.cachePool),Pi(d,K),Rs(),d.memoizedState=null):(h!==null&&zd(d,null),ji(),Rs());return Bs(h,d,D,b),d.child}function Ny(h,d,b,T){var D=vg();return D=D===null?null:{parent:ir?bi._currentValue:bi._currentValue2,pool:D},d.memoizedState={baseLanes:b,cachePool:D},h!==null&&zd(d,null),ji(),Ca(d),h!==null&&kf(h,d,T,!0),null}function Hf(h,d){var b=d.ref;if(b===null)h!==null&&h.ref!==null&&(d.flags|=2097664);else{if(typeof b!="function"&&typeof b!="object")throw Error(s(284));(h===null||h.ref!==b)&&(d.flags|=2097664)}}function Id(h,d,b,T,D){return Al(d),b=Z(h,d,b,T,void 0,D),T=Ge(),h!==null&&!di?(at(h,d,D),wo(h,d,D)):(Fn&&T&&be(d),d.flags|=1,Bs(h,d,b,D),d.child)}function Ly(h,d,b,T,D,O){return Al(d),d.updateQueue=null,b=Re(d,T,b,D),pe(h),T=Ge(),h!==null&&!di?(at(h,d,O),wo(h,d,O)):(Fn&&T&&be(d),d.flags|=1,Bs(h,d,b,O),d.child)}function Oy(h,d,b,T,D){if(Al(d),d.stateNode===null){var O=Fl,K=b.contextType;typeof K=="object"&&K!==null&&(O=Ds(K)),O=new b(T,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=so,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=T,O.state=d.memoizedState,O.refs={},st(d),K=b.contextType,O.context=typeof K=="object"&&K!==null?Ds(K):Fl,O.state=d.memoizedState,K=b.getDerivedStateFromProps,typeof K=="function"&&(lu(d,b,K,T),O.state=d.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(K=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),K!==O.state&&so.enqueueReplaceState(O,O.state,null),rt(d,T,O,D),Fe(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),T=!0}else if(h===null){O=d.stateNode;var he=d.memoizedProps,Se=Co(b,he);O.props=Se;var qe=O.context,ut=b.contextType;K=Fl,typeof ut=="object"&&ut!==null&&(K=Ds(ut));var Mt=b.getDerivedStateFromProps;ut=typeof Mt=="function"||typeof O.getSnapshotBeforeUpdate=="function",he=d.pendingProps!==he,ut||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(he||qe!==K)&&Cy(d,O,T,K),Xo=!1;var Ct=d.memoizedState;O.state=Ct,rt(d,T,O,D),Fe(),qe=d.memoizedState,he||Ct!==qe||Xo?(typeof Mt=="function"&&(lu(d,b,Mt,T),qe=d.memoizedState),(Se=Xo||cu(d,b,Se,T,Ct,qe,K))?(ut||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=T,d.memoizedState=qe),O.props=T,O.state=qe,O.context=K,T=Se):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),T=!1)}else{O=d.stateNode,Tt(h,d),K=d.memoizedProps,ut=Co(b,K),O.props=ut,Mt=d.pendingProps,Ct=O.context,qe=b.contextType,Se=Fl,typeof qe=="object"&&qe!==null&&(Se=Ds(qe)),he=b.getDerivedStateFromProps,(qe=typeof he=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(K!==Mt||Ct!==Se)&&Cy(d,O,T,Se),Xo=!1,Ct=d.memoizedState,O.state=Ct,rt(d,T,O,D),Fe();var fn=d.memoizedState;K!==Mt||Ct!==fn||Xo||h!==null&&h.dependencies!==null&&jf(h.dependencies)?(typeof he=="function"&&(lu(d,b,he,T),fn=d.memoizedState),(ut=Xo||cu(d,b,ut,T,Ct,fn,Se)||h!==null&&h.dependencies!==null&&jf(h.dependencies))?(qe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(T,fn,Se),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(T,fn,Se)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||K===h.memoizedProps&&Ct===h.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&Ct===h.memoizedState||(d.flags|=1024),d.memoizedProps=T,d.memoizedState=fn),O.props=T,O.state=fn,O.context=Se,T=ut):(typeof O.componentDidUpdate!="function"||K===h.memoizedProps&&Ct===h.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&Ct===h.memoizedState||(d.flags|=1024),T=!1)}return O=T,Hf(h,d),T=(d.flags&128)!==0,O||T?(O=d.stateNode,b=T&&typeof b.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,h!==null&&T?(d.child=kl(d,h.child,null,D),d.child=kl(d,null,b,D)):Bs(h,d,b,D),d.memoizedState=O.state,h=d.child):h=wo(h,d,D),h}function Uy(h,d,b,T){return Ye(),d.flags|=256,Bs(h,d,b,T),d.child}function fg(h){return{baseLanes:h,cachePool:yg()}}function Gf(h,d,b){return h=h!==null?h.childLanes&~b:0,d&&(h|=qr),h}function Py(h,d,b){var T=d.pendingProps,D=!1,O=(d.flags&128)!==0,K;if((K=O)||(K=h!==null&&h.memoizedState===null?!1:(fs.current&2)!==0),K&&(D=!0,d.flags&=-129),K=(d.flags&32)!==0,d.flags&=-33,h===null){if(Fn){if(D?ks(d):Rs(),Fn){var he=Is,Se;(Se=he)&&(he=xx(he,Ms),he!==null?(d.memoizedState={dehydrated:he,treeContext:zl!==null?{id:La,overflow:Oa}:null,retryLane:536870912},Se=t(18,null,null,0),Se.stateNode=he,Se.return=d,d.child=Se,Ps=d,Is=null,Se=!0):Se=!1),Se||et(d)}if(he=d.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return up(he)?d.lanes=16:d.lanes=536870912,null;Kt(d)}return he=T.children,T=T.fallback,D?(Rs(),D=d.mode,he=dg({mode:"hidden",children:he},D),T=Ii(T,D,b,null),he.return=d,T.return=d,he.sibling=T,d.child=he,D=d.child,D.memoizedState=fg(b),D.childLanes=Gf(h,K,b),d.memoizedState=Mp,T):(ks(d),hg(d,he))}if(Se=h.memoizedState,Se!==null&&(he=Se.dehydrated,he!==null)){if(O)d.flags&256?(ks(d),d.flags&=-257,d=Fd(h,d,b)):d.memoizedState!==null?(Rs(),d.child=h.child,d.flags|=128,d=null):(Rs(),D=T.fallback,he=d.mode,T=dg({mode:"visible",children:T.children},he),D=Ii(D,he,b,null),D.flags|=2,T.return=d,D.return=d,T.sibling=D,d.child=T,kl(d,h.child,null,b),T=d.child,T.memoizedState=fg(b),T.childLanes=Gf(h,K,b),d.memoizedState=Mp,d=D);else if(ks(d),up(he))K=px(he).digest,T=Error(s(419)),T.stack="",T.digest=K,Ze({value:T,source:null,stack:null}),d=Fd(h,d,b);else if(di||kf(h,d,b,!1),K=(b&h.childLanes)!==0,di||K){if(K=ni,K!==null){if(T=b&-b,(T&42)!==0)T=1;else switch(T){case 2:T=1;break;case 8:T=4;break;case 32:T=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:T=64;break;case 268435456:T=134217728;break;default:T=0}if(T=(T&(K.suspendedLanes|b))!==0?0:T,T!==0&&T!==Se.retryLane)throw Se.retryLane=T,ft(h,T),Ss(K,h,T),_p}cp(he)||Uo(),d=Fd(h,d,b)}else cp(he)?(d.flags|=128,d.child=h.child,d=Po.bind(null,h),mx(he,d),d=null):(h=Se.treeContext,Us&&(Is=yx(he),Ps=d,Fn=!0,da=null,Ms=!1,h!==null&&(zr[Hr++]=La,zr[Hr++]=Oa,zr[Hr++]=zl,La=h.id,Oa=h.overflow,zl=d)),d=hg(d,T.children),d.flags|=4096);return d}return D?(Rs(),D=T.fallback,he=d.mode,Se=h.child,O=Se.sibling,T=la(Se,{mode:"hidden",children:T.children}),T.subtreeFlags=Se.subtreeFlags&31457280,O!==null?D=la(O,D):(D=Ii(D,he,b,null),D.flags|=2),D.return=d,T.return=d,T.sibling=D,d.child=T,T=D,D=d.child,he=h.child.memoizedState,he===null?he=fg(b):(Se=he.cachePool,Se!==null?(O=ir?bi._currentValue:bi._currentValue2,Se=Se.parent!==O?{parent:O,pool:O}:Se):Se=yg(),he={baseLanes:he.baseLanes|b,cachePool:Se}),D.memoizedState=he,D.childLanes=Gf(h,K,b),d.memoizedState=Mp,T):(ks(d),b=h.child,h=b.sibling,b=la(b,{mode:"visible",children:T.children}),b.return=d,b.sibling=null,h!==null&&(K=d.deletions,K===null?(d.deletions=[h],d.flags|=16):K.push(h)),d.child=b,d.memoizedState=null,b)}function hg(h,d){return d=dg({mode:"visible",children:d},h.mode),d.return=h,h.child=d}function dg(h,d){return sh(h,d,0,null)}function Fd(h,d,b){return kl(d,h.child,null,b),h=hg(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function Iy(h,d,b){h.lanes|=d;var T=h.alternate;T!==null&&(T.lanes|=d),Vf(h.return,d,b)}function pg(h,d,b,T,D){var O=h.memoizedState;O===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:T,tail:b,tailMode:D}:(O.isBackwards=d,O.rendering=null,O.renderingStartTime=0,O.last=T,O.tail=b,O.tailMode=D)}function Fy(h,d,b){var T=d.pendingProps,D=T.revealOrder,O=T.tail;if(Bs(h,d,T.children,b),T=fs.current,(T&2)!==0)T=T&1|2,d.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Iy(h,b,d);else if(h.tag===19)Iy(h,b,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}T&=1}switch(w(fs,T),D){case"forwards":for(b=d.child,D=null;b!==null;)h=b.alternate,h!==null&&gr(h)===null&&(D=b),b=b.sibling;b=D,b===null?(D=d.child,d.child=null):(D=b.sibling,b.sibling=null),pg(d,!1,D,b,O);break;case"backwards":for(b=null,D=d.child,d.child=null;D!==null;){if(h=D.alternate,h!==null&&gr(h)===null){d.child=D;break}h=D.sibling,D.sibling=b,b=D,D=h}pg(d,!0,b,null,O);break;case"together":pg(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function wo(h,d,b){if(h!==null&&(d.dependencies=h.dependencies),Wr|=d.lanes,(b&d.childLanes)===0)if(h!==null){if(kf(h,d,b,!1),(b&d.childLanes)===0)return null}else return null;if(h!==null&&d.child!==h.child)throw Error(s(153));if(d.child!==null){for(h=d.child,b=la(h,h.pendingProps),d.child=b,b.return=d;h.sibling!==null;)h=h.sibling,b=b.sibling=la(h,h.pendingProps),b.return=d;b.sibling=null}return d.child}function mg(h,d){return(h.lanes&d)!==0?!0:(h=h.dependencies,!!(h!==null&&jf(h)))}function KS(h,d,b){switch(d.tag){case 3:ue(d,d.stateNode.containerInfo),bl(d,bi,h.memoizedState.cache),Ye();break;case 27:case 5:Be(d);break;case 4:ue(d,d.stateNode.containerInfo);break;case 10:bl(d,d.type,d.memoizedProps.value);break;case 13:var T=d.memoizedState;if(T!==null)return T.dehydrated!==null?(ks(d),d.flags|=128,null):(b&d.child.childLanes)!==0?Py(h,d,b):(ks(d),h=wo(h,d,b),h!==null?h.sibling:null);ks(d);break;case 19:var D=(h.flags&128)!==0;if(T=(b&d.childLanes)!==0,T||(kf(h,d,b,!1),T=(b&d.childLanes)!==0),D){if(T)return Fy(h,d,b);d.flags|=128}if(D=d.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),w(fs,fs.current),T)break;return null;case 22:case 23:return d.lanes=0,Dy(h,d,b);case 24:bl(d,bi,h.memoizedState.cache)}return wo(h,d,b)}function zy(h,d,b){if(h!==null)if(h.memoizedProps!==d.pendingProps)di=!0;else{if(!mg(h,b)&&(d.flags&128)===0)return di=!1,KS(h,d,b);di=(h.flags&131072)!==0}else di=!1,Fn&&(d.flags&1048576)!==0&&oe(d,Lu,d.index);switch(d.lanes=0,d.tag){case 16:e:{h=d.pendingProps;var T=d.elementType,D=T._init;if(T=D(T._payload),d.type=T,typeof T=="function")nh(T)?(h=Co(T,h),d.tag=1,d=Oy(null,d,T,h,b)):(d.tag=0,d=Id(null,d,T,h,b));else{if(T!=null){if(D=T.$$typeof,D===ch){d.tag=11,d=Pd(null,d,T,h,b);break e}else if(D===ip){d.tag=14,d=Ry(null,d,T,h,b);break e}}throw d=a(T)||T,Error(s(306,d,""))}}return d;case 0:return Id(h,d,d.type,d.pendingProps,b);case 1:return T=d.type,D=Co(T,d.pendingProps),Oy(h,d,T,D,b);case 3:e:{if(ue(d,d.stateNode.containerInfo),h===null)throw Error(s(387));var O=d.pendingProps;D=d.memoizedState,T=D.element,Tt(h,d),rt(d,O,null,b);var K=d.memoizedState;if(O=K.cache,bl(d,bi,O),O!==D.cache&&dc(d,[bi],b,!0),Fe(),O=K.element,Us&&D.isDehydrated)if(D={element:O,isDehydrated:!1,cache:K.cache},d.updateQueue.baseState=D,d.memoizedState=D,d.flags&256){d=Uy(h,d,O,b);break e}else if(O!==T){T=xe(Error(s(424)),d),Ze(T),d=Uy(h,d,O,b);break e}else for(Us&&(Is=vx(d.stateNode.containerInfo),Ps=d,Fn=!0,da=null,Ms=!0),b=io(d,null,O,b),d.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Ye(),O===T){d=wo(h,d,b);break e}Bs(h,d,O,b)}d=d.child}return d;case 26:if(Fr)return Hf(h,d),h===null?(b=t0(d.type,null,d.pendingProps,null))?d.memoizedState=b:Fn||(d.stateNode=mp(d.type,d.pendingProps,to.current,d)):d.memoizedState=t0(d.type,h.memoizedProps,d.pendingProps,h.memoizedState),null;case 27:if(fi)return Be(d),h===null&&fi&&Fn&&(T=d.stateNode=Na(d.type,d.pendingProps,to.current,us.current,!1),Ps=d,Ms=!0,Is=fp(T)),T=d.pendingProps.children,h!==null||Fn?Bs(h,d,T,b):d.child=kl(d,null,T,b),Hf(h,d),d.child;case 5:return h===null&&Fn&&(dp(d.type,d.pendingProps,us.current),(D=T=Is)&&(T=n_(T,d.type,d.pendingProps,Ms),T!==null?(d.stateNode=T,Ps=d,Is=fp(T),Ms=!1,D=!0):D=!1),D||et(d)),Be(d),D=d.type,O=d.pendingProps,K=h!==null?h.memoizedProps:null,T=O.children,pn(D,O)?T=null:K!==null&&pn(D,K)&&(d.flags|=32),d.memoizedState!==null&&(D=Z(h,d,Ne,null,null,b),ir?Da._currentValue=D:Da._currentValue2=D),Hf(h,d),Bs(h,d,T,b),d.child;case 6:return h===null&&Fn&&(Mx(d.pendingProps,us.current),(h=b=Is)&&(b=$g(b,d.pendingProps,Ms),b!==null?(d.stateNode=b,Ps=d,Is=null,h=!0):h=!1),h||et(d)),null;case 13:return Py(h,d,b);case 4:return ue(d,d.stateNode.containerInfo),T=d.pendingProps,h===null?d.child=kl(d,null,T,b):Bs(h,d,T,b),d.child;case 11:return Pd(h,d,d.type,d.pendingProps,b);case 7:return Bs(h,d,d.pendingProps,b),d.child;case 8:return Bs(h,d,d.pendingProps.children,b),d.child;case 12:return Bs(h,d,d.pendingProps.children,b),d.child;case 10:return T=d.pendingProps,bl(d,d.type,T.value),Bs(h,d,T.children,b),d.child;case 9:return D=d.type._context,T=d.pendingProps.children,Al(d),D=Ds(D),T=T(D),d.flags|=1,Bs(h,d,T,b),d.child;case 14:return Ry(h,d,d.type,d.pendingProps,b);case 15:return By(h,d,d.type,d.pendingProps,b);case 19:return Fy(h,d,b);case 22:return Dy(h,d,b);case 24:return Al(d),T=Ds(bi),h===null?(D=vg(),D===null&&(D=ni,O=Sl(),D.pooledCache=O,O.refCount++,O!==null&&(D.pooledCacheLanes|=b),D=O),d.memoizedState={parent:T,cache:D},st(d),bl(d,bi,D)):((h.lanes&b)!==0&&(Tt(h,d),rt(d,null,null,b),Fe()),D=h.memoizedState,O=d.memoizedState,D.parent!==T?(D={parent:T,cache:T},d.memoizedState=D,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=D),bl(d,bi,T)):(T=O.cache,bl(d,bi,T),T!==D.cache&&dc(d,[bi],b,!0))),Bs(h,d,d.pendingProps.children,b),d.child;case 29:throw d.pendingProps}throw Error(s(156,d.tag))}function bl(h,d,b){ir?(w(Wo,d._currentValue),d._currentValue=b):(w(Wo,d._currentValue2),d._currentValue2=b)}function Ro(h){var d=Wo.current;ir?h._currentValue=d:h._currentValue2=d,S(Wo)}function Vf(h,d,b){for(;h!==null;){var T=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,T!==null&&(T.childLanes|=d)):T!==null&&(T.childLanes&d)!==d&&(T.childLanes|=d),h===b)break;h=h.return}}function dc(h,d,b,T){var D=h.child;for(D!==null&&(D.return=h);D!==null;){var O=D.dependencies;if(O!==null){var K=D.child;O=O.firstContext;e:for(;O!==null;){var he=O;O=D;for(var Se=0;Se<d.length;Se++)if(he.context===d[Se]){O.lanes|=b,he=O.alternate,he!==null&&(he.lanes|=b),Vf(O.return,b,h),T||(K=null);break e}O=he.next}}else if(D.tag===18){if(K=D.return,K===null)throw Error(s(341));K.lanes|=b,O=K.alternate,O!==null&&(O.lanes|=b),Vf(K,b,h),K=null}else K=D.child;if(K!==null)K.return=D;else for(K=D;K!==null;){if(K===h){K=null;break}if(D=K.sibling,D!==null){D.return=K.return,K=D;break}K=K.return}D=K}}function kf(h,d,b,T){h=null;for(var D=d,O=!1;D!==null;){if(!O){if((D.flags&524288)!==0)O=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var K=D.alternate;if(K===null)throw Error(s(387));if(K=K.memoizedProps,K!==null){var he=D.type;Mr(D.pendingProps.value,K.value)||(h!==null?h.push(he):h=[he])}}else if(D===_c.current){if(K=D.alternate,K===null)throw Error(s(387));K.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(h!==null?h.push(Da):h=[Da])}D=D.return}h!==null&&dc(d,h,b,T),d.flags|=262144}function jf(h){for(h=h.firstContext;h!==null;){var d=h.context;if(!Mr(ir?d._currentValue:d._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function Al(h){Ia=h,jr=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Ds(h){return gg(Ia,h)}function Xf(h,d){return Ia===null&&Al(h),gg(h,d)}function gg(h,d){var b=ir?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:b,next:null},jr===null){if(h===null)throw Error(s(308));jr=d,h.dependencies={lanes:0,firstContext:d},h.flags|=524288}else jr=jr.next=d;return b}function Sl(){return{controller:new zu,data:new Map,refCount:0}}function Yf(h){h.refCount--,h.refCount===0&&Ux(Px,function(){h.controller.abort()})}function vg(){var h=ro.current;return h!==null?h:ni.pooledCache}function zd(h,d){d===null?w(ro,ro.current):w(ro,d.pool)}function yg(){var h=vg();return h===null?null:{parent:ir?bi._currentValue:bi._currentValue2,pool:h}}function vr(h){h.flags|=4}function du(h,d){if(h!==null&&h.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(h=d.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function pc(h,d,b,T){if(cs)for(b=d.child;b!==null;){if(b.tag===5||b.tag===6)fh(h,b.stateNode);else if(!(b.tag===4||fi&&b.tag===27)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else if(fa)for(var D=d.child;D!==null;){if(D.tag===5){var O=D.stateNode;b&&T&&(O=Kg(O,D.type,D.memoizedProps)),fh(h,O)}else if(D.tag===6)O=D.stateNode,b&&T&&(O=Jg(O,D.memoizedProps)),fh(h,O);else if(D.tag!==4){if(D.tag===22&&D.memoizedState!==null)O=D.child,O!==null&&(O.return=D),pc(h,D,!0,!0);else if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===d)break;for(;D.sibling===null;){if(D.return===null||D.return===d)return;D=D.return}D.sibling.return=D.return,D=D.sibling}}function Hy(h,d,b,T){if(fa)for(var D=d.child;D!==null;){if(D.tag===5){var O=D.stateNode;b&&T&&(O=Kg(O,D.type,D.memoizedProps)),qg(h,O)}else if(D.tag===6)O=D.stateNode,b&&T&&(O=Jg(O,D.memoizedProps)),qg(h,O);else if(D.tag!==4){if(D.tag===22&&D.memoizedState!==null)O=D.child,O!==null&&(O.return=D),Hy(h,D,!(D.memoizedProps!==null&&D.memoizedProps.mode==="manual"),!0);else if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===d)break;for(;D.sibling===null;){if(D.return===null||D.return===d)return;D=D.return}D.sibling.return=D.return,D=D.sibling}}function Wf(h,d){if(fa&&du(h,d)){h=d.stateNode;var b=h.containerInfo,T=hh();Hy(T,d,!1,!1),h.pendingChildren=T,vr(d),lp(b,T)}}function Hd(h,d,b,T){if(cs)h.memoizedProps!==T&&vr(d);else if(fa){var D=h.stateNode,O=h.memoizedProps;if((h=du(h,d))||O!==T){var K=us.current;O=Bu(D,b,O,T,!h,null),O===D?d.stateNode=D:(Ho(O,b,T,K)&&vr(d),d.stateNode=O,h?pc(O,d,!1,!1):vr(d))}else d.stateNode=D}}function Gd(h,d,b){if(Hg(d,b)){if(h.flags|=16777216,!ap(d,b))if(wl())h.flags|=8192;else throw Hl=Ah,bh}else h.flags&=-16777217}function Vd(h,d){if(Cx(d)){if(h.flags|=16777216,!yc(d))if(wl())h.flags|=8192;else throw Hl=Ah,bh}else h.flags&=-16777217}function pu(h,d){d!==null&&(h.flags|=4),h.flags&16384&&(d=h.tag!==22?U():536870912,h.lanes|=d,lo|=d)}function mu(h,d){if(!Fn)switch(h.tailMode){case"hidden":d=h.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var T=null;b!==null;)b.alternate!==null&&(T=b),b=b.sibling;T===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:T.sibling=null}}function Ti(h){var d=h.alternate!==null&&h.alternate.child===h.child,b=0,T=0;if(d)for(var D=h.child;D!==null;)b|=D.lanes|D.childLanes,T|=D.subtreeFlags&31457280,T|=D.flags&31457280,D.return=h,D=D.sibling;else for(D=h.child;D!==null;)b|=D.lanes|D.childLanes,T|=D.subtreeFlags,T|=D.flags,D.return=h,D=D.sibling;return h.subtreeFlags|=T,h.childLanes=b,d}function Gy(h,d,b){var T=d.pendingProps;switch(_e(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(d),null;case 1:return Ti(d),null;case 3:return b=d.stateNode,T=null,h!==null&&(T=h.memoizedState.cache),d.memoizedState.cache!==T&&(d.flags|=2048),Ro(bi),Ue(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(jt(d)?vr(d):h===null||h.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,da!==null&&(eh(da),da=null))),Wf(h,d),Ti(d),null;case 26:if(Fr){b=d.type;var D=d.memoizedState;return h===null?(vr(d),D!==null?(Ti(d),Vd(d,D)):(Ti(d),Gd(d,b,T))):D?D!==h.memoizedState?(vr(d),Ti(d),Vd(d,D)):(Ti(d),d.flags&=-16777217):(cs?h.memoizedProps!==T&&vr(d):Hd(h,d,b,T),Ti(d),Gd(d,b,T)),null}case 27:if(fi){if(He(d),b=to.current,D=d.type,h!==null&&d.stateNode!=null)cs?h.memoizedProps!==T&&vr(d):Hd(h,d,D,T);else{if(!T){if(d.stateNode===null)throw Error(s(166));return Ti(d),null}h=us.current,jt(d)?Lt(d,h):(h=Na(D,T,b,h,!0),d.stateNode=h,vr(d))}return Ti(d),null}case 5:if(He(d),b=d.type,h!==null&&d.stateNode!=null)Hd(h,d,b,T);else{if(!T){if(d.stateNode===null)throw Error(s(166));return Ti(d),null}h=us.current,jt(d)?Lt(d,h):(D=zg(b,T,to.current,h,d),pc(D,d,!1,!1),d.stateNode=D,Ho(D,b,T,h)&&vr(d))}return Ti(d),Gd(d,d.type,d.pendingProps),null;case 6:if(h&&d.stateNode!=null)b=h.memoizedProps,cs?b!==T&&vr(d):fa&&(b!==T?(d.stateNode=ai(T,to.current,us.current,d),vr(d)):d.stateNode=h.stateNode);else{if(typeof T!="string"&&d.stateNode===null)throw Error(s(166));if(h=to.current,b=us.current,jt(d)){if(!Us)throw Error(s(176));if(h=d.stateNode,b=d.memoizedProps,T=null,D=Ps,D!==null)switch(D.tag){case 27:case 5:T=D.memoizedProps}e0(h,b,d,T)||et(d)}else d.stateNode=ai(T,h,b,d)}return Ti(d),null;case 13:if(T=d.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(D=jt(d),T!==null&&T.dehydrated!==null){if(h===null){if(!D)throw Error(s(318));if(!Us)throw Error(s(344));if(D=d.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(s(317));Ax(D,d)}else Ye(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ti(d),D=!1}else da!==null&&(eh(da),da=null),D=!0;if(!D)return d.flags&256?(Kt(d),d):(Kt(d),null)}if(Kt(d),(d.flags&128)!==0)return d.lanes=b,d;if(b=T!==null,h=h!==null&&h.memoizedState!==null,b){T=d.child,D=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(D=T.alternate.memoizedState.cachePool.pool);var O=null;T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(O=T.memoizedState.cachePool.pool),O!==D&&(T.flags|=2048)}return b!==h&&b&&(d.child.flags|=8192),pu(d,d.updateQueue),Ti(d),null;case 4:return Ue(),Wf(h,d),h===null&&Wi(d.stateNode.containerInfo),Ti(d),null;case 10:return Ro(d.type),Ti(d),null;case 19:if(S(fs),D=d.memoizedState,D===null)return Ti(d),null;if(T=(d.flags&128)!==0,O=D.rendering,O===null)if(T)mu(D,!1);else{if(pi!==0||h!==null&&(h.flags&128)!==0)for(h=d.child;h!==null;){if(O=gr(h),O!==null){for(d.flags|=128,mu(D,!1),h=O.updateQueue,d.updateQueue=h,pu(d,h),d.subtreeFlags=0,h=b,b=d.child;b!==null;)ih(b,h),b=b.sibling;return w(fs,fs.current&1|2),d.child}h=h.sibling}D.tail!==null&&ha()>Vu&&(d.flags|=128,T=!0,mu(D,!1),d.lanes=4194304)}else{if(!T)if(h=gr(O),h!==null){if(d.flags|=128,T=!0,h=h.updateQueue,d.updateQueue=h,pu(d,h),mu(D,!0),D.tail===null&&D.tailMode==="hidden"&&!O.alternate&&!Fn)return Ti(d),null}else 2*ha()-D.renderingStartTime>Vu&&b!==536870912&&(d.flags|=128,T=!0,mu(D,!1),d.lanes=4194304);D.isBackwards?(O.sibling=d.child,d.child=O):(h=D.last,h!==null?h.sibling=O:d.child=O,D.last=O)}return D.tail!==null?(d=D.tail,D.rendering=d,D.tail=d.sibling,D.renderingStartTime=ha(),d.sibling=null,h=fs.current,w(fs,T?h&1|2:h&1),d):(Ti(d),null);case 22:case 23:return Kt(d),Xi(),T=d.memoizedState!==null,h!==null?h.memoizedState!==null!==T&&(d.flags|=8192):T&&(d.flags|=8192),T?(b&536870912)!==0&&(d.flags&128)===0&&(Ti(d),d.subtreeFlags&6&&(d.flags|=8192)):Ti(d),b=d.updateQueue,b!==null&&pu(d,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),T=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),T!==b&&(d.flags|=2048),h!==null&&S(ro),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),Ro(bi),Ti(d),null;case 25:return null}throw Error(s(156,d.tag))}function JS(h,d){switch(_e(d),d.tag){case 1:return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return Ro(bi),Ue(),h=d.flags,(h&65536)!==0&&(h&128)===0?(d.flags=h&-65537|128,d):null;case 26:case 27:case 5:return He(d),null;case 13:if(Kt(d),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(s(340));Ye()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return S(fs),null;case 4:return Ue(),null;case 10:return Ro(d.type),null;case 22:case 23:return Kt(d),Xi(),h!==null&&S(ro),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 24:return Ro(bi),null;case 25:return null;default:return null}}function Vy(h,d){switch(_e(d),d.tag){case 3:Ro(bi),Ue();break;case 26:case 27:case 5:He(d);break;case 4:Ue();break;case 13:Kt(d);break;case 19:S(fs);break;case 10:Ro(d.type);break;case 22:case 23:Kt(d),Xi(),h!==null&&S(ro);break;case 24:Ro(bi)}}function qf(h,d){try{var b=d.updateQueue,T=b!==null?b.lastEffect:null;if(T!==null){var D=T.next;b=D;do{if((b.tag&h)===h){T=void 0;var O=b.create,K=b.inst;T=O(),K.destroy=T}b=b.next}while(b!==D)}}catch(he){ei(d,d.return,he)}}function _l(h,d,b){try{var T=d.updateQueue,D=T!==null?T.lastEffect:null;if(D!==null){var O=D.next;T=O;do{if((T.tag&h)===h){var K=T.inst,he=K.destroy;if(he!==void 0){K.destroy=void 0,D=d;var Se=b;try{he()}catch(qe){ei(D,Se,qe)}}}T=T.next}while(T!==O)}}catch(qe){ei(d,d.return,qe)}}function ky(h){var d=h.updateQueue;if(d!==null){var b=h.stateNode;try{Ee(d,b)}catch(T){ei(h,h.return,T)}}}function yr(h,d,b){b.props=Co(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(T){ei(h,d,T)}}function wa(h,d){try{var b=h.ref;if(b!==null){var T=h.stateNode;switch(h.tag){case 26:case 27:case 5:var D=Cu(T);break;default:D=T}typeof b=="function"?h.refCleanup=b(D):b.current=D}}catch(O){ei(h,d,O)}}function xr(h,d){var b=h.ref,T=h.refCleanup;if(b!==null)if(typeof T=="function")try{T()}catch(D){ei(h,d,D)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(D){ei(h,d,D)}else b.current=null}function xg(h){var d=h.type,b=h.memoizedProps,T=h.stateNode;try{e_(T,d,b,h)}catch(D){ei(h,h.return,D)}}function bg(h,d,b){try{ax(h.stateNode,h.type,b,d,h)}catch(T){ei(h,h.return,T)}}function Ag(h){return h.tag===5||h.tag===3||(Fr?h.tag===26:!1)||(fi?h.tag===27:!1)||h.tag===4}function Kf(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Ag(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!fi||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Sg(h,d,b){var T=h.tag;if(T===5||T===6)h=h.stateNode,d?lx(b,h,d):Xg(b,h);else if(!(T===4||fi&&T===27)&&(h=h.child,h!==null))for(Sg(h,d,b),h=h.sibling;h!==null;)Sg(h,d,b),h=h.sibling}function Bo(h,d,b){var T=h.tag;if(T===5||T===6)h=h.stateNode,d?ox(b,h,d):sx(b,h);else if(!(T===4||fi&&T===27)&&(h=h.child,h!==null))for(Bo(h,d,b),h=h.sibling;h!==null;)Bo(h,d,b),h=h.sibling}function kd(h,d,b){h=h.containerInfo;try{Du(h,b)}catch(T){ei(d,d.return,T)}}function Jf(h,d){for(sp(h.containerInfo),un=d;un!==null;)if(h=un,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,un=d;else for(;un!==null;){h=un;var b=h.alternate;switch(d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&b!==null){d=void 0;var T=h,D=b.memoizedProps;b=b.memoizedState;var O=T.stateNode;try{var K=Co(T.type,D,T.elementType===T.type);d=O.getSnapshotBeforeUpdate(K,b),O.__reactInternalSnapshotBeforeUpdate=d}catch(he){ei(T,T.return,he)}}break;case 3:(d&1024)!==0&&cs&&dx(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(s(163))}if(d=h.sibling,d!==null){d.return=h.return,un=d;break}un=h.return}return K=Cn,Cn=!1,K}function jd(h,d,b){var T=b.flags;switch(b.tag){case 0:case 11:case 15:No(h,b),T&4&&qf(5,b);break;case 1:if(No(h,b),T&4)if(h=b.stateNode,d===null)try{h.componentDidMount()}catch(he){ei(b,b.return,he)}else{var D=Co(b.type,d.memoizedProps);d=d.memoizedState;try{h.componentDidUpdate(D,d,h.__reactInternalSnapshotBeforeUpdate)}catch(he){ei(b,b.return,he)}}T&64&&ky(b),T&512&&wa(b,b.return);break;case 3:if(No(h,b),T&64&&(T=b.updateQueue,T!==null)){if(h=null,b.child!==null)switch(b.child.tag){case 27:case 5:h=Cu(b.child.stateNode);break;case 1:h=b.child.stateNode}try{Ee(T,h)}catch(he){ei(b,b.return,he)}}break;case 26:if(Fr){No(h,b),T&512&&wa(b,b.return);break}case 27:case 5:No(h,b),d===null&&T&4&&xg(b),T&512&&wa(b,b.return);break;case 12:No(h,b);break;case 13:No(h,b),T&4&&Xd(h,b);break;case 22:if(D=b.memoizedState!==null||ao,!D){d=d!==null&&d.memoizedState!==null||zi;var O=ao,K=zi;ao=D,(zi=d)&&!K?Lo(h,b,(b.subtreeFlags&8772)!==0):No(h,b),ao=O,zi=K}T&512&&(b.memoizedProps.mode==="manual"?wa(b,b.return):xr(b,b.return));break;default:No(h,b)}}function _g(h){var d=h.alternate;d!==null&&(h.alternate=null,_g(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&$S(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Ns(h,d,b){for(b=b.child;b!==null;)Ml(h,d,b),b=b.sibling}function Ml(h,d,b){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(Ki,b)}catch{}switch(b.tag){case 26:if(Fr){zi||xr(b,d),Ns(h,d,b),b.memoizedState?vc(b.memoizedState):b.stateNode&&Nu(b.stateNode);break}case 27:if(fi){zi||xr(b,d);var T=Yt,D=xn;Yt=b.stateNode,Ns(h,d,b),Il(b.stateNode),Yt=T,xn=D;break}case 5:zi||xr(b,d);case 6:if(cs){if(T=Yt,D=xn,Yt=null,Ns(h,d,b),Yt=T,xn=D,Yt!==null)if(xn)try{cx(Yt,b.stateNode)}catch(O){ei(b,d,O)}else try{Yg(Yt,b.stateNode)}catch(O){ei(b,d,O)}}else Ns(h,d,b);break;case 18:cs&&Yt!==null&&(xn?dh(Yt,b.stateNode):_x(Yt,b.stateNode));break;case 4:cs?(T=Yt,D=xn,Yt=b.stateNode.containerInfo,xn=!0,Ns(h,d,b),Yt=T,xn=D):(fa&&kd(b.stateNode,b,hh()),Ns(h,d,b));break;case 0:case 11:case 14:case 15:zi||_l(2,b,d),zi||_l(4,b,d),Ns(h,d,b);break;case 1:zi||(xr(b,d),T=b.stateNode,typeof T.componentWillUnmount=="function"&&yr(b,d,T)),Ns(h,d,b);break;case 21:Ns(h,d,b);break;case 22:zi||xr(b,d),zi=(T=zi)||b.memoizedState!==null,Ns(h,d,b),zi=T;break;default:Ns(h,d,b)}}function Xd(h,d){if(Us&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{s_(h)}catch(b){ei(d,d.return,b)}}function jy(h){switch(h.tag){case 13:case 19:var d=h.stateNode;return d===null&&(d=h.stateNode=new ti),d;case 22:return h=h.stateNode,d=h._retryCache,d===null&&(d=h._retryCache=new ti),d;default:throw Error(s(435,h.tag))}}function Do(h,d){var b=jy(h);d.forEach(function(T){var D=Dl.bind(null,h,T);b.has(T)||(b.add(T),T.then(D,D))})}function tr(h,d){var b=d.deletions;if(b!==null)for(var T=0;T<b.length;T++){var D=b[T],O=h,K=d;if(cs){var he=K;e:for(;he!==null;){switch(he.tag){case 27:case 5:Yt=he.stateNode,xn=!1;break e;case 3:Yt=he.stateNode.containerInfo,xn=!0;break e;case 4:Yt=he.stateNode.containerInfo,xn=!0;break e}he=he.return}if(Yt===null)throw Error(s(160));Ml(O,K,D),Yt=null,xn=!1}else Ml(O,K,D);O=D.alternate,O!==null&&(O.return=null),D.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)Mg(d,h),d=d.sibling}function Mg(h,d){var b=h.alternate,T=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:tr(d,h),br(h),T&4&&(_l(3,h,h.return),qf(3,h),_l(5,h,h.return));break;case 1:tr(d,h),br(h),T&512&&(zi||b===null||xr(b,b.return)),T&64&&ao&&(h=h.updateQueue,h!==null&&(T=h.callbacks,T!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?T:b.concat(T))));break;case 26:if(Fr){var D=Bi;tr(d,h),br(h),T&512&&(zi||b===null||xr(b,b.return)),T&4&&(T=b!==null?b.memoizedState:null,d=h.memoizedState,b===null?d===null?h.stateNode===null?h.stateNode=mh(D,h.type,h.memoizedProps,h):gh(D,h.type,h.stateNode):h.stateNode=Ex(D,d,h.memoizedProps):T!==d?(T===null?b.stateNode!==null&&Nu(b.stateNode):vc(T),d===null?gh(D,h.type,h.stateNode):Ex(D,d,h.memoizedProps)):d===null&&h.stateNode!==null&&bg(h,h.memoizedProps,b.memoizedProps));break}case 27:if(fi&&T&4&&h.alternate===null){D=h.stateNode;var O=h.memoizedProps;try{Pl(D),Rx(h.type,O,D,h)}catch(ut){ei(h,h.return,ut)}}case 5:if(tr(d,h),br(h),T&512&&(zi||b===null||xr(b,b.return)),cs){if(h.flags&32){d=h.stateNode;try{Wg(d)}catch(ut){ei(h,h.return,ut)}}T&4&&h.stateNode!=null&&(d=h.memoizedProps,bg(h,d,b!==null?b.memoizedProps:d)),T&1024&&(r0=!0)}break;case 6:if(tr(d,h),br(h),T&4&&cs){if(h.stateNode===null)throw Error(s(162));T=h.memoizedProps,b=b!==null?b.memoizedProps:T,d=h.stateNode;try{rx(d,b,T)}catch(ut){ei(h,h.return,ut)}}break;case 3:if(Fr?(Tx(),D=Bi,Bi=pp(d.containerInfo),tr(d,h),Bi=D):tr(d,h),br(h),T&4){if(cs&&Us&&b!==null&&b.memoizedState.isDehydrated)try{i_(d.containerInfo)}catch(ut){ei(h,h.return,ut)}if(fa){T=d.containerInfo,b=d.pendingChildren;try{Du(T,b)}catch(ut){ei(h,h.return,ut)}}}r0&&(r0=!1,Xy(h));break;case 4:Fr?(b=Bi,Bi=pp(h.stateNode.containerInfo),tr(d,h),br(h),Bi=b):(tr(d,h),br(h)),T&4&&fa&&kd(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:tr(d,h),br(h);break;case 13:tr(d,h),br(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(or=ha()),T&4&&(T=h.updateQueue,T!==null&&(h.updateQueue=null,Do(h,T)));break;case 22:T&512&&(zi||b===null||xr(b,b.return)),D=h.memoizedState!==null;var K=b!==null&&b.memoizedState!==null,he=ao,Se=zi;if(ao=he||D,zi=Se||K,tr(d,h),zi=Se,ao=he,br(h),d=h.stateNode,d._current=h,d._visibility&=-3,d._visibility|=d._pendingVisibility&2,T&8192&&(d._visibility=D?d._visibility&-2:d._visibility|1,D&&(d=ao||zi,b===null||K||d||gu(h)),cs&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){e:if(b=null,cs)for(d=h;;){if(d.tag===5||Fr&&d.tag===26||fi&&d.tag===27){if(b===null){K=b=d;try{O=K.stateNode,D?ux(O):hx(K.stateNode,K.memoizedProps)}catch(ut){ei(K,K.return,ut)}}}else if(d.tag===6){if(b===null){K=d;try{var qe=K.stateNode;D?fx(qe):t_(qe,K.memoizedProps)}catch(ut){ei(K,K.return,ut)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===h)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;b===d&&(b=null),d=d.return}b===d&&(b=null),d.sibling.return=d.return,d=d.sibling}}T&4&&(T=h.updateQueue,T!==null&&(b=T.retryQueue,b!==null&&(T.retryQueue=null,Do(h,b))));break;case 19:tr(d,h),br(h),T&4&&(T=h.updateQueue,T!==null&&(h.updateQueue=null,Do(h,T)));break;case 21:break;default:tr(d,h),br(h)}}function br(h){var d=h.flags;if(d&2){try{if(cs&&(!fi||h.tag!==27)){e:{for(var b=h.return;b!==null;){if(Ag(b)){var T=b;break e}b=b.return}throw Error(s(160))}switch(T.tag){case 27:if(fi){var D=T.stateNode,O=Kf(h);Bo(h,O,D);break}case 5:var K=T.stateNode;T.flags&32&&(Wg(K),T.flags&=-33);var he=Kf(h);Bo(h,he,K);break;case 3:case 4:var Se=T.stateNode.containerInfo,qe=Kf(h);Sg(h,qe,Se);break;default:throw Error(s(161))}}}catch(ut){ei(h,h.return,ut)}h.flags&=-3}d&4096&&(h.flags&=-4097)}function Xy(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var d=h;Xy(d),d.tag===5&&d.flags&1024&&op(d.stateNode),h=h.sibling}}function No(h,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)jd(h,d.alternate,d),d=d.sibling}function gu(h){for(h=h.child;h!==null;){var d=h;switch(d.tag){case 0:case 11:case 14:case 15:_l(4,d,d.return),gu(d);break;case 1:xr(d,d.return);var b=d.stateNode;typeof b.componentWillUnmount=="function"&&yr(d,d.return,b),gu(d);break;case 26:case 27:case 5:xr(d,d.return),gu(d);break;case 22:xr(d,d.return),d.memoizedState===null&&gu(d);break;default:gu(d)}h=h.sibling}}function Lo(h,d,b){for(b=b&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var T=d.alternate,D=h,O=d,K=O.flags;switch(O.tag){case 0:case 11:case 15:Lo(D,O,b),qf(4,O);break;case 1:if(Lo(D,O,b),T=O,D=T.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(qe){ei(T,T.return,qe)}if(T=O,D=T.updateQueue,D!==null){var he=T.stateNode;try{var Se=D.shared.hiddenCallbacks;if(Se!==null)for(D.shared.hiddenCallbacks=null,D=0;D<Se.length;D++)de(Se[D],he)}catch(qe){ei(T,T.return,qe)}}b&&K&64&&ky(O),wa(O,O.return);break;case 26:case 27:case 5:Lo(D,O,b),b&&T===null&&K&4&&xg(O),wa(O,O.return);break;case 12:Lo(D,O,b);break;case 13:Lo(D,O,b),b&&K&4&&Xd(D,O);break;case 22:O.memoizedState===null&&Lo(D,O,b),wa(O,O.return);break;default:Lo(D,O,b)}d=d.sibling}}function Yd(h,d){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(h=d.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&Yf(b))}function Zf(h,d){h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Yf(h))}function As(h,d,b,T){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Eg(h,d,b,T),d=d.sibling}function Eg(h,d,b,T){var D=d.flags;switch(d.tag){case 0:case 11:case 15:As(h,d,b,T),D&2048&&qf(9,d);break;case 3:As(h,d,b,T),D&2048&&(h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Yf(h)));break;case 12:if(D&2048){As(h,d,b,T),h=d.stateNode;try{var O=d.memoizedProps,K=O.id,he=O.onPostCommit;typeof he=="function"&&he(K,d.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Se){ei(d,d.return,Se)}}else As(h,d,b,T);break;case 23:break;case 22:O=d.stateNode,d.memoizedState!==null?O._visibility&4?As(h,d,b,T):js(h,d):O._visibility&4?As(h,d,b,T):(O._visibility|=4,Ls(h,d,b,T,(d.subtreeFlags&10256)!==0)),D&2048&&Yd(d.alternate,d);break;case 24:As(h,d,b,T),D&2048&&Zf(d.alternate,d);break;default:As(h,d,b,T)}}function Ls(h,d,b,T,D){for(D=D&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var O=h,K=d,he=b,Se=T,qe=K.flags;switch(K.tag){case 0:case 11:case 15:Ls(O,K,he,Se,D),qf(8,K);break;case 23:break;case 22:var ut=K.stateNode;K.memoizedState!==null?ut._visibility&4?Ls(O,K,he,Se,D):js(O,K):(ut._visibility|=4,Ls(O,K,he,Se,D)),D&&qe&2048&&Yd(K.alternate,K);break;case 24:Ls(O,K,he,Se,D),D&&qe&2048&&Zf(K.alternate,K);break;default:Ls(O,K,he,Se,D)}d=d.sibling}}function js(h,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var b=h,T=d,D=T.flags;switch(T.tag){case 22:js(b,T),D&2048&&Yd(T.alternate,T);break;case 24:js(b,T),D&2048&&Zf(T.alternate,T);break;default:js(b,T)}d=d.sibling}}function aa(h){if(h.subtreeFlags&Xr)for(h=h.child;h!==null;)Wd(h),h=h.sibling}function Wd(h){switch(h.tag){case 26:aa(h),h.flags&Xr&&(h.memoizedState!==null?wx(Bi,h.memoizedState,h.memoizedProps):sr(h.type,h.memoizedProps));break;case 5:aa(h),h.flags&Xr&&sr(h.type,h.memoizedProps);break;case 3:case 4:if(Fr){var d=Bi;Bi=pp(h.stateNode.containerInfo),aa(h),Bi=d}else aa(h);break;case 22:h.memoizedState===null&&(d=h.alternate,d!==null&&d.memoizedState!==null?(d=Xr,Xr=16777216,aa(h),Xr=d):aa(h));break;default:aa(h)}}function Qf(h){var d=h.alternate;if(d!==null&&(h=d.child,h!==null)){d.child=null;do d=h.sibling,h.sibling=null,h=d;while(h!==null)}}function El(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var T=d[b];un=T,Tg(T,h)}Qf(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)qd(h),h=h.sibling}function qd(h){switch(h.tag){case 0:case 11:case 15:El(h),h.flags&2048&&_l(9,h,h.return);break;case 3:El(h);break;case 12:El(h);break;case 22:var d=h.stateNode;h.memoizedState!==null&&d._visibility&4&&(h.return===null||h.return.tag!==13)?(d._visibility&=-5,Oo(h)):El(h);break;default:El(h)}}function Oo(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var T=d[b];un=T,Tg(T,h)}Qf(h)}for(h=h.child;h!==null;){switch(d=h,d.tag){case 0:case 11:case 15:_l(8,d,d.return),Oo(d);break;case 22:b=d.stateNode,b._visibility&4&&(b._visibility&=-5,Oo(d));break;default:Oo(d)}h=h.sibling}}function Tg(h,d){for(;un!==null;){var b=un;switch(b.tag){case 0:case 11:case 15:_l(8,b,d);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var T=b.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:Yf(b.memoizedState.cache)}if(T=b.child,T!==null)T.return=b,un=T;else e:for(b=h;un!==null;){T=un;var D=T.sibling,O=T.return;if(_g(T),T===b){un=null;break e}if(D!==null){D.return=O,un=D;break e}un=O}}}function vu(h){var d=Zy(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(s(364));return d}if(h=kg(h),h===null)throw Error(s(362));return h.stateNode.current}function Tl(h,d){var b=h.tag;switch(d.$$typeof){case Gu:if(h.type===d.value)return!0;break;case ga:e:{for(d=d.value,h=[h,0],b=0;b<h.length;){var T=h[b++],D=T.tag,O=h[b++],K=d[O];if(D!==5&&D!==26&&D!==27||!Ru(T)){for(;K!=null&&Tl(T,K);)O++,K=d[O];if(O===d.length){d=!0;break e}else for(T=T.child;T!==null;)h.push(T,O),T=T.sibling}}d=!1}return d;case Mi:if((b===5||b===26||b===27)&&tx(h.stateNode,d.value))return!0;break;case oo:if((b===5||b===6||b===26||b===27)&&(h=ex(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case Fa:if((b===5||b===26||b===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Cg(h){switch(h.$$typeof){case Gu:return"<"+(a(h.value)||"Unknown")+">";case ga:return":has("+(Cg(h)||"")+")";case Mi:return'[role="'+h.value+'"]';case oo:return'"'+h.value+'"';case Fa:return'[data-testname="'+h.value+'"]';default:throw Error(s(365))}}function Ar(h,d){var b=[];h=[h,0];for(var T=0;T<h.length;){var D=h[T++],O=D.tag,K=h[T++],he=d[K];if(O!==5&&O!==26&&O!==27||!Ru(D)){for(;he!=null&&Tl(D,he);)K++,he=d[K];if(K===d.length)b.push(D);else for(D=D.child;D!==null;)h.push(D,K),D=D.sibling}}return b}function $f(h,d){if(!Ul)throw Error(s(363));h=vu(h),h=Ar(h,d),d=[],h=Array.from(h);for(var b=0;b<h.length;){var T=h[b++],D=T.tag;if(D===5||D===26||D===27)Ru(T)||d.push(T.stateNode);else for(T=T.child;T!==null;)h.push(T),T=T.sibling}return d}function Yi(){if((Gn&2)!==0&&Dn!==0)return Dn&-Dn;if(nn.T!==null){var h=Gr;return h!==0?h:gt()}return Qy()}function wg(){qr===0&&(qr=(Dn&536870912)===0||Fn?P():536870912);var h=Vr.current;return h!==null&&(h.flags|=32),qr}function Ss(h,d,b){(h===ni&&oi===2||h.cancelPendingCommit!==null)&&(Os(h,0),Sr(h,Dn,qr,!1)),X(h,b),((Gn&2)===0||h!==ni)&&(h===ni&&((Gn&2)===0&&(qo|=b),pi===4&&Sr(h,Dn,qr,!1)),dt(h))}function Cl(h,d,b){if((Gn&6)!==0)throw Error(s(327));var T=!b&&(d&60)===0&&(d&h.expiredLanes)===0||L(h,d),D=T?Bg(h,d):Jd(h,d,!0),O=T;do{if(D===0){Yr&&!T&&Sr(h,d,0,!1);break}else if(D===6)Sr(h,d,0,!ya);else{if(b=h.current.alternate,O&&!yu(b)){D=Jd(h,d,!1),O=!1;continue}if(D===2){if(O=d,h.errorRecoveryDisabledLanes&O)var K=0;else K=h.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){d=K;e:{var he=h;D=Nc;var Se=Us&&he.current.memoizedState.isDehydrated;if(Se&&(Os(he,K).flags|=256),K=Jd(he,K,!1),K!==2){if(hs&&!Se){he.errorRecoveryDisabledLanes|=O,qo|=O,D=4;break e}O=Hi,Hi=D,O!==null&&eh(O)}D=K}if(O=!1,D!==2)continue}}if(D===1){Os(h,0),Sr(h,d,0,!0);break}e:{switch(T=h,D){case 0:case 1:throw Error(s(345));case 4:if((d&4194176)===d){Sr(T,d,qr,!ya);break e}break;case 2:Hi=null;break;case 3:case 5:break;default:throw Error(s(329))}if(T.finishedWork=b,T.finishedLanes=d,(d&62914560)===d&&(O=or+300-ha(),10<O)){if(Sr(T,d,qr,!ya),N(T,0)!==0)break e;T.timeoutHandle=ss(Kd.bind(null,T,b,Hi,_h,Ep,d,qr,qo,lo,ya,2,-0,0),O);break e}Kd(T,b,Hi,_h,Ep,d,qr,qo,lo,ya,0,-0,0)}}break}while(!0);dt(h)}function eh(h){Hi===null?Hi=h:Hi.push.apply(Hi,h)}function Kd(h,d,b,T,D,O,K,he,Se,qe,ut,Mt,Ct){var fn=d.subtreeFlags;if((fn&8192||(fn&16785408)===16785408)&&(Gg(),Wd(d),d=rs(),d!==null)){h.cancelPendingCommit=d(Rl.bind(null,h,b,T,D,K,he,Se,1,Mt,Ct)),Sr(h,O,K,!qe);return}Rl(h,b,T,D,K,he,Se,ut,Mt,Ct)}function yu(h){for(var d=h;;){var b=d.tag;if((b===0||b===11||b===15)&&d.flags&16384&&(b=d.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var T=0;T<b.length;T++){var D=b[T],O=D.getSnapshot;D=D.value;try{if(!Mr(O(),D))return!1}catch{return!1}}if(b=d.child,d.subtreeFlags&16384&&b!==null)b.return=d,d=b;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Sr(h,d,b,T){d&=~Sh,d&=~qo,h.suspendedLanes|=d,h.pingedLanes&=~d,T&&(h.warmLanes|=d),T=h.expirationTimes;for(var D=d;0<D;){var O=31-rr(D),K=1<<O;T[O]=-1,D&=~K}b!==0&&ee(h,b,d)}function th(){return(Gn&6)===0?(ne(0),!1):!0}function xu(){if(Zt!==null){if(oi===0)var h=Zt.return;else h=Zt,jr=Ia=null,nt(h),Gl=null,Vl=0,h=Zt;for(;h!==null;)Vy(h.alternate,h),h=h.return;Zt=null}}function Os(h,d){h.finishedWork=null,h.finishedLanes=0;var b=h.timeoutHandle;b!==Ll&&(h.timeoutHandle=Ll,rp(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),xu(),ni=h,Zt=b=la(h.current,null),Dn=d,oi=0,Ys=null,ya=!1,Yr=L(h,d),hs=!1,lo=qr=Sh=qo=Wr=pi=0,Hi=Nc=null,Ep=!1,(d&8)!==0&&(d|=d&32);var T=h.entangledLanes;if(T!==0)for(h=h.entanglements,T&=d;0<T;){var D=31-rr(T),O=1<<D;d|=h[D],T&=~O}return Ws=d,ie(),b}function Ur(h,d){Sn=null,nn.H=Fi,d===Iu?(d=Ht(),oi=3):d===bh?(d=Ht(),oi=4):oi=d===_p?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Ys=d,Zt===null&&(pi=1,uu(h,xe(d,h.current)))}function wl(){var h=Vr.current;return h===null?!0:(Dn&4194176)===Dn?hi===null:(Dn&62914560)===Dn||(Dn&536870912)!==0?h===hi:!1}function Ka(){var h=nn.H;return nn.H=Fi,h===null?Fi:h}function Ja(){var h=nn.A;return nn.A=Hu,h}function Uo(){pi=4,ya||(Dn&4194176)!==Dn&&Vr.current!==null||(Yr=!0),(Wr&134217727)===0&&(qo&134217727)===0||ni===null||Sr(ni,Dn,qr,!1)}function Jd(h,d,b){var T=Gn;Gn|=2;var D=Ka(),O=Ja();(ni!==h||Dn!==d)&&(_h=null,Os(h,d)),d=!1;var K=pi;e:do try{if(oi!==0&&Zt!==null){var he=Zt,Se=Ys;switch(oi){case 8:xu(),K=6;break e;case 3:case 2:case 6:Vr.current===null&&(d=!0);var qe=oi;if(oi=0,Ys=null,oa(h,he,Se,qe),b&&Yr){K=0;break e}break;default:qe=oi,oi=0,Ys=null,oa(h,he,Se,qe)}}Rg(),K=pi;break}catch(ut){Ur(h,ut)}while(!0);return d&&h.shellSuspendCounter++,jr=Ia=null,Gn=T,nn.H=D,nn.A=O,Zt===null&&(ni=null,Dn=0,ie()),K}function Rg(){for(;Zt!==null;)Ri(Zt)}function Bg(h,d){var b=Gn;Gn|=2;var T=Ka(),D=Ja();ni!==h||Dn!==d?(_h=null,Vu=ha()+500,Os(h,d)):Yr=L(h,d);e:do try{if(oi!==0&&Zt!==null){d=Zt;var O=Ys;t:switch(oi){case 1:oi=0,Ys=null,oa(h,d,O,1);break;case 2:if(Xe(O)){oi=0,Ys=null,Wn(d);break}d=function(){oi===2&&ni===h&&(oi=7),dt(h)},O.then(d,d);break e;case 3:oi=7;break e;case 4:oi=5;break e;case 7:Xe(O)?(oi=0,Ys=null,Wn(d)):(oi=0,Ys=null,oa(h,d,O,7));break;case 5:var K=null;switch(Zt.tag){case 26:K=Zt.memoizedState;case 5:case 27:var he=Zt,Se=he.type,qe=he.pendingProps;if(K?yc(K):ap(Se,qe)){oi=0,Ys=null;var ut=he.sibling;if(ut!==null)Zt=ut;else{var Mt=he.return;Mt!==null?(Zt=Mt,Pr(Mt)):Zt=null}break t}}oi=0,Ys=null,oa(h,d,O,5);break;case 6:oi=0,Ys=null,oa(h,d,O,6);break;case 8:xu(),pi=6;break e;default:throw Error(s(462))}}nr();break}catch(Ct){Ur(h,Ct)}while(!0);return jr=Ia=null,nn.H=T,nn.A=D,Gn=b,Zt!==null?0:(ni=null,Dn=0,ie(),pi)}function nr(){for(;Zt!==null&&!Nx();)Ri(Zt)}function Ri(h){var d=zy(h.alternate,h,Ws);h.memoizedProps=h.pendingProps,d===null?Pr(h):Zt=d}function Wn(h){var d=h,b=d.alternate;switch(d.tag){case 15:case 0:d=Ly(b,d,d.pendingProps,d.type,void 0,Dn);break;case 11:d=Ly(b,d,d.pendingProps,d.type.render,d.ref,Dn);break;case 5:nt(d);default:Vy(b,d),d=Zt=ih(d,Ws),d=zy(b,d,Ws)}h.memoizedProps=h.pendingProps,d===null?Pr(h):Zt=d}function oa(h,d,b,T){jr=Ia=null,nt(d),Gl=null,Vl=0;var D=d.return;try{if(qS(h,D,d,b,Dn)){pi=1,uu(h,xe(b,h.current)),Zt=null;return}}catch(O){if(D!==null)throw Zt=D,O;pi=1,uu(h,xe(b,h.current)),Zt=null;return}d.flags&32768?(Fn||T===1?h=!0:Yr||(Dn&536870912)!==0?h=!1:(ya=h=!0,(T===2||T===3||T===6)&&(T=Vr.current,T!==null&&T.tag===13&&(T.flags|=16384))),Zd(d,h)):Pr(d)}function Pr(h){var d=h;do{if((d.flags&32768)!==0){Zd(d,ya);return}h=d.return;var b=Gy(d.alternate,d,Ws);if(b!==null){Zt=b;return}if(d=d.sibling,d!==null){Zt=d;return}Zt=d=h}while(d!==null);pi===0&&(pi=5)}function Zd(h,d){do{var b=JS(h.alternate,h);if(b!==null){b.flags&=32767,Zt=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!d&&(h=h.sibling,h!==null)){Zt=h;return}Zt=h=b}while(h!==null);pi=6,Zt=null}function Rl(h,d,b,T,D,O,K,he,Se,qe){var ut=nn.T,Mt=Go();try{Xs(2),nn.T=null,Yy(h,d,b,T,Mt,D,O,K,he,Se,qe)}finally{nn.T=ut,Xs(Mt)}}function Yy(h,d,b,T,D,O,K,he){do Ra();while(co!==null);if((Gn&6)!==0)throw Error(s(327));var Se=h.finishedWork;if(T=h.finishedLanes,Se===null)return null;if(h.finishedWork=null,h.finishedLanes=0,Se===h.current)throw Error(s(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var qe=Se.lanes|Se.childLanes;if(qe|=Ua,re(h,T,qe,O,K,he),h===ni&&(Zt=ni=null,Dn=0),(Se.subtreeFlags&10256)===0&&(Se.flags&10256)===0||za||(za=!0,Wl=qe,Tp=b,Io(xp,function(){return Ra(),null})),b=(Se.flags&15990)!==0,(Se.subtreeFlags&15990)!==0||b?(b=nn.T,nn.T=null,O=Go(),Xs(2),K=Gn,Gn|=4,Jf(h,Se),Mg(Se,h),Jy(h.containerInfo),h.current=Se,jd(h,Se.alternate,Se),vp(),Gn=K,Xs(O),nn.T=b):h.current=Se,za?(za=!1,co=h,Lc=T):Dg(h,qe),qe=h.pendingLanes,qe===0&&(Yl=null),j(Se.stateNode),dt(h),d!==null)for(D=h.onRecoverableError,Se=0;Se<d.length;Se++)qe=d[Se],D(qe.value,{componentStack:qe.stack});return(Lc&3)!==0&&Ra(),qe=h.pendingLanes,(T&4194218)!==0&&(qe&42)!==0?h===Cp?ku++:(ku=0,Cp=h):ku=0,ne(0),null}function Dg(h,d){(h.pooledCacheLanes&=d)===0&&(d=h.pooledCache,d!=null&&(h.pooledCache=null,Yf(d)))}function Ra(){if(co!==null){var h=co,d=Wl;Wl=0;var b=ae(Lc),T=32>b?32:b;b=nn.T;var D=Go();try{if(Xs(T),nn.T=null,co===null)var O=!1;else{T=Tp,Tp=null;var K=co,he=Lc;if(co=null,Lc=0,(Gn&6)!==0)throw Error(s(331));var Se=Gn;if(Gn|=4,qd(K.current),Eg(K,K.current,he,T),Gn=Se,ne(0,!1),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(Ki,K)}catch{}O=!0}return O}finally{Xs(D),nn.T=b,Dg(h,d)}}return!1}function bu(h,d,b){d=xe(b,d),d=hu(h.stateNode,d,2),h=St(h,d,2),h!==null&&(X(h,2),dt(h))}function ei(h,d,b){if(h.tag===3)bu(h,h,b);else for(;d!==null;){if(d.tag===3){bu(d,h,b);break}else if(d.tag===1){var T=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Yl===null||!Yl.has(T))){h=xe(b,h),b=ug(2),T=St(d,b,2),T!==null&&(wy(b,T,d,h),X(T,2),dt(T));break}}d=d.return}}function mc(h,d,b){var T=h.pingCache;if(T===null){T=h.pingCache=new va;var D=new Set;T.set(d,D)}else D=T.get(d),D===void 0&&(D=new Set,T.set(d,D));D.has(b)||(hs=!0,D.add(b),h=Ng.bind(null,h,d,b),d.then(h,h))}function Ng(h,d,b){var T=h.pingCache;T!==null&&T.delete(d),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,ni===h&&(Dn&b)===b&&(pi===4||pi===3&&(Dn&62914560)===Dn&&300>ha()-or?(Gn&2)===0&&Os(h,0):Sh|=b,lo===Dn&&(lo=0)),dt(h)}function Bl(h,d){d===0&&(d=U()),h=ft(h,d),h!==null&&(X(h,d),dt(h))}function Po(h){var d=h.memoizedState,b=0;d!==null&&(b=d.retryLane),Bl(h,b)}function Dl(h,d){var b=0;switch(h.tag){case 13:var T=h.stateNode,D=h.memoizedState;D!==null&&(b=D.retryLane);break;case 19:T=h.stateNode;break;case 22:T=h.stateNode._retryCache;break;default:throw Error(s(314))}T!==null&&T.delete(d),Bl(h,b)}function Io(h,d){return vh(h,d)}function Lg(h,d,b,T){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(h){return h=h.prototype,!(!h||!h.isReactComponent)}function la(h,d){var b=h.alternate;return b===null?(b=t(h.tag,d,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=d,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&31457280,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,d=h.dependencies,b.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function ih(h,d){h.flags&=31457282;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=d,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,d=b.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),h}function Za(h,d,b,T,D,O){var K=0;if(T=h,typeof h=="function")nh(h)&&(K=1);else if(typeof h=="string")K=Fr&&fi?ph(h,b,us.current)?26:$a(h)?27:5:Fr?ph(h,b,us.current)?26:5:fi&&$a(h)?27:5;else e:switch(h){case Nl:return Ii(b.children,D,O,d);case oh:K=8,D|=24;break;case tp:return h=t(12,b,d,D|2),h.elementType=tp,h.lanes=O,h;case np:return h=t(13,b,d,D),h.elementType=np,h.lanes=O,h;case Mu:return h=t(19,b,d,D),h.elementType=Mu,h.lanes=O,h;case Pg:return sh(b,D,O,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case lh:case Ba:K=10;break e;case Ug:K=9;break e;case ch:K=11;break e;case ip:K=14;break e;case ua:K=16,T=null;break e}K=29,b=Error(s(130,h===null?"null":typeof h,"")),T=null}return d=t(K,b,d,D),d.elementType=h,d.type=T,d.lanes=O,d}function Ii(h,d,b,T){return h=t(7,h,T,d),h.lanes=b,h}function sh(h,d,b,T){h=t(22,h,T,d),h.elementType=Pg,h.lanes=b;var D={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=D._current;if(O===null)throw Error(s(456));if((D._pendingVisibility&2)===0){var K=ft(O,2);K!==null&&(D._pendingVisibility|=2,Ss(K,O,2))}},attach:function(){var O=D._current;if(O===null)throw Error(s(456));if((D._pendingVisibility&2)!==0){var K=ft(O,2);K!==null&&(D._pendingVisibility&=-3,Ss(K,O,2))}}};return h.stateNode=D,h}function Qd(h,d,b){return h=t(6,h,null,d),h.lanes=b,h}function Og(h,d,b){return d=t(4,h.children!==null?h.children:[],h.key,d),d.lanes=b,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function ZS(h,d,b,T,D,O,K,he){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ll,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=T,this.onUncaughtError=D,this.onCaughtError=O,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function Wy(h,d,b,T,D,O,K,he,Se,qe,ut,Mt){return h=new ZS(h,d,b,K,he,Se,qe,Mt),d=1,O===!0&&(d|=24),O=t(3,null,null,d),h.current=O,O.stateNode=h,d=Sl(),d.refCount++,h.pooledCache=d,d.refCount++,O.memoizedState={element:T,isDehydrated:b,cache:d},st(O),h}function is(h){return h?(h=Fl,h):Fl}function $d(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(s(188)):(h=Object.keys(h).join(","),Error(s(268,h)));return h=x(d),h=h!==null?A(h):null,h===null?null:Cu(h.stateNode)}function Au(h,d,b,T,D,O){D=is(D),T.context===null?T.context=D:T.pendingContext=D,T=Rt(d),T.payload={element:b},O=O===void 0?null:O,O!==null&&(T.callback=O),b=St(h,T,d),b!==null&&(Ss(b,h,d),mt(b,h,d))}function Su(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<d?b:d}}function rh(h,d){Su(h,d),(h=h.alternate)&&Su(h,d)}var dn={},_u=Vm(),Ir=j4(),ep=Object.assign,QS=Symbol.for("react.element"),ah=Symbol.for("react.transitional.element"),ca=Symbol.for("react.portal"),Nl=Symbol.for("react.fragment"),oh=Symbol.for("react.strict_mode"),tp=Symbol.for("react.profiler"),lh=Symbol.for("react.provider"),Ug=Symbol.for("react.consumer"),Ba=Symbol.for("react.context"),ch=Symbol.for("react.forward_ref"),np=Symbol.for("react.suspense"),Mu=Symbol.for("react.suspense_list"),ip=Symbol.for("react.memo"),ua=Symbol.for("react.lazy"),Pg=Symbol.for("react.offscreen"),qy=Symbol.for("react.memo_cache_sentinel"),Fo=Symbol.iterator,Ig=Symbol.for("react.client.reference"),nn=_u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qa,zo,gc=!1,Eu=Array.isArray,Fg=e.rendererVersion,uh=e.rendererPackageName,Tu=e.extraDevToolsConfig,Cu=e.getPublicInstance,Ky=e.getRootHostContext,wu=e.getChildHostContext,sp=e.prepareForCommit,Jy=e.resetAfterCommit,zg=e.createInstance,fh=e.appendInitialChild,Ho=e.finalizeInitialChildren,pn=e.shouldSetTextContent,ai=e.createTextInstance,ss=e.scheduleTimeout,rp=e.cancelTimeout,Ll=e.noTimeout,ir=e.isPrimaryRenderer;e.warnsIfNotActing;var cs=e.supportsMutation,fa=e.supportsPersistence,Us=e.supportsHydration,Zy=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Wi=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Xs=e.setCurrentUpdatePriority,Go=e.getCurrentUpdatePriority,Qy=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var $y=e.shouldAttemptEagerTransition,$S=e.detachDeletedInstance;e.requestPostPaintCallback;var Hg=e.maySuspendCommit,ap=e.preloadInstance,Gg=e.startSuspendingCommit,sr=e.suspendInstance,rs=e.waitForCommitToBeReady,Ol=e.NotPendingTransition,Da=e.HostTransitionContext,op=e.resetFormInstance;e.bindToConsole;var Vg=e.supportsMicrotasks,Vo=e.scheduleMicrotask,Ul=e.supportsTestSelectors,kg=e.findFiberRoot,jg=e.getBoundingRect,ex=e.getTextContent,Ru=e.isHiddenSubtree,tx=e.matchAccessibilityRole,nx=e.setFocusIfFocusable,ix=e.setupIntersectionObserver,sx=e.appendChild,Xg=e.appendChildToContainer,rx=e.commitTextUpdate,e_=e.commitMount,ax=e.commitUpdate,ox=e.insertBefore,lx=e.insertInContainerBefore,Yg=e.removeChild,cx=e.removeChildFromContainer,Wg=e.resetTextContent,ux=e.hideInstance,fx=e.hideTextInstance,hx=e.unhideInstance,t_=e.unhideTextInstance,dx=e.clearContainer,Bu=e.cloneInstance,hh=e.createContainerChildSet,qg=e.appendChildToContainerChildSet,lp=e.finalizeContainerChildren,Du=e.replaceContainerChildren,Kg=e.cloneHiddenInstance,Jg=e.cloneHiddenTextInstance,cp=e.isSuspenseInstancePending,up=e.isSuspenseInstanceFallback,px=e.getSuspenseInstanceFallbackErrorDetails,mx=e.registerSuspenseInstanceRetry,Zg=e.canHydrateFormStateMarker,gx=e.isFormStateMarkerMatching,Qg=e.getNextHydratableSibling,fp=e.getFirstHydratableChild,vx=e.getFirstHydratableChildWithinContainer,yx=e.getFirstHydratableChildWithinSuspenseInstance,n_=e.canHydrateInstance,$g=e.canHydrateTextInstance,xx=e.canHydrateSuspenseInstance,bx=e.hydrateInstance,e0=e.hydrateTextInstance,Ax=e.hydrateSuspenseInstance,Sx=e.getNextHydratableInstanceAfterSuspenseInstance,i_=e.commitHydratedContainer,s_=e.commitHydratedSuspenseInstance,_x=e.clearSuspenseBoundary,dh=e.clearSuspenseBoundaryFromContainer,hp=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var dp=e.validateHydratableInstance,Mx=e.validateHydratableTextInstance,Fr=e.supportsResources,ph=e.isHostHoistableType,pp=e.getHoistableRoot,t0=e.getResource,Ex=e.acquireResource,vc=e.releaseResource,mh=e.hydrateHoistable,gh=e.mountHoistable,Nu=e.unmountHoistable,mp=e.createHoistableInstance,Tx=e.prepareToCommitHoistables,Cx=e.mayResourceSuspendCommit,yc=e.preloadResource,wx=e.suspendResource,fi=e.supportsSingletons,Na=e.resolveSingletonInstance,Pl=e.clearSingleton,Rx=e.acquireSingletonInstance,Il=e.releaseSingletonInstance,$a=e.isHostSingletonType,qi=[],ko=-1,Fl={},rr=Math.clz32?Math.clz32:C,Bx=Math.log,Dx=Math.LN2,eo=128,xc=4194304,vh=Ir.unstable_scheduleCallback,gp=Ir.unstable_cancelCallback,Nx=Ir.unstable_shouldYield,vp=Ir.unstable_requestPaint,ha=Ir.unstable_now,yp=Ir.unstable_ImmediatePriority,Lx=Ir.unstable_UserBlockingPriority,xp=Ir.unstable_NormalPriority,r_=Ir.unstable_IdlePriority,Ox=Ir.log,_s=Ir.unstable_setDisableYieldValue,Ki=null,_r=null,Mr=typeof Object.is=="function"?Object.is:J,n0=new WeakMap,bc=[],Ac=0,Sc=null,Lu=0,zr=[],Hr=0,zl=null,La=1,Oa="",us=_(null),Ou=_(null),to=_(null),_c=_(null),Ps=null,Is=null,Fn=!1,da=null,Ms=!1,yh=Error(s(519)),pa=[],Mc=0,Ua=0,xh=null,jo=null,Ec=!1,yi=!1,i0=!1,Uu=0,Pu=null,Tc=0,Gr=0,Cc=null,Xo=!1,wc=!1,no=Object.prototype.hasOwnProperty,Iu=Error(s(460)),bh=Error(s(474)),Ah={then:function(){}},Hl=null,Gl=null,Vl=0,kl=vi(!0),io=vi(!1),xi=_(null),Fu=_(0),Vr=_(null),hi=null,fs=_(0),Yo=0,Sn=null,Jt=null,Hn=null,ma=!1,Rc=!1,jl=!1,bp=0,Bc=0,Es=null,Pa=0,Ap=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Fi={readContext:Ds,use:fe,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n};Fi.useCacheRefresh=$n,Fi.useMemoCache=$n,Fi.useHostTransitionStatus=$n,Fi.useFormState=$n,Fi.useActionState=$n,Fi.useOptimistic=$n;var Xl={readContext:Ds,use:fe,useCallback:function(h,d){return V().memoizedState=[h,d===void 0?null:d],h},useContext:Ds,useEffect:Nd,useImperativeHandle:function(h,d,b){b=b!=null?b.concat([h]):null,Of(4194308,4,Ld.bind(null,d,h),b)},useLayoutEffect:function(h,d){return Of(4194308,4,h,d)},useInsertionEffect:function(h,d){Of(4,2,h,d)},useMemo:function(h,d){var b=V();d=d===void 0?null:d;var T=h();if(jl){Q(!0);try{h()}finally{Q(!1)}}return b.memoizedState=[T,d],T},useReducer:function(h,d,b){var T=V();if(b!==void 0){var D=b(d);if(jl){Q(!0);try{b(d)}finally{Q(!1)}}}else D=d;return T.memoizedState=T.baseState=D,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:D},T.queue=h,h=h.dispatch=Ud.bind(null,Sn,h),[T.memoizedState,h]},useRef:function(h){var d=V();return h={current:h},d.memoizedState=h},useState:function(h){h=Dt(h);var d=h.queue,b=cg.bind(null,Sn,d);return d.dispatch=b,[h.memoizedState,b]},useDebugValue:vl,useDeferredValue:function(h,d){var b=V();return If(b,h,d)},useTransition:function(){var h=Dt(!1);return h=ru.bind(null,Sn,h.queue,!0,!1),V().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,d,b){var T=Sn,D=V();if(Fn){if(b===void 0)throw Error(s(407));b=b()}else{if(b=d(),ni===null)throw Error(s(349));(Dn&60)!==0||yt(T,d,b)}D.memoizedState=b;var O={value:b,getSnapshot:d};return D.queue=O,Nd(Xt.bind(null,T,O,h),[h]),T.flags|=2048,$s(9,At.bind(null,T,O,b,d),{destroy:void 0},null),b},useId:function(){var h=V(),d=ni.identifierPrefix;if(Fn){var b=Oa,T=La;b=(T&~(1<<32-rr(T)-1)).toString(32)+b,d=":"+d+"R"+b,b=bp++,0<b&&(d+="H"+b.toString(32)),d+=":"}else b=Pa++,d=":"+d+"r"+b.toString(32)+":";return h.memoizedState=d},useCacheRefresh:function(){return V().memoizedState=lg.bind(null,Sn)}};Xl.useMemoCache=ve,Xl.useHostTransitionStatus=Ff,Xl.useFormState=yn,Xl.useActionState=yn,Xl.useOptimistic=function(h){var d=V();d.memoizedState=d.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=b,d=ou.bind(null,Sn,!0,b),b.dispatch=d,[h,d]};var ar={readContext:Ds,use:fe,useCallback:hc,useContext:Ds,useEffect:rg,useImperativeHandle:Od,useInsertionEffect:Ty,useLayoutEffect:Pf,useMemo:ag,useReducer:Ve,useRef:Wa,useState:function(){return Ve(Ce)},useDebugValue:vl,useDeferredValue:function(h,d){var b=se();return og(b,Jt.memoizedState,h,d)},useTransition:function(){var h=Ve(Ce)[0],d=se().memoizedState;return[typeof h=="boolean"?h:le(h),d]},useSyncExternalStore:bt,useId:au};ar.useCacheRefresh=To,ar.useMemoCache=ve,ar.useHostTransitionStatus=Ff,ar.useFormState=_i,ar.useActionState=_i,ar.useOptimistic=function(h,d){var b=se();return Vt(b,Jt,h,d)};var kr={readContext:Ds,use:fe,useCallback:hc,useContext:Ds,useEffect:rg,useImperativeHandle:Od,useInsertionEffect:Ty,useLayoutEffect:Pf,useMemo:ag,useReducer:tt,useRef:Wa,useState:function(){return tt(Ce)},useDebugValue:vl,useDeferredValue:function(h,d){var b=se();return Jt===null?If(b,h,d):og(b,Jt.memoizedState,h,d)},useTransition:function(){var h=tt(Ce)[0],d=se().memoizedState;return[typeof h=="boolean"?h:le(h),d]},useSyncExternalStore:bt,useId:au};kr.useCacheRefresh=To,kr.useMemoCache=ve,kr.useHostTransitionStatus=Ff,kr.useFormState=bs,kr.useActionState=bs,kr.useOptimistic=function(h,d){var b=se();return Jt!==null?Vt(b,Jt,h,d):(b.baseState=h,[h,b.queue.dispatch])};var so={isMounted:function(h){return(h=h._reactInternals)?g(h)===h:!1},enqueueSetState:function(h,d,b){h=h._reactInternals;var T=Yi(),D=Rt(T);D.payload=d,b!=null&&(D.callback=b),d=St(h,D,T),d!==null&&(Ss(d,h,T),mt(d,h,T))},enqueueReplaceState:function(h,d,b){h=h._reactInternals;var T=Yi(),D=Rt(T);D.tag=1,D.payload=d,b!=null&&(D.callback=b),d=St(h,D,T),d!==null&&(Ss(d,h,T),mt(d,h,T))},enqueueForceUpdate:function(h,d){h=h._reactInternals;var b=Yi(),T=Rt(b);T.tag=2,d!=null&&(T.callback=d),d=St(h,T,b),d!==null&&(Ss(d,h,b),mt(d,h,b))}},Sp=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},_p=Error(s(461)),di=!1,Mp={dehydrated:null,treeContext:null,retryLane:0},Wo=_(null),Ia=null,jr=null,zu=typeof AbortController<"u"?AbortController:function(){var h=[],d=this.signal={aborted:!1,addEventListener:function(b,T){h.push(T)}};this.abort=function(){d.aborted=!0,h.forEach(function(b){return b()})}},Ux=Ir.unstable_scheduleCallback,Px=Ir.unstable_NormalPriority,bi={$$typeof:Ba,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},s0=nn.S;nn.S=function(h,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&ct(h,d),s0!==null&&s0(h,d)};var ro=_(null),ao=!1,zi=!1,r0=!1,ti=typeof WeakSet=="function"?WeakSet:Set,un=null,Cn=!1,Yt=null,xn=!1,Bi=null,Xr=8192,Hu={getCacheForType:function(h){var d=Ds(bi),b=d.data.get(h);return b===void 0&&(b=h(),d.data.set(h,b)),b}},Gu=0,ga=1,Mi=2,Fa=3,oo=4;if(typeof Symbol=="function"&&Symbol.for){var Dc=Symbol.for;Gu=Dc("selector.component"),ga=Dc("selector.has_pseudo_class"),Mi=Dc("selector.role"),Fa=Dc("selector.test_id"),oo=Dc("selector.text")}var va=typeof WeakMap=="function"?WeakMap:Map,Gn=0,ni=null,Zt=null,Dn=0,oi=0,Ys=null,ya=!1,Yr=!1,hs=!1,Ws=0,pi=0,Wr=0,qo=0,Sh=0,qr=0,lo=0,Nc=null,Hi=null,Ep=!1,or=0,Vu=1/0,_h=null,Yl=null,za=!1,co=null,Lc=0,Wl=0,Tp=null,ku=0,Cp=null;return dn.attemptContinuousHydration=function(h){if(h.tag===13){var d=ft(h,67108864);d!==null&&Ss(d,h,67108864),rh(h,67108864)}},dn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=Yi(),b=ft(h,d);b!==null&&Ss(b,h,d),rh(h,d)}},dn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=B(h.pendingLanes);if(d!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;d;){var b=1<<31-rr(d);h.entanglements[1]|=b,d&=~b}dt(h),(Gn&6)===0&&(Vu=ha()+500,ne(0))}}break;case 13:d=ft(h,2),d!==null&&Ss(d,h,2),th(),rh(h,2)}},dn.batchedUpdates=function(h,d){return h(d)},dn.createComponentSelector=function(h){return{$$typeof:Gu,value:h}},dn.createContainer=function(h,d,b,T,D,O,K,he,Se,qe){return Wy(h,d,!1,null,b,T,O,K,he,Se,qe,null)},dn.createHasPseudoClassSelector=function(h){return{$$typeof:ga,value:h}},dn.createHydrationContainer=function(h,d,b,T,D,O,K,he,Se,qe,ut,Mt,Ct){return h=Wy(b,T,!0,h,D,O,he,Se,qe,ut,Mt,Ct),h.context=is(null),b=h.current,T=Yi(),D=Rt(T),D.callback=d??null,St(b,D,T),h.current.lanes=T,X(h,T),dt(h),h},dn.createPortal=function(h,d,b){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ca,key:T==null?null:""+T,children:h,containerInfo:d,implementation:b}},dn.createRoleSelector=function(h){return{$$typeof:Mi,value:h}},dn.createTestNameSelector=function(h){return{$$typeof:Fa,value:h}},dn.createTextSelector=function(h){return{$$typeof:oo,value:h}},dn.defaultOnCaughtError=function(h){console.error(h)},dn.defaultOnRecoverableError=function(h){Sp(h)},dn.defaultOnUncaughtError=function(h){Sp(h)},dn.deferredUpdates=function(h){var d=nn.T,b=Go();try{return Xs(32),nn.T=null,h()}finally{Xs(b),nn.T=d}},dn.discreteUpdates=function(h,d,b,T,D){var O=nn.T,K=Go();try{return Xs(2),nn.T=null,h(d,b,T,D)}finally{Xs(K),nn.T=O,Gn===0&&(Vu=ha()+500)}},dn.findAllNodes=$f,dn.findBoundingRects=function(h,d){if(!Ul)throw Error(s(363));d=$f(h,d),h=[];for(var b=0;b<d.length;b++)h.push(jg(d[b]));for(d=h.length-1;0<d;d--){b=h[d];for(var T=b.x,D=T+b.width,O=b.y,K=O+b.height,he=d-1;0<=he;he--)if(d!==he){var Se=h[he],qe=Se.x,ut=qe+Se.width,Mt=Se.y,Ct=Mt+Se.height;if(T>=qe&&O>=Mt&&D<=ut&&K<=Ct){h.splice(d,1);break}else if(T!==qe||b.width!==Se.width||Ct<O||Mt>K){if(!(O!==Mt||b.height!==Se.height||ut<T||qe>D)){qe>T&&(Se.width+=qe-T,Se.x=T),ut<D&&(Se.width=D-qe),h.splice(d,1);break}}else{Mt>O&&(Se.height+=Mt-O,Se.y=O),Ct<K&&(Se.height=K-Mt),h.splice(d,1);break}}}return h},dn.findHostInstance=$d,dn.findHostInstanceWithNoPortals=function(h){return h=x(h),h=h!==null?M(h):null,h===null?null:Cu(h.stateNode)},dn.findHostInstanceWithWarning=function(h){return $d(h)},dn.flushPassiveEffects=Ra,dn.flushSyncFromReconciler=function(h){var d=Gn;Gn|=1;var b=nn.T,T=Go();try{if(Xs(2),nn.T=null,h)return h()}finally{Xs(T),nn.T=b,Gn=d,(Gn&6)===0&&ne(0)}},dn.flushSyncWork=th,dn.focusWithin=function(h,d){if(!Ul)throw Error(s(363));for(h=vu(h),d=Ar(h,d),d=Array.from(d),h=0;h<d.length;){var b=d[h++],T=b.tag;if(!Ru(b)){if((T===5||T===26||T===27)&&nx(b.stateNode))return!0;for(b=b.child;b!==null;)d.push(b),b=b.sibling}}return!1},dn.getFindAllNodesFailureDescription=function(h,d){if(!Ul)throw Error(s(363));var b=0,T=[];h=[vu(h),0];for(var D=0;D<h.length;){var O=h[D++],K=O.tag,he=h[D++],Se=d[he];if((K!==5&&K!==26&&K!==27||!Ru(O))&&(Tl(O,Se)&&(T.push(Cg(Se)),he++,he>b&&(b=he)),he<d.length))for(O=O.child;O!==null;)h.push(O,he),O=O.sibling}if(b<d.length){for(h=[];b<d.length;b++)h.push(Cg(d[b]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},dn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Cu(h.child.stateNode);default:return h.child.stateNode}},dn.injectIntoDevTools=function(){var h={bundleType:0,version:Fg,rendererPackageName:uh,currentDispatcherRef:nn,findFiberByHostInstance:Zy,reconcilerVersion:"19.0.0"};if(Tu!==null&&(h.rendererConfig=Tu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Ki=d.inject(h),_r=d}catch{}h=!!d.checkDCE}}return h},dn.isAlreadyRendering=function(){return!1},dn.observeVisibleRects=function(h,d,b,T){if(!Ul)throw Error(s(363));h=$f(h,d);var D=ix(h,b,T).disconnect;return{disconnect:function(){D()}}},dn.shouldError=function(){return null},dn.shouldSuspend=function(){return!1},dn.startHostTransition=function(h,d,b,T){if(h.tag!==5)throw Error(s(476));var D=qa(h).queue;ru(h,D,d,Ol,b===null?i:function(){var O=qa(h).next.queue;return yl(h,O,{},Yi()),b(T)})},dn.updateContainer=function(h,d,b,T){var D=d.current,O=Yi();return Au(D,O,h,d,b,T),O},dn.updateContainerSync=function(h,d,b,T){return d.tag===0&&Ra(),Au(d.current,2,h,d,b,T),2},dn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(dE)),dE.exports}var lO;function Bre(){return lO||(lO=1,hE.exports=Rre()),hE.exports}var Dre=Bre();const Nre=Yv(Dre);var cO=j4();const Lre=n=>typeof n=="object"&&typeof n.then=="function",ad=[];function X4(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function Y4(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const r of ad)if(X4(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return i.lifespan&&i.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,i.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:i.equal,remove:()=>{const r=ad.indexOf(s);r!==-1&&ad.splice(r,1)},promise:(Lre(n)?n:n(...e)).then(r=>{s.response=r,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(r=>s.error=r)};if(ad.push(s),!t)throw s.promise}const Ore=(n,e,t)=>Y4(n,e,!1,t),Ure=(n,e,t)=>void Y4(n,e,!0,t),Pre=n=>{if(n===void 0||n.length===0)ad.splice(0,ad.length);else{const e=ad.find(t=>X4(n,t.keys,t.equal));e&&e.remove()}};function PR(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const s=PR(i,e,t);if(s)return s;i=e?null:i.sibling}}function W4(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const IR=W4(z.createContext(null));class q4 extends z.Component{render(){return z.createElement(IR.Provider,{value:this._reactInternals},this.props.children)}}function K4(){const n=z.useContext(IR);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=z.useId();return z.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=PR(t,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(i)return i}},[n,e])}const Ire=Symbol.for("react.context"),Fre=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===Ire;function zre(){const n=K4(),[e]=z.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;Fre(i)&&i!==IR&&!e.has(i)&&e.set(i,z.use(W4(i))),t=t.return}return e}function Hre(){const n=zre();return z.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>z.createElement(e,null,z.createElement(t.Provider,{...i,value:n.get(t)})),e=>z.createElement(q4,{...e})),[n])}function J4(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Z4=n=>n&&n.isOrthographicCamera,Gre=n=>n&&n.hasOwnProperty("current"),Vre=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),_y=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?z.useLayoutEffect:z.useEffect;function FR(n){const e=z.useRef(n);return _y(()=>void(e.current=n),[n]),e}function kre(){const n=K4(),e=Hre();return z.useMemo(()=>({children:t})=>{const s=!!PR(n,!0,r=>r.type===z.StrictMode)?z.StrictMode:z.Fragment;return H.jsx(s,{children:H.jsx(e,{children:t})})},[n,e])}function jre({set:n}){return _y(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const Xre=(n=>(n=class extends z.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function Q4(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function Qp(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Gi={obj:n=>n===Object(n)&&!Gi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Gi.str(n)||Gi.num(n)||Gi.boo(n))return n===e;const r=Gi.obj(n);if(r&&i==="reference")return n===e;const a=Gi.arr(n);if(a&&t==="reference")return n===e;if((a||r)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(r&&t==="shallow"&&i==="shallow"){for(l in s?e:n)if(!Gi.equ(n[l],e[l],{strict:s,objects:"reference"}))return!1}else for(l in s?e:n)if(n[l]!==e[l])return!1;if(Gi.und(l)){if(a&&n.length===0&&e.length===0||r&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Yre(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function Wre(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const $4=["children","key","ref"];function qre(n){const e={};for(const t in n)$4.includes(t)||(e[t]=n[t]);return e}function OA(n,e,t,i){const s=n;let r=s==null?void 0:s.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:qre(i),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function kv(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const s of e.split("-")){var i;e=s,n=t,t=(i=t)==null?void 0:i[e]}return{root:n,key:e,target:t}}const uO=/-\d+$/;function UA(n,e){if(Gi.str(e.props.attach)){if(uO.test(e.props.attach)){const s=e.props.attach.replace(uO,""),{root:r,key:a}=kv(n.object,s);Array.isArray(r[a])||(r[a]=[])}const{root:t,key:i}=kv(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Gi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function PA(n,e){if(Gi.str(e.props.attach)){const{root:t,key:i}=kv(n.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[i]:t[i]=s}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const $T=[...$4,"args","dispose","attach","object","onUpdate","dispose"],fO=new Map;function Kre(n){let e=fO.get(n.constructor);try{e||(e=new n.constructor,fO.set(n.constructor,e))}catch{}return e}function Jre(n,e){const t={};for(const i in e)if(!$T.includes(i)&&!Gi.equ(e[i],n.props[i])){t[i]=e[i];for(const s in e)s.startsWith(`${i}-`)&&(t[s]=e[s])}for(const i in n.props){if($T.includes(i)||e.hasOwnProperty(i))continue;const{root:s,key:r}=kv(n.object,i);if(s.constructor&&s.constructor.length===0){const a=Kre(s);Gi.und(a)||(t[r]=a[r])}else t[r]=0}return t}const Zre=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Qre=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function $l(n,e){var t;const i=n.__r3f,s=i&&J4(i).getState(),r=i==null?void 0:i.eventCount;for(const l in e){let c=e[l];if($T.includes(l))continue;if(i&&Qre.test(l)){typeof c=="function"?i.handlers[l]=c:delete i.handlers[l],i.eventCount=Object.keys(i.handlers).length;continue}if(c===void 0)continue;let{root:f,key:p,target:g}=kv(n,l);if(g instanceof zm&&c instanceof zm)g.mask=c.mask;else if(g instanceof pt&&Vre(c))g.set(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&c!=null&&c.constructor&&g.constructor===c.constructor)g.copy(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(c))typeof g.fromArray=="function"?g.fromArray(c):g.set(...c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof c=="number")typeof g.setScalar=="function"?g.setScalar(c):g.set(c);else{var a;f[p]=c,s&&!s.linear&&Zre.includes(p)&&(a=f[p])!=null&&a.isTexture&&f[p].format===vs&&f[p].type===xs&&(f[p].colorSpace=Qn)}}if(i!=null&&i.parent&&s!=null&&s.internal&&(t=i.object)!=null&&t.isObject3D&&r!==i.eventCount){const l=i.object,c=s.internal.interaction.indexOf(l);c>-1&&s.internal.interaction.splice(c,1),i.eventCount&&l.raycast!==null&&s.internal.interaction.push(l)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&ng(i),n}function ng(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function eH(n,e){n.manual||(Z4(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const $r=n=>n==null?void 0:n.isObject3D;function eb(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function tH(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function $re(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{tH(t.capturedMap,e,i,s)})}function eae(n){function e(c){const{internal:f}=n.getState(),p=c.offsetX-f.initialClick[0],g=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(p*p+g*g))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(p=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+p]}))}function i(c,f){const p=n.getState(),g=new Set,v=[],x=f?f(p.internal.interaction):p.internal.interaction;for(let S=0;S<x.length;S++){const w=Qp(x[S]);w&&(w.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function A(S){const w=Qp(S);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var C;w.events.compute==null||w.events.compute(c,w,(C=w.previousRoot)==null?void 0:C.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(S,!0):[]}let M=x.flatMap(A).sort((S,w)=>{const C=Qp(S.object),B=Qp(w.object);return!C||!B?S.distance-w.distance:B.events.priority-C.events.priority||S.distance-w.distance}).filter(S=>{const w=eb(S);return g.has(w)?!1:(g.add(w),!0)});p.events.filter&&(M=p.events.filter(M,p));for(const S of M){let w=S.object;for(;w;){var _;(_=w.__r3f)!=null&&_.eventCount&&v.push({...S,eventObject:w}),w=w.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let S of p.internal.capturedMap.get(c.pointerId).values())g.has(eb(S.intersection))||v.push(S.intersection);return v}function s(c,f,p,g){if(c.length){const v={stopped:!1};for(const x of c){let A=Qp(x.object);if(A||x.object.traverseAncestors(M=>{const _=Qp(M);if(_)return A=_,!1}),A){const{raycaster:M,pointer:_,camera:S,internal:w}=A,C=new te(_.x,_.y,0).unproject(S),B=U=>{var I,X;return(I=(X=w.capturedMap.get(U))==null?void 0:X.has(x.eventObject))!=null?I:!1},N=U=>{const I={intersection:x,target:f.target};w.capturedMap.has(U)?w.capturedMap.get(U).set(x.eventObject,I):w.capturedMap.set(U,new Map([[x.eventObject,I]])),f.target.setPointerCapture(U)},L=U=>{const I=w.capturedMap.get(U);I&&tH(w.capturedMap,x.eventObject,I,U)};let F={};for(let U in f){let I=f[U];typeof I!="function"&&(F[U]=I)}let P={...x,...F,pointer:_,intersections:c,stopped:v.stopped,delta:p,unprojectedPoint:C,ray:M.ray,camera:S,stopPropagation(){const U="pointerId"in f&&w.capturedMap.get(f.pointerId);if((!U||U.has(x.eventObject))&&(P.stopped=v.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(I=>I.eventObject===x.eventObject))){const I=c.slice(0,c.indexOf(x));r([...I,x])}},target:{hasPointerCapture:B,setPointerCapture:N,releasePointerCapture:L},currentTarget:{hasPointerCapture:B,setPointerCapture:N,releasePointerCapture:L},nativeEvent:f};if(g(P),v.stopped===!0)break}}}return c}function r(c){const{internal:f}=n.getState();for(const p of f.hovered.values())if(!c.length||!c.find(g=>g.object===p.object&&g.index===p.index&&g.instanceId===p.instanceId)){const v=p.eventObject.__r3f;if(f.hovered.delete(eb(p)),v!=null&&v.eventCount){const x=v.handlers,A={...p,intersections:c};x.onPointerOut==null||x.onPointerOut(A),x.onPointerLeave==null||x.onPointerLeave(A)}}}function a(c,f){for(let p=0;p<f.length;p++){const g=f[p].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return f=>{const{internal:p}=n.getState();"pointerId"in f&&p.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(f.pointerId)&&(p.capturedMap.delete(f.pointerId),r([]))})}}return function(p){const{onPointerMissed:g,internal:v}=n.getState();v.lastEvent.current=p;const x=c==="onPointerMove",A=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",_=i(p,x?t:void 0),S=A?e(p):0;c==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=_.map(C=>C.eventObject)),A&&!_.length&&S<=2&&(a(p,v.interaction),g&&g(p)),x&&r(_);function w(C){const B=C.eventObject,N=B.__r3f;if(!(N!=null&&N.eventCount))return;const L=N.handlers;if(x){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const F=eb(C),P=v.hovered.get(F);P?P.stopped&&C.stopPropagation():(v.hovered.set(F,C),L.onPointerOver==null||L.onPointerOver(C),L.onPointerEnter==null||L.onPointerEnter(C))}L.onPointerMove==null||L.onPointerMove(C)}else{const F=L[c];F?(!A||v.initialHits.includes(B))&&(a(p,v.interaction.filter(P=>!v.initialHits.includes(P))),F(C)):A&&v.initialHits.includes(B)&&a(p,v.interaction.filter(P=>!v.initialHits.includes(P)))}}s(_,p,S,w)}}return{handlePointer:l}}const hO=n=>!!(n!=null&&n.render),zR=z.createContext(null),tae=(n,e)=>{const t=k4((l,c)=>{const f=new te,p=new te,g=new te;function v(S=c().camera,w=p,C=c().size){const{width:B,height:N,top:L,left:F}=C,P=B/N;w.isVector3?g.copy(w):g.set(...w);const U=S.getWorldPosition(f).distanceTo(g);if(Z4(S))return{width:B/S.zoom,height:N/S.zoom,top:L,left:F,factor:1,distance:U,aspect:P};{const I=S.fov*Math.PI/180,X=2*Math.tan(I/2)*U,re=X*(B/N);return{width:re,height:X,top:L,left:F,factor:B/re,distance:U,aspect:P}}}let x;const A=S=>l(w=>({performance:{...w.performance,current:S}})),M=new ze;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(S=1)=>n(c(),S),advance:(S,w)=>e(S,w,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new RR,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=c();x&&clearTimeout(x),S.performance.current!==S.performance.min&&A(S.performance.min),x=setTimeout(()=>A(c().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>l(w=>({...w,events:{...w.events,...S}})),setSize:(S,w,C=0,B=0)=>{const N=c().camera,L={width:S,height:w,top:C,left:B};l(F=>({size:L,viewport:{...F.viewport,...v(N,p,L)}}))},setDpr:S=>l(w=>{const C=Q4(S);return{viewport:{...w.viewport,dpr:C,initialDpr:w.viewport.initialDpr||C}}}),setFrameloop:(S="always")=>{const w=c().clock;w.stop(),w.elapsedTime=0,S!=="never"&&(w.start(),w.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:z.createRef(),active:!1,frames:0,priority:0,subscribe:(S,w,C)=>{const B=c().internal;return B.priority=B.priority+(w>0?1:0),B.subscribers.push({ref:S,priority:w,store:C}),B.subscribers=B.subscribers.sort((N,L)=>N.priority-L.priority),()=>{const N=c().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(w>0?1:0),N.subscribers=N.subscribers.filter(L=>L.ref!==S))}}}}}),i=t.getState();let s=i.size,r=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:f,gl:p,set:g}=t.getState();if(c.width!==s.width||c.height!==s.height||f.dpr!==r){s=c,r=f.dpr,eH(l,c),f.dpr>0&&p.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,v)}l!==a&&(a=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};function HR(){const n=z.useContext(zR);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ni(n=t=>t,e){return HR()(n,e)}function su(n,e=0){const t=HR(),i=t.getState().internal.subscribe,s=FR(n);return _y(()=>i(s,e,t),[e,i,t]),null}const dO=new WeakMap,nae=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function nH(n,e){return function(t,...i){let s;return nae(t)?(s=dO.get(t),s||(s=new t,dO.set(t,s))):s=t,n&&n(s),Promise.all(i.map(r=>new Promise((a,l)=>s.load(r,c=>{$r(c==null?void 0:c.scene)&&Object.assign(c,Yre(c.scene)),a(c)},e,c=>l(new Error(`Could not load ${r}: ${c==null?void 0:c.message}`))))))}}function Mo(n,e,t,i){const s=Array.isArray(e)?e:[e],r=Ore(nH(t,i),[n,...s],{equal:Gi.equ});return Array.isArray(e)?r:r[0]}Mo.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Ure(nH(t),[n,...i])};Mo.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Pre([n,...t])};function iae(n){const e=Nre(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:z.version}),e}const iH=0,Gm={},sae=/^three(?=[A-Z])/,kS=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let rae=0;const aae=n=>typeof n=="function";function Dd(n){if(aae(n)){const e=`${rae++}`;return Gm[e]=n,e}else Object.assign(Gm,n)}function sH(n,e){const t=kS(n),i=Gm[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function oae(n,e,t){var i;return n=kS(n)in Gm?n:n.replace(sae,""),sH(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,OA(e.object,t,n,e)}function lae(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?PA(n.parent,n):$r(n.object)&&(n.object.visible=!1),n.isHidden=!0,ng(n)}}function rH(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?UA(n.parent,n):$r(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,ng(n)}}function GR(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var s,r;const a=Gm[kS(e.type)];e.object=(s=e.props.object)!=null?s:new a(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if($l(e.object,e.props),e.props.attach)UA(n,e);else if($r(e.object)&&$r(n.object)){const a=n.object.children.indexOf(t==null?void 0:t.object);if(t&&a!==-1){const l=n.object.children.indexOf(e.object);if(l!==-1){n.object.children.splice(l,1);const c=l<a?a-1:a;n.object.children.splice(c,0,e.object)}else e.object.parent=n.object,n.object.children.splice(a,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const a of e.children)GR(e,a);ng(e)}}function gE(n,e){e&&(e.parent=n,n.children.push(e),GR(n,e))}function pO(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),GR(n,e,t)}function aH(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():cO.unstable_scheduleCallback(cO.unstable_IdlePriority,e)}}function eC(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?PA(n,e):$r(e.object)&&$r(n.object)&&(n.object.remove(e.object),$re(J4(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const a=e.children[r];eC(e,a,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&aH(e.object),t===void 0&&ng(e)}function cae(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const Db=[];function uae(){for(const[t]of Db){const i=t.parent;if(i){t.props.attach?PA(i,t):$r(t.object)&&$r(i.object)&&i.object.remove(t.object);for(const s of t.children)s.props.attach?PA(t,s):$r(s.object)&&$r(t.object)&&t.object.remove(s.object)}t.isHidden&&rH(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&aH(t.object)}for(const[t,i,s]of Db){t.props=i;const r=t.parent;if(r){var n,e;const a=Gm[kS(t.type)];t.object=(n=t.props.object)!=null?n:new a(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,cae(s,t.object),$l(t.object,t.props),t.props.attach?UA(r,t):$r(t.object)&&$r(r.object)&&r.object.add(t.object);for(const l of t.children)l.props.attach?UA(t,l):$r(l.object)&&$r(t.object)&&t.object.add(l.object);ng(t)}}Db.length=0}const vE=()=>{},mO={};let tb=iH;const fae=0,hae=4,IA=iae({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:oae,removeChild:eC,appendChild:gE,appendInitialChild:gE,insertBefore:pO,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||gE(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||eC(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||pO(i,e,t)},getRootHostContext:()=>mO,getChildHostContext:()=>mO,commitUpdate(n,e,t,i,s){var r,a,l;sH(e,i);let c=!1;if((n.type==="primitive"&&t.object!==i.object||((r=i.args)==null?void 0:r.length)!==((a=t.args)==null?void 0:a.length)||(l=i.args)!=null&&l.some((p,g)=>{var v;return p!==((v=t.args)==null?void 0:v[g])}))&&(c=!0),c)Db.push([n,{...i},s]);else{const p=Jre(n,i);Object.keys(p).length&&(Object.assign(n.props,p),$l(n.object,p))}(s.sibling===null||(s.flags&hae)===fae)&&uae()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>OA(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:lae,unhideInstance:rH,createTextInstance:vE,hideTextInstance:vE,unhideTextInstance:vE,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:z.createContext(null),setCurrentUpdatePriority(n){tb=n},getCurrentUpdatePriority(){return tb},resolveUpdatePriority(){var n;if(tb!==iH)return tb;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Bb.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Bb.ContinuousEventPriority;default:return Bb.DefaultEventPriority}},resetFormInstance(){}}),Ed=new Map,$p={objects:"shallow",strict:!1};function dae(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:s,left:r}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:s,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function pae(n){const e=Ed.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=i||tae(iC,vO),a=t||IA.createContainer(r,Bb.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||Ed.set(n,{fiber:a,store:r});let l,c,f=!1,p=null;return{async configure(g={}){let v;p=new Promise(oe=>v=oe);let{gl:x,size:A,scene:M,events:_,onCreated:S,shadows:w=!1,linear:C=!1,flat:B=!1,legacy:N=!1,orthographic:L=!1,frameloop:F="always",dpr:P=[1,2],performance:U,raycaster:I,camera:X,onPointerMissed:re}=g,ee=r.getState(),$=ee.gl;if(!ee.gl){const oe={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},be=typeof x=="function"?await x(oe):x;hO(be)?$=be:$=new UR({...oe,...x}),ee.set({gl:$})}let ae=ee.raycaster;ae||ee.set({raycaster:ae=new GS});const{params:j,...Q}=I||{};if(Gi.equ(Q,ae,$p)||$l(ae,{...Q}),Gi.equ(j,ae.params,$p)||$l(ae,{params:{...ae.params,...j}}),!ee.camera||ee.camera===c&&!Gi.equ(c,X,$p)){c=X;const oe=X==null?void 0:X.isCamera,be=oe?X:L?new oc(0,0,0,0,.1,1e3):new Zi(75,0,.1,1e3);oe||(be.position.z=5,X&&($l(be,X),be.manual||("aspect"in X||"left"in X||"right"in X||"bottom"in X||"top"in X)&&(be.manual=!0,be.updateProjectionMatrix())),!ee.camera&&!(X!=null&&X.rotation)&&be.lookAt(0,0,0)),ee.set({camera:be}),ae.camera=be}if(!ee.scene){let oe;M!=null&&M.isScene?(oe=M,OA(oe,r,"",{})):(oe=new bd,OA(oe,r,"",{}),M&&$l(oe,M)),ee.set({scene:oe})}_&&!ee.events.handlers&&ee.set({events:_(r)});const J=dae(n,A);if(Gi.equ(J,ee.size,$p)||ee.setSize(J.width,J.height,J.top,J.left),P&&ee.viewport.dpr!==Q4(P)&&ee.setDpr(P),ee.frameloop!==F&&ee.setFrameloop(F),ee.onPointerMissed||ee.set({onPointerMissed:re}),U&&!Gi.equ(U,ee.performance,$p)&&ee.set(oe=>({performance:{...oe.performance,...U}})),!ee.xr){var xe;const oe=(ue,Ue)=>{const Be=r.getState();Be.frameloop!=="never"&&vO(ue,!0,Be,Ue)},be=()=>{const ue=r.getState();ue.gl.xr.enabled=ue.gl.xr.isPresenting,ue.gl.xr.setAnimationLoop(ue.gl.xr.isPresenting?oe:null),ue.gl.xr.isPresenting||iC(ue)},_e={connect(){const ue=r.getState().gl;ue.xr.addEventListener("sessionstart",be),ue.xr.addEventListener("sessionend",be)},disconnect(){const ue=r.getState().gl;ue.xr.removeEventListener("sessionstart",be),ue.xr.removeEventListener("sessionend",be)}};typeof((xe=$.xr)==null?void 0:xe.addEventListener)=="function"&&_e.connect(),ee.set({xr:_e})}if($.shadowMap){const oe=$.shadowMap.enabled,be=$.shadowMap.type;if($.shadowMap.enabled=!!w,Gi.boo(w))$.shadowMap.type=ym;else if(Gi.str(w)){var Y;const _e={basic:sz,percentage:cS,soft:ym,variance:nl};$.shadowMap.type=(Y=_e[w])!=null?Y:ym}else Gi.obj(w)&&Object.assign($.shadowMap,w);(oe!==$.shadowMap.enabled||be!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}return Vn.enabled=!N,f||($.outputColorSpace=C?ja:Qn,$.toneMapping=B?cl:Gw),ee.legacy!==N&&ee.set(()=>({legacy:N})),ee.linear!==C&&ee.set(()=>({linear:C})),ee.flat!==B&&ee.set(()=>({flat:B})),x&&!Gi.fun(x)&&!hO(x)&&!Gi.equ(x,$,$p)&&$l($,x),l=S,f=!0,v(),this},render(g){return!f&&!p&&this.configure(),p.then(()=>{IA.updateContainer(H.jsx(mae,{store:r,children:g,onCreated:l,rootElement:n}),a,null,()=>{})}),r},unmount(){oH(n)}}}function mae({store:n,children:e,onCreated:t,rootElement:i}){return _y(()=>{const s=n.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),H.jsx(zR.Provider,{value:n,children:e})}function oH(n,e){const t=Ed.get(n),i=t==null?void 0:t.fiber;if(i){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),IA.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var r,a,l,c;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(l=s.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=s.gl)!=null&&c.xr&&s.xr.disconnect(),Wre(s.scene),Ed.delete(n)}catch{}},500)})}}function gae(n,e,t){return H.jsx(vae,{children:n,container:e,state:t})}function vae({state:n={},children:e,container:t}){const{events:i,size:s,...r}=n,a=HR(),[l]=z.useState(()=>new GS),[c]=z.useState(()=>new ze),f=FR((g,v)=>{let x;if(v.camera&&s){const A=v.camera;x=g.viewport.getCurrentViewport(A,new te,s),A!==g.camera&&eH(A,s)}return{...g,...v,scene:t,raycaster:l,pointer:c,mouse:c,previousRoot:a,events:{...g.events,...v.events,...i},size:{...g.size,...s},viewport:{...g.viewport,...x},setEvents:A=>v.set(M=>({...M,events:{...M.events,...A}}))}}),p=z.useMemo(()=>{const g=k4((x,A)=>({...r,set:x,get:A})),v=x=>g.setState(A=>f.current(x,A));return v(a.getState()),a.subscribe(v),g},[a,t]);return H.jsx(H.Fragment,{children:IA.createPortal(H.jsx(zR.Provider,{value:p,children:e}),p,null)})}const yae=new Set,xae=new Set,bae=new Set;function yE(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function pv(n,e){switch(n){case"before":return yE(yae,e);case"after":return yE(xae,e);case"tail":return yE(bae,e)}}let xE,bE;function tC(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),xE=e.internal.subscribers;for(let s=0;s<xE.length;s++)bE=xE[s],bE.ref.current(bE.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let FA=!1,nC=!1,AE,gO,em;function lH(n){gO=requestAnimationFrame(lH),FA=!0,AE=0,pv("before",n),nC=!0;for(const t of Ed.values()){var e;em=t.store.getState(),em.internal.active&&(em.frameloop==="always"||em.internal.frames>0)&&!((e=em.gl.xr)!=null&&e.isPresenting)&&(AE+=tC(n,em))}if(nC=!1,pv("after",n),AE===0)return pv("tail",n),FA=!1,cancelAnimationFrame(gO)}function iC(n,e=1){var t;if(!n)return Ed.forEach(i=>iC(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):nC?n.internal.frames=2:n.internal.frames=1,FA||(FA=!0,requestAnimationFrame(lH)))}function vO(n,e=!0,t,i){if(e&&pv("before",n),t)tC(n,t,i);else for(const s of Ed.values())tC(n,s.store.getState());e&&pv("after",n)}const SE={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Aae(n){const{handlePointer:e}=eae(n);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(SE).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:i,events:s}=n.getState();if(s.disconnect==null||s.disconnect(),i(r=>({events:{...r.events,connected:t}})),s.handlers)for(const r in s.handlers){const a=s.handlers[r],[l,c]=SE[r];t.addEventListener(l,a,{passive:c})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const s in i.handlers){const r=i.handlers[s],[a]=SE[s];i.connected.removeEventListener(a,r)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function yO(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function Sae({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=z.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=z.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,p=z.useRef(!1);z.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,v,x]=z.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:w,top:C,width:B,height:N,bottom:L,right:F,x:P,y:U}=l.current.element.getBoundingClientRect(),I={left:w,top:C,width:B,height:N,bottom:L,right:F,x:P,y:U};l.current.element instanceof HTMLElement&&i&&(I.height=l.current.element.offsetHeight,I.width=l.current.element.offsetWidth),Object.freeze(I),p.current&&!Tae(l.current.lastBounds,I)&&a(l.current.lastBounds=I)};return[S,f?yO(S,f):S,c?yO(S,c):S]},[a,i,c,f]);function A(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function M(){l.current.element&&(l.current.resizeObserver=new s(x),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",x,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const _=S=>{!S||S===l.current.element||(A(),l.current.element=S,l.current.scrollContainers=cH(S),M())};return Mae(x,!!e),_ae(v),z.useEffect(()=>{A(),M()},[e,x,v]),z.useEffect(()=>A,[]),[_,r,g]}function _ae(n){z.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Mae(n,e){z.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function cH(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[t,i,s].some(r=>r==="auto"||r==="scroll")&&e.push(n),[...e,...cH(n.parentElement)]}const Eae=["x","y","top","bottom","left","right","width","height"],Tae=(n,e)=>Eae.every(t=>n[t]===e[t]);function Cae({ref:n,children:e,fallback:t,resize:i,style:s,gl:r,events:a=Aae,eventSource:l,eventPrefix:c,shadows:f,linear:p,flat:g,legacy:v,orthographic:x,frameloop:A,dpr:M,performance:_,raycaster:S,camera:w,scene:C,onPointerMissed:B,onCreated:N,...L}){z.useMemo(()=>Dd(V4),[]);const F=kre(),[P,U]=Sae({scroll:!0,debounce:{scroll:50,resize:0},...i}),I=z.useRef(null),X=z.useRef(null);z.useImperativeHandle(n,()=>I.current);const re=FR(B),[ee,$]=z.useState(!1),[ae,j]=z.useState(!1);if(ee)throw ee;if(ae)throw ae;const Q=z.useRef(null);_y(()=>{const xe=I.current;if(U.width>0&&U.height>0&&xe){Q.current||(Q.current=pae(xe));async function Y(){await Q.current.configure({gl:r,scene:C,events:a,shadows:f,linear:p,flat:g,legacy:v,orthographic:x,frameloop:A,dpr:M,performance:_,raycaster:S,camera:w,size:U,onPointerMissed:(...oe)=>re.current==null?void 0:re.current(...oe),onCreated:oe=>{oe.events.connect==null||oe.events.connect(l?Gre(l)?l.current:l:X.current),c&&oe.setEvents({compute:(be,_e)=>{const ue=be[c+"X"],Ue=be[c+"Y"];_e.pointer.set(ue/_e.size.width*2-1,-(Ue/_e.size.height)*2+1),_e.raycaster.setFromCamera(_e.pointer,_e.camera)}}),N==null||N(oe)}}),Q.current.render(H.jsx(F,{children:H.jsx(Xre,{set:j,children:H.jsx(z.Suspense,{fallback:H.jsx(jre,{set:$}),children:e??null})})}))}Y()}}),z.useEffect(()=>{const xe=I.current;if(xe)return()=>oH(xe)},[]);const J=l?"none":"auto";return H.jsx("div",{ref:X,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:J,...s},...L,children:H.jsx("div",{ref:P,style:{width:"100%",height:"100%"},children:H.jsx("canvas",{ref:I,style:{display:"block"},children:t})})})}function jS(n){return H.jsx(q4,{children:H.jsx(Cae,{...n})})}const VR=parseInt(wf.replace(/\D+/g,""));function xO(n,e){if(e===Uz)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===BA||e===Jw){let t=n.getIndex();if(t===null){const a=[],l=n.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)a.push(c);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(t)if(e===BA)for(let a=1;a<=i;a++)s.push(t.getX(0)),s.push(t.getX(a)),s.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(s.push(t.getX(a)),s.push(t.getX(a+1)),s.push(t.getX(a+2))):(s.push(t.getX(a+2)),s.push(t.getX(a+1)),s.push(t.getX(a)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var bo=Uint8Array,df=Uint16Array,sC=Uint32Array,uH=new bo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fH=new bo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wae=new bo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hH=function(n,e){for(var t=new df(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var s=new sC(t[30]),i=1;i<30;++i)for(var r=t[i];r<t[i+1];++r)s[r]=r-t[i]<<5|i;return[t,s]},dH=hH(uH,2),pH=dH[0],Rae=dH[1];pH[28]=258,Rae[258]=28;var Bae=hH(fH,0),Dae=Bae[0],rC=new df(32768);for(var Li=0;Li<32768;++Li){var sf=(Li&43690)>>>1|(Li&21845)<<1;sf=(sf&52428)>>>2|(sf&13107)<<2,sf=(sf&61680)>>>4|(sf&3855)<<4,rC[Li]=((sf&65280)>>>8|(sf&255)<<8)>>>1}var mv=function(n,e,t){for(var i=n.length,s=0,r=new df(e);s<i;++s)++r[n[s]-1];var a=new df(e);for(s=0;s<e;++s)a[s]=a[s-1]+r[s-1]<<1;var l;if(t){l=new df(1<<e);var c=15-e;for(s=0;s<i;++s)if(n[s])for(var f=s<<4|n[s],p=e-n[s],g=a[n[s]-1]++<<p,v=g|(1<<p)-1;g<=v;++g)l[rC[g]>>>c]=f}else for(l=new df(i),s=0;s<i;++s)n[s]&&(l[s]=rC[a[n[s]-1]++]>>>15-n[s]);return l},My=new bo(288);for(var Li=0;Li<144;++Li)My[Li]=8;for(var Li=144;Li<256;++Li)My[Li]=9;for(var Li=256;Li<280;++Li)My[Li]=7;for(var Li=280;Li<288;++Li)My[Li]=8;var mH=new bo(32);for(var Li=0;Li<32;++Li)mH[Li]=5;var Nae=mv(My,9,1),Lae=mv(mH,5,1),_E=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},$o=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},ME=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Oae=function(n){return(n/8|0)+(n&7&&1)},Uae=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof df?df:n instanceof sC?sC:bo)(t-e);return i.set(n.subarray(e,t)),i},Pae=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new bo(0);var s=!e||t,r=!t||t.i;t||(t={}),e||(e=new bo(i*3));var a=function(Be){var He=e.length;if(Be>He){var et=new bo(Math.max(He*2,Be));et.set(e),e=et}},l=t.f||0,c=t.p||0,f=t.b||0,p=t.l,g=t.d,v=t.m,x=t.n,A=i*8;do{if(!p){t.f=l=$o(n,c,1);var M=$o(n,c+1,3);if(c+=3,M)if(M==1)p=Nae,g=Lae,v=9,x=5;else if(M==2){var C=$o(n,c,31)+257,B=$o(n,c+10,15)+4,N=C+$o(n,c+5,31)+1;c+=14;for(var L=new bo(N),F=new bo(19),P=0;P<B;++P)F[wae[P]]=$o(n,c+P*3,7);c+=B*3;for(var U=_E(F),I=(1<<U)-1,X=mv(F,U,1),P=0;P<N;){var re=X[$o(n,c,I)];c+=re&15;var _=re>>>4;if(_<16)L[P++]=_;else{var ee=0,$=0;for(_==16?($=3+$o(n,c,3),c+=2,ee=L[P-1]):_==17?($=3+$o(n,c,7),c+=3):_==18&&($=11+$o(n,c,127),c+=7);$--;)L[P++]=ee}}var ae=L.subarray(0,C),j=L.subarray(C);v=_E(ae),x=_E(j),p=mv(ae,v,1),g=mv(j,x,1)}else throw"invalid block type";else{var _=Oae(c)+4,S=n[_-4]|n[_-3]<<8,w=_+S;if(w>i){if(r)throw"unexpected EOF";break}s&&a(f+S),e.set(n.subarray(_,w),f),t.b=f+=S,t.p=c=w*8;continue}if(c>A){if(r)throw"unexpected EOF";break}}s&&a(f+131072);for(var Q=(1<<v)-1,J=(1<<x)-1,xe=c;;xe=c){var ee=p[ME(n,c)&Q],Y=ee>>>4;if(c+=ee&15,c>A){if(r)throw"unexpected EOF";break}if(!ee)throw"invalid length/literal";if(Y<256)e[f++]=Y;else if(Y==256){xe=c,p=null;break}else{var oe=Y-254;if(Y>264){var P=Y-257,be=uH[P];oe=$o(n,c,(1<<be)-1)+pH[P],c+=be}var _e=g[ME(n,c)&J],ue=_e>>>4;if(!_e)throw"invalid distance";c+=_e&15;var j=Dae[ue];if(ue>3){var be=fH[ue];j+=ME(n,c)&(1<<be)-1,c+=be}if(c>A){if(r)throw"unexpected EOF";break}s&&a(f+131072);for(var Ue=f+oe;f<Ue;f+=4)e[f]=e[f-j],e[f+1]=e[f+1-j],e[f+2]=e[f+2-j],e[f+3]=e[f+3-j];f=Ue}}t.l=p,t.p=xe,t.b=f,p&&(l=1,t.m=v,t.d=g,t.n=x)}while(!l);return f==e.length?e:Uae(e,0,f)},Iae=new bo(0),Fae=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function nb(n,e){return Pae((Fae(n),n.subarray(2,-4)),e)}var zae=typeof TextDecoder<"u"&&new TextDecoder,Hae=0;try{zae.decode(Iae,{stream:!0}),Hae=1}catch{}const Gae=n=>n&&n.isCubeTexture;class Vae extends Ci{constructor(e,t){var i,s;const r=Gae(e),l=((s=r?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?s:1024)/4,c=Math.floor(Math.log2(l)),f=Math.pow(2,c),p=3*Math.max(f,16*7),g=4*f,v=[r?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/p}`,`#define CUBEUV_TEXEL_HEIGHT ${1/g}`,`#define CUBEUV_MAX_MIP ${c}.0`],x=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,A=v.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${VR>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,M={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},_=new vy(1,16),S=new Oi({uniforms:M,fragmentShader:A,vertexShader:x,side:fr});super(_,S)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function gH(n,e,t={}){const i=new te,s=new Hs,r=new te,a=new Wt,l=new Wt,c=new Wt;t.preserveMatrix=t.preserveMatrix!==void 0?t.preserveMatrix:!0,t.preservePosition=t.preservePosition!==void 0?t.preservePosition:!0,t.preserveHipPosition=t.preserveHipPosition!==void 0?t.preserveHipPosition:!1,t.useTargetMatrix=t.useTargetMatrix!==void 0?t.useTargetMatrix:!1,t.hip=t.hip!==void 0?t.hip:"hip",t.names=t.names||{};const f=e.isObject3D?e.skeleton.bones:zA(e),p=n.isObject3D?n.skeleton.bones:zA(n);let g,v,x,A,M;if(n.isObject3D?n.skeleton.pose():(t.useTargetMatrix=!0,t.preserveMatrix=!1),t.preservePosition){M=[];for(let _=0;_<p.length;_++)M.push(p[_].position.clone())}if(t.preserveMatrix){n.updateMatrixWorld(),n.matrixWorld.identity();for(let _=0;_<n.children.length;++_)n.children[_].updateMatrixWorld(!0)}if(t.offsets){g=[];for(let _=0;_<p.length;++_)v=p[_],x=t.names[v.name]||v.name,t.offsets[x]&&(v.matrix.multiply(t.offsets[x]),v.matrix.decompose(v.position,v.quaternion,v.scale),v.updateMatrixWorld()),g.push(v.matrixWorld.clone())}for(let _=0;_<p.length;++_){if(v=p[_],x=t.names[v.name]||v.name,A=vH(x,f),c.copy(v.matrixWorld),A){if(A.updateMatrixWorld(),t.useTargetMatrix?l.copy(A.matrixWorld):(l.copy(n.matrixWorld).invert(),l.multiply(A.matrixWorld)),r.setFromMatrixScale(l),l.scale(r.set(1/r.x,1/r.y,1/r.z)),c.makeRotationFromQuaternion(s.setFromRotationMatrix(l)),n.isObject3D){const S=p.indexOf(v),w=g?g[S]:a.copy(n.skeleton.boneInverses[S]).invert();c.multiply(w)}c.copyPosition(l)}v.parent&&v.parent.isBone?(v.matrix.copy(v.parent.matrixWorld).invert(),v.matrix.multiply(c)):v.matrix.copy(c),t.preserveHipPosition&&x===t.hip&&v.matrix.setPosition(i.set(0,v.position.y,0)),v.matrix.decompose(v.position,v.quaternion,v.scale),v.updateMatrixWorld()}if(t.preservePosition)for(let _=0;_<p.length;++_)v=p[_],x=t.names[v.name]||v.name,x!==t.hip&&v.position.copy(M[_]);t.preserveMatrix&&n.updateMatrixWorld(!0)}function kae(n,e,t,i={}){i.useFirstFramePosition=i.useFirstFramePosition!==void 0?i.useFirstFramePosition:!1,i.fps=i.fps!==void 0?i.fps:30,i.names=i.names||[],e.isObject3D||(e=Xae(e));const s=Math.round(t.duration*(i.fps/1e3)*1e3),r=1/i.fps,a=[],l=new NR(e),c=zA(n.skeleton),f=[];let p,g,v,x,A;l.clipAction(t).play(),l.update(0),e.updateMatrixWorld();for(let M=0;M<s;++M){const _=M*r;gH(n,e,i);for(let S=0;S<c.length;++S)A=i.names[c[S].name]||c[S].name,v=vH(A,e.skeleton),v&&(g=c[S],x=f[S]=f[S]||{bone:g},i.hip===A&&(x.pos||(x.pos={times:new Float32Array(s),values:new Float32Array(s*3)}),i.useFirstFramePosition&&(M===0&&(p=g.position.clone()),g.position.sub(p)),x.pos.times[M]=_,g.position.toArray(x.pos.values,M*3)),x.quat||(x.quat={times:new Float32Array(s),values:new Float32Array(s*4)}),x.quat.times[M]=_,g.quaternion.toArray(x.quat.values,M*4));l.update(r),e.updateMatrixWorld()}for(let M=0;M<f.length;++M)x=f[M],x&&(x.pos&&a.push(new Ef(".bones["+x.bone.name+"].position",x.pos.times,x.pos.values)),a.push(new Mf(".bones["+x.bone.name+"].quaternion",x.quat.times,x.quat.values)));return l.uncacheAction(t),new Md(t.name,-1,a)}function jae(n){const e=new Map,t=new Map,i=n.clone();return yH(n,i,function(s,r){e.set(r,s),t.set(s,r)}),i.traverse(function(s){if(!s.isSkinnedMesh)return;const r=s,a=e.get(s),l=a.skeleton.bones;r.skeleton=a.skeleton.clone(),r.bindMatrix.copy(a.bindMatrix),r.skeleton.bones=l.map(function(c){return t.get(c)}),r.bind(r.skeleton,r.bindMatrix)}),i}function vH(n,e){for(let t=0,i=zA(e);t<i.length;t++)if(n===i[t].name)return i[t]}function zA(n){return Array.isArray(n)?n:n.bones}function Xae(n){const e=new O4(n.bones[0]);return e.skeleton=n,e}function yH(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)yH(n.children[i],e.children[i],t)}const Yae={retarget:gH,retargetClip:kae,clone:jae};var Wae=Object.defineProperty,qae=(n,e,t)=>e in n?Wae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Kae=(n,e,t)=>(qae(n,e+"",t),t);class Jae{constructor(){Kae(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e);e.target=null}}}var Zae=Object.defineProperty,Qae=(n,e,t)=>e in n?Zae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qt=(n,e,t)=>(Qae(n,typeof e!="symbol"?e+"":e,t),t);const ib=new Cd,bO=new Xc,$ae=Math.cos(70*(Math.PI/180)),AO=(n,e)=>(n%e+e)%e;let eoe=class extends Jae{constructor(e,t){super(),Qt(this,"object"),Qt(this,"domElement"),Qt(this,"enabled",!0),Qt(this,"target",new te),Qt(this,"minDistance",0),Qt(this,"maxDistance",1/0),Qt(this,"minZoom",0),Qt(this,"maxZoom",1/0),Qt(this,"minPolarAngle",0),Qt(this,"maxPolarAngle",Math.PI),Qt(this,"minAzimuthAngle",-1/0),Qt(this,"maxAzimuthAngle",1/0),Qt(this,"enableDamping",!1),Qt(this,"dampingFactor",.05),Qt(this,"enableZoom",!0),Qt(this,"zoomSpeed",1),Qt(this,"enableRotate",!0),Qt(this,"rotateSpeed",1),Qt(this,"enablePan",!0),Qt(this,"panSpeed",1),Qt(this,"screenSpacePanning",!0),Qt(this,"keyPanSpeed",7),Qt(this,"zoomToCursor",!1),Qt(this,"autoRotate",!1),Qt(this,"autoRotateSpeed",2),Qt(this,"reverseOrbit",!1),Qt(this,"reverseHorizontalOrbit",!1),Qt(this,"reverseVerticalOrbit",!1),Qt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Qt(this,"mouseButtons",{LEFT:jh.ROTATE,MIDDLE:jh.DOLLY,RIGHT:jh.PAN}),Qt(this,"touches",{ONE:Xh.ROTATE,TWO:Xh.DOLLY_PAN}),Qt(this,"target0"),Qt(this,"position0"),Qt(this,"zoom0"),Qt(this,"_domElementKeyEvents",null),Qt(this,"getPolarAngle"),Qt(this,"getAzimuthalAngle"),Qt(this,"setPolarAngle"),Qt(this,"setAzimuthalAngle"),Qt(this,"getDistance"),Qt(this,"getZoomScale"),Qt(this,"listenToKeyEvents"),Qt(this,"stopListenToKeyEvents"),Qt(this,"saveState"),Qt(this,"reset"),Qt(this,"update"),Qt(this,"connect"),Qt(this,"dispose"),Qt(this,"dollyIn"),Qt(this,"dollyOut"),Qt(this,"getScale"),Qt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=me=>{let Fe=AO(me,2*Math.PI),rt=p.phi;rt<0&&(rt+=2*Math.PI),Fe<0&&(Fe+=2*Math.PI);let de=Math.abs(Fe-rt);2*Math.PI-de<de&&(Fe<rt?Fe+=2*Math.PI:rt+=2*Math.PI),g.phi=Fe-rt,i.update()},this.setAzimuthalAngle=me=>{let Fe=AO(me,2*Math.PI),rt=p.theta;rt<0&&(rt+=2*Math.PI),Fe<0&&(Fe+=2*Math.PI);let de=Math.abs(Fe-rt);2*Math.PI-de<de&&(Fe<rt?Fe+=2*Math.PI:rt+=2*Math.PI),g.theta=Fe-rt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=me=>{me.addEventListener("keydown",ct),this._domElementKeyEvents=me},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ct),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(s),i.update(),c=l.NONE},this.update=(()=>{const me=new te,Fe=new te(0,1,0),rt=new Hs().setFromUnitVectors(e.up,Fe),de=rt.clone().invert(),Ee=new te,Oe=new Hs,Xe=2*Math.PI;return function(){const vt=i.object.position;rt.setFromUnitVectors(e.up,Fe),de.copy(rt).invert(),me.copy(vt).sub(i.target),me.applyQuaternion(rt),p.setFromVector3(me),i.autoRotate&&c===l.NONE&&$(re()),i.enableDamping?(p.theta+=g.theta*i.dampingFactor,p.phi+=g.phi*i.dampingFactor):(p.theta+=g.theta,p.phi+=g.phi);let Ht=i.minAzimuthAngle,vn=i.maxAzimuthAngle;isFinite(Ht)&&isFinite(vn)&&(Ht<-Math.PI?Ht+=Xe:Ht>Math.PI&&(Ht-=Xe),vn<-Math.PI?vn+=Xe:vn>Math.PI&&(vn-=Xe),Ht<=vn?p.theta=Math.max(Ht,Math.min(vn,p.theta)):p.theta=p.theta>(Ht+vn)/2?Math.max(Ht,p.theta):Math.min(vn,p.theta)),p.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,p.phi)),p.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(x,i.dampingFactor):i.target.add(x),i.zoomToCursor&&U||i.object.isOrthographicCamera?p.radius=_e(p.radius):p.radius=_e(p.radius*v),me.setFromSpherical(p),me.applyQuaternion(de),vt.copy(i.target).add(me),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(g.theta*=1-i.dampingFactor,g.phi*=1-i.dampingFactor,x.multiplyScalar(1-i.dampingFactor)):(g.set(0,0,0),x.set(0,0,0));let Yn=!1;if(i.zoomToCursor&&U){let cn=null;if(i.object instanceof Zi&&i.object.isPerspectiveCamera){const Ui=me.length();cn=_e(Ui*v);const vi=Ui-cn;i.object.position.addScaledVector(F,vi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Ui=new te(P.x,P.y,0);Ui.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix(),Yn=!0;const vi=new te(P.x,P.y,0);vi.unproject(i.object),i.object.position.sub(vi).add(Ui),i.object.updateMatrixWorld(),cn=me.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;cn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(cn).add(i.object.position):(ib.origin.copy(i.object.position),ib.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(ib.direction))<$ae?e.lookAt(i.target):(bO.setFromNormalAndCoplanarPoint(i.object.up,i.target),ib.intersectPlane(bO,i.target))))}else i.object instanceof oc&&i.object.isOrthographicCamera&&(Yn=v!==1,Yn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix()));return v=1,U=!1,Yn||Ee.distanceToSquared(i.object.position)>f||8*(1-Oe.dot(i.object.quaternion))>f?(i.dispatchEvent(s),Ee.copy(i.object.position),Oe.copy(i.object.quaternion),Yn=!1,!0):!1}})(),this.connect=me=>{i.domElement=me,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",st),i.domElement.addEventListener("pointerdown",W),i.domElement.addEventListener("pointercancel",ke),i.domElement.addEventListener("wheel",gt)},this.dispose=()=>{var me,Fe,rt,de,Ee,Oe;i.domElement&&(i.domElement.style.touchAction="auto"),(me=i.domElement)==null||me.removeEventListener("contextmenu",st),(Fe=i.domElement)==null||Fe.removeEventListener("pointerdown",W),(rt=i.domElement)==null||rt.removeEventListener("pointercancel",ke),(de=i.domElement)==null||de.removeEventListener("wheel",gt),(Ee=i.domElement)==null||Ee.ownerDocument.removeEventListener("pointermove",Me),(Oe=i.domElement)==null||Oe.ownerDocument.removeEventListener("pointerup",ke),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ct)};const i=this,s={type:"change"},r={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const f=1e-6,p=new KT,g=new KT;let v=1;const x=new te,A=new ze,M=new ze,_=new ze,S=new ze,w=new ze,C=new ze,B=new ze,N=new ze,L=new ze,F=new te,P=new ze;let U=!1;const I=[],X={};function re(){return 2*Math.PI/60/60*i.autoRotateSpeed}function ee(){return Math.pow(.95,i.zoomSpeed)}function $(me){i.reverseOrbit||i.reverseHorizontalOrbit?g.theta+=me:g.theta-=me}function ae(me){i.reverseOrbit||i.reverseVerticalOrbit?g.phi+=me:g.phi-=me}const j=(()=>{const me=new te;return function(rt,de){me.setFromMatrixColumn(de,0),me.multiplyScalar(-rt),x.add(me)}})(),Q=(()=>{const me=new te;return function(rt,de){i.screenSpacePanning===!0?me.setFromMatrixColumn(de,1):(me.setFromMatrixColumn(de,0),me.crossVectors(i.object.up,me)),me.multiplyScalar(rt),x.add(me)}})(),J=(()=>{const me=new te;return function(rt,de){const Ee=i.domElement;if(Ee&&i.object instanceof Zi&&i.object.isPerspectiveCamera){const Oe=i.object.position;me.copy(Oe).sub(i.target);let Xe=me.length();Xe*=Math.tan(i.object.fov/2*Math.PI/180),j(2*rt*Xe/Ee.clientHeight,i.object.matrix),Q(2*de*Xe/Ee.clientHeight,i.object.matrix)}else Ee&&i.object instanceof oc&&i.object.isOrthographicCamera?(j(rt*(i.object.right-i.object.left)/i.object.zoom/Ee.clientWidth,i.object.matrix),Q(de*(i.object.top-i.object.bottom)/i.object.zoom/Ee.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function xe(me){i.object instanceof Zi&&i.object.isPerspectiveCamera||i.object instanceof oc&&i.object.isOrthographicCamera?v=me:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Y(me){xe(v/me)}function oe(me){xe(v*me)}function be(me){if(!i.zoomToCursor||!i.domElement)return;U=!0;const Fe=i.domElement.getBoundingClientRect(),rt=me.clientX-Fe.left,de=me.clientY-Fe.top,Ee=Fe.width,Oe=Fe.height;P.x=rt/Ee*2-1,P.y=-(de/Oe)*2+1,F.set(P.x,P.y,1).unproject(i.object).sub(i.object.position).normalize()}function _e(me){return Math.max(i.minDistance,Math.min(i.maxDistance,me))}function ue(me){A.set(me.clientX,me.clientY)}function Ue(me){be(me),B.set(me.clientX,me.clientY)}function Be(me){S.set(me.clientX,me.clientY)}function He(me){M.set(me.clientX,me.clientY),_.subVectors(M,A).multiplyScalar(i.rotateSpeed);const Fe=i.domElement;Fe&&($(2*Math.PI*_.x/Fe.clientHeight),ae(2*Math.PI*_.y/Fe.clientHeight)),A.copy(M),i.update()}function et(me){N.set(me.clientX,me.clientY),L.subVectors(N,B),L.y>0?Y(ee()):L.y<0&&oe(ee()),B.copy(N),i.update()}function Lt(me){w.set(me.clientX,me.clientY),C.subVectors(w,S).multiplyScalar(i.panSpeed),J(C.x,C.y),S.copy(w),i.update()}function _t(me){be(me),me.deltaY<0?oe(ee()):me.deltaY>0&&Y(ee()),i.update()}function jt(me){let Fe=!1;switch(me.code){case i.keys.UP:J(0,i.keyPanSpeed),Fe=!0;break;case i.keys.BOTTOM:J(0,-i.keyPanSpeed),Fe=!0;break;case i.keys.LEFT:J(i.keyPanSpeed,0),Fe=!0;break;case i.keys.RIGHT:J(-i.keyPanSpeed,0),Fe=!0;break}Fe&&(me.preventDefault(),i.update())}function Ye(){if(I.length==1)A.set(I[0].pageX,I[0].pageY);else{const me=.5*(I[0].pageX+I[1].pageX),Fe=.5*(I[0].pageY+I[1].pageY);A.set(me,Fe)}}function Ze(){if(I.length==1)S.set(I[0].pageX,I[0].pageY);else{const me=.5*(I[0].pageX+I[1].pageX),Fe=.5*(I[0].pageY+I[1].pageY);S.set(me,Fe)}}function ie(){const me=I[0].pageX-I[1].pageX,Fe=I[0].pageY-I[1].pageY,rt=Math.sqrt(me*me+Fe*Fe);B.set(0,rt)}function Bt(){i.enableZoom&&ie(),i.enablePan&&Ze()}function it(){i.enableZoom&&ie(),i.enableRotate&&Ye()}function ft(me){if(I.length==1)M.set(me.pageX,me.pageY);else{const rt=mt(me),de=.5*(me.pageX+rt.x),Ee=.5*(me.pageY+rt.y);M.set(de,Ee)}_.subVectors(M,A).multiplyScalar(i.rotateSpeed);const Fe=i.domElement;Fe&&($(2*Math.PI*_.x/Fe.clientHeight),ae(2*Math.PI*_.y/Fe.clientHeight)),A.copy(M)}function lt(me){if(I.length==1)w.set(me.pageX,me.pageY);else{const Fe=mt(me),rt=.5*(me.pageX+Fe.x),de=.5*(me.pageY+Fe.y);w.set(rt,de)}C.subVectors(w,S).multiplyScalar(i.panSpeed),J(C.x,C.y),S.copy(w)}function Ft(me){const Fe=mt(me),rt=me.pageX-Fe.x,de=me.pageY-Fe.y,Ee=Math.sqrt(rt*rt+de*de);N.set(0,Ee),L.set(0,Math.pow(N.y/B.y,i.zoomSpeed)),Y(L.y),B.copy(N)}function dt(me){i.enableZoom&&Ft(me),i.enablePan&&lt(me)}function ne(me){i.enableZoom&&Ft(me),i.enableRotate&&ft(me)}function W(me){var Fe,rt;i.enabled!==!1&&(I.length===0&&((Fe=i.domElement)==null||Fe.ownerDocument.addEventListener("pointermove",Me),(rt=i.domElement)==null||rt.ownerDocument.addEventListener("pointerup",ke)),Tt(me),me.pointerType==="touch"?ht(me):Qe(me))}function Me(me){i.enabled!==!1&&(me.pointerType==="touch"?hn(me):je(me))}function ke(me){var Fe,rt,de;Rt(me),I.length===0&&((Fe=i.domElement)==null||Fe.releasePointerCapture(me.pointerId),(rt=i.domElement)==null||rt.ownerDocument.removeEventListener("pointermove",Me),(de=i.domElement)==null||de.ownerDocument.removeEventListener("pointerup",ke)),i.dispatchEvent(a),c=l.NONE}function Qe(me){let Fe;switch(me.button){case 0:Fe=i.mouseButtons.LEFT;break;case 1:Fe=i.mouseButtons.MIDDLE;break;case 2:Fe=i.mouseButtons.RIGHT;break;default:Fe=-1}switch(Fe){case jh.DOLLY:if(i.enableZoom===!1)return;Ue(me),c=l.DOLLY;break;case jh.ROTATE:if(me.ctrlKey||me.metaKey||me.shiftKey){if(i.enablePan===!1)return;Be(me),c=l.PAN}else{if(i.enableRotate===!1)return;ue(me),c=l.ROTATE}break;case jh.PAN:if(me.ctrlKey||me.metaKey||me.shiftKey){if(i.enableRotate===!1)return;ue(me),c=l.ROTATE}else{if(i.enablePan===!1)return;Be(me),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(r)}function je(me){if(i.enabled!==!1)switch(c){case l.ROTATE:if(i.enableRotate===!1)return;He(me);break;case l.DOLLY:if(i.enableZoom===!1)return;et(me);break;case l.PAN:if(i.enablePan===!1)return;Lt(me);break}}function gt(me){i.enabled===!1||i.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(me.preventDefault(),i.dispatchEvent(r),_t(me),i.dispatchEvent(a))}function ct(me){i.enabled===!1||i.enablePan===!1||jt(me)}function ht(me){switch(St(me),I.length){case 1:switch(i.touches.ONE){case Xh.ROTATE:if(i.enableRotate===!1)return;Ye(),c=l.TOUCH_ROTATE;break;case Xh.PAN:if(i.enablePan===!1)return;Ze(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(i.touches.TWO){case Xh.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Bt(),c=l.TOUCH_DOLLY_PAN;break;case Xh.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;it(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(r)}function hn(me){switch(St(me),c){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;ft(me),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;lt(me),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;dt(me),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ne(me),i.update();break;default:c=l.NONE}}function st(me){i.enabled!==!1&&me.preventDefault()}function Tt(me){I.push(me)}function Rt(me){delete X[me.pointerId];for(let Fe=0;Fe<I.length;Fe++)if(I[Fe].pointerId==me.pointerId){I.splice(Fe,1);return}}function St(me){let Fe=X[me.pointerId];Fe===void 0&&(Fe=new ze,X[me.pointerId]=Fe),Fe.set(me.pageX,me.pageY)}function mt(me){const Fe=me.pointerId===I[0].pointerId?I[1]:I[0];return X[Fe.pointerId]}this.dollyIn=(me=ee())=>{oe(me),i.update()},this.dollyOut=(me=ee())=>{Y(me),i.update()},this.getScale=()=>v,this.setScale=me=>{xe(me),i.update()},this.getZoomScale=()=>ee(),t!==void 0&&this.connect(t),this.update()}};function HA(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const od="srgb",Zc="srgb-linear",SO=3001,toe=3e3;class kR extends mr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new aoe(t)}),this.register(function(t){return new ooe(t)}),this.register(function(t){return new goe(t)}),this.register(function(t){return new voe(t)}),this.register(function(t){return new yoe(t)}),this.register(function(t){return new coe(t)}),this.register(function(t){return new uoe(t)}),this.register(function(t){return new foe(t)}),this.register(function(t){return new hoe(t)}),this.register(function(t){return new roe(t)}),this.register(function(t){return new doe(t)}),this.register(function(t){return new loe(t)}),this.register(function(t){return new moe(t)}),this.register(function(t){return new poe(t)}),this.register(function(t){return new ioe(t)}),this.register(function(t){return new xoe(t)}),this.register(function(t){return new boe(t)})}load(e,t,i,s){const r=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const f=pf.extractUrlBase(e);a=pf.resolveURL(f,this.path)}else a=pf.extractUrlBase(e);this.manager.itemStart(e);const l=function(f){s?s(f):console.error(f),r.manager.itemError(e),r.manager.itemEnd(e)},c=new pr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){try{r.parse(f,a,function(p){t(p),r.manager.itemEnd(e)},l)}catch(p){l(p)}},i,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const a={},l={};if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(HA(new Uint8Array(e.slice(0,4)))===xH){try{a[Un.KHR_BINARY_GLTF]=new Aoe(e)}catch(p){s&&s(p);return}r=JSON.parse(a[Un.KHR_BINARY_GLTF].content)}else r=JSON.parse(HA(new Uint8Array(e)));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Ooe(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const p=this.pluginCallbacks[f](c);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[p.name]=p,a[p.name]=!0}if(r.extensionsUsed)for(let f=0;f<r.extensionsUsed.length;++f){const p=r.extensionsUsed[f],g=r.extensionsRequired||[];switch(p){case Un.KHR_MATERIALS_UNLIT:a[p]=new soe;break;case Un.KHR_DRACO_MESH_COMPRESSION:a[p]=new Soe(r,this.dracoLoader);break;case Un.KHR_TEXTURE_TRANSFORM:a[p]=new _oe;break;case Un.KHR_MESH_QUANTIZATION:a[p]=new Moe;break;default:g.indexOf(p)>=0&&l[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}c.setExtensions(a),c.setPlugins(l),c.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function noe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Un={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ioe{constructor(e){this.parser=e,this.name=Un.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,c=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let f;const p=new pt(16777215);c.color!==void 0&&p.setRGB(c.color[0],c.color[1],c.color[2],Zc);const g=c.range!==void 0?c.range:0;switch(c.type){case"directional":f=new TR(p),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new ER(p),f.distance=g;break;case"spot":f=new MR(p),f.distance=g,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,f.angle=c.spot.outerConeAngle,f.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return f.position.set(0,0,0),f.decay=2,jc(f,c),c.intensity!==void 0&&(f.intensity=c.intensity),f.name=t.createUniqueName(c.name||"light_"+e),s=Promise.resolve(f),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],l=(r.extensions&&r.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return i._getNodeRef(t.cache,l,c)})}}class soe{constructor(){this.name=Un.KHR_MATERIALS_UNLIT}getMaterialType(){return ia}extendParams(e,t,i){const s=[];e.color=new pt(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const a=r.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],Zc),e.opacity=a[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,od))}return Promise.all(s)}}class roe{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class aoe{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ze(l,l)}return Promise.all(r)}}class ooe{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class loe{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}class coe{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new pt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=s.extensions[this.name];if(a.sheenColorFactor!==void 0){const l=a.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],Zc)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,od)),a.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}class uoe{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}class foe{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return t.attenuationColor=new pt().setRGB(l[0],l[1],l[2],Zc),Promise.all(r)}}class hoe{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class doe{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return t.specularColor=new pt().setRGB(l[0],l[1],l[2],Zc),a.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,od)),Promise.all(r)}}class poe{constructor(e){this.parser=e,this.name=Un.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(r)}}class moe{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Eo}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}class goe{constructor(e){this.parser=e,this.name=Un.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,a)}}class voe{constructor(e){this.parser=e,this.name=Un.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],l=s.images[a.source];let c=i.textureLoader;if(l.uri){const f=i.options.manager.getHandler(l.uri);f!==null&&(c=f)}return this.detectSupport().then(function(f){if(f)return i.loadTextureImage(e,a.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class yoe{constructor(e){this.parser=e,this.name=Un.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],l=s.images[a.source];let c=i.textureLoader;if(l.uri){const f=i.options.manager.getHandler(l.uri);f!==null&&(c=f)}return this.detectSupport().then(function(f){if(f)return i.loadTextureImage(e,a.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class xoe{constructor(e){this.name=Un.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(l){const c=s.byteOffset||0,f=s.byteLength||0,p=s.count,g=s.byteStride,v=new Uint8Array(l,c,f);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(p,g,v,s.mode,s.filter).then(function(x){return x.buffer}):a.ready.then(function(){const x=new ArrayBuffer(p*g);return a.decodeGltfBuffer(new Uint8Array(x),p,g,v,s.mode,s.filter),x})})}else return null}}class boe{constructor(e){this.name=Un.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const f of s.primitives)if(f.mode!==xo.TRIANGLES&&f.mode!==xo.TRIANGLE_STRIP&&f.mode!==xo.TRIANGLE_FAN&&f.mode!==void 0)return null;const a=i.extensions[this.name].attributes,l=[],c={};for(const f in a)l.push(this.parser.getDependency("accessor",a[f]).then(p=>(c[f]=p,c[f])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(f=>{const p=f.pop(),g=p.isGroup?p.children:[p],v=f[0].count,x=[];for(const A of g){const M=new Wt,_=new te,S=new Hs,w=new te(1,1,1),C=new rR(A.geometry,A.material,v);for(let B=0;B<v;B++)c.TRANSLATION&&_.fromBufferAttribute(c.TRANSLATION,B),c.ROTATION&&S.fromBufferAttribute(c.ROTATION,B),c.SCALE&&w.fromBufferAttribute(c.SCALE,B),C.setMatrixAt(B,M.compose(_,S,w));for(const B in c)if(B==="_COLOR_0"){const N=c[B];C.instanceColor=new Ad(N.array,N.itemSize,N.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&A.geometry.setAttribute(B,c[B]);Pn.prototype.copy.call(C,A),this.parser.assignFinalMaterial(C),x.push(C)}return p.isGroup?(p.clear(),p.add(...x),p):x[0]}))}}const xH="glTF",I0=12,_O={JSON:1313821514,BIN:5130562};class Aoe{constructor(e){this.name=Un.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,I0);if(this.header={magic:HA(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==xH)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-I0,s=new DataView(e,I0);let r=0;for(;r<i;){const a=s.getUint32(r,!0);r+=4;const l=s.getUint32(r,!0);if(r+=4,l===_O.JSON){const c=new Uint8Array(e,I0+r,a);this.content=HA(c)}else if(l===_O.BIN){const c=I0+r;this.body=e.slice(c,c+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Soe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Un.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,l={},c={},f={};for(const p in a){const g=aC[p]||p.toLowerCase();l[g]=a[p]}for(const p in e.attributes){const g=aC[p]||p.toLowerCase();if(a[p]!==void 0){const v=i.accessors[e.attributes[p]],x=Sm[v.componentType];f[g]=x.name,c[g]=v.normalized===!0}}return t.getDependency("bufferView",r).then(function(p){return new Promise(function(g,v){s.decodeDracoFile(p,function(x){for(const A in x.attributes){const M=x.attributes[A],_=c[A];_!==void 0&&(M.normalized=_)}g(x)},l,f,Zc,v)})})}}class _oe{constructor(){this.name=Un.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Moe{constructor(){this.name=Un.KHR_MESH_QUANTIZATION}}class bH extends eg{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let a=0;a!==s;a++)t[a]=i[r+a];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=l*2,f=l*3,p=s-t,g=(i-t)/p,v=g*g,x=v*g,A=e*f,M=A-f,_=-2*x+3*v,S=x-v,w=1-_,C=S-v+g;for(let B=0;B!==l;B++){const N=a[M+B+l],L=a[M+B+c]*p,F=a[A+B+l],P=a[A+B]*p;r[B]=w*N+C*L+_*F+S*P}return r}}const Eoe=new Hs;class Toe extends bH{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return Eoe.fromArray(r).normalize().toArray(r),r}}const xo={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Sm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},MO={9728:wi,9729:jn,9984:uS,9985:xm,9986:ed,9987:Ao},EO={33071:gs,33648:Om,10497:bf},EE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},aC={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...VR>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},rf={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Coe={CUBICSPLINE:void 0,LINEAR:Im,STEP:Pm},TE={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function woe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Ay({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:hl})),n.DefaultMaterial}function Hh(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function jc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Roe(n,e,t){let i=!1,s=!1,r=!1;for(let f=0,p=e.length;f<p;f++){const g=e[f];if(g.POSITION!==void 0&&(i=!0),g.NORMAL!==void 0&&(s=!0),g.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const a=[],l=[],c=[];for(let f=0,p=e.length;f<p;f++){const g=e[f];if(i){const v=g.POSITION!==void 0?t.getDependency("accessor",g.POSITION):n.attributes.position;a.push(v)}if(s){const v=g.NORMAL!==void 0?t.getDependency("accessor",g.NORMAL):n.attributes.normal;l.push(v)}if(r){const v=g.COLOR_0!==void 0?t.getDependency("accessor",g.COLOR_0):n.attributes.color;c.push(v)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(f){const p=f[0],g=f[1],v=f[2];return i&&(n.morphAttributes.position=p),s&&(n.morphAttributes.normal=g),r&&(n.morphAttributes.color=v),n.morphTargetsRelative=!0,n})}function Boe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Doe(n){let e;const t=n.extensions&&n.extensions[Un.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+CE(t.attributes):e=n.indices+":"+CE(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+CE(n.targets[i]);return e}function CE(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function oC(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Noe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Loe=new Wt;class Ooe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new noe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||s&&r<98?this.textureLoader=new Sy(this.options.manager):this.textureLoader=new R4(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new pr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const l={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:i,userData:{}};return Hh(r,l,s),jc(l,s),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){for(const c of l.scenes)c.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const a=t[s].joints;for(let l=0,c=a.length;l<c;l++)e[a[l]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const a=e[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(a,l)=>{const c=this.associations.get(a);c!=null&&this.associations.set(l,c);for(const[f,p]of a.children.entries())r(p,l.children[f])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Un.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,a){i.load(pf.resolveURL(t.uri,s.path),r,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const a=EE[s.type],l=Sm[s.componentType],c=s.normalized===!0,f=new l(s.count*a);return Promise.resolve(new Xn(f,a,c))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(a){const l=a[0],c=EE[s.type],f=Sm[s.componentType],p=f.BYTES_PER_ELEMENT,g=p*c,v=s.byteOffset||0,x=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,A=s.normalized===!0;let M,_;if(x&&x!==g){const S=Math.floor(v/x),w="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+S+":"+s.count;let C=t.cache.get(w);C||(M=new f(l,S*x,s.count*x/p),C=new dy(M,x/p),t.cache.add(w,C)),_=new _f(C,c,v%x/p,A)}else l===null?M=new f(s.count*c):M=new f(l,v,s.count*c),_=new Xn(M,c,A);if(s.sparse!==void 0){const S=EE.SCALAR,w=Sm[s.sparse.indices.componentType],C=s.sparse.indices.byteOffset||0,B=s.sparse.values.byteOffset||0,N=new w(a[1],C,s.sparse.count*S),L=new f(a[2],B,s.sparse.count*c);l!==null&&(_=new Xn(_.array.slice(),_.itemSize,_.normalized));for(let F=0,P=N.length;F<P;F++){const U=N[F];if(_.setX(U,L[F*c]),c>=2&&_.setY(U,L[F*c+1]),c>=3&&_.setZ(U,L[F*c+2]),c>=4&&_.setW(U,L[F*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,a=t.images[r];let l=this.textureLoader;if(a.uri){const c=i.manager.getHandler(a.uri);c!==null&&(l=c)}return this.loadTextureImage(e,r,l)}loadTextureImage(e,t,i){const s=this,r=this.json,a=r.textures[e],l=r.images[t],c=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[c])return this.textureCache[c];const f=this.loadImageSource(t,i).then(function(p){p.flipY=!1,p.name=a.name||l.name||"",p.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(p.name=l.uri);const v=(r.samplers||{})[a.sampler]||{};return p.magFilter=MO[v.magFilter]||jn,p.minFilter=MO[v.minFilter]||Ao,p.wrapS=EO[v.wrapS]||bf,p.wrapT=EO[v.wrapT]||bf,s.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[c]=f,f}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(g=>g.clone());const a=s.images[e],l=self.URL||self.webkitURL;let c=a.uri||"",f=!1;if(a.bufferView!==void 0)c=i.getDependency("bufferView",a.bufferView).then(function(g){f=!0;const v=new Blob([g],{type:a.mimeType});return c=l.createObjectURL(v),c});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(c).then(function(g){return new Promise(function(v,x){let A=v;t.isImageBitmapLoader===!0&&(A=function(M){const _=new Zn(M);_.needsUpdate=!0,v(_)}),t.load(pf.resolveURL(g,r.path),A,void 0,x)})}).then(function(g){return f===!0&&l.revokeObjectURL(c),jc(g,a),g.userData.mimeType=a.mimeType||Noe(a.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),g});return this.sourceCache[e]=p,p}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(a=a.clone(),a.channel=i.texCoord),r.extensions[Un.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[Un.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const c=r.associations.get(a);a=r.extensions[Un.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),r.associations.set(a,c)}}return s!==void 0&&(typeof s=="number"&&(s=s===SO?od:Zc),"colorSpace"in a?a.colorSpace=s:a.encoding=s===od?SO:toe),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+i.uuid;let c=this.cache.get(l);c||(c=new MS,ys.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(l,c)),i=c}else if(e.isLine){const l="LineBasicMaterial:"+i.uuid;let c=this.cache.get(l);c||(c=new Or,ys.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(l,c)),i=c}if(s||r||a){let l="ClonedMaterial:"+i.uuid+":";s&&(l+="derivative-tangents:"),r&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=i.clone(),r&&(c.vertexColors=!0),a&&(c.flatShading=!0),s&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return Ay}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let a;const l={},c=r.extensions||{},f=[];if(c[Un.KHR_MATERIALS_UNLIT]){const g=s[Un.KHR_MATERIALS_UNLIT];a=g.getMaterialType(),f.push(g.extendParams(l,r,t))}else{const g=r.pbrMetallicRoughness||{};if(l.color=new pt(1,1,1),l.opacity=1,Array.isArray(g.baseColorFactor)){const v=g.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],Zc),l.opacity=v[3]}g.baseColorTexture!==void 0&&f.push(t.assignTexture(l,"map",g.baseColorTexture,od)),l.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,l.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(l,"metalnessMap",g.metallicRoughnessTexture)),f.push(t.assignTexture(l,"roughnessMap",g.metallicRoughnessTexture))),a=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,l)})))}r.doubleSided===!0&&(l.side=fr);const p=r.alphaMode||TE.OPAQUE;if(p===TE.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,p===TE.MASK&&(l.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&a!==ia&&(f.push(t.assignTexture(l,"normalMap",r.normalTexture)),l.normalScale=new ze(1,1),r.normalTexture.scale!==void 0)){const g=r.normalTexture.scale;l.normalScale.set(g,g)}if(r.occlusionTexture!==void 0&&a!==ia&&(f.push(t.assignTexture(l,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&a!==ia){const g=r.emissiveFactor;l.emissive=new pt().setRGB(g[0],g[1],g[2],Zc)}return r.emissiveTexture!==void 0&&a!==ia&&f.push(t.assignTexture(l,"emissiveMap",r.emissiveTexture,od)),Promise.all(f).then(function(){const g=new a(l);return r.name&&(g.name=r.name),jc(g,r),t.associations.set(g,{materials:e}),r.extensions&&Hh(s,g,r),g})}createUniqueName(e){const t=Kn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(l){return i[Un.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(c){return TO(c,l,t)})}const a=[];for(let l=0,c=e.length;l<c;l++){const f=e[l],p=Doe(f),g=s[p];if(g)a.push(g.promise);else{let v;f.extensions&&f.extensions[Un.KHR_DRACO_MESH_COMPRESSION]?v=r(f):v=TO(new gn,f,t),s[p]={primitive:f,promise:v},a.push(v)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],a=r.primitives,l=[];for(let c=0,f=a.length;c<f;c++){const p=a[c].material===void 0?woe(this.cache):this.getDependency("material",a[c].material);l.push(p)}return l.push(t.loadGeometries(a)),Promise.all(l).then(function(c){const f=c.slice(0,c.length-1),p=c[c.length-1],g=[];for(let x=0,A=p.length;x<A;x++){const M=p[x],_=a[x];let S;const w=f[x];if(_.mode===xo.TRIANGLES||_.mode===xo.TRIANGLE_STRIP||_.mode===xo.TRIANGLE_FAN||_.mode===void 0)S=r.isSkinnedMesh===!0?new sR(M,w):new Ci(M,w),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),_.mode===xo.TRIANGLE_STRIP?S.geometry=xO(S.geometry,Jw):_.mode===xo.TRIANGLE_FAN&&(S.geometry=xO(S.geometry,BA));else if(_.mode===xo.LINES)S=new pl(M,w);else if(_.mode===xo.LINE_STRIP)S=new nu(M,w);else if(_.mode===xo.LINE_LOOP)S=new aR(M,w);else if(_.mode===xo.POINTS)S=new oR(M,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(S.geometry.morphAttributes).length>0&&Boe(S,r),S.name=t.createUniqueName(r.name||"mesh_"+e),jc(S,r),_.extensions&&Hh(s,S,_),t.assignFinalMaterial(S),g.push(S)}for(let x=0,A=g.length;x<A;x++)t.associations.set(g[x],{meshes:e,primitives:x});if(g.length===1)return r.extensions&&Hh(s,g[0],r),g[0];const v=new Wc;r.extensions&&Hh(s,v,r),t.associations.set(v,{meshes:e});for(let x=0,A=g.length;x<A;x++)v.add(g[x]);return v})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Zi(bm.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new oc(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),jc(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),a=s,l=[],c=[];for(let f=0,p=a.length;f<p;f++){const g=a[f];if(g){l.push(g);const v=new Wt;r!==null&&v.fromArray(r.array,f*16),c.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new py(l,c)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,a=[],l=[],c=[],f=[],p=[];for(let g=0,v=s.channels.length;g<v;g++){const x=s.channels[g],A=s.samplers[x.sampler],M=x.target,_=M.node,S=s.parameters!==void 0?s.parameters[A.input]:A.input,w=s.parameters!==void 0?s.parameters[A.output]:A.output;M.node!==void 0&&(a.push(this.getDependency("node",_)),l.push(this.getDependency("accessor",S)),c.push(this.getDependency("accessor",w)),f.push(A),p.push(M))}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(f),Promise.all(p)]).then(function(g){const v=g[0],x=g[1],A=g[2],M=g[3],_=g[4],S=[];for(let w=0,C=v.length;w<C;w++){const B=v[w],N=x[w],L=A[w],F=M[w],P=_[w];if(B===void 0)continue;B.updateMatrix&&B.updateMatrix();const U=i._createAnimationTracks(B,N,L,F,P);if(U)for(let I=0;I<U.length;I++)S.push(U[I])}return new Md(r,void 0,S)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const a=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let c=0,f=s.weights.length;c<f;c++)l.morphTargetInfluences[c]=s.weights[c]}),a})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),a=[],l=s.children||[];for(let f=0,p=l.length;f<p;f++)a.push(i.getDependency("node",l[f]));const c=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(a),c]).then(function(f){const p=f[0],g=f[1],v=f[2];v!==null&&p.traverse(function(x){x.isSkinnedMesh&&x.bind(v,Loe)});for(let x=0,A=g.length;x<A;x++)p.add(g[x]);return p})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],a=r.name?s.createUniqueName(r.name):"",l=[],c=s._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return c&&l.push(c),r.camera!==void 0&&l.push(s.getDependency("camera",r.camera).then(function(f){return s._getNodeRef(s.cameraCache,r.camera,f)})),s._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){l.push(f)}),this.nodeCache[e]=Promise.all(l).then(function(f){let p;if(r.isBone===!0?p=new _S:f.length>1?p=new Wc:f.length===1?p=f[0]:p=new Pn,p!==f[0])for(let g=0,v=f.length;g<v;g++)p.add(f[g]);if(r.name&&(p.userData.name=r.name,p.name=a),jc(p,r),r.extensions&&Hh(i,p,r),r.matrix!==void 0){const g=new Wt;g.fromArray(r.matrix),p.applyMatrix4(g)}else r.translation!==void 0&&p.position.fromArray(r.translation),r.rotation!==void 0&&p.quaternion.fromArray(r.rotation),r.scale!==void 0&&p.scale.fromArray(r.scale);return s.associations.has(p)||s.associations.set(p,{}),s.associations.get(p).nodes=e,p}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new Wc;i.name&&(r.name=s.createUniqueName(i.name)),jc(r,i),i.extensions&&Hh(t,r,i);const a=i.nodes||[],l=[];for(let c=0,f=a.length;c<f;c++)l.push(s.getDependency("node",a[c]));return Promise.all(l).then(function(c){for(let p=0,g=c.length;p<g;p++)r.add(c[p]);const f=p=>{const g=new Map;for(const[v,x]of s.associations)(v instanceof ys||v instanceof Zn)&&g.set(v,x);return p.traverse(v=>{const x=s.associations.get(v);x!=null&&g.set(v,x)}),g};return s.associations=f(r),r})}_createAnimationTracks(e,t,i,s,r){const a=[],l=e.name?e.name:e.uuid,c=[];rf[r.path]===rf.weights?e.traverse(function(v){v.morphTargetInfluences&&c.push(v.name?v.name:v.uuid)}):c.push(l);let f;switch(rf[r.path]){case rf.weights:f=_d;break;case rf.rotation:f=Mf;break;case rf.position:case rf.scale:f=Ef;break;default:switch(i.itemSize){case 1:f=_d;break;case 2:case 3:default:f=Ef;break}break}const p=s.interpolation!==void 0?Coe[s.interpolation]:Im,g=this._getArrayFromAccessor(i);for(let v=0,x=c.length;v<x;v++){const A=new f(c[v]+"."+rf[r.path],t.array,g,p);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(A),a.push(A)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=oC(t.constructor),s=new Float32Array(t.length);for(let r=0,a=t.length;r<a;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof Mf?Toe:bH;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Uoe(n,e,t){const i=e.attributes,s=new Lr;if(i.POSITION!==void 0){const l=t.json.accessors[i.POSITION],c=l.min,f=l.max;if(c!==void 0&&f!==void 0){if(s.set(new te(c[0],c[1],c[2]),new te(f[0],f[1],f[2])),l.normalized){const p=oC(Sm[l.componentType]);s.min.multiplyScalar(p),s.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const l=new te,c=new te;for(let f=0,p=r.length;f<p;f++){const g=r[f];if(g.POSITION!==void 0){const v=t.json.accessors[g.POSITION],x=v.min,A=v.max;if(x!==void 0&&A!==void 0){if(c.setX(Math.max(Math.abs(x[0]),Math.abs(A[0]))),c.setY(Math.max(Math.abs(x[1]),Math.abs(A[1]))),c.setZ(Math.max(Math.abs(x[2]),Math.abs(A[2]))),v.normalized){const M=oC(Sm[v.componentType]);c.multiplyScalar(M)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(l)}n.boundingBox=s;const a=new dr;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=a}function TO(n,e,t){const i=e.attributes,s=[];function r(a,l){return t.getDependency("accessor",a).then(function(c){n.setAttribute(l,c)})}for(const a in i){const l=aC[a]||a.toLowerCase();l in n.attributes||s.push(r(i[a],l))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(l){n.setIndex(l)});s.push(a)}return jc(n,e),Uoe(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?Roe(n,e.targets,t):n})}class Poe extends SR{constructor(e){super(e),this.type=ws}parse(e){const a=function(P,U){switch(P){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(U||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(U||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(U||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(U||""))}},p=`
`,g=function(P,U,I){U=U||1024;let re=P.pos,ee=-1,$=0,ae="",j=String.fromCharCode.apply(null,new Uint16Array(P.subarray(re,re+128)));for(;0>(ee=j.indexOf(p))&&$<U&&re<P.byteLength;)ae+=j,$+=j.length,re+=128,j+=String.fromCharCode.apply(null,new Uint16Array(P.subarray(re,re+128)));return-1<ee?(P.pos+=$+ee+1,ae+j.slice(0,ee)):!1},v=function(P){const U=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,X=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,re=/^\s*FORMAT=(\S+)\s*$/,ee=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,$={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ae,j;for((P.pos>=P.byteLength||!(ae=g(P)))&&a(1,"no header found"),(j=ae.match(U))||a(3,"bad initial token"),$.valid|=1,$.programtype=j[1],$.string+=ae+`
`;ae=g(P),ae!==!1;){if($.string+=ae+`
`,ae.charAt(0)==="#"){$.comments+=ae+`
`;continue}if((j=ae.match(I))&&($.gamma=parseFloat(j[1])),(j=ae.match(X))&&($.exposure=parseFloat(j[1])),(j=ae.match(re))&&($.valid|=2,$.format=j[1]),(j=ae.match(ee))&&($.valid|=4,$.height=parseInt(j[1],10),$.width=parseInt(j[2],10)),$.valid&2&&$.valid&4)break}return $.valid&2||a(3,"missing format specifier"),$.valid&4||a(3,"missing image size specifier"),$},x=function(P,U,I){const X=U;if(X<8||X>32767||P[0]!==2||P[1]!==2||P[2]&128)return new Uint8Array(P);X!==(P[2]<<8|P[3])&&a(3,"wrong scanline width");const re=new Uint8Array(4*U*I);re.length||a(4,"unable to allocate buffer space");let ee=0,$=0;const ae=4*X,j=new Uint8Array(4),Q=new Uint8Array(ae);let J=I;for(;J>0&&$<P.byteLength;){$+4>P.byteLength&&a(1),j[0]=P[$++],j[1]=P[$++],j[2]=P[$++],j[3]=P[$++],(j[0]!=2||j[1]!=2||(j[2]<<8|j[3])!=X)&&a(3,"bad rgbe scanline format");let xe=0,Y;for(;xe<ae&&$<P.byteLength;){Y=P[$++];const be=Y>128;if(be&&(Y-=128),(Y===0||xe+Y>ae)&&a(3,"bad scanline data"),be){const _e=P[$++];for(let ue=0;ue<Y;ue++)Q[xe++]=_e}else Q.set(P.subarray($,$+Y),xe),xe+=Y,$+=Y}const oe=X;for(let be=0;be<oe;be++){let _e=0;re[ee]=Q[be+_e],_e+=X,re[ee+1]=Q[be+_e],_e+=X,re[ee+2]=Q[be+_e],_e+=X,re[ee+3]=Q[be+_e],ee+=4}J--}return re},A=function(P,U,I,X){const re=P[U+3],ee=Math.pow(2,re-128)/255;I[X+0]=P[U+0]*ee,I[X+1]=P[U+1]*ee,I[X+2]=P[U+2]*ee,I[X+3]=1},M=function(P,U,I,X){const re=P[U+3],ee=Math.pow(2,re-128)/255;I[X+0]=sd.toHalfFloat(Math.min(P[U+0]*ee,65504)),I[X+1]=sd.toHalfFloat(Math.min(P[U+1]*ee,65504)),I[X+2]=sd.toHalfFloat(Math.min(P[U+2]*ee,65504)),I[X+3]=sd.toHalfFloat(1)},_=new Uint8Array(e);_.pos=0;const S=v(_),w=S.width,C=S.height,B=x(_.subarray(_.pos),w,C);let N,L,F;switch(this.type){case Vi:F=B.length/4;const P=new Float32Array(F*4);for(let I=0;I<F;I++)A(B,I*4,P,I*4);N=P,L=Vi;break;case ws:F=B.length/4;const U=new Uint16Array(F*4);for(let I=0;I<F;I++)M(B,I*4,U,I*4);N=U,L=ws;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:C,data:N,header:S.string,gamma:S.gamma,exposure:S.exposure,type:L}}setDataType(e){return this.type=e,this}load(e,t,i,s){function r(a,l){switch(a.type){case Vi:case ws:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=jn,a.magFilter=jn,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,l)}return super.load(e,r,i,s)}}const F0=VR>=152;class Ioe extends SR{constructor(e){super(e),this.type=ws}parse(e){const U=Math.pow(2.7182818,2.2);function I(k,Z){for(var pe=0,Re=0;Re<65536;++Re)(Re==0||k[Re>>3]&1<<(Re&7))&&(Z[pe++]=Re);for(var Ne=pe-1;pe<65536;)Z[pe++]=0;return Ne}function X(k){for(var Z=0;Z<16384;Z++)k[Z]={},k[Z].len=0,k[Z].lit=0,k[Z].p=null}const re={l:0,c:0,lc:0};function ee(k,Z,pe,Re,Ne){for(;pe<k;)Z=Z<<8|mt(Re,Ne),pe+=8;pe-=k,re.l=Z>>pe&(1<<k)-1,re.c=Z,re.lc=pe}const $=new Array(59);function ae(k){for(var Z=0;Z<=58;++Z)$[Z]=0;for(var Z=0;Z<65537;++Z)$[k[Z]]+=1;for(var pe=0,Z=58;Z>0;--Z){var Re=pe+$[Z]>>1;$[Z]=pe,pe=Re}for(var Z=0;Z<65537;++Z){var Ne=k[Z];Ne>0&&(k[Z]=Ne|$[Ne]++<<6)}}function j(k,Z,pe,Re,Ne,Ge,at){for(var nt=pe,V=0,se=0;Ne<=Ge;Ne++){if(nt.value-pe.value>Re)return!1;ee(6,V,se,k,nt);var le=re.l;if(V=re.c,se=re.lc,at[Ne]=le,le==63){if(nt.value-pe.value>Re)throw"Something wrong with hufUnpackEncTable";ee(8,V,se,k,nt);var fe=re.l+6;if(V=re.c,se=re.lc,Ne+fe>Ge+1)throw"Something wrong with hufUnpackEncTable";for(;fe--;)at[Ne++]=0;Ne--}else if(le>=59){var fe=le-59+2;if(Ne+fe>Ge+1)throw"Something wrong with hufUnpackEncTable";for(;fe--;)at[Ne++]=0;Ne--}}ae(at)}function Q(k){return k&63}function J(k){return k>>6}function xe(k,Z,pe,Re){for(;Z<=pe;Z++){var Ne=J(k[Z]),Ge=Q(k[Z]);if(Ne>>Ge)throw"Invalid table entry";if(Ge>14){var at=Re[Ne>>Ge-14];if(at.len)throw"Invalid table entry";if(at.lit++,at.p){var nt=at.p;at.p=new Array(at.lit);for(var V=0;V<at.lit-1;++V)at.p[V]=nt[V]}else at.p=new Array(1);at.p[at.lit-1]=Z}else if(Ge)for(var se=0,V=1<<14-Ge;V>0;V--){var at=Re[(Ne<<14-Ge)+se];if(at.len||at.p)throw"Invalid table entry";at.len=Ge,at.lit=Z,se++}}return!0}const Y={c:0,lc:0};function oe(k,Z,pe,Re){k=k<<8|mt(pe,Re),Z+=8,Y.c=k,Y.lc=Z}const be={c:0,lc:0};function _e(k,Z,pe,Re,Ne,Ge,at,nt,V,se){if(k==Z){Re<8&&(oe(pe,Re,Ne,at),pe=Y.c,Re=Y.lc),Re-=8;var le=pe>>Re,le=new Uint8Array([le])[0];if(V.value+le>se)return!1;for(var fe=nt[V.value-1];le-- >0;)nt[V.value++]=fe}else if(V.value<se)nt[V.value++]=k;else return!1;be.c=pe,be.lc=Re}function ue(k){return k&65535}function Ue(k){var Z=ue(k);return Z>32767?Z-65536:Z}const Be={a:0,b:0};function He(k,Z){var pe=Ue(k),Re=Ue(Z),Ne=Re,Ge=pe+(Ne&1)+(Ne>>1),at=Ge,nt=Ge-Ne;Be.a=at,Be.b=nt}function et(k,Z){var pe=ue(k),Re=ue(Z),Ne=pe-(Re>>1)&65535,Ge=Re+Ne-32768&65535;Be.a=Ge,Be.b=Ne}function Lt(k,Z,pe,Re,Ne,Ge,at){for(var nt=at<16384,V=pe>Ne?Ne:pe,se=1,le;se<=V;)se<<=1;for(se>>=1,le=se,se>>=1;se>=1;){for(var fe=0,ve=fe+Ge*(Ne-le),Ce=Ge*se,Ve=Ge*le,We=Re*se,tt=Re*le,bt,yt,At,Xt;fe<=ve;fe+=Ve){for(var It=fe,Ln=fe+Re*(pe-le);It<=Ln;It+=tt){var Dt=It+We,Vt=It+Ce,Nt=Vt+We;nt?(He(k[It+Z],k[Vt+Z]),bt=Be.a,At=Be.b,He(k[Dt+Z],k[Nt+Z]),yt=Be.a,Xt=Be.b,He(bt,yt),k[It+Z]=Be.a,k[Dt+Z]=Be.b,He(At,Xt),k[Vt+Z]=Be.a,k[Nt+Z]=Be.b):(et(k[It+Z],k[Vt+Z]),bt=Be.a,At=Be.b,et(k[Dt+Z],k[Nt+Z]),yt=Be.a,Xt=Be.b,et(bt,yt),k[It+Z]=Be.a,k[Dt+Z]=Be.b,et(At,Xt),k[Vt+Z]=Be.a,k[Nt+Z]=Be.b)}if(pe&se){var Vt=It+Ce;nt?He(k[It+Z],k[Vt+Z]):et(k[It+Z],k[Vt+Z]),bt=Be.a,k[Vt+Z]=Be.b,k[It+Z]=bt}}if(Ne&se)for(var It=fe,Ln=fe+Re*(pe-le);It<=Ln;It+=tt){var Dt=It+We;nt?He(k[It+Z],k[Dt+Z]):et(k[It+Z],k[Dt+Z]),bt=Be.a,k[Dt+Z]=Be.b,k[It+Z]=bt}le=se,se>>=1}return fe}function _t(k,Z,pe,Re,Ne,Ge,at,nt,V,se){for(var le=0,fe=0,ve=nt,Ce=Math.trunc(Ne.value+(Ge+7)/8);Ne.value<Ce;)for(oe(le,fe,pe,Ne),le=Y.c,fe=Y.lc;fe>=14;){var Ve=le>>fe-14&16383,We=Z[Ve];if(We.len)fe-=We.len,_e(We.lit,at,le,fe,pe,Re,Ne,V,se,ve),le=be.c,fe=be.lc;else{if(!We.p)throw"hufDecode issues";var tt;for(tt=0;tt<We.lit;tt++){for(var bt=Q(k[We.p[tt]]);fe<bt&&Ne.value<Ce;)oe(le,fe,pe,Ne),le=Y.c,fe=Y.lc;if(fe>=bt&&J(k[We.p[tt]])==(le>>fe-bt&(1<<bt)-1)){fe-=bt,_e(We.p[tt],at,le,fe,pe,Re,Ne,V,se,ve),le=be.c,fe=be.lc;break}}if(tt==We.lit)throw"hufDecode issues"}}var yt=8-Ge&7;for(le>>=yt,fe-=yt;fe>0;){var We=Z[le<<14-fe&16383];if(We.len)fe-=We.len,_e(We.lit,at,le,fe,pe,Re,Ne,V,se,ve),le=be.c,fe=be.lc;else throw"hufDecode issues"}return!0}function jt(k,Z,pe,Re,Ne,Ge){var at={value:0},nt=pe.value,V=St(Z,pe),se=St(Z,pe);pe.value+=4;var le=St(Z,pe);if(pe.value+=4,V<0||V>=65537||se<0||se>=65537)throw"Something wrong with HUF_ENCSIZE";var fe=new Array(65537),ve=new Array(16384);X(ve);var Ce=Re-(pe.value-nt);if(j(k,Z,pe,Ce,V,se,fe),le>8*(Re-(pe.value-nt)))throw"Something wrong with hufUncompress";xe(fe,V,se,ve),_t(fe,ve,k,Z,pe,le,se,Ge,Ne,at)}function Ye(k,Z,pe){for(var Re=0;Re<pe;++Re)Z[Re]=k[Z[Re]]}function Ze(k){for(var Z=1;Z<k.length;Z++){var pe=k[Z-1]+k[Z]-128;k[Z]=pe}}function ie(k,Z){for(var pe=0,Re=Math.floor((k.length+1)/2),Ne=0,Ge=k.length-1;!(Ne>Ge||(Z[Ne++]=k[pe++],Ne>Ge));)Z[Ne++]=k[Re++]}function Bt(k){for(var Z=k.byteLength,pe=new Array,Re=0,Ne=new DataView(k);Z>0;){var Ge=Ne.getInt8(Re++);if(Ge<0){var at=-Ge;Z-=at+1;for(var nt=0;nt<at;nt++)pe.push(Ne.getUint8(Re++))}else{var at=Ge;Z-=2;for(var V=Ne.getUint8(Re++),nt=0;nt<at+1;nt++)pe.push(V)}}return pe}function it(k,Z,pe,Re,Ne,Ge){var Dt=new DataView(Ge.buffer),at=pe[k.idx[0]].width,nt=pe[k.idx[0]].height,V=3,se=Math.floor(at/8),le=Math.ceil(at/8),fe=Math.ceil(nt/8),ve=at-(le-1)*8,Ce=nt-(fe-1)*8,Ve={value:0},We=new Array(V),tt=new Array(V),bt=new Array(V),yt=new Array(V),At=new Array(V);for(let ln=0;ln<V;++ln)At[ln]=Z[k.idx[ln]],We[ln]=ln<1?0:We[ln-1]+le*fe,tt[ln]=new Float32Array(64),bt[ln]=new Uint16Array(64),yt[ln]=new Uint16Array(le*64);for(let ln=0;ln<fe;++ln){var Xt=8;ln==fe-1&&(Xt=Ce);var It=8;for(let qt=0;qt<le;++qt){qt==le-1&&(It=ve);for(let An=0;An<V;++An)bt[An].fill(0),bt[An][0]=Ne[We[An]++],ft(Ve,Re,bt[An]),lt(bt[An],tt[An]),Ft(tt[An]);dt(tt);for(let An=0;An<V;++An)ne(tt[An],yt[An],qt*64)}let ci=0;for(let qt=0;qt<V;++qt){const An=pe[k.idx[qt]].type;for(let yn=8*ln;yn<8*ln+Xt;++yn){ci=At[qt][yn];for(let _i=0;_i<se;++_i){const In=_i*64+(yn&7)*8;Dt.setUint16(ci+0*2*An,yt[qt][In+0],!0),Dt.setUint16(ci+1*2*An,yt[qt][In+1],!0),Dt.setUint16(ci+2*2*An,yt[qt][In+2],!0),Dt.setUint16(ci+3*2*An,yt[qt][In+3],!0),Dt.setUint16(ci+4*2*An,yt[qt][In+4],!0),Dt.setUint16(ci+5*2*An,yt[qt][In+5],!0),Dt.setUint16(ci+6*2*An,yt[qt][In+6],!0),Dt.setUint16(ci+7*2*An,yt[qt][In+7],!0),ci+=8*2*An}}if(se!=le)for(let yn=8*ln;yn<8*ln+Xt;++yn){const _i=At[qt][yn]+8*se*2*An,In=se*64+(yn&7)*8;for(let ui=0;ui<It;++ui)Dt.setUint16(_i+ui*2*An,yt[qt][In+ui],!0)}}}for(var Ln=new Uint16Array(at),Dt=new DataView(Ge.buffer),Vt=0;Vt<V;++Vt){pe[k.idx[Vt]].decoded=!0;var Nt=pe[k.idx[Vt]].type;if(pe[Vt].type==2)for(var ri=0;ri<nt;++ri){const ln=At[Vt][ri];for(var tn=0;tn<at;++tn)Ln[tn]=Dt.getUint16(ln+tn*2*Nt,!0);for(var tn=0;tn<at;++tn)Dt.setFloat32(ln+tn*2*Nt,Ee(Ln[tn]),!0)}}}function ft(k,Z,pe){for(var Re,Ne=1;Ne<64;)Re=Z[k.value],Re==65280?Ne=64:Re>>8==255?Ne+=Re&255:(pe[Ne]=Re,Ne++),k.value++}function lt(k,Z){Z[0]=Ee(k[0]),Z[1]=Ee(k[1]),Z[2]=Ee(k[5]),Z[3]=Ee(k[6]),Z[4]=Ee(k[14]),Z[5]=Ee(k[15]),Z[6]=Ee(k[27]),Z[7]=Ee(k[28]),Z[8]=Ee(k[2]),Z[9]=Ee(k[4]),Z[10]=Ee(k[7]),Z[11]=Ee(k[13]),Z[12]=Ee(k[16]),Z[13]=Ee(k[26]),Z[14]=Ee(k[29]),Z[15]=Ee(k[42]),Z[16]=Ee(k[3]),Z[17]=Ee(k[8]),Z[18]=Ee(k[12]),Z[19]=Ee(k[17]),Z[20]=Ee(k[25]),Z[21]=Ee(k[30]),Z[22]=Ee(k[41]),Z[23]=Ee(k[43]),Z[24]=Ee(k[9]),Z[25]=Ee(k[11]),Z[26]=Ee(k[18]),Z[27]=Ee(k[24]),Z[28]=Ee(k[31]),Z[29]=Ee(k[40]),Z[30]=Ee(k[44]),Z[31]=Ee(k[53]),Z[32]=Ee(k[10]),Z[33]=Ee(k[19]),Z[34]=Ee(k[23]),Z[35]=Ee(k[32]),Z[36]=Ee(k[39]),Z[37]=Ee(k[45]),Z[38]=Ee(k[52]),Z[39]=Ee(k[54]),Z[40]=Ee(k[20]),Z[41]=Ee(k[22]),Z[42]=Ee(k[33]),Z[43]=Ee(k[38]),Z[44]=Ee(k[46]),Z[45]=Ee(k[51]),Z[46]=Ee(k[55]),Z[47]=Ee(k[60]),Z[48]=Ee(k[21]),Z[49]=Ee(k[34]),Z[50]=Ee(k[37]),Z[51]=Ee(k[47]),Z[52]=Ee(k[50]),Z[53]=Ee(k[56]),Z[54]=Ee(k[59]),Z[55]=Ee(k[61]),Z[56]=Ee(k[35]),Z[57]=Ee(k[36]),Z[58]=Ee(k[48]),Z[59]=Ee(k[49]),Z[60]=Ee(k[57]),Z[61]=Ee(k[58]),Z[62]=Ee(k[62]),Z[63]=Ee(k[63])}function Ft(k){const Z=.5*Math.cos(.7853975),pe=.5*Math.cos(3.14159/16),Re=.5*Math.cos(3.14159/8),Ne=.5*Math.cos(3*3.14159/16),Ge=.5*Math.cos(5*3.14159/16),at=.5*Math.cos(3*3.14159/8),nt=.5*Math.cos(7*3.14159/16);for(var V=new Array(4),se=new Array(4),le=new Array(4),fe=new Array(4),ve=0;ve<8;++ve){var Ce=ve*8;V[0]=Re*k[Ce+2],V[1]=at*k[Ce+2],V[2]=Re*k[Ce+6],V[3]=at*k[Ce+6],se[0]=pe*k[Ce+1]+Ne*k[Ce+3]+Ge*k[Ce+5]+nt*k[Ce+7],se[1]=Ne*k[Ce+1]-nt*k[Ce+3]-pe*k[Ce+5]-Ge*k[Ce+7],se[2]=Ge*k[Ce+1]-pe*k[Ce+3]+nt*k[Ce+5]+Ne*k[Ce+7],se[3]=nt*k[Ce+1]-Ge*k[Ce+3]+Ne*k[Ce+5]-pe*k[Ce+7],le[0]=Z*(k[Ce+0]+k[Ce+4]),le[3]=Z*(k[Ce+0]-k[Ce+4]),le[1]=V[0]+V[3],le[2]=V[1]-V[2],fe[0]=le[0]+le[1],fe[1]=le[3]+le[2],fe[2]=le[3]-le[2],fe[3]=le[0]-le[1],k[Ce+0]=fe[0]+se[0],k[Ce+1]=fe[1]+se[1],k[Ce+2]=fe[2]+se[2],k[Ce+3]=fe[3]+se[3],k[Ce+4]=fe[3]-se[3],k[Ce+5]=fe[2]-se[2],k[Ce+6]=fe[1]-se[1],k[Ce+7]=fe[0]-se[0]}for(var Ve=0;Ve<8;++Ve)V[0]=Re*k[16+Ve],V[1]=at*k[16+Ve],V[2]=Re*k[48+Ve],V[3]=at*k[48+Ve],se[0]=pe*k[8+Ve]+Ne*k[24+Ve]+Ge*k[40+Ve]+nt*k[56+Ve],se[1]=Ne*k[8+Ve]-nt*k[24+Ve]-pe*k[40+Ve]-Ge*k[56+Ve],se[2]=Ge*k[8+Ve]-pe*k[24+Ve]+nt*k[40+Ve]+Ne*k[56+Ve],se[3]=nt*k[8+Ve]-Ge*k[24+Ve]+Ne*k[40+Ve]-pe*k[56+Ve],le[0]=Z*(k[Ve]+k[32+Ve]),le[3]=Z*(k[Ve]-k[32+Ve]),le[1]=V[0]+V[3],le[2]=V[1]-V[2],fe[0]=le[0]+le[1],fe[1]=le[3]+le[2],fe[2]=le[3]-le[2],fe[3]=le[0]-le[1],k[0+Ve]=fe[0]+se[0],k[8+Ve]=fe[1]+se[1],k[16+Ve]=fe[2]+se[2],k[24+Ve]=fe[3]+se[3],k[32+Ve]=fe[3]-se[3],k[40+Ve]=fe[2]-se[2],k[48+Ve]=fe[1]-se[1],k[56+Ve]=fe[0]-se[0]}function dt(k){for(var Z=0;Z<64;++Z){var pe=k[0][Z],Re=k[1][Z],Ne=k[2][Z];k[0][Z]=pe+1.5747*Ne,k[1][Z]=pe-.1873*Re-.4682*Ne,k[2][Z]=pe+1.8556*Re}}function ne(k,Z,pe){for(var Re=0;Re<64;++Re)Z[pe+Re]=sd.toHalfFloat(W(k[Re]))}function W(k){return k<=1?Math.sign(k)*Math.pow(Math.abs(k),2.2):Math.sign(k)*Math.pow(U,Math.abs(k)-1)}function Me(k){return new DataView(k.array.buffer,k.offset.value,k.size)}function ke(k){var Z=k.viewer.buffer.slice(k.offset.value,k.offset.value+k.size),pe=new Uint8Array(Bt(Z)),Re=new Uint8Array(pe.length);return Ze(pe),ie(pe,Re),new DataView(Re.buffer)}function Qe(k){var Z=k.array.slice(k.offset.value,k.offset.value+k.size),pe=nb(Z),Re=new Uint8Array(pe.length);return Ze(pe),ie(pe,Re),new DataView(Re.buffer)}function je(k){for(var Z=k.viewer,pe={value:k.offset.value},Re=new Uint16Array(k.width*k.scanlineBlockSize*(k.channels*k.type)),Ne=new Uint8Array(8192),Ge=0,at=new Array(k.channels),nt=0;nt<k.channels;nt++)at[nt]={},at[nt].start=Ge,at[nt].end=at[nt].start,at[nt].nx=k.width,at[nt].ny=k.lines,at[nt].size=k.type,Ge+=at[nt].nx*at[nt].ny*at[nt].size;var V=Oe(Z,pe),se=Oe(Z,pe);if(se>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(V<=se)for(var nt=0;nt<se-V+1;nt++)Ne[nt+V]=me(Z,pe);var le=new Uint16Array(65536),fe=I(Ne,le),ve=St(Z,pe);jt(k.array,Z,pe,ve,Re,Ge);for(var nt=0;nt<k.channels;++nt)for(var Ce=at[nt],Ve=0;Ve<at[nt].size;++Ve)Lt(Re,Ce.start+Ve,Ce.nx,Ce.size,Ce.ny,Ce.nx*Ce.size,fe);Ye(le,Re,Ge);for(var We=0,tt=new Uint8Array(Re.buffer.byteLength),bt=0;bt<k.lines;bt++)for(var yt=0;yt<k.channels;yt++){var Ce=at[yt],At=Ce.nx*Ce.size,Xt=new Uint8Array(Re.buffer,Ce.end*2,At*2);tt.set(Xt,We),We+=At*2,Ce.end+=At}return new DataView(tt.buffer)}function gt(k){var Z=k.array.slice(k.offset.value,k.offset.value+k.size),pe=nb(Z);const Re=k.lines*k.channels*k.width,Ne=k.type==1?new Uint16Array(Re):new Uint32Array(Re);let Ge=0,at=0;const nt=new Array(4);for(let V=0;V<k.lines;V++)for(let se=0;se<k.channels;se++){let le=0;switch(k.type){case 1:nt[0]=Ge,nt[1]=nt[0]+k.width,Ge=nt[1]+k.width;for(let fe=0;fe<k.width;++fe){const ve=pe[nt[0]++]<<8|pe[nt[1]++];le+=ve,Ne[at]=le,at++}break;case 2:nt[0]=Ge,nt[1]=nt[0]+k.width,nt[2]=nt[1]+k.width,Ge=nt[2]+k.width;for(let fe=0;fe<k.width;++fe){const ve=pe[nt[0]++]<<24|pe[nt[1]++]<<16|pe[nt[2]++]<<8;le+=ve,Ne[at]=le,at++}break}}return new DataView(Ne.buffer)}function ct(k){var Z=k.viewer,pe={value:k.offset.value},Re=new Uint8Array(k.width*k.lines*(k.channels*k.type*2)),Ne={version:Fe(Z,pe),unknownUncompressedSize:Fe(Z,pe),unknownCompressedSize:Fe(Z,pe),acCompressedSize:Fe(Z,pe),dcCompressedSize:Fe(Z,pe),rleCompressedSize:Fe(Z,pe),rleUncompressedSize:Fe(Z,pe),rleRawSize:Fe(Z,pe),totalAcUncompressedCount:Fe(Z,pe),totalDcUncompressedCount:Fe(Z,pe),acCompression:Fe(Z,pe)};if(Ne.version<2)throw"EXRLoader.parse: "+Rs.compression+" version "+Ne.version+" is unsupported";for(var Ge=new Array,at=Oe(Z,pe)-2;at>0;){var nt=ht(Z.buffer,pe),V=me(Z,pe),se=V>>2&3,le=(V>>4)-1,fe=new Int8Array([le])[0],ve=me(Z,pe);Ge.push({name:nt,index:fe,type:ve,compression:se}),at-=nt.length+3}for(var Ce=Rs.channels,Ve=new Array(k.channels),We=0;We<k.channels;++We){var tt=Ve[We]={},bt=Ce[We];tt.name=bt.name,tt.compression=0,tt.decoded=!1,tt.type=bt.pixelType,tt.pLinear=bt.pLinear,tt.width=k.width,tt.height=k.lines}for(var yt={idx:new Array(3)},At=0;At<k.channels;++At)for(var tt=Ve[At],We=0;We<Ge.length;++We){var Xt=Ge[We];tt.name==Xt.name&&(tt.compression=Xt.compression,Xt.index>=0&&(yt.idx[Xt.index]=At),tt.offset=At)}if(Ne.acCompressedSize>0)switch(Ne.acCompression){case 0:var Dt=new Uint16Array(Ne.totalAcUncompressedCount);jt(k.array,Z,pe,Ne.acCompressedSize,Dt,Ne.totalAcUncompressedCount);break;case 1:var It=k.array.slice(pe.value,pe.value+Ne.totalAcUncompressedCount),Ln=nb(It),Dt=new Uint16Array(Ln.buffer);pe.value+=Ne.totalAcUncompressedCount;break}if(Ne.dcCompressedSize>0){var Vt={array:k.array,offset:pe,size:Ne.dcCompressedSize},Nt=new Uint16Array(Qe(Vt).buffer);pe.value+=Ne.dcCompressedSize}if(Ne.rleRawSize>0){var It=k.array.slice(pe.value,pe.value+Ne.rleCompressedSize),Ln=nb(It),ri=Bt(Ln.buffer);pe.value+=Ne.rleCompressedSize}for(var tn=0,ln=new Array(Ve.length),We=0;We<ln.length;++We)ln[We]=new Array;for(var ci=0;ci<k.lines;++ci)for(var qt=0;qt<Ve.length;++qt)ln[qt].push(tn),tn+=Ve[qt].width*k.type*2;it(yt,ln,Ve,Dt,Nt,Re);for(var We=0;We<Ve.length;++We){var tt=Ve[We];if(!tt.decoded)switch(tt.compression){case 2:for(var An=0,yn=0,ci=0;ci<k.lines;++ci){for(var _i=ln[We][An],In=0;In<tt.width;++In){for(var ui=0;ui<2*tt.type;++ui)Re[_i++]=ri[yn+ui*tt.width*tt.height];yn++}An++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Re.buffer)}function ht(k,Z){for(var pe=new Uint8Array(k),Re=0;pe[Z.value+Re]!=0;)Re+=1;var Ne=new TextDecoder().decode(pe.slice(Z.value,Z.value+Re));return Z.value=Z.value+Re+1,Ne}function hn(k,Z,pe){var Re=new TextDecoder().decode(new Uint8Array(k).slice(Z.value,Z.value+pe));return Z.value=Z.value+pe,Re}function st(k,Z){var pe=Rt(k,Z),Re=St(k,Z);return[pe,Re]}function Tt(k,Z){var pe=St(k,Z),Re=St(k,Z);return[pe,Re]}function Rt(k,Z){var pe=k.getInt32(Z.value,!0);return Z.value=Z.value+4,pe}function St(k,Z){var pe=k.getUint32(Z.value,!0);return Z.value=Z.value+4,pe}function mt(k,Z){var pe=k[Z.value];return Z.value=Z.value+1,pe}function me(k,Z){var pe=k.getUint8(Z.value);return Z.value=Z.value+1,pe}const Fe=function(k,Z){let pe;return"getBigInt64"in DataView.prototype?pe=Number(k.getBigInt64(Z.value,!0)):pe=k.getUint32(Z.value+4,!0)+Number(k.getUint32(Z.value,!0)<<32),Z.value+=8,pe};function rt(k,Z){var pe=k.getFloat32(Z.value,!0);return Z.value+=4,pe}function de(k,Z){return sd.toHalfFloat(rt(k,Z))}function Ee(k){var Z=(k&31744)>>10,pe=k&1023;return(k>>15?-1:1)*(Z?Z===31?pe?NaN:1/0:Math.pow(2,Z-15)*(1+pe/1024):6103515625e-14*(pe/1024))}function Oe(k,Z){var pe=k.getUint16(Z.value,!0);return Z.value+=2,pe}function Xe(k,Z){return Ee(Oe(k,Z))}function xt(k,Z,pe,Re){for(var Ne=pe.value,Ge=[];pe.value<Ne+Re-1;){var at=ht(Z,pe),nt=Rt(k,pe),V=me(k,pe);pe.value+=3;var se=Rt(k,pe),le=Rt(k,pe);Ge.push({name:at,pixelType:nt,pLinear:V,xSampling:se,ySampling:le})}return pe.value+=1,Ge}function vt(k,Z){var pe=rt(k,Z),Re=rt(k,Z),Ne=rt(k,Z),Ge=rt(k,Z),at=rt(k,Z),nt=rt(k,Z),V=rt(k,Z),se=rt(k,Z);return{redX:pe,redY:Re,greenX:Ne,greenY:Ge,blueX:at,blueY:nt,whiteX:V,whiteY:se}}function Ht(k,Z){var pe=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Re=me(k,Z);return pe[Re]}function vn(k,Z){var pe=St(k,Z),Re=St(k,Z),Ne=St(k,Z),Ge=St(k,Z);return{xMin:pe,yMin:Re,xMax:Ne,yMax:Ge}}function Yn(k,Z){var pe=["INCREASING_Y"],Re=me(k,Z);return pe[Re]}function cn(k,Z){var pe=rt(k,Z),Re=rt(k,Z);return[pe,Re]}function Ui(k,Z){var pe=rt(k,Z),Re=rt(k,Z),Ne=rt(k,Z);return[pe,Re,Ne]}function vi(k,Z,pe,Re,Ne){if(Re==="string"||Re==="stringvector"||Re==="iccProfile")return hn(Z,pe,Ne);if(Re==="chlist")return xt(k,Z,pe,Ne);if(Re==="chromaticities")return vt(k,pe);if(Re==="compression")return Ht(k,pe);if(Re==="box2i")return vn(k,pe);if(Re==="lineOrder")return Yn(k,pe);if(Re==="float")return rt(k,pe);if(Re==="v2f")return cn(k,pe);if(Re==="v3f")return Ui(k,pe);if(Re==="int")return Rt(k,pe);if(Re==="rational")return st(k,pe);if(Re==="timecode")return Tt(k,pe);if(Re==="preview")return pe.value+=Ne,"skipped";pe.value+=Ne}function Pi(k,Z,pe){const Re={};if(k.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Re.version=k.getUint8(4);const Ne=k.getUint8(5);Re.spec={singleTile:!!(Ne&2),longName:!!(Ne&4),deepFormat:!!(Ne&8),multiPart:!!(Ne&16)},pe.value=8;for(var Ge=!0;Ge;){var at=ht(Z,pe);if(at==0)Ge=!1;else{var nt=ht(Z,pe),V=St(k,pe),se=vi(k,Z,pe,nt,V);se===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${nt}'.`):Re[at]=se}}if((Ne&-5)!=0)throw console.error("EXRHeader:",Re),"THREE.EXRLoader: provided file is currently unsupported.";return Re}function ji(k,Z,pe,Re,Ne){const Ge={size:0,viewer:Z,array:pe,offset:Re,width:k.dataWindow.xMax-k.dataWindow.xMin+1,height:k.dataWindow.yMax-k.dataWindow.yMin+1,channels:k.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:k.channels[0].pixelType,uncompress:null,getter:null,format:null,[F0?"colorSpace":"encoding"]:null};switch(k.compression){case"NO_COMPRESSION":Ge.lines=1,Ge.uncompress=Me;break;case"RLE_COMPRESSION":Ge.lines=1,Ge.uncompress=ke;break;case"ZIPS_COMPRESSION":Ge.lines=1,Ge.uncompress=Qe;break;case"ZIP_COMPRESSION":Ge.lines=16,Ge.uncompress=Qe;break;case"PIZ_COMPRESSION":Ge.lines=32,Ge.uncompress=je;break;case"PXR24_COMPRESSION":Ge.lines=16,Ge.uncompress=gt;break;case"DWAA_COMPRESSION":Ge.lines=32,Ge.uncompress=ct;break;case"DWAB_COMPRESSION":Ge.lines=256,Ge.uncompress=ct;break;default:throw"EXRLoader.parse: "+k.compression+" is unsupported"}if(Ge.scanlineBlockSize=Ge.lines,Ge.type==1)switch(Ne){case Vi:Ge.getter=Xe,Ge.inputSize=2;break;case ws:Ge.getter=Oe,Ge.inputSize=2;break}else if(Ge.type==2)switch(Ne){case Vi:Ge.getter=rt,Ge.inputSize=4;break;case ws:Ge.getter=de,Ge.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ge.type+" for "+k.compression+".";Ge.blockCount=(k.dataWindow.yMax+1)/Ge.scanlineBlockSize;for(var at=0;at<Ge.blockCount;at++)Fe(Z,Re);Ge.outputChannels=Ge.channels==3?4:Ge.channels;const nt=Ge.width*Ge.height*Ge.outputChannels;switch(Ne){case Vi:Ge.byteArray=new Float32Array(nt),Ge.channels<Ge.outputChannels&&Ge.byteArray.fill(1,0,nt);break;case ws:Ge.byteArray=new Uint16Array(nt),Ge.channels<Ge.outputChannels&&Ge.byteArray.fill(15360,0,nt);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ne);break}return Ge.bytesPerLine=Ge.width*Ge.inputSize*Ge.channels,Ge.outputChannels==4?Ge.format=vs:Ge.format=ly,F0?Ge.colorSpace="srgb-linear":Ge.encoding=3e3,Ge}const Xi=new DataView(e),ks=new Uint8Array(e),Ca={value:0},Rs=Pi(Xi,e,Ca),Kt=ji(Rs,Xi,ks,Ca,this.type),gr={value:0},$n={R:0,G:1,B:2,A:3,Y:0};for(let k=0;k<Kt.height/Kt.scanlineBlockSize;k++){const Z=St(Xi,Ca);Kt.size=St(Xi,Ca),Kt.lines=Z+Kt.scanlineBlockSize>Kt.height?Kt.height-Z:Kt.scanlineBlockSize;const Re=Kt.size<Kt.lines*Kt.bytesPerLine?Kt.uncompress(Kt):Me(Kt);Ca.value+=Kt.size;for(let Ne=0;Ne<Kt.scanlineBlockSize;Ne++){const Ge=Ne+k*Kt.scanlineBlockSize;if(Ge>=Kt.height)break;for(let at=0;at<Kt.channels;at++){const nt=$n[Rs.channels[at].name];for(let V=0;V<Kt.width;V++){gr.value=(Ne*(Kt.channels*Kt.width)+at*Kt.width+V)*Kt.inputSize;const se=(Kt.height-1-Ge)*(Kt.width*Kt.outputChannels)+V*Kt.outputChannels+nt;Kt.byteArray[se]=Kt.getter(Re,gr)}}}}return{header:Rs,width:Kt.width,height:Kt.height,data:Kt.byteArray,format:Kt.format,[F0?"colorSpace":"encoding"]:Kt[F0?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,s){function r(a,l){F0?a.colorSpace=l.colorSpace:a.encoding=l.encoding,a.minFilter=jn,a.magFilter=jn,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,l)}return super.load(e,r,i,s)}}const wE=new WeakMap;class Foe extends mr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const r=new pr(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(t).catch(s)},i,s)}decodeDracoFile(e,t,i,s){const r={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const f=t.attributeTypes[c];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=f.name)}const i=JSON.stringify(t);if(wE.has(e)){const c=wE.get(e);if(c.key===i)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,a=e.byteLength,l=this._getWorker(r,a).then(c=>(s=c,new Promise((f,p)=>{s._callbacks[r]={resolve:f,reject:p},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return l.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),wE.set(e,{key:i,promise:l}),l}_createGeometry(e){const t=new gn;e.index&&t.setIndex(new Xn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],r=s.name,a=s.array,l=s.itemSize;t.setAttribute(r,new Xn(a,l))}return t}_loadLibrary(e,t){const i=new pr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,r)=>{i.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const r=zoe.toString(),a=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const a=r.data;switch(a.type){case"decode":s._callbacks[a.id].resolve(a);break;case"error":s._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function zoe(){let n,e;onmessage=function(a){const l=a.data;switch(l.type){case"init":n=l.decoderConfig,e=new Promise(function(p){n.onModuleLoaded=function(g){p({draco:g})},DracoDecoderModule(n)});break;case"decode":const c=l.buffer,f=l.taskConfig;e.then(p=>{const g=p.draco,v=new g.Decoder,x=new g.DecoderBuffer;x.Init(new Int8Array(c),c.byteLength);try{const A=t(g,v,x,f),M=A.attributes.map(_=>_.array.buffer);A.index&&M.push(A.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:A},M)}catch(A){console.error(A),self.postMessage({type:"error",id:l.id,error:A.message})}finally{g.destroy(x),g.destroy(v)}});break}};function t(a,l,c,f){const p=f.attributeIDs,g=f.attributeTypes;let v,x;const A=l.GetEncodedGeometryType(c);if(A===a.TRIANGULAR_MESH)v=new a.Mesh,x=l.DecodeBufferToMesh(c,v);else if(A===a.POINT_CLOUD)v=new a.PointCloud,x=l.DecodeBufferToPointCloud(c,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!x.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+x.error_msg());const M={index:null,attributes:[]};for(const _ in p){const S=self[g[_]];let w,C;if(f.useUniqueIDs)C=p[_],w=l.GetAttributeByUniqueId(v,C);else{if(C=l.GetAttributeId(v,a[p[_]]),C===-1)continue;w=l.GetAttribute(v,C)}M.attributes.push(s(a,l,v,_,S,w))}return A===a.TRIANGULAR_MESH&&(M.index=i(a,l,v)),a.destroy(v),M}function i(a,l,c){const p=c.num_faces()*3,g=p*4,v=a._malloc(g);l.GetTrianglesUInt32Array(c,g,v);const x=new Uint32Array(a.HEAPF32.buffer,v,p).slice();return a._free(v),{array:x,itemSize:1}}function s(a,l,c,f,p,g){const v=g.num_components(),A=c.num_points()*v,M=A*p.BYTES_PER_ELEMENT,_=r(a,p),S=a._malloc(M);l.GetAttributeDataArrayForAllPoints(c,g,_,M,S);const w=new p(a.HEAPF32.buffer,S,A).slice();return a._free(S),{name:f,array:w,itemSize:v}}function r(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let sb;const RE=()=>{if(sb)return sb;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=n;WebAssembly.validate(t)&&(s=e);let r;const a=WebAssembly.instantiate(l(s),{}).then(g=>{r=g.instance,r.exports.__wasm_call_ctors()});function l(g){const v=new Uint8Array(g.length);for(let A=0;A<g.length;++A){const M=g.charCodeAt(A);v[A]=M>96?M-71:M>64?M-65:M>47?M+4:M>46?63:62}let x=0;for(let A=0;A<g.length;++A)v[x++]=v[A]<60?i[v[A]]:(v[A]-60)*64+v[++A];return v.buffer.slice(0,x)}function c(g,v,x,A,M,_){const S=r.exports.sbrk,w=x+3&-4,C=S(w*A),B=S(M.length),N=new Uint8Array(r.exports.memory.buffer);N.set(M,B);const L=g(C,x,A,B,M.length);if(L===0&&_&&_(C,w,A),v.set(N.subarray(C,C+x*A)),S(C-S(0)),L!==0)throw new Error(`Malformed buffer data: ${L}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},p={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return sb={ready:a,supported:!0,decodeVertexBuffer(g,v,x,A,M){c(r.exports.meshopt_decodeVertexBuffer,g,v,x,A,r.exports[f[M]])},decodeIndexBuffer(g,v,x,A){c(r.exports.meshopt_decodeIndexBuffer,g,v,x,A)},decodeIndexSequence(g,v,x,A){c(r.exports.meshopt_decodeIndexSequence,g,v,x,A)},decodeGltfBuffer(g,v,x,A,M,_){c(r.exports[p[M]],g,v,x,A,r.exports[f[_]])}},sb};function jR(n,e,t,i){var s;return s=class extends Oi{constructor(r){super({vertexShader:e,fragmentShader:t,...r});for(const a in n)this.uniforms[a]=new Jn(n[a]),Object.defineProperty(this,a,{get(){return this.uniforms[a].value},set(l){this.uniforms[a].value=l}});this.uniforms=tR.clone(this.uniforms)}},s.key=bm.generateUUID(),s}const BE=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function XR(n,e){const t=Ni(r=>r.gl),i=Mo(Sy,BE(n)?Object.values(n):n);return z.useLayoutEffect(()=>{e==null||e(i)},[e]),z.useEffect(()=>{if("initTexture"in t){let r=[];Array.isArray(i)?r=i:i instanceof Zn?r=[i]:BE(i)&&(r=Object.values(i)),r.forEach(a=>{a instanceof Zn&&t.initTexture(a)})}},[t,i]),z.useMemo(()=>{if(BE(n)){const r={};let a=0;for(const l in n)r[l]=i[a++];return r}else return i},[n,i])}XR.preload=n=>Mo.preload(Sy,n);XR.clear=n=>Mo.clear(Sy,n);const Hoe=()=>parseInt(wf.replace(/\D+/g,"")),AH=Hoe();function Goe(n,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:t,inject:i,castShadow:s,receiveShadow:r}){let a={};for(const l of e)a[l]=n[l];return t&&(a.geometry&&t!=="materialsOnly"&&(a.geometry=a.geometry.clone()),a.material&&t!=="geometriesOnly"&&(a.material=a.material.clone())),i&&(typeof i=="function"?a={...a,children:i(n)}:z.isValidElement(i)?a={...a,children:i}:a={...a,...i}),n instanceof Ci&&(s&&(a.castShadow=!0),r&&(a.receiveShadow=!0)),a}const GA=z.forwardRef(({isChild:n=!1,object:e,children:t,deep:i,castShadow:s,receiveShadow:r,inject:a,keys:l,...c},f)=>{const p={keys:l,deep:i,inject:a,castShadow:s,receiveShadow:r};if(e=z.useMemo(()=>{if(n===!1&&!Array.isArray(e)){let A=!1;if(e.traverse(M=>{M.isSkinnedMesh&&(A=!0)}),A)return Yae.clone(e)}return e},[e,n]),Array.isArray(e))return z.createElement("group",Ql({},c,{ref:f}),e.map(A=>z.createElement(GA,Ql({key:A.uuid,object:A},p))),t);const{children:g,...v}=Goe(e,p),x=e.type[0].toLowerCase()+e.type.slice(1);return z.createElement(x,Ql({},v,c,{ref:f}),e.children.map(A=>A.type==="Bone"?z.createElement("primitive",Ql({key:A.uuid,object:A},p)):z.createElement(GA,Ql({key:A.uuid,object:A},p,{isChild:!0}))),t,g)});let rb=null,SH="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function _H(n=!0,e=!0,t){return i=>{t&&t(i),n&&(rb||(rb=new Foe),rb.setDecoderPath(typeof n=="string"?n:SH),i.setDRACOLoader(rb)),e&&i.setMeshoptDecoder(typeof RE=="function"?RE():RE)}}const ra=(n,e,t,i)=>Mo(kR,n,_H(e,t,i));ra.preload=(n,e,t,i)=>Mo.preload(kR,n,_H(e,t,i));ra.clear=n=>Mo.clear(kR,n);ra.setDecoderPath=n=>{SH=n};const MH=z.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:s=!0,keyEvents:r=!1,onChange:a,onStart:l,onEnd:c,...f},p)=>{const g=Ni(L=>L.invalidate),v=Ni(L=>L.camera),x=Ni(L=>L.gl),A=Ni(L=>L.events),M=Ni(L=>L.setEvents),_=Ni(L=>L.set),S=Ni(L=>L.get),w=Ni(L=>L.performance),C=e||v,B=i||A.connected||x.domElement,N=z.useMemo(()=>new eoe(C),[C]);return su(()=>{N.enabled&&N.update()},-1),z.useEffect(()=>(r&&N.connect(r===!0?B:r),N.connect(B),()=>void N.dispose()),[r,B,t,N,g]),z.useEffect(()=>{const L=U=>{g(),t&&w.regress(),a&&a(U)},F=U=>{l&&l(U)},P=U=>{c&&c(U)};return N.addEventListener("change",L),N.addEventListener("start",F),N.addEventListener("end",P),()=>{N.removeEventListener("start",F),N.removeEventListener("end",P),N.removeEventListener("change",L)}},[a,l,c,N,g,M]),z.useEffect(()=>{if(n){const L=S().controls;return _({controls:N}),()=>_({controls:L})}},[n,N]),z.createElement("primitive",Ql({ref:p,object:N,enableDamping:s},f))});function YR(n,e){const t=z.useRef(null),[i]=z.useState(()=>e?e instanceof Pn?{current:e}:e:t),[s]=z.useState(()=>new NR(void 0));z.useLayoutEffect(()=>{e&&(i.current=e instanceof Pn?e:e.current),s._root=i.current});const r=z.useRef({}),a=z.useMemo(()=>{const l={};return n.forEach(c=>Object.defineProperty(l,c.name,{enumerable:!0,get(){if(i.current)return r.current[c.name]||(r.current[c.name]=s.clipAction(c,i.current))},configurable:!0})),{ref:i,clips:n,actions:l,names:n.map(c=>c.name),mixer:s}},[n]);return su((l,c)=>s.update(c)),z.useEffect(()=>{const l=i.current;return()=>{r.current={},s.stopAllAction(),Object.values(a.actions).forEach(c=>{l&&s.uncacheAction(c,l)})}},[n]),a}const Voe=jR({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }"),EH=(n,e,t)=>{let i;switch(n){case xs:i=new Uint8ClampedArray(e*t*4);break;case ws:i=new Uint16Array(e*t*4);break;case dl:i=new Uint32Array(e*t*4);break;case fS:i=new Int8Array(e*t*4);break;case hS:i=new Int16Array(e*t*4);break;case oy:i=new Int32Array(e*t*4);break;case Vi:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let ab;const koe=(n,e,t,i)=>{if(ab!==void 0)return ab;const s=new ki(1,1,i);e.setRenderTarget(s);const r=new Ci(new Nf,new ia({color:16777215}));e.render(r,t),e.setRenderTarget(null);const a=EH(n,s.width,s.height);return e.readRenderTargetPixels(s,0,0,s.width,s.height,a),s.dispose(),r.geometry.dispose(),r.material.dispose(),ab=a[0]!==0,ab};class WR{constructor(e){var t,i,s,r,a,l,c,f,p,g,v,x,A,M,_,S;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(C){throw this._renderer.setRenderTarget(null),C}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const w={format:vs,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(l=e.renderTargetOptions)===null||l===void 0?void 0:l.magFilter:jn,minFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.minFilter:jn,samples:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.samples)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.samples:void 0,wrapS:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapS)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapS:gs,wrapT:((A=e.renderTargetOptions)===null||A===void 0?void 0:A.wrapT)!==void 0?(M=e.renderTargetOptions)===null||M===void 0?void 0:M.wrapT:gs};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=WR.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new bd,this._camera=new oc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!koe(this._type,this._renderer,this._camera,w)){let C;switch(this._type){case ws:C=this._renderer.extensions.has("EXT_color_buffer_float")?Vi:void 0;break}C!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Vi}`),this._type=C):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ci(new Nf,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new ki(this.width,this.height,w),this._renderTarget.texture.mapping=((_=e.renderTargetOptions)===null||_===void 0?void 0:_.mapping)!==void 0?(S=e.renderTargetOptions)===null||S===void 0?void 0:S.mapping:yf}static instantiateRenderer(){const e=new UR;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=EH(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new ul(this.toArray(),this.width,this.height,vs,this._type,(e==null?void 0:e.mapping)||yf,(e==null?void 0:e.wrapS)||gs,(e==null?void 0:e.wrapT)||gs,(e==null?void 0:e.magFilter)||jn,(e==null?void 0:e.minFilter)||jn,(e==null?void 0:e.anisotropy)||1,ja);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Oi&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Zn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Zn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const joe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Xoe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Yoe extends Oi{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:s,gainMapMax:r,maxDisplayBoost:a,hdrCapacityMin:l,hdrCapacityMax:c,sdr:f,gainMap:p}){super({name:"GainMapDecoderMaterial",vertexShader:joe,fragmentShader:Xoe,uniforms:{sdr:{value:f},gainMap:{value:p},gamma:{value:new te(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new te().fromArray(t)},offsetSdr:{value:new te().fromArray(i)},gainMapMin:{value:new te().fromArray(s)},gainMapMax:{value:new te().fromArray(r)},weightFactor:{value:(Math.log2(a)-l)/(c-l)}},blending:hr,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=l,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class TH extends Error{}class CH extends Error{}const z0=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const s=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(s){const r=s[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(a=>a.replace(/<\/?rdf:li>/g,"")):s[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Woe=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),s=e.slice(t,i+10);try{const r=z0(s,"hdrgm:GainMapMin","0"),a=z0(s,"hdrgm:GainMapMax"),l=z0(s,"hdrgm:Gamma","1"),c=z0(s,"hdrgm:OffsetSDR","0.015625"),f=z0(s,"hdrgm:OffsetHDR","0.015625"),p=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(s),g=p?p[1]:"0",v=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(s);if(!v)throw new Error("Incomplete gainmap metadata");const x=v[1];return{gainMapMin:Array.isArray(r)?r.map(A=>parseFloat(A)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(a)?a.map(A=>parseFloat(A)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(l)?l.map(A=>parseFloat(A)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetSdr:Array.isArray(c)?c.map(A=>parseFloat(A)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetHdr:Array.isArray(f)?f.map(A=>parseFloat(A)):[parseFloat(f),parseFloat(f),parseFloat(f)],hdrCapacityMin:parseFloat(g),hdrCapacityMax:parseFloat(x)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class qoe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const s=this.options.debug,r=new DataView(e.buffer);if(r.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const a=r.byteLength;let l=2,c=0,f;for(;l<a;){if(++c>250){i(new Error(`Found no marker after ${c} loops 😵`));return}if(r.getUint8(l)!==255){i(new Error(`Not a valid marker at offset 0x${l.toString(16)}, found: 0x${r.getUint8(l).toString(16)}`));return}if(f=r.getUint8(l+1),s&&console.log(`Marker: ${f.toString(16)}`),f===226){s&&console.log("Found APP2 marker (0xffe2)");const p=l+4;if(r.getUint32(p)===1297106432){const g=p+4;let v;if(r.getUint16(g)===18761)v=!1;else if(r.getUint16(g)===19789)v=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(g+2,!v)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=r.getUint32(g+4,!v);if(x<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const A=g+x,M=r.getUint16(A,!v),_=A+2;let S=0;for(let N=_;N<_+12*M;N+=12)r.getUint16(N,!v)===45057&&(S=r.getUint32(N+8,!v));const C=A+2+M*12+4,B=[];for(let N=C;N<C+S*16;N+=16){const L={MPType:r.getUint32(N,!v),size:r.getUint32(N+4,!v),dataOffset:r.getUint32(N+8,!v),dependantImages:r.getUint32(N+12,!v),start:-1,end:-1,isFII:!1};L.dataOffset?(L.start=g+L.dataOffset,L.isFII=!1):(L.start=0,L.isFII=!0),L.end=L.start+L.size,B.push(L)}if(this.options.extractNonFII&&B.length){const N=new Blob([r]),L=[];for(const F of B){if(F.isFII&&!this.options.extractFII)continue;const P=N.slice(F.start,F.end+1,"image/jpeg");L.push(P)}t(L)}}}l+=2+r.getUint16(l+2)}})}}const Koe=async n=>{const e=Woe(n);if(!e)throw new CH("Gain map XMP metadata not found");const i=await new qoe({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new TH("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},CO=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=s=>{t(s)},i.src=URL.createObjectURL(n)});class wH extends mr{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new zS}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Yoe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Zn,sdr:new Zn});return new WR({width:16,height:16,type:ws,colorSpace:ja,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,s){const r=s?new Blob([s],{type:"image/jpeg"}):void 0,a=new Blob([i],{type:"image/jpeg"});let l,c,f=!1;if(typeof createImageBitmap>"u"){const v=await Promise.all([r?CO(r):Promise.resolve(void 0),CO(a)]);c=v[0],l=v[1],f=!0}else{const v=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);c=v[0],l=v[1]}const p=new Zn(c||new ImageData(2,2),yf,gs,gs,jn,GT,vs,xs,1,ja);p.flipY=f,p.needsUpdate=!0;const g=new Zn(l,yf,gs,gs,jn,GT,vs,xs,1,Qn);g.flipY=f,g.needsUpdate=!0,e.width=l.width,e.height=l.height,e.material.gainMap=p,e.material.sdr=g,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Joe extends wH{load([e,t,i],s,r,a){const l=this.prepareQuadRenderer();let c,f,p;const g=async()=>{if(c&&f&&p){try{await this.render(l,p,c,f)}catch(U){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof a=="function"&&a(U),l.disposeOnDemandRenderer();return}typeof s=="function"&&s(l),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),l.disposeOnDemandRenderer()}};let v=!0,x=0,A=0,M=!0,_=0,S=0,w=!0,C=0,B=0;const N=()=>{if(typeof r=="function"){const U=x+_+C,I=A+S+B,X=v&&M&&w;r(new ProgressEvent("progress",{lengthComputable:X,loaded:I,total:U}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const L=new pr(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(e,async U=>{if(typeof U=="string")throw new Error("Invalid sdr buffer");c=U,await g()},U=>{v=U.lengthComputable,A=U.loaded,x=U.total,N()},U=>{this.manager.itemError(e),typeof a=="function"&&a(U)});const F=new pr(this._internalLoadingManager);F.setResponseType("arraybuffer"),F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(t,async U=>{if(typeof U=="string")throw new Error("Invalid gainmap buffer");f=U,await g()},U=>{M=U.lengthComputable,S=U.loaded,_=U.total,N()},U=>{this.manager.itemError(t),typeof a=="function"&&a(U)});const P=new pr(this._internalLoadingManager);return P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(i,async U=>{if(typeof U!="string")throw new Error("Invalid metadata string");p=JSON.parse(U),await g()},U=>{w=U.lengthComputable,B=U.loaded,C=U.total,N()},U=>{this.manager.itemError(i),typeof a=="function"&&a(U)}),l}}class Zoe extends wH{load(e,t,i,s){const r=this.prepareQuadRenderer(),a=new pr(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async l=>{if(typeof l=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const c=new Uint8Array(l);let f,p,g;try{const v=await Koe(c);f=v.sdr,p=v.gainMap,g=v.metadata}catch(v){if(v instanceof CH||v instanceof TH)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),g={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},f=c;else throw v}try{await this.render(r,g,f,p)}catch(v){this.manager.itemError(e),typeof s=="function"&&s(v),r.disposeOnDemandRenderer();return}typeof t=="function"&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()},i,l=>{this.manager.itemError(e),typeof s=="function"&&s(l)}),r}}const jv={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},RH="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",_m=n=>Array.isArray(n),qR=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function XS({files:n=qR,path:e="",preset:t=void 0,colorSpace:i=void 0,extensions:s}={}){t&&(KR(t),n=jv[t],e=RH);const r=_m(n),{extension:a,isCubemap:l}=JR(n),c=ZR(a);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+n);const f=Ni(x=>x.gl);z.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function x(){Mo.clear(c,r?[n]:n)}f.domElement.addEventListener("webglcontextlost",x,{once:!0})},[n,f.domElement]);const p=Mo(c,r?[n]:n,x=>{(a==="webp"||a==="jpg"||a==="jpeg")&&x.setRenderer(f),x.setPath==null||x.setPath(e),s&&s(x)});let g=r?p[0]:p;if(a==="jpg"||a==="jpeg"||a==="webp"){var v;g=(v=g.renderTarget)==null?void 0:v.texture}return g.mapping=l?uc:Lm,g.colorSpace=i??(l?"srgb":"srgb-linear"),g}const Qoe={files:qR,path:"",preset:void 0,extensions:void 0};XS.preload=n=>{const e={...Qoe,...n};let{files:t,path:i=""}=e;const{preset:s,extensions:r}=e;s&&(KR(s),t=jv[s],i=RH);const{extension:a}=JR(t);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const l=ZR(a);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+t);Mo.preload(l,_m(t)?[t]:t,c=>{c.setPath==null||c.setPath(i),r&&r(c)})};const $oe={files:qR,preset:void 0};XS.clear=n=>{const e={...$oe,...n};let{files:t}=e;const{preset:i}=e;i&&(KR(i),t=jv[i]);const{extension:s}=JR(t),r=ZR(s);if(!r)throw new Error("useEnvironment: Unrecognized file extension: "+t);Mo.clear(r,_m(t)?[t]:t)};function KR(n){if(!(n in jv))throw new Error("Preset must be one of: "+Object.keys(jv).join(", "))}function JR(n){var e;const t=_m(n)&&n.length===6,i=_m(n)&&n.length===3&&n.some(a=>a.endsWith("json")),s=_m(n)?n[0]:n;return{extension:t?"cube":i?"webp":s.startsWith("data:application/exr")?"exr":s.startsWith("data:application/hdr")?"hdr":s.startsWith("data:image/jpeg")?"jpg":(e=s.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function ZR(n){return n==="cube"?S4:n==="hdr"?Poe:n==="exr"?Ioe:n==="jpg"||n==="jpeg"?Zoe:n==="webp"?Joe:null}const ele=n=>n.current&&n.current.isScene,tle=n=>ele(n)?n.current:n;function QR(n,e,t,i,s={}){var r,a,l,c;s={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...s};const f=tle(e||t),p=f.background,g=f.environment,v={backgroundBlurriness:f.backgroundBlurriness,backgroundIntensity:f.backgroundIntensity,backgroundRotation:(r=(a=f.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&r!==void 0?r:[0,0,0],environmentIntensity:f.environmentIntensity,environmentRotation:(l=(c=f.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(f.environment=i),n&&(f.background=i),$l(f,s),()=>{n!=="only"&&(f.environment=g),n&&(f.background=p),$l(f,v)}}function $R({scene:n,background:e=!1,map:t,...i}){const s=Ni(r=>r.scene);return z.useLayoutEffect(()=>{if(t)return QR(e,n,s,t,i)}),null}function BH({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:a,environmentRotation:l,...c}){const f=XS(c),p=Ni(g=>g.scene);return z.useLayoutEffect(()=>QR(n,e,p,f,{backgroundBlurriness:t??i,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:a,environmentRotation:l})),z.useEffect(()=>()=>{f.dispose()},[f]),null}function nle({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:s=1,map:r,background:a=!1,blur:l,backgroundBlurriness:c,backgroundIntensity:f,backgroundRotation:p,environmentIntensity:g,environmentRotation:v,scene:x,files:A,path:M,preset:_=void 0,extensions:S}){const w=Ni(P=>P.gl),C=Ni(P=>P.scene),B=z.useRef(null),[N]=z.useState(()=>new bd),L=z.useMemo(()=>{const P=new bS(i);return P.texture.type=ws,P},[i]);z.useEffect(()=>()=>{L.dispose()},[L]),z.useLayoutEffect(()=>{if(s===1){const P=w.autoClear;w.autoClear=!0,B.current.update(w,N),w.autoClear=P}return QR(a,x,C,L.texture,{backgroundBlurriness:l??c,backgroundIntensity:f,backgroundRotation:p,environmentIntensity:g,environmentRotation:v})},[n,N,L.texture,x,C,a,s,w]);let F=1;return su(()=>{if(s===1/0||F<s){const P=w.autoClear;w.autoClear=!0,B.current.update(w,N),w.autoClear=P,F++}}),z.createElement(z.Fragment,null,gae(z.createElement(z.Fragment,null,n,z.createElement("cubeCamera",{ref:B,args:[e,t,L]}),A||_?z.createElement(BH,{background:!0,files:A,preset:_,path:M,extensions:S}):r?z.createElement($R,{background:!0,map:r,extensions:S}):null),N))}function ile(n){var e,t,i,s;const r=XS(n),a=n.map||r;z.useMemo(()=>Dd({GroundProjectedEnvImpl:Vae}),[]),z.useEffect(()=>()=>{r.dispose()},[r]);const l=z.useMemo(()=>[a],[a]),c=(e=n.ground)==null?void 0:e.height,f=(t=n.ground)==null?void 0:t.radius,p=(i=(s=n.ground)==null?void 0:s.scale)!==null&&i!==void 0?i:1e3;return z.createElement(z.Fragment,null,z.createElement($R,Ql({},n,{map:a})),z.createElement("groundProjectedEnvImpl",{args:l,scale:p,height:c,radius:f}))}function sle(n){return n.ground?z.createElement(ile,n):n.map?z.createElement($R,n):n.children?z.createElement(nle,n):z.createElement(BH,n)}function rle(n){return n.isLight}function ale(n){return!!n.geometry}const DH=z.createContext(null),ole=jR({color:new pt,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${AH>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),lle=z.forwardRef(({children:n,temporal:e,frames:t=40,limit:i=1/0,blend:s=20,scale:r=10,opacity:a=1,alphaTest:l=.75,color:c="black",colorBlend:f=2,resolution:p=1024,toneMapped:g=!0,...v},x)=>{Dd({SoftShadowMaterial:ole});const A=Ni(L=>L.gl),M=Ni(L=>L.scene),_=Ni(L=>L.camera),S=Ni(L=>L.invalidate),w=z.useRef(null),C=z.useRef(null),[B]=z.useState(()=>new cle(A,M,p));z.useLayoutEffect(()=>{B.configure(w.current)},[]);const N=z.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,t),blend:Math.max(2,t===1/0?s:t),count:0,getMesh:()=>w.current,reset:()=>{B.clear();const L=w.current.material;L.opacity=0,L.alphaTest=0,N.count=0},update:(L=1)=>{const F=w.current.material;N.temporal?(F.opacity=Math.min(a,F.opacity+a/N.blend),F.alphaTest=Math.min(l,F.alphaTest+l/N.blend)):(F.opacity=a,F.alphaTest=l),C.current.visible=!0,B.prepare();for(let P=0;P<L;P++)N.lights.forEach(U=>U.update()),B.update(_,N.blend);C.current.visible=!1,B.finish()}}),[B,_,M,e,t,s,a,l]);return z.useLayoutEffect(()=>{N.reset(),!N.temporal&&N.frames!==1/0&&N.update(N.blend)}),z.useImperativeHandle(x,()=>N,[N]),su(()=>{(N.temporal||N.frames===1/0)&&N.count<N.frames&&N.count<i&&(S(),N.update(),N.count++)}),z.createElement("group",v,z.createElement("group",{traverse:()=>null,ref:C},z.createElement(DH.Provider,{value:N},n)),z.createElement("mesh",{receiveShadow:!0,ref:w,scale:r,rotation:[-Math.PI/2,0,0]},z.createElement("planeGeometry",null),z.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:g,color:c,blend:f,map:B.progressiveLightMap2.texture})))}),wO=z.forwardRef(({castShadow:n=!0,bias:e=.001,mapSize:t=512,size:i=5,near:s=.5,far:r=500,frames:a=1,position:l=[0,0,0],radius:c=1,amount:f=8,intensity:p=AH>=155?Math.PI:1,ambient:g=.5,...v},x)=>{const A=z.useRef(null),M=new te(...l).length(),_=z.useContext(DH),S=z.useCallback(()=>{let C;if(A.current)for(let B=0;B<A.current.children.length;B++)if(C=A.current.children[B],Math.random()>g)C.position.set(l[0]+bm.randFloatSpread(c),l[1]+bm.randFloatSpread(c),l[2]+bm.randFloatSpread(c));else{let N=Math.acos(2*Math.random()-1)-Math.PI/2,L=2*Math.PI*Math.random();C.position.set(Math.cos(N)*Math.cos(L)*M,Math.abs(Math.cos(N)*Math.sin(L)*M),Math.sin(N)*M)}},[c,g,M,...l]),w=z.useMemo(()=>({update:S}),[S]);return z.useImperativeHandle(x,()=>w,[w]),z.useLayoutEffect(()=>{var C;const B=A.current;return _&&((C=_.lights)==null||C.set(B.uuid,w)),()=>{var N;return void(_==null||(N=_.lights)==null?void 0:N.delete(B.uuid))}},[_,w]),z.createElement("group",Ql({ref:A},v),Array.from({length:f},(C,B)=>z.createElement("directionalLight",{key:B,castShadow:n,"shadow-bias":e,"shadow-mapSize":[t,t],intensity:p/f},z.createElement("orthographicCamera",{attach:"shadow-camera",args:[-i,i,i,-i,s,r]}))))});class cle{constructor(e,t,i=1024){this.renderer=e,this.res=i,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new pt,this.clearAlpha=0;const s={type:ws,magFilter:wi,minFilter:wi};this.progressiveLightMap1=new ki(this.res,this.res,s),this.progressiveLightMap2=new ki(this.res,this.res,s),this.discardMat=new Voe,this.targetMat=new gR({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=r=>{r.vertexShader=`varying vec2 vUv;
`+r.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const a=r.fragmentShader.indexOf("void main() {");r.fragmentShader=`varying vec2 vUv;
`+r.fragmentShader.slice(0,a)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+r.fragmentShader.slice(a-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,r.uniforms.previousShadowMap=this.previousShadowMap,r.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{ale(e)?this.meshes.push({object:e,material:e.material}):rle(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const i=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,s=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,r=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(i),this.previousShadowMap.value=s.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=r}}function ule({all:n,scene:e,camera:t}){const i=Ni(({gl:a})=>a),s=Ni(({camera:a})=>a),r=Ni(({scene:a})=>a);return z.useLayoutEffect(()=>{const a=[];n&&(e||r).traverse(f=>{f.visible===!1&&(a.push(f),f.visible=!0)}),i.compile(e||r,t||s);const l=new bS(128);new nR(.01,1e5,l).update(i,e||r),l.dispose(),a.forEach(f=>f.visible=!1)},[]),null}var ob={},RO;function fle(){if(RO)return ob;RO=1,ob.match=r,ob.parse=a;var n=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,e=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,t=/^(?:(min|max)-)?(.+)/,i=/(em|rem|px|cm|mm|in|pt|pc)?$/,s=/(dpi|dpcm|dppx)?$/;function r(p,g){return a(p).some(function(v){var x=v.inverse,A=v.type==="all"||g.type===v.type;if(A&&x||!(A||x))return!1;var M=v.expressions.every(function(_){var S=_.feature,w=_.modifier,C=_.value,B=g[S];if(!B)return!1;switch(S){case"orientation":case"scan":return B.toLowerCase()===C.toLowerCase();case"width":case"height":case"device-width":case"device-height":C=f(C),B=f(B);break;case"resolution":C=c(C),B=c(B);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":C=l(C),B=l(B);break;case"grid":case"color":case"color-index":case"monochrome":C=parseInt(C,10)||1,B=parseInt(B,10)||0;break}switch(w){case"min":return B>=C;case"max":return B<=C;default:return B===C}});return M&&!x||!M&&x})}function a(p){return p.split(",").map(function(g){g=g.trim();var v=g.match(n),x=v[1],A=v[2],M=v[3]||"",_={};return _.inverse=!!x&&x.toLowerCase()==="not",_.type=A?A.toLowerCase():"all",M=M.match(/\([^\)]+\)/g)||[],_.expressions=M.map(function(S){var w=S.match(e),C=w[1].toLowerCase().match(t);return{modifier:C[1],feature:C[2],value:w[2]}}),_})}function l(p){var g=Number(p),v;return g||(v=p.match(/^(\d+)\s*\/\s*(\d+)$/),g=v[1]/v[2]),g}function c(p){var g=parseFloat(p),v=String(p).match(s)[1];switch(v){case"dpcm":return g/2.54;case"dppx":return g*96;default:return g}}function f(p){var g=parseFloat(p),v=String(p).match(i)[1];switch(v){case"em":return g*16;case"rem":return g*16;case"cm":return g*96/2.54;case"mm":return g*96/2.54/10;case"in":return g*96;case"pt":return g*72;case"pc":return g*72/12;default:return g}}return ob}var DE,BO;function hle(){if(BO)return DE;BO=1;var n=fle().match,e=typeof window<"u"?window.matchMedia:null;function t(s,r,a){var l=this,c;e&&!a&&(c=e.call(window,s)),c?(this.matches=c.matches,this.media=c.media,c.addListener(g)):(this.matches=n(s,r),this.media=s),this.addListener=f,this.removeListener=p,this.dispose=v;function f(x){c&&c.addListener(x)}function p(x){c&&c.removeListener(x)}function g(x){l.matches=x.matches,l.media=x.media}function v(){c&&c.removeListener(g)}}function i(s,r,a){return new t(s,r,a)}return DE=i,DE}var dle=hle();const ple=Yv(dle);var mle=/[A-Z]/g,gle=/^ms-/,NE={};function vle(n){return"-"+n.toLowerCase()}function NH(n){if(NE.hasOwnProperty(n))return NE[n];var e=n.replace(mle,vle);return NE[n]=gle.test(e)?"-"+e:e}function yle(n,e){if(n===e)return!0;if(!n||!e)return!1;const t=Object.keys(n),i=Object.keys(e),s=t.length;if(i.length!==s)return!1;for(let r=0;r<s;r++){const a=t[r];if(n[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}const Qr=wt.oneOfType([wt.string,wt.number]),LH={all:wt.bool,grid:wt.bool,aural:wt.bool,braille:wt.bool,handheld:wt.bool,print:wt.bool,projection:wt.bool,screen:wt.bool,tty:wt.bool,tv:wt.bool,embossed:wt.bool},xle={orientation:wt.oneOf(["portrait","landscape"]),scan:wt.oneOf(["progressive","interlace"]),aspectRatio:wt.string,deviceAspectRatio:wt.string,height:Qr,deviceHeight:Qr,width:Qr,deviceWidth:Qr,color:wt.bool,colorIndex:wt.bool,monochrome:wt.bool,resolution:Qr,type:Object.keys(LH)},{type:Fhe,...ble}=xle,Ale={minAspectRatio:wt.string,maxAspectRatio:wt.string,minDeviceAspectRatio:wt.string,maxDeviceAspectRatio:wt.string,minHeight:Qr,maxHeight:Qr,minDeviceHeight:Qr,maxDeviceHeight:Qr,minWidth:Qr,maxWidth:Qr,minDeviceWidth:Qr,maxDeviceWidth:Qr,minColor:wt.number,maxColor:wt.number,minColorIndex:wt.number,maxColorIndex:wt.number,minMonochrome:wt.number,maxMonochrome:wt.number,minResolution:Qr,maxResolution:Qr,...ble},Sle={...LH,...Ale};var _le={all:Sle};const Mle=n=>`not ${n}`,Ele=(n,e)=>{const t=NH(n);return typeof e=="number"&&(e=`${e}px`),e===!0?t:e===!1?Mle(t):`(${t}: ${e})`},Tle=n=>n.join(" and "),Cle=n=>{const e=[];return Object.keys(_le.all).forEach(t=>{const i=n[t];i!=null&&e.push(Ele(t,i))}),Tle(e)},wle=z.createContext(void 0),Rle=n=>n.query||Cle(n),DO=n=>n?Object.keys(n).reduce((t,i)=>(t[NH(i)]=n[i],t),{}):void 0,OH=()=>{const n=z.useRef(!1);return z.useEffect(()=>{n.current=!0},[]),n.current},Ble=n=>{const e=z.useContext(wle),t=()=>DO(n)||DO(e),[i,s]=z.useState(t);return z.useEffect(()=>{const r=t();yle(i,r)||s(r)},[n,e]),i},Dle=n=>{const e=()=>Rle(n),[t,i]=z.useState(e);return z.useEffect(()=>{const s=e();t!==s&&i(s)},[n]),t},Nle=(n,e)=>{const t=()=>ple(n,e||{},!!e),[i,s]=z.useState(t),r=OH();return z.useEffect(()=>{if(r){const a=t();return s(a),()=>{a&&a.dispose()}}},[n,e]),i},Lle=n=>{const[e,t]=z.useState(n.matches);return z.useEffect(()=>{const i=s=>{t(s.matches)};return n.addListener(i),t(n.matches),()=>{n.removeListener(i)}},[n]),e},NO=(n,e,t)=>{const i=Ble(e),s=Dle(n);if(!s)throw new Error("Invalid or missing MediaQuery!");const r=Nle(s,i),a=Lle(r);return OH(),z.useEffect(()=>{},[a]),z.useEffect(()=>()=>{r&&r.dispose()},[]),a};/**
 * postprocessing v6.37.3 build Sun Apr 27 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rüschen
 * @license Zlib
 */var LE=1/1e3,Ole=1e3,Ule=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*LE}get fixedDelta(){return this._fixedDelta*LE}set fixedDelta(n){this._fixedDelta=n*Ole}get elapsed(){return this._elapsed*LE}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Ple=(()=>{const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new gn;return t.setAttribute("position",new Xn(n,3)),t.setAttribute("uv",new Xn(e,2)),t})(),Ta=class lC{static get fullscreenGeometry(){return Ple}constructor(e="Pass",t=new bd,i=new fy){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Ci(lC.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new bd),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Rf){}render(e,t,i,s,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof ki||t instanceof ys||t instanceof Zn||t instanceof lC)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},Ile=class extends Ta{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,s){const r=n.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},Fle=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,UH="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",PH=class extends Oi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Jn(null),opacity:new Jn(1)},blending:hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Fle,vertexShader:UH})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},zle=class extends Ta{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new PH,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new ki(1,1,{minFilter:jn,magFilter:jn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,s){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==xs?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n!==null&&n.outputColorSpace===Qn&&(this.renderTarget.texture.colorSpace=Qn))}},LO=new pt,IH=class extends Ta{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,s){const r=this.overrideClearColor,a=this.overrideClearAlpha,l=n.getClearAlpha(),c=r!==null,f=a>=0;c?(n.getClearColor(LO),n.setClearColor(r,f?a:l)):f&&n.setClearAlpha(a),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),c?n.setClearColor(LO,l):f&&n.setClearAlpha(l)}},Hle=class extends Ta{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new IH(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,s){const r=n.getContext(),a=n.state.buffers,l=this.scene,c=this.camera,f=this.clearPass,p=this.inverted?0:1,g=1-p;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),a.stencil.setFunc(r.ALWAYS,p,4294967295),a.stencil.setClear(g),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(n,null):(f.render(n,e),f.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(l,c)):(n.setRenderTarget(e),n.render(l,c),n.setRenderTarget(t),n.render(l,c)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(r.EQUAL,1,4294967295),a.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),a.stencil.setLocked(!0)}},Gle=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new zle,this.depthTexture=null,this.passes=[],this.timer=new Ule,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new ze),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===xs&&n.outputColorSpace===Qn&&(this.inputBuffer.texture.colorSpace=Qn,this.outputBuffer.texture.colorSpace=Qn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new TS;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=Sf,n.type=Af):n.type=dl,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const s=this.renderer,r=s===null?new ze:s.getDrawingBufferSize(new ze),a={minFilter:jn,magFilter:jn,stencilBuffer:e,depthBuffer:n,type:t},l=new ki(r.width,r.height,a);return i>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=i),t===xs&&s!==null&&s.outputColorSpace===Qn&&(l.texture.colorSpace=Qn),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new ze),r=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(s.width,s.height),n.initialize(i,r,a),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(n of t)n.setDepthTexture(l)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const r=(l,c)=>l||c.needsDepthTexture;e.reduce(r,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,r=!1,a,l,c;n===void 0&&(this.timer.update(),n=this.timer.getDelta());for(const f of this.passes)f.enabled&&(f.render(e,i,s,n,r),f.needsSwap&&(r&&(t.renderToScreen=f.renderToScreen,a=e.getContext(),l=e.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),t.render(e,i,s,n,r),l.setFunc(a.EQUAL,1,4294967295)),c=i,i=s,s=c),f instanceof Hle?r=!0:f instanceof Ile&&(r=!1))}setSize(n,e,t){const i=this.renderer,s=i.getSize(new ze);(n===void 0||e===void 0)&&(n=s.width,e=s.height),(s.width!==n||s.height!==e)&&i.setSize(n,e,t);const r=i.getDrawingBufferSize(new ze);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const a of this.passes)a.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Ta.fullscreenGeometry.dispose()}},yd={NONE:0,DEPTH:1,CONVOLUTION:2},si={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Vle=class{constructor(){this.shaderParts=new Map([[si.FRAGMENT_HEAD,null],[si.FRAGMENT_MAIN_UV,null],[si.FRAGMENT_MAIN_IMAGE,null],[si.VERTEX_HEAD,null],[si.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=yd.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=ja}},OE=!1,OO=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case fr:t=this.materialsFlatShadedDoubleSide;break;case zs:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case fr:t=this.materialsDoubleSide;break;case zs:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof Oi))return n.clone();const e=n.uniforms,t=new Map;for(const s in e){const r=e[s].value;r.isRenderTargetTexture&&(e[s].value=null,t.set(s,r))}const i=n.clone();for(const s of t)e[s[0]].value=s[1],i.uniforms[s[0]].value=s[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=hl;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=zs,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=fr,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=zs,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=fr,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,OE){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const r of s)r[0].material=r[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=s}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return OE}static set workaroundEnabled(n){OE=n}},af=-1,Nr=class extends Ya{constructor(n,e=af,t=af,i=1){super(),this.resizable=n,this.baseSize=new ze(1,1),this.preferredSize=new ze(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new ze,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==af?t.width=e.width:e.height!==af?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==af?t.height=e.height:e.width!==af?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(af),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return af}},zn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},kle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",jle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",Xle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Yle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Wle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",qle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Kle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Jle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Zle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Qle="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",$le="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",ece="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",tce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",nce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",ice="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",sce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",rce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",ace="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",oce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",lce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",cce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",uce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",fce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",hce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",dce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",pce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",mce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",gce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",vce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",yce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",xce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",bce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Ace=new Map([[zn.ADD,kle],[zn.ALPHA,jle],[zn.AVERAGE,Xle],[zn.COLOR,Yle],[zn.COLOR_BURN,Wle],[zn.COLOR_DODGE,qle],[zn.DARKEN,Kle],[zn.DIFFERENCE,Jle],[zn.DIVIDE,Zle],[zn.DST,null],[zn.EXCLUSION,Qle],[zn.HARD_LIGHT,$le],[zn.HARD_MIX,ece],[zn.HUE,tce],[zn.INVERT,nce],[zn.INVERT_RGB,ice],[zn.LIGHTEN,sce],[zn.LINEAR_BURN,rce],[zn.LINEAR_DODGE,ace],[zn.LINEAR_LIGHT,oce],[zn.LUMINOSITY,lce],[zn.MULTIPLY,cce],[zn.NEGATION,uce],[zn.NORMAL,fce],[zn.OVERLAY,hce],[zn.PIN_LIGHT,dce],[zn.REFLECT,pce],[zn.SATURATION,mce],[zn.SCREEN,gce],[zn.SOFT_LIGHT,vce],[zn.SRC,yce],[zn.SUBTRACT,xce],[zn.VIVID_LIGHT,bce]]),Sce=class extends Ya{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new Jn(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return Ace.get(this.blendFunction)}},cC=class extends Ya{constructor(n,e,{attributes:t=yd.NONE,blendFunction:i=zn.NORMAL,defines:s=new Map,uniforms:r=new Map,extensions:a=null,vertexShader:l=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=l,this.defines=s,this.uniforms=r,this.extensions=a,this.blendMode=new Sce(i),this.blendMode.addEventListener("change",c=>this.setChanged()),this._inputColorSpace=ja,this._outputColorSpace=sl}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Rf){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof ki||e instanceof ys||e instanceof Zn||e instanceof Ta)&&this[n].dispose()}}},e2={MEDIUM:2,LARGE:3},_ce=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Mce="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Ece=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Tce=class extends Oi{constructor(n=new kn){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Jn(null),texelSize:new Jn(new kn),scale:new Jn(1),kernel:new Jn(0)},blending:hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:_ce,vertexShader:Mce}),this.setTexelSize(n.x,n.y),this.kernelSize=e2.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return Ece[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},Cce=class extends Ta{constructor({kernelSize:n=e2.MEDIUM,resolutionScale:e=.5,width:t=Nr.AUTO_SIZE,height:i=Nr.AUTO_SIZE,resolutionX:s=t,resolutionY:r=i}={}){super("KawaseBlurPass"),this.renderTargetA=new ki(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new Nr(this,s,r,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new Tce,this._blurMaterial.kernelSize=n,this.copyMaterial=new PH}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const r=this.scene,a=this.camera,l=this.renderTargetA,c=this.renderTargetB,f=this.blurMaterial,p=f.kernelSequence;let g=e;this.fullscreenMaterial=f;for(let v=0,x=p.length;v<x;++v){const A=(v&1)===0?l:c;f.kernel=p[v],f.inputBuffer=g.texture,n.setRenderTarget(A),n.render(r,a),g=A}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=g.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(r,a)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.renderTargetA.setSize(i,s),this.renderTargetB.setSize(i,s),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==xs?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n!==null&&n.outputColorSpace===Qn&&(this.renderTargetA.texture.colorSpace=Qn,this.renderTargetB.texture.colorSpace=Qn))}static get AUTO_SIZE(){return Nr.AUTO_SIZE}},wce=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,Rce=class extends Oi{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:wf.replace(/\D+/g,"")},uniforms:{inputBuffer:new Jn(null),threshold:new Jn(0),smoothing:new Jn(1),range:new Jn(null)},blending:hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:wce,vertexShader:UH}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},Bce=class extends Ta{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:s=Nr.AUTO_SIZE,height:r=Nr.AUTO_SIZE,resolutionX:a=s,resolutionY:l=r}={}){super("LuminancePass"),this.fullscreenMaterial=new Rce(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new ki(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const c=this.resolution=new Nr(this,a,l,i);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,s){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==xs&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Dce=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Nce="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Lce=class extends Oi{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Jn(null),texelSize:new Jn(new ze)},blending:hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Dce,vertexShader:Nce})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Oce=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Uce="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Pce=class extends Oi{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Jn(null),supportBuffer:new Jn(null),texelSize:new Jn(new ze),radius:new Jn(.85)},blending:hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Oce,vertexShader:Uce})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Ice=class extends Ta{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new ki(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Lce,this.upsamplingMaterial=new Pce,this.resolution=new ze}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const s=e.clone();s.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,s){const{scene:r,camera:a}=this,{downsamplingMaterial:l,upsamplingMaterial:c}=this,{downsamplingMipmaps:f,upsamplingMipmaps:p}=this;let g=e;this.fullscreenMaterial=l;for(let v=0,x=f.length;v<x;++v){const A=f[v];l.setSize(g.width,g.height),l.inputBuffer=g.texture,n.setRenderTarget(A),n.render(r,a),g=A}this.fullscreenMaterial=c;for(let v=p.length-1;v>=0;--v){const x=p[v];c.setSize(g.width,g.height),c.inputBuffer=g.texture,c.supportBuffer=f[v].texture,n.setRenderTarget(x),n.render(r,a),g=x}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,s=t.height;for(let r=0,a=this.downsamplingMipmaps.length;r<a;++r)i=Math.round(i*.5),s=Math.round(s*.5),this.downsamplingMipmaps[r].setSize(i,s),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(i,s)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of i)s.texture.type=t;if(t!==xs)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n!==null&&n.outputColorSpace===Qn)for(const s of i)s.texture.colorSpace=Qn}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},Fce=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,zce=class extends cC{constructor({blendFunction:n=zn.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:s=1,radius:r=.85,levels:a=8,kernelSize:l=e2.LARGE,resolutionScale:c=.5,width:f=Nr.AUTO_SIZE,height:p=Nr.AUTO_SIZE,resolutionX:g=f,resolutionY:v=p}={}){super("BloomEffect",Fce,{blendFunction:n,uniforms:new Map([["map",new Jn(null)],["intensity",new Jn(s)]])}),this.renderTarget=new ki(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Cce({kernelSize:l}),this.luminancePass=new Bce({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new Ice,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const x=this.resolution=new Nr(this,g,v,c);x.addEventListener("change",A=>this.setSize(x.baseWidth,x.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,s.renderTarget):this.blurPass.render(n,s.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n!==null&&n.outputColorSpace===Qn&&(this.renderTarget.texture.colorSpace=Qn))}},FH=class extends Ta{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new IH,this.overrideMaterialManager=t===null?null:new OO(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new OO(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,s){const r=this.scene,a=this.camera,l=this.selection,c=a.layers.mask,f=r.background,p=n.shadowMap.autoUpdate,g=this.renderToScreen?null:e;l!==null&&a.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(g),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,r,a):n.render(r,a),a.layers.mask=c,r.background=f,n.shadowMap.autoUpdate=p}},Hce=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Gce="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Vce=class extends Oi{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Jn(null),normalBuffer:new Jn(null),texelSize:new Jn(new ze)},blending:hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Hce,vertexShader:Gce})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Rf){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},kce=class extends Ta{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=Nr.AUTO_SIZE,height:i=Nr.AUTO_SIZE,resolutionX:s=t,resolutionY:r=i}={}){super("DepthDownsamplingPass");const a=new Vce;a.normalBuffer=n,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new ki(1,1,{minFilter:wi,magFilter:wi,depthBuffer:!1,type:Vi}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const l=this.resolution=new Nr(this,s,r,e);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Rf){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,s){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},jce=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Xce="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Yce=class extends Oi{constructor(n,e,t,i,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:wf.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Jn(null),depthBuffer:new Jn(null),resolution:new Jn(new ze),texelSize:new Jn(new ze),cameraNear:new Jn(.3),cameraFar:new Jn(1e3),aspect:new Jn(1),time:new Jn(0)},blending:hr,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Rf){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=jce.replace(si.FRAGMENT_HEAD,n.get(si.FRAGMENT_HEAD)||"").replace(si.FRAGMENT_MAIN_UV,n.get(si.FRAGMENT_MAIN_UV)||"").replace(si.FRAGMENT_MAIN_IMAGE,n.get(si.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Xce.replace(si.VERTEX_HEAD,n.get(si.VERTEX_HEAD)||"").replace(si.VERTEX_MAIN_SUPPORT,n.get(si.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Zi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return si}};function UO(n,e,t){for(const i of e){const s="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),r=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const a of t.entries())a[1]!==null&&t.set(a[0],a[1].replace(r,s))}}function Wce(n,e,t){let i=e.getFragmentShader(),s=e.getVertexShader();const r=i!==void 0&&/mainImage/.test(i),a=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(a&&(t.attributes&yd.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!r&&!a)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=t.shaderParts;let f=c.get(si.FRAGMENT_HEAD)||"",p=c.get(si.FRAGMENT_MAIN_UV)||"",g=c.get(si.FRAGMENT_MAIN_IMAGE)||"",v=c.get(si.VERTEX_HEAD)||"",x=c.get(si.VERTEX_MAIN_SUPPORT)||"";const A=new Set,M=new Set;if(a&&(p+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const w=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);x+=`	${n}MainSupport(`,x+=w?`vUv);
`:`);
`;for(const C of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const B of C[1].split(/\s*,\s*/))t.varyings.add(B),A.add(B),M.add(B);for(const C of s.matchAll(l))M.add(C[1])}for(const w of i.matchAll(l))M.add(w[1]);for(const w of e.defines.keys())M.add(w.replace(/\([\w\s,]*\)/g,""));for(const w of e.uniforms.keys())M.add(w);M.delete("while"),M.delete("for"),M.delete("if"),e.uniforms.forEach((w,C)=>t.uniforms.set(n+C.charAt(0).toUpperCase()+C.slice(1),w)),e.defines.forEach((w,C)=>t.defines.set(n+C.charAt(0).toUpperCase()+C.slice(1),w));const _=new Map([["fragment",i],["vertex",s]]);UO(n,M,t.defines),UO(n,M,_),i=_.get("fragment"),s=_.get("vertex");const S=e.blendMode;if(t.blendModes.set(S.blendFunction,S),r){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(g+=e.inputColorSpace===Qn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==sl?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const w=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;g+=`${n}MainImage(color0, UV, `,(t.attributes&yd.DEPTH)!==0&&w.test(i)&&(g+="depth, ",t.readDepth=!0),g+=`color1);
	`;const C=n+"BlendOpacity";t.uniforms.set(C,S.opacity),g+=`color0 = blend${S.blendFunction}(color0, color1, ${C});

	`,f+=`uniform float ${C};

`}if(f+=i+`
`,s!==null&&(v+=s+`
`),c.set(si.FRAGMENT_HEAD,f),c.set(si.FRAGMENT_MAIN_UV,p),c.set(si.FRAGMENT_MAIN_IMAGE,g),c.set(si.VERTEX_HEAD,v),c.set(si.VERTEX_MAIN_SUPPORT,x),e.extensions!==null)for(const w of e.extensions)t.extensions.add(w)}}var qce=class extends Ta{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new Yce(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new Vle;let e=0;for(const a of this.effects)if(a.blendMode.blendFunction===zn.DST)n.attributes|=a.getAttributes()&yd.DEPTH;else{if((n.attributes&a.getAttributes()&yd.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${a.name})`);Wce("e"+e++,a,n)}let t=n.shaderParts.get(si.FRAGMENT_HEAD),i=n.shaderParts.get(si.FRAGMENT_MAIN_IMAGE),s=n.shaderParts.get(si.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const a of n.blendModes.values())t+=a.getShaderCode().replace(r,`blend${a.blendFunction}`)+`
`;(n.attributes&yd.DEPTH)!==0?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Qn&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(si.FRAGMENT_HEAD,t),n.shaderParts.set(si.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(si.FRAGMENT_MAIN_UV,s);for(const[a,l]of n.shaderParts)l!==null&&n.shaderParts.set(a,l.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Rf){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,s){for(const r of this.effects)r.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,r.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==xs&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},Kce=class extends Ta{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:s=Nr.AUTO_SIZE,height:r=Nr.AUTO_SIZE,resolutionX:a=s,resolutionY:l=r}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new FH(n,e,new mR);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const f=c.getClearPass();f.overrideClearColor=new pt(7829503),f.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new ki(1,1,{minFilter:wi,magFilter:wi}),this.renderTarget.texture.name="NormalPass.Target");const p=this.resolution=new Nr(this,a,l,i);p.addEventListener("change",g=>this.setSize(p.baseWidth,p.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const r=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,r,r)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}};function gv(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}new ze;new ze;function zH(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var go=function n(e,t,i){var s=this;zH(this,n),gv(this,"dot2",function(r,a){return s.x*r+s.y*a}),gv(this,"dot3",function(r,a,l){return s.x*r+s.y*a+s.z*l}),this.x=e,this.y=t,this.z=i},Jce=[new go(1,1,0),new go(-1,1,0),new go(1,-1,0),new go(-1,-1,0),new go(1,0,1),new go(-1,0,1),new go(1,0,-1),new go(-1,0,-1),new go(0,1,1),new go(0,-1,1),new go(0,1,-1),new go(0,-1,-1)],PO=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],IO=new Array(512),FO=new Array(512),Zce=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=PO[t]^e&255:i=PO[t]^e>>8&255,IO[t]=IO[t+256]=i,FO[t]=FO[t+256]=Jce[i%12]}};Zce(0);function Qce(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function zO(n){var e=Qce(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var $ce=function n(e){var t=this;zH(this,n),gv(this,"seed",0),gv(this,"init",function(i){t.seed=i,t.value=zO(i)}),gv(this,"value",zO(this.seed)),this.init(e)};new $ce(Math.random());const eue=z.createContext(null),HO=n=>(n.getAttributes()&2)===2,tue=z.memo(z.forwardRef(({children:n,camera:e,scene:t,resolutionScale:i,enabled:s=!0,renderPriority:r=1,autoClear:a=!0,depthBuffer:l,enableNormalPass:c,stencilBuffer:f,multisampling:p=8,frameBufferType:g=ws},v)=>{const{gl:x,scene:A,camera:M,size:_}=Ni(),S=t||A,w=e||M,[C,B,N]=z.useMemo(()=>{const P=new Gle(x,{depthBuffer:l,stencilBuffer:f,multisampling:p,frameBufferType:g});P.addPass(new FH(S,w));let U=null,I=null;return c&&(I=new Kce(S,w),I.enabled=!1,P.addPass(I),i!==void 0&&(U=new kce({normalBuffer:I.texture,resolutionScale:i}),U.enabled=!1,P.addPass(U))),[P,I,U]},[w,x,l,f,p,g,S,c,i]);z.useEffect(()=>C==null?void 0:C.setSize(_.width,_.height),[C,_]),su((P,U)=>{if(s){const I=x.autoClear;x.autoClear=a,f&&!a&&x.clearStencil(),C.render(U),x.autoClear=I}},s?r:0);const L=z.useRef(null);z.useLayoutEffect(()=>{var I;const P=[],U=L.current.__r3f;if(U&&C){const X=U.children;for(let re=0;re<X.length;re++){const ee=X[re].object;if(ee instanceof cC){const $=[ee];if(!HO(ee)){let j=null;for(;(j=(I=X[re+1])==null?void 0:I.object)instanceof cC&&!HO(j);)$.push(j),re++}const ae=new qce(w,...$);P.push(ae)}else ee instanceof Ta&&P.push(ee)}for(const re of P)C==null||C.addPass(re);B&&(B.enabled=!0),N&&(N.enabled=!0)}return()=>{for(const X of P)C==null||C.removePass(X);B&&(B.enabled=!1),N&&(N.enabled=!1)}},[C,n,w,B,N]),z.useEffect(()=>{const P=x.toneMapping;return x.toneMapping=cl,()=>{x.toneMapping=P}},[x]);const F=z.useMemo(()=>({composer:C,normalPass:B,downSamplingPass:N,resolutionScale:i,camera:w,scene:S}),[C,B,N,i,w,S]);return z.useImperativeHandle(v,()=>C,[C]),H.jsx(eue.Provider,{value:F,children:H.jsx("group",{ref:L,children:n})})}));let nue=0;const GO=new WeakMap,iue=(n,e)=>function({blendFunction:t=e==null?void 0:e.blendFunction,opacity:i=e==null?void 0:e.opacity,...s}){let r=GO.get(n);if(!r){const c=`@react-three/postprocessing/${n.name}-${nue++}`;Dd({[c]:n}),GO.set(n,r=c)}const a=Ni(c=>c.camera),l=sa.useMemo(()=>[...(e==null?void 0:e.args)??[],...s.args??[{...e,...s}]],[JSON.stringify(s)]);return H.jsx(r,{camera:a,"blendMode-blendFunction":t,"blendMode-opacity-value":i,...s,args:l})},sue=iue(zce,{blendFunction:0}),rue=`
  uniform float time;
  uniform vec3 mousePosition;
  varying vec3 vPosition;
  varying float vDistance;
  varying float vNeuralActivity;
  varying vec3 vNormal;

  void main() {
    vPosition = position;
    vNormal = normal;
    
    // Calculate distance to mouse position in world space
    vec4 worldPos = modelMatrix * vec4(position, 1.0);
    float dist = distance(worldPos.xyz, mousePosition);
    vDistance = dist;
    
    // Smoother extrusion with larger falloff
    float maxDist = 0.7;
    float extrudeAmount = smoothstep(maxDist, 0.0, dist) * 0.01;
    
    // Add subtle wave motion to the extrusion
    float wave = sin(position.x * 8.0 + position.y * 8.0 + position.z * 8.0 + time * 3.0) * 0.2;
    extrudeAmount *= (1.0 + wave * smoothstep(maxDist, 0.0, dist));
    
    // Calculate neural activity value for fragment shader
    // This simulates pulses moving along the network
    vNeuralActivity = sin(position.x * 10.0 + position.y * 8.0 + position.z * 6.0 - time * 5.0) * 0.5 + 0.5;
    vNeuralActivity *= smoothstep(maxDist, 0.0, dist) * 0.8 + 0.2;
    
    // Extrude along normal with smoothed effect
    vec3 newPosition = position + normal * extrudeAmount;
    
    gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);
  }
`,aue=`
  uniform float time;
  varying vec3 vPosition;
  varying float vDistance;
  varying float vNeuralActivity;
  varying vec3 vNormal;

  vec3 pulseColor(float t) {
    // Gradient from electric blue to cyan to white
    vec3 color1 = vec3(0.1, 0.4, 0.9);  // Electric blue
    vec3 color2 = vec3(0.0, 1.0, 1.0);  // Cyan
    vec3 color3 = vec3(0.9, 0.95, 1.0); // Almost white
    
    if (t < 0.5) {
      return mix(color1, color2, t * 2.0);
    } else {
      return mix(color2, color3, (t - 0.5) * 2.0);
    }
  }

  void main() {
    // Base color (transparent blue)
    vec3 baseColor = vec3(0.25, 0.52, 0.95);
    
    // Dynamic colors for neural activity effect
    vec3 pulseColors = pulseColor(vNeuralActivity);
    
    // Mix colors based on distance and neural activity
    float maxDist = 0.3;
    float colorMix = smoothstep(maxDist, 0.0, vDistance);
    
    // Create moving wave patterns along the wireframe
    float wave = sin(vPosition.x * 15.0 + vPosition.y * 10.0 + vPosition.z * 12.0 - time * 4.0) * 0.5 + 0.5;
    wave *= smoothstep(maxDist, 0.0, vDistance);
    
    // Combine effects for final color
    vec3 finalColor = mix(baseColor, pulseColors, colorMix * (0.7 + 0.3 * wave));
    
    // Add subtle glow for excited neural pathways
    float glowIntensity = smoothstep(0.3, 0.8, vNeuralActivity) * colorMix;
    finalColor += vec3(0.1, 0.5, 0.9) * glowIntensity;
    
    // Opacity transition (more visible when active)
    float opacity = mix(0.05, 0.4, colorMix * (0.8 + 0.2 * vNeuralActivity));
    
    gl_FragColor = vec4(finalColor, opacity);
  }
`;function oue(n){const e=z.useRef(),{scene:t}=ra("/models/brain.glb"),i=z.useRef(new te),s=z.useRef(new GS),r=XR("/gradients/5.jpg"),a=z.useMemo(()=>(r.minFilter=wi,r.magFilter=wi,r.generateMipmaps=!1,new pR({color:new pt("#4086f4"),gradientMap:r,emissive:new pt("#00ffff"),emissiveIntensity:.2})),[r]),l=z.useMemo(()=>new Oi({vertexShader:rue,fragmentShader:aue,uniforms:{time:{value:0},mousePosition:{value:new te(0,0,100)}},transparent:!0,wireframe:!0,wireframeLinewidth:1.5}),[]),c=z.useMemo(()=>{const p=t.clone();return p.traverse(g=>{g.isMesh&&(g.material=a)}),p},[t,a]),f=z.useMemo(()=>{const p=t.clone();return p.traverse(g=>{g.isMesh&&(g.material=l,g.position.set(0,-.021,0),g.scale.set(2.01,2.01,2.01))}),p},[t,l]);return su(p=>{if(e.current){const g=p.mouse.x*.1,v=p.mouse.y*.1;e.current.rotation.y=-Math.PI/2+g,e.current.rotation.x=v,s.current.setFromCamera(p.mouse,p.camera);const x=s.current.intersectObject(e.current,!0),A=p.clock.getElapsedTime();l.uniforms.time.value=A,x.length>0?i.current.copy(x[0].point):i.current.set(100,100,100),l.uniforms.mousePosition.value.copy(i.current);const M=Math.sin(A*.5)*.1+.9;a.color.setRGB(.25+.1*M,.4+.1*M,.96),a.emissiveIntensity=.1+Math.sin(A*.7)*.1}}),H.jsx("group",{...n,children:H.jsxs("group",{ref:e,children:["        ",H.jsx(GA,{object:c}),H.jsx(GA,{object:f})]})})}ra.preload("/models/brain.glb");function lue(n){const e=z.useRef(),{nodes:t,materials:i}=ra("/models/hp.glb");return H.jsx("group",{ref:e,...n,children:H.jsx("group",{position:[0,.12,0],scale:.6,children:H.jsxs("group",{rotation:[-Math.PI/2,-1.406,-Math.PI/2],position:[.019,.095,.001],children:[H.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t["full-print-table_1"].geometry,material:i.BlackLeazer}),H.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t["full-print-table_2"].geometry,material:i.BlackPlastic}),H.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t["full-print-table_3"].geometry,material:i["Material.002"]}),H.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t["full-print-table_4"].geometry,material:i.Metal}),H.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t["full-print-table_5"].geometry,material:i["Material.001"]}),H.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t["full-print-table_6"].geometry,material:i["BlackLeazer.001"]}),H.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t["full-print-table_7"].geometry,material:i["BlackPlastic.001"]}),H.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t["full-print-table_8"].geometry,material:i["BlackLeazer.002"]})]})})})}ra.preload("/models/hp.glb");const cue=()=>H.jsxs(H.Fragment,{children:[H.jsx("spotLight",{position:[2,5,6],angle:.15,penumbra:.3,intensity:1,color:"#f0e68c"}),H.jsx("spotLight",{position:[4,5,4],angle:.3,penumbra:.5,intensity:5,color:"#4cc9f0"}),H.jsx("spotLight",{position:[-3,5,5],angle:.4,penumbra:.7,intensity:12,color:"#9d4edd"}),H.jsx("primitive",{object:new CR("#a259ff",10,3,10),position:[1,3,4],rotation:[-Math.PI/4,Math.PI/4,0],intensity:20}),H.jsx("pointLight",{position:[0,1,0],intensity:120,color:"#7209b7"}),H.jsx("pointLight",{position:[1,2,-2],intensity:250,color:"#0d00a4"})]}),uue=()=>{const n=NO({query:"(max-width: 768px)"}),e=NO({query:"(max-width: 480px)"});return H.jsxs(jS,{camera:{position:e?[-4,-2,7]:n?[-4.5,-2,7.5]:[-5,-2,8],fov:e?50:n?47:45},style:{width:"100%",height:"100%"},children:[H.jsx("ambientLight",{intensity:.2}),H.jsx(MH,{enablePan:!1,enableZoom:!1,maxDistance:20,minDistance:5,minPolarAngle:Math.PI/5,maxPolarAngle:Math.PI/2}),H.jsxs(z.Suspense,{fallback:null,children:[H.jsx(cue,{}),H.jsx("group",{scale:e?[21,21,21]:n?[21,21,21]:[15,15,15],position:e?[0,-2,0]:n?[0,-1.8,0]:[0,-1.2,0],rotation:[0,-Math.PI*1.85,0],children:H.jsx(oue,{})}),H.jsx("group",{scale:e?[27,27,27]:n?[27,27,27]:[20,20,20],position:e?[0,-4.5,0]:n?[0,-4.2,0]:[0,-3.2,0],rotation:[0,-Math.PI*1.85,0],children:H.jsx(lue,{})})]}),H.jsx(tue,{children:H.jsx(sue,{luminanceThreshold:.9,luminanceSmoothing:.9,height:500})})]})};function HH(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=HH(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function fue(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=HH(n))&&(i&&(i+=" "),i+=e);return i}const t2="-",hue=n=>{const e=pue(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:a=>{const l=a.split(t2);return l[0]===""&&l.length!==1&&l.shift(),GH(l,e)||due(a)},getConflictingClassGroupIds:(a,l)=>{const c=t[a]||[];return l&&i[a]?[...c,...i[a]]:c}}},GH=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),s=i?GH(n.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const r=n.join(t2);return(a=e.validators.find(({validator:l})=>l(r)))==null?void 0:a.classGroupId},VO=/^\[(.+)\]$/,due=n=>{if(VO.test(n)){const e=VO.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},pue=n=>{const{theme:e,classGroups:t}=n,i={nextPart:new Map,validators:[]};for(const s in t)uC(t[s],i,s,e);return i},uC=(n,e,t,i)=>{n.forEach(s=>{if(typeof s=="string"){const r=s===""?e:kO(e,s);r.classGroupId=t;return}if(typeof s=="function"){if(mue(s)){uC(s(i),e,t,i);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([r,a])=>{uC(a,kO(e,r),t,i)})})},kO=(n,e)=>{let t=n;return e.split(t2).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},mue=n=>n.isThemeGetter,gue=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const s=(r,a)=>{t.set(r,a),e++,e>n&&(e=0,i=t,t=new Map)};return{get(r){let a=t.get(r);if(a!==void 0)return a;if((a=i.get(r))!==void 0)return s(r,a),a},set(r,a){t.has(r)?t.set(r,a):s(r,a)}}},fC="!",hC=":",vue=hC.length,yue=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=s=>{const r=[];let a=0,l=0,c=0,f;for(let A=0;A<s.length;A++){let M=s[A];if(a===0&&l===0){if(M===hC){r.push(s.slice(c,A)),c=A+vue;continue}if(M==="/"){f=A;continue}}M==="["?a++:M==="]"?a--:M==="("?l++:M===")"&&l--}const p=r.length===0?s:s.substring(c),g=xue(p),v=g!==p,x=f&&f>c?f-c:void 0;return{modifiers:r,hasImportantModifier:v,baseClassName:g,maybePostfixModifierPosition:x}};if(e){const s=e+hC,r=i;i=a=>a.startsWith(s)?r(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(t){const s=i;i=r=>t({className:r,parseClassName:s})}return i},xue=n=>n.endsWith(fC)?n.substring(0,n.length-1):n.startsWith(fC)?n.substring(1):n,bue=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const s=[];let r=[];return i.forEach(a=>{a[0]==="["||e[a]?(s.push(...r.sort(),a),r=[]):r.push(a)}),s.push(...r.sort()),s}},Aue=n=>({cache:gue(n.cacheSize),parseClassName:yue(n),sortModifiers:bue(n),...hue(n)}),Sue=/\s+/,_ue=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:s,sortModifiers:r}=e,a=[],l=n.trim().split(Sue);let c="";for(let f=l.length-1;f>=0;f-=1){const p=l[f],{isExternal:g,modifiers:v,hasImportantModifier:x,baseClassName:A,maybePostfixModifierPosition:M}=t(p);if(g){c=p+(c.length>0?" "+c:c);continue}let _=!!M,S=i(_?A.substring(0,M):A);if(!S){if(!_){c=p+(c.length>0?" "+c:c);continue}if(S=i(A),!S){c=p+(c.length>0?" "+c:c);continue}_=!1}const w=r(v).join(":"),C=x?w+fC:w,B=C+S;if(a.includes(B))continue;a.push(B);const N=s(S,_);for(let L=0;L<N.length;++L){const F=N[L];a.push(C+F)}c=p+(c.length>0?" "+c:c)}return c};function Mue(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=VH(e))&&(i&&(i+=" "),i+=t);return i}const VH=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=VH(n[i]))&&(t&&(t+=" "),t+=e);return t};function Eue(n,...e){let t,i,s,r=a;function a(c){const f=e.reduce((p,g)=>g(p),n());return t=Aue(f),i=t.cache.get,s=t.cache.set,r=l,l(c)}function l(c){const f=i(c);if(f)return f;const p=_ue(c,t);return s(c,p),p}return function(){return r(Mue.apply(null,arguments))}}const Fs=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},kH=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,jH=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Tue=/^\d+\/\d+$/,Cue=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wue=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Rue=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Bue=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Due=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,tm=n=>Tue.test(n),Bn=n=>!!n&&!Number.isNaN(Number(n)),of=n=>!!n&&Number.isInteger(Number(n)),UE=n=>n.endsWith("%")&&Bn(n.slice(0,-1)),Vc=n=>Cue.test(n),Nue=()=>!0,Lue=n=>wue.test(n)&&!Rue.test(n),XH=()=>!1,Oue=n=>Bue.test(n),Uue=n=>Due.test(n),Pue=n=>!Ut(n)&&!Pt(n),Iue=n=>ig(n,qH,XH),Ut=n=>kH.test(n),Gh=n=>ig(n,KH,Lue),PE=n=>ig(n,Vue,Bn),jO=n=>ig(n,YH,XH),Fue=n=>ig(n,WH,Uue),lb=n=>ig(n,JH,Oue),Pt=n=>jH.test(n),H0=n=>sg(n,KH),zue=n=>sg(n,kue),XO=n=>sg(n,YH),Hue=n=>sg(n,qH),Gue=n=>sg(n,WH),cb=n=>sg(n,JH,!0),ig=(n,e,t)=>{const i=kH.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},sg=(n,e,t=!1)=>{const i=jH.exec(n);return i?i[1]?e(i[1]):t:!1},YH=n=>n==="position"||n==="percentage",WH=n=>n==="image"||n==="url",qH=n=>n==="length"||n==="size"||n==="bg-size",KH=n=>n==="length",Vue=n=>n==="number",kue=n=>n==="family-name",JH=n=>n==="shadow",jue=()=>{const n=Fs("color"),e=Fs("font"),t=Fs("text"),i=Fs("font-weight"),s=Fs("tracking"),r=Fs("leading"),a=Fs("breakpoint"),l=Fs("container"),c=Fs("spacing"),f=Fs("radius"),p=Fs("shadow"),g=Fs("inset-shadow"),v=Fs("text-shadow"),x=Fs("drop-shadow"),A=Fs("blur"),M=Fs("perspective"),_=Fs("aspect"),S=Fs("ease"),w=Fs("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...B(),Pt,Ut],L=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],P=()=>[Pt,Ut,c],U=()=>[tm,"full","auto",...P()],I=()=>[of,"none","subgrid",Pt,Ut],X=()=>["auto",{span:["full",of,Pt,Ut]},of,Pt,Ut],re=()=>[of,"auto",Pt,Ut],ee=()=>["auto","min","max","fr",Pt,Ut],$=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ae=()=>["start","end","center","stretch","center-safe","end-safe"],j=()=>["auto",...P()],Q=()=>[tm,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],J=()=>[n,Pt,Ut],xe=()=>[...B(),XO,jO,{position:[Pt,Ut]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],oe=()=>["auto","cover","contain",Hue,Iue,{size:[Pt,Ut]}],be=()=>[UE,H0,Gh],_e=()=>["","none","full",f,Pt,Ut],ue=()=>["",Bn,H0,Gh],Ue=()=>["solid","dashed","dotted","double"],Be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],He=()=>[Bn,UE,XO,jO],et=()=>["","none",A,Pt,Ut],Lt=()=>["none",Bn,Pt,Ut],_t=()=>["none",Bn,Pt,Ut],jt=()=>[Bn,Pt,Ut],Ye=()=>[tm,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Vc],breakpoint:[Vc],color:[Nue],container:[Vc],"drop-shadow":[Vc],ease:["in","out","in-out"],font:[Pue],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Vc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Vc],shadow:[Vc],spacing:["px",Bn],text:[Vc],"text-shadow":[Vc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",tm,Ut,Pt,_]}],container:["container"],columns:[{columns:[Bn,Ut,Pt,l]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[of,"auto",Pt,Ut]}],basis:[{basis:[tm,"full","auto",l,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Bn,tm,"auto","initial","none",Ut]}],grow:[{grow:["",Bn,Pt,Ut]}],shrink:[{shrink:["",Bn,Pt,Ut]}],order:[{order:[of,"first","last","none",Pt,Ut]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:X()}],"col-start":[{"col-start":re()}],"col-end":[{"col-end":re()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:X()}],"row-start":[{"row-start":re()}],"row-end":[{"row-end":re()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ee()}],"auto-rows":[{"auto-rows":ee()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...$(),"normal"]}],"justify-items":[{"justify-items":[...ae(),"normal"]}],"justify-self":[{"justify-self":["auto",...ae()]}],"align-content":[{content:["normal",...$()]}],"align-items":[{items:[...ae(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ae(),{baseline:["","last"]}]}],"place-content":[{"place-content":$()}],"place-items":[{"place-items":[...ae(),"baseline"]}],"place-self":[{"place-self":["auto",...ae()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:j()}],mx:[{mx:j()}],my:[{my:j()}],ms:[{ms:j()}],me:[{me:j()}],mt:[{mt:j()}],mr:[{mr:j()}],mb:[{mb:j()}],ml:[{ml:j()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:Q()}],w:[{w:[l,"screen",...Q()]}],"min-w":[{"min-w":[l,"screen","none",...Q()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...Q()]}],h:[{h:["screen","lh",...Q()]}],"min-h":[{"min-h":["screen","lh","none",...Q()]}],"max-h":[{"max-h":["screen","lh",...Q()]}],"font-size":[{text:["base",t,H0,Gh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Pt,PE]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",UE,Ut]}],"font-family":[{font:[zue,Ut,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Pt,Ut]}],"line-clamp":[{"line-clamp":[Bn,"none",Pt,PE]}],leading:[{leading:[r,...P()]}],"list-image":[{"list-image":["none",Pt,Ut]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Pt,Ut]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:J()}],"text-color":[{text:J()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ue(),"wavy"]}],"text-decoration-thickness":[{decoration:[Bn,"from-font","auto",Pt,Gh]}],"text-decoration-color":[{decoration:J()}],"underline-offset":[{"underline-offset":[Bn,"auto",Pt,Ut]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pt,Ut]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pt,Ut]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:xe()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:oe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},of,Pt,Ut],radial:["",Pt,Ut],conic:[of,Pt,Ut]},Gue,Fue]}],"bg-color":[{bg:J()}],"gradient-from-pos":[{from:be()}],"gradient-via-pos":[{via:be()}],"gradient-to-pos":[{to:be()}],"gradient-from":[{from:J()}],"gradient-via":[{via:J()}],"gradient-to":[{to:J()}],rounded:[{rounded:_e()}],"rounded-s":[{"rounded-s":_e()}],"rounded-e":[{"rounded-e":_e()}],"rounded-t":[{"rounded-t":_e()}],"rounded-r":[{"rounded-r":_e()}],"rounded-b":[{"rounded-b":_e()}],"rounded-l":[{"rounded-l":_e()}],"rounded-ss":[{"rounded-ss":_e()}],"rounded-se":[{"rounded-se":_e()}],"rounded-ee":[{"rounded-ee":_e()}],"rounded-es":[{"rounded-es":_e()}],"rounded-tl":[{"rounded-tl":_e()}],"rounded-tr":[{"rounded-tr":_e()}],"rounded-br":[{"rounded-br":_e()}],"rounded-bl":[{"rounded-bl":_e()}],"border-w":[{border:ue()}],"border-w-x":[{"border-x":ue()}],"border-w-y":[{"border-y":ue()}],"border-w-s":[{"border-s":ue()}],"border-w-e":[{"border-e":ue()}],"border-w-t":[{"border-t":ue()}],"border-w-r":[{"border-r":ue()}],"border-w-b":[{"border-b":ue()}],"border-w-l":[{"border-l":ue()}],"divide-x":[{"divide-x":ue()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ue()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ue(),"hidden","none"]}],"divide-style":[{divide:[...Ue(),"hidden","none"]}],"border-color":[{border:J()}],"border-color-x":[{"border-x":J()}],"border-color-y":[{"border-y":J()}],"border-color-s":[{"border-s":J()}],"border-color-e":[{"border-e":J()}],"border-color-t":[{"border-t":J()}],"border-color-r":[{"border-r":J()}],"border-color-b":[{"border-b":J()}],"border-color-l":[{"border-l":J()}],"divide-color":[{divide:J()}],"outline-style":[{outline:[...Ue(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Bn,Pt,Ut]}],"outline-w":[{outline:["",Bn,H0,Gh]}],"outline-color":[{outline:J()}],shadow:[{shadow:["","none",p,cb,lb]}],"shadow-color":[{shadow:J()}],"inset-shadow":[{"inset-shadow":["none",g,cb,lb]}],"inset-shadow-color":[{"inset-shadow":J()}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:J()}],"ring-offset-w":[{"ring-offset":[Bn,Gh]}],"ring-offset-color":[{"ring-offset":J()}],"inset-ring-w":[{"inset-ring":ue()}],"inset-ring-color":[{"inset-ring":J()}],"text-shadow":[{"text-shadow":["none",v,cb,lb]}],"text-shadow-color":[{"text-shadow":J()}],opacity:[{opacity:[Bn,Pt,Ut]}],"mix-blend":[{"mix-blend":[...Be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Bn]}],"mask-image-linear-from-pos":[{"mask-linear-from":He()}],"mask-image-linear-to-pos":[{"mask-linear-to":He()}],"mask-image-linear-from-color":[{"mask-linear-from":J()}],"mask-image-linear-to-color":[{"mask-linear-to":J()}],"mask-image-t-from-pos":[{"mask-t-from":He()}],"mask-image-t-to-pos":[{"mask-t-to":He()}],"mask-image-t-from-color":[{"mask-t-from":J()}],"mask-image-t-to-color":[{"mask-t-to":J()}],"mask-image-r-from-pos":[{"mask-r-from":He()}],"mask-image-r-to-pos":[{"mask-r-to":He()}],"mask-image-r-from-color":[{"mask-r-from":J()}],"mask-image-r-to-color":[{"mask-r-to":J()}],"mask-image-b-from-pos":[{"mask-b-from":He()}],"mask-image-b-to-pos":[{"mask-b-to":He()}],"mask-image-b-from-color":[{"mask-b-from":J()}],"mask-image-b-to-color":[{"mask-b-to":J()}],"mask-image-l-from-pos":[{"mask-l-from":He()}],"mask-image-l-to-pos":[{"mask-l-to":He()}],"mask-image-l-from-color":[{"mask-l-from":J()}],"mask-image-l-to-color":[{"mask-l-to":J()}],"mask-image-x-from-pos":[{"mask-x-from":He()}],"mask-image-x-to-pos":[{"mask-x-to":He()}],"mask-image-x-from-color":[{"mask-x-from":J()}],"mask-image-x-to-color":[{"mask-x-to":J()}],"mask-image-y-from-pos":[{"mask-y-from":He()}],"mask-image-y-to-pos":[{"mask-y-to":He()}],"mask-image-y-from-color":[{"mask-y-from":J()}],"mask-image-y-to-color":[{"mask-y-to":J()}],"mask-image-radial":[{"mask-radial":[Pt,Ut]}],"mask-image-radial-from-pos":[{"mask-radial-from":He()}],"mask-image-radial-to-pos":[{"mask-radial-to":He()}],"mask-image-radial-from-color":[{"mask-radial-from":J()}],"mask-image-radial-to-color":[{"mask-radial-to":J()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":B()}],"mask-image-conic-pos":[{"mask-conic":[Bn]}],"mask-image-conic-from-pos":[{"mask-conic-from":He()}],"mask-image-conic-to-pos":[{"mask-conic-to":He()}],"mask-image-conic-from-color":[{"mask-conic-from":J()}],"mask-image-conic-to-color":[{"mask-conic-to":J()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:xe()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:oe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Pt,Ut]}],filter:[{filter:["","none",Pt,Ut]}],blur:[{blur:et()}],brightness:[{brightness:[Bn,Pt,Ut]}],contrast:[{contrast:[Bn,Pt,Ut]}],"drop-shadow":[{"drop-shadow":["","none",x,cb,lb]}],"drop-shadow-color":[{"drop-shadow":J()}],grayscale:[{grayscale:["",Bn,Pt,Ut]}],"hue-rotate":[{"hue-rotate":[Bn,Pt,Ut]}],invert:[{invert:["",Bn,Pt,Ut]}],saturate:[{saturate:[Bn,Pt,Ut]}],sepia:[{sepia:["",Bn,Pt,Ut]}],"backdrop-filter":[{"backdrop-filter":["","none",Pt,Ut]}],"backdrop-blur":[{"backdrop-blur":et()}],"backdrop-brightness":[{"backdrop-brightness":[Bn,Pt,Ut]}],"backdrop-contrast":[{"backdrop-contrast":[Bn,Pt,Ut]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Bn,Pt,Ut]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Bn,Pt,Ut]}],"backdrop-invert":[{"backdrop-invert":["",Bn,Pt,Ut]}],"backdrop-opacity":[{"backdrop-opacity":[Bn,Pt,Ut]}],"backdrop-saturate":[{"backdrop-saturate":[Bn,Pt,Ut]}],"backdrop-sepia":[{"backdrop-sepia":["",Bn,Pt,Ut]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Pt,Ut]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Bn,"initial",Pt,Ut]}],ease:[{ease:["linear","initial",S,Pt,Ut]}],delay:[{delay:[Bn,Pt,Ut]}],animate:[{animate:["none",w,Pt,Ut]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[M,Pt,Ut]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:Lt()}],"rotate-x":[{"rotate-x":Lt()}],"rotate-y":[{"rotate-y":Lt()}],"rotate-z":[{"rotate-z":Lt()}],scale:[{scale:_t()}],"scale-x":[{"scale-x":_t()}],"scale-y":[{"scale-y":_t()}],"scale-z":[{"scale-z":_t()}],"scale-3d":["scale-3d"],skew:[{skew:jt()}],"skew-x":[{"skew-x":jt()}],"skew-y":[{"skew-y":jt()}],transform:[{transform:[Pt,Ut,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ye()}],"translate-x":[{"translate-x":Ye()}],"translate-y":[{"translate-y":Ye()}],"translate-z":[{"translate-z":Ye()}],"translate-none":["translate-none"],accent:[{accent:J()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:J()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pt,Ut]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pt,Ut]}],fill:[{fill:["none",...J()]}],"stroke-w":[{stroke:[Bn,H0,Gh,PE]}],stroke:[{stroke:["none",...J()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Xv=Eue(jue);function YO(...n){return Xv(fue(n))}function G0({className:n,delay:e=0,width:t=400,height:i=100,rotate:s=0,gradient:r="from-white/[0.08]"}){return H.jsx(Mn.div,{initial:{opacity:0,y:-150,rotate:s-15},animate:{opacity:1,y:0,rotate:s},transition:{duration:2.4,delay:e,ease:[.23,.86,.39,.96],opacity:{duration:1.2}},className:YO("absolute",n),children:H.jsx(Mn.div,{animate:{y:[0,15,0]},transition:{duration:12,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"},style:{width:t,height:i},className:"relative",children:H.jsx("div",{className:YO("absolute inset-0 rounded-full","bg-gradient-to-r to-transparent",r,"backdrop-blur-[2px] border-0.2 border-white/[0.15]","shadow-[0_8px_32px_0_rgba(255,255,255,0.1)]","after:absolute after:inset-0 after:rounded-full","after:bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.2),transparent_70%)]")})})})}const Xue=()=>{const n={hidden:{opacity:0,y:30},visible:e=>({opacity:1,y:0,transition:{duration:1,delay:.5+e*.2,ease:[.25,.4,.25,1]}})};return H.jsxs(H.Fragment,{children:[H.jsxs("div",{className:"absolute inset-0 overflow-hidden opacity-20 pointer-events-none",children:[H.jsx(G0,{delay:.3,width:600,height:140,rotate:12,gradient:"from-indigo-500/[0.15]",className:"left-[-10%] md:left-[-5%] top-[15%] md:top-[20%]"}),H.jsx(G0,{delay:.5,width:500,height:120,rotate:-15,gradient:"from-rose-500/[0.15]",className:"right-[-5%] md:right-[0%] top-[70%] md:top-[75%]"}),H.jsx(G0,{delay:.4,width:300,height:80,rotate:-8,gradient:"from-violet-500/[0.15]",className:"left-[5%] md:left-[10%] bottom-[5%] md:bottom-[10%]"}),H.jsx(G0,{delay:.6,width:200,height:60,rotate:20,gradient:"from-amber-500/[0.15]",className:"right-[15%] md:right-[20%] top-[10%] md:top-[15%]"}),H.jsx(G0,{delay:.7,width:150,height:40,rotate:-25,gradient:"from-cyan-500/[0.15]",className:"left-[20%] md:left-[25%] top-[5%] md:top-[10%]"})]}),H.jsxs("section",{id:"hero",className:"relative w-full overflow-hidden",children:[H.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/[0.05] via-transparent to-rose-500/[0.05] blur-3xl"}),H.jsx("div",{className:"absolute w-full z-10",children:H.jsx($X,{colorStops:["#3A29FF","#FF94B4","#FF3232"],blend:.5,amplitude:2,speed:.5})}),H.jsxs("div",{className:"relative z-10 mt-20 sm:mt-24 md:mt-28 xl:mt-20 w-full h-[80vh] md:h-dvh flex flex-col xl:flex-row items-start xl:items-center justify-center px-3 sm:px-5 md:px-6 xl:px-0",children:[H.jsx("header",{className:"flex flex-col justify-center w-full max-w-full md:max-w-[90%] lg:max-w-[80%] xl:max-w-[50%] px-2 sm:px-4 md:px-6 lg:px-10 xl:px-20 py-5",children:H.jsxs("div",{className:"flex flex-col gap-4 md:gap-7",children:[H.jsx(Mn.div,{custom:0,variants:n,initial:"hidden",animate:"visible",children:H.jsx("img",{src:"/assets/logos/heading.svg",alt:"Heading",className:"w-36 sm:w-42 md:w-48"})}),H.jsx(Mn.div,{custom:1,variants:n,initial:"hidden",animate:"visible",className:"flex items-start gap-2 md:gap-4",children:H.jsx(dZ,{sentence:"Attention Detection",manualMode:!1,blurAmount:5,borderColor:"green",animationDuration:2,pauseBetweenAnimations:1})}),H.jsx(Mn.p,{custom:2,variants:n,initial:"hidden",animate:"visible",className:"text-white-50 text-sm sm:text-base md:text-lg lg:text-xl relative z-10 pointer-events-none",children:"(BCI) Brain Computer Interface."}),H.jsx(Mn.div,{custom:3,variants:n,initial:"hidden",animate:"visible",className:"mt-2",children:H.jsx(tz,{children:"Simulate"})})]})}),H.jsx("figure",{className:"w-full xl:w-1/2 h-[50vh] md:h-[60vh] xl:h-full relative",children:H.jsx("div",{className:"w-full h-full absolute top-0 right-0",children:H.jsx(uue,{})})})]}),H.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-transparent to-black/30 pointer-events-none"})]})]})};function Yue(n){const e=z.useRef(),{nodes:t,materials:i}=ra("/models/human_brain.glb"),s=z.useMemo(()=>new ia({color:"#00ffff",wireframe:!0,transparent:!0,opacity:.8}),[]);return su((r,a)=>{if(e.current){e.current.rotation.y+=a*.3;const f=Math.sin(r.clock.elapsedTime*1)*.02;e.current.scale.x=(n.scale||.01)*(1+f),e.current.scale.y=(n.scale||.01)*(1+f),e.current.scale.z=(n.scale||.01)*(1+f),n.wireframe&&s&&(s.opacity=.6+Math.sin(r.clock.elapsedTime*2)*.2)}}),H.jsx("group",{ref:e,...n,dispose:null,children:H.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Object_5.geometry,material:n.wireframe?s:i.material_0})})}ra.preload("/models/human_brain.glb");const Wue=()=>H.jsxs("div",{className:"relative inline-flex items-center justify-center gap-4 group",children:[H.jsx("div",{className:"absolute inset-0 duration-1000 opacity-60 transitiona-all bg-gradient-to-r from-indigo-500 via-pink-500 to-yellow-400 rounded-xl blur-lg filter group-hover:opacity-100 group-hover:duration-200"}),H.jsxs(Jv,{to:"/simulation",className:"group relative inline-flex items-center justify-center text-base rounded-xl bg-gray-900 px-8 py-3 font-semibold text-white transition-all duration-200 hover:bg-gray-800 hover:shadow-lg hover:-translate-y-0.5 hover:shadow-gray-600/30",children:["Simulate",H.jsxs("svg",{"aria-hidden":"true",viewBox:"0 0 10 10",height:10,width:10,fill:"none",className:"mt-0.5 ml-2 -mr-1 stroke-white stroke-2",children:[H.jsx("path",{d:"M0 5h7",className:"transition opacity-0 group-hover:opacity-100"}),H.jsx("path",{d:"M1 1l4 4-4 4",className:"transition group-hover:translate-x-[3px]"})]})]})]}),que=jR({uTime:0,uColor:new pt(.1,.3,.8)},`
  uniform float uTime;

  varying vec3 vPosition;
  varying vec3 vNormal;
  
  // Random 2D function from includes
  float random2D(vec2 st){
    return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);
  }
  
  void main() {
    // Position
    vec4 modelPosition = modelMatrix * vec4(position, 1.0);

    // Glitch
    float glitchTime = uTime - modelPosition.y;
    float glitchStrength = sin(glitchTime) + sin(glitchTime * 3.45) +  sin(glitchTime * 8.76);
    glitchStrength /= 3.0;
    glitchStrength = smoothstep(0.3, 1.0, glitchStrength);
    glitchStrength *= 0.25;
    modelPosition.x += (random2D(modelPosition.xz + uTime) - 0.5) * glitchStrength;
    modelPosition.z += (random2D(modelPosition.zx + uTime) - 0.5) * glitchStrength;

    // Final position
    gl_Position = projectionMatrix * viewMatrix * modelPosition;

    // Model normal
    vec4 modelNormal = modelMatrix * vec4(normal, 0.0);

    // Varyings
    vPosition = modelPosition.xyz;
    vNormal = modelNormal.xyz;
  }
  `,`
  uniform vec3 uColor;
  uniform float uTime;
  
  varying vec3 vPosition;
  varying vec3 vNormal;
  
  void main() {
    // Normal
    vec3 normal = normalize(vNormal);
    if(!gl_FrontFacing)
        normal *= - 1.0;
  
    // Stripes
    float stripes = mod((vPosition.y - uTime * 0.02) * 20.0, 1.0);
    stripes = pow(stripes, 3.0);
  
    // Fresnel
    vec3 viewDirection = normalize(vPosition - cameraPosition);
    float fresnel = dot(viewDirection, normal) + 1.0;
    fresnel = pow(fresnel, 2.0);
  
    // Falloff
    float falloff = smoothstep(0.8, 0.2, fresnel);
  
    // Holographic
    float holographic = stripes * fresnel;
    holographic += fresnel * 1.25;
    holographic *= falloff;
  
    // Final color
    gl_FragColor = vec4(uColor, holographic);
    
    // Tone mapping and color space adjustments
    #include <tonemapping_fragment>
    #include <colorspace_fragment>
  }
  `);Dd({NeuralMaterial:que});const ZH=({position:n=[0,0,0],scale:e=2,rotation:t=[0,0,0],color:i="#2389da"})=>{const s=z.useRef(),r=z.useRef(),a=z.useMemo(()=>new by(1,.4,16,100),[]),l=z.useMemo(()=>new pt(i),[i]);return su(c=>{s.current&&(s.current.uTime=c.clock.elapsedTime)}),H.jsx("mesh",{ref:r,position:n,scale:e,rotation:t,geometry:a,children:H.jsx("neuralMaterial",{ref:s,transparent:!0,uColor:l,side:fr})})};ZH.propTypes={position:wt.array,scale:wt.oneOfType([wt.number,wt.array]),rotation:wt.array,color:wt.string};const Kue=({text:n="Compressa",fontFamily:e="Compressa VF",fontUrl:t="https://res.cloudinary.com/dr6lvwubh/raw/upload/v1529908256/CompressaPRO-GX.woff2",width:i=!0,weight:s=!0,italic:r=!0,alpha:a=!1,flex:l=!0,stroke:c=!1,scale:f=!1,textColor:p="#FFFFFF",strokeColor:g="#FF0000",strokeWidth:v=2,className:x="",minFontSize:A=24})=>{const M=z.useRef(null),_=z.useRef(null),S=z.useRef([]),w=z.useRef({x:0,y:0}),C=z.useRef({x:0,y:0}),[B,N]=z.useState(A),[L,F]=z.useState(1),[P,U]=z.useState(1),I=n.split(""),X=(ee,$)=>{const ae=$.x-ee.x,j=$.y-ee.y;return Math.sqrt(ae*ae+j*j)};z.useEffect(()=>{const ee=ae=>{C.current.x=ae.clientX,C.current.y=ae.clientY},$=ae=>{const j=ae.touches[0];C.current.x=j.clientX,C.current.y=j.clientY};if(window.addEventListener("mousemove",ee),window.addEventListener("touchmove",$,{passive:!1}),M.current){const{left:ae,top:j,width:Q,height:J}=M.current.getBoundingClientRect();w.current.x=ae+Q/2,w.current.y=j+J/2,C.current.x=w.current.x,C.current.y=w.current.y}return()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("touchmove",$)}},[]);const re=()=>{if(!M.current||!_.current)return;const{width:ee,height:$}=M.current.getBoundingClientRect();let ae=ee/(I.length/2);ae=Math.max(ae,A),N(ae),F(1),U(1),requestAnimationFrame(()=>{if(!_.current)return;const j=_.current.getBoundingClientRect();if(f&&j.height>0){const Q=$/j.height;F(Q),U(Q)}})};return z.useEffect(()=>(re(),window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)),[f,n]),z.useEffect(()=>{let ee;const $=()=>{if(w.current.x+=(C.current.x-w.current.x)/15,w.current.y+=(C.current.y-w.current.y)/15,_.current){const j=_.current.getBoundingClientRect().width/2;S.current.forEach(Q=>{if(!Q)return;const J=Q.getBoundingClientRect(),xe={x:J.x+J.width/2,y:J.y+J.height/2},Y=X(w.current,xe),oe=(Be,He,et)=>{const Lt=et-Math.abs(et*Be/j);return Math.max(He,Lt+He)},be=i?Math.floor(oe(Y,5,200)):100,_e=s?Math.floor(oe(Y,100,900)):400,ue=r?oe(Y,0,1).toFixed(2):0,Ue=a?oe(Y,0,1).toFixed(2):1;Q.style.opacity=Ue,Q.style.fontVariationSettings=`'wght' ${_e}, 'wdth' ${be}, 'ital' ${ue}`})}ee=requestAnimationFrame($)};return $(),()=>cancelAnimationFrame(ee)},[i,s,r,a,I.length]),H.jsxs("div",{ref:M,className:"relative w-full h-full overflow-hidden bg-transparent",children:[H.jsx("style",{children:`
        @font-face {
          font-family: '${e}';
          src: url('${t}');
          font-style: normal;
        }
        .stroke span {
          position: relative;
          color: ${p};
        }
        .stroke span::after {
          content: attr(data-char);
          position: absolute;
          left: 0;
          top: 0;
          color: transparent;
          z-index: -1;
          -webkit-text-stroke-width: ${v}px;
          -webkit-text-stroke-color: ${g};
        }
      `}),H.jsx("h1",{ref:_,className:`text-pressure-title ${x} ${l?"flex justify-between":""} ${c?"stroke":""} uppercase text-center`,style:{fontFamily:e,fontSize:B,lineHeight:P,transform:`scale(1, ${L})`,transformOrigin:"center top",margin:0,fontWeight:100,color:c?void 0:p},children:I.map((ee,$)=>H.jsx("span",{ref:ae=>S.current[$]=ae,"data-char":ee,className:"inline-block",children:ee},$))})]})},Jue=()=>H.jsx("div",{className:"w-full relative mx-3 h-[80px] md:h-[240px] sm:h-[120px] xs:h-[80px]",children:H.jsx(Kue,{text:"ATTENTION!",flex:!0,alpha:!1,stroke:!1,width:!0,weight:!0,italic:!0,textColor:"#ffffff",strokeColor:"#ff0000",minFontSize:36})}),Zue=()=>{const n=z.useRef();return z.useRef(),H.jsxs("section",{className:"c-space section-spacing",id:"about",children:[H.jsx(Jue,{}),H.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-6 md:auto-rows-[18rem] mt-12",children:[H.jsxs("div",{className:"flex items-end grid-default-color grid-1",children:[H.jsx("img",{src:"assets/hp.png",className:"absolute scale-[1.75] -right-[5rem] -top-[1rem] md:scale-[3] md:left-50 md:inset-y-10 lg:scale-[2.5]"}),H.jsxs("div",{className:"z-10",children:[H.jsx("p",{className:"headtext",children:"Move beyond passive listening"}),H.jsx("p",{className:"subtext",children:"Actively identifying your attentional focus and dynamically enhancing the audio in real-time, precisely as per the user's conscious intent"})]}),H.jsx("div",{className:"absolute inset-x-0 pointer-evets-none -bottom-4 h-1/2 sm:h-1/3 bg-gradient-to-t from-indigo"})]}),H.jsx("div",{className:"grid-default-color grid-2",children:H.jsxs("div",{ref:n,className:"flex items-center justify-center w-full h-full",children:[H.jsx("img",{src:"images/vr.png",className:"absolute z-0 -top-[30px]",alt:""}),H.jsx("div",{className:"z-10",children:H.jsx("p",{className:"absolute left-4 bottom-4 headtext",children:"AR/VR Integration"})})]})}),H.jsxs("div",{className:"grid-black-color grid-3",children:[H.jsxs("div",{className:"z-10 w-[50%]",children:[H.jsx("p",{className:"headtext",children:"Temporal Response Fn"}),H.jsx("p",{className:"subtext",children:"(TRF) facilitates a mapping b/w features of sound & EEG responses from the auditory cortex"})]}),H.jsx("figure",{className:"absolute left-[25%] top-[5%] w-[70%] h-[70%]",children:H.jsxs(jS,{camera:{position:[0,0,5],fov:50},className:"w-full h-full",style:{pointerEvents:"none"},gl:{antialias:!0,alpha:!0},dpr:[1,2],children:["              ",H.jsx("ambientLight",{}),H.jsx("directionalLight",{position:[10,10,5],intensity:2}),H.jsx(Yue,{scale:.045,position:[.8,-1.3,0]}),H.jsx(ZH,{scale:1.25,position:[.8,-.2,.16],rotation:[-Math.PI/2,-Math.PI/72,0],color:"#4f9dff"})]})})]}),H.jsx("div",{className:"grid-special-color grid-4",children:H.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 size-full",children:[H.jsx("p",{className:"text-center headtext",children:"Experience Neuro-Steered listening?"}),H.jsx(Wue,{})]})}),H.jsx("div",{className:"grid-default-color grid-5",children:H.jsxs("div",{ref:n,className:"flex items-center justify-center w-full h-full",children:[H.jsx("img",{src:"assets/ci.png",className:"absolute z-0 -top-[80px]",alt:""}),H.jsx("div",{className:"z-10",children:H.jsx("p",{className:"absolute left-4 bottom-4 headtext",children:"Cochlear Implant Integration"})})]})})]})]})},Que=({data:n})=>{const e=z.useRef(null),t=z.useRef(null),[i,s]=z.useState(0);z.useEffect(()=>{if(e.current){const c=e.current.getBoundingClientRect();s(c.height)}},[e]);const{scrollYProgress:r}=oZ({target:t,offset:["start 10%","end 50%"]}),a=qb(r,[0,1],[0,i]),l=qb(r,[0,.1],[0,1]);return H.jsxs("div",{className:"c-space section-spacing",ref:t,children:[H.jsx("h2",{className:"text-heading",children:"Research & Development"}),H.jsxs("div",{ref:e,className:"relative pb-20",children:[n.map((c,f)=>H.jsxs("div",{className:"flex justify-start pt-10 md:pt-40 md:gap-10",children:[H.jsxs("div",{className:"sticky z-40 flex flex-col items-center self-start max-w-xs md:flex-row top-40 lg:max-w-sm md:w-full",children:[H.jsx("div",{className:"absolute flex items-center justify-center w-10 h-10 rounded-full -left-[15px] bg-midnight",children:H.jsx("div",{className:"w-4 h-4 p-2 border rounded-full bg-neutral-800 border-neutral-700"})}),H.jsxs("div",{className:"flex-col hidden gap-2 text-xl font-bold md:flex md:pl-20 md:text-4xl text-neutral-300",children:[H.jsx("h3",{children:c.date}),H.jsx("h3",{className:"text-3xl text-neutral-400",children:c.title}),H.jsx("h3",{className:"text-3xl text-neutral-500",children:c.job})]})]}),H.jsxs("div",{className:"relative w-full pl-20 pr-4 md:pl-4",children:[H.jsxs("div",{className:"block mb-4 text-2xl font-bold text-left text-neutral-300 md:hidden ",children:[H.jsx("h3",{children:c.date}),H.jsx("h3",{children:c.job})]}),c.contents.map((p,g)=>H.jsx("p",{className:"mb-3 font-normal text-neutral-400",children:p},g))]})]},f)),H.jsx("div",{style:{height:i+"px"},className:"absolute md:left-1 left-1 top-0 overflow-hidden w-[2px] bg-[linear-gradient(to_bottom,var(--tw-gradient-stops))] from-transparent from-[0%] via-neutral-700 to-transparent to-[99%]  [mask-image:linear-gradient(to_bottom,transparent_0%,black_10%,black_90%,transparent_100%)] ",children:H.jsx(Mn.div,{style:{height:a,opacity:l},className:"absolute inset-x-0 top-0  w-[2px] bg-gradient-to-t from-purple-500 via-lavender/50 to-transparent from-[0%] via-[10%] rounded-full"})})]})]})},$ue=[{name:"WhatsApp",href:"https://wa.me/919478972509?text=Hello!%20I'm%20interested%20in%20knowing%20more%20about%20neuroxones!",icon:"/assets/socials/whatsApp.svg"},{name:"Linkedin",href:"https://www.linkedin.com/in/lagooneration/",icon:"/assets/socials/linkedIn.svg"},{name:"Instagram",href:"https://www.instagram.com/lagooneration",icon:"/assets/socials/instagram.svg"}],efe=[{title:"Primary Research",job:"Understanding Auditory Attention",date:"2021-2022",contents:["Inspired by research done by Bertrand A, KU Leuven on auditory attention and mechanisms responsible for neuro-steered attention detection."]},{title:"Conceptualization",job:"Neuro-Steered Device",date:"2022-2024",contents:["Conceptualized a prototype for neuro-steered EEG extension, starting with auditory attention detection.","Prototyping plan and research for suitable equipment and hardware for EEG extension compatible with AR/VR devices."]},{title:"Algorithm Development",job:"Auditory Attention Detection",date:"2024-Present",contents:["Developing algorithms to detect auditory attention using EEG data.","Implementing machine learning techniques to improve accuracy and responsiveness.","Collaborating with researchers to validate and refine the detection algorithms."]}],WO=[{name:"Working Prototype",username:"@Studio",body:"Prepration to use mBrainTrain Mobile EEG by BRAINBOX.",img:"/assets/logos/prototype.svg"},{name:"Machine Learning",username:"@AI_&_ML",body:"Using machine learning on EEG data for auditory scene analysis.",img:"/assets/logos/ml.svg"},{name:"Materials & Equipment",username:"@Procurement",body:"Procuring best suitable tech for compact user-centric design.",img:"/assets/logos/material.svg"},{name:"Patents & IP",username:"@Legal",body:"Patenting the neuro-steered plugon design and technology with AR/VR consoles.",img:"/assets/logos/patent.svg"},{name:"Business Development",username:"@BizDev",body:"Exploring partnerships with tech companies for product integration.",img:"/assets/logos/business.svg"},{name:"Clinical Trials",username:"@Clinical",body:"Planning to test the prototype in clinical settings on auditory impared.",img:"/assets/logos/medical.svg"},{name:"Sensory Enhancement",username:"@Feature",body:"Checking for enhanced listening sound waves beyond human capabilities.",img:"https://robohash.org/dave"},{name:"User Experience",username:"@UX_Design",body:"Designing user-friendly interfaces for the neuro-steered headphones.",img:"https://robohash.org/eve"}],tfe=()=>H.jsx("div",{className:"w-full",children:H.jsx(Que,{data:efe})});function nfe({className:n,reverse:e=!1,pauseOnHover:t=!1,children:i,vertical:s=!1,repeat:r=4,...a}){return H.jsx("div",{...a,className:Xv(`group flex overflow-hidden p-2 [--duration:40s] [--gap:1rem] [gap:var(--gap)] ${s?"flex-col":"flex-row"}`,n),children:Array(r).fill(0).map((l,c)=>H.jsx("div",{className:Xv("flex shrink-0 justify-around [gap:var(--gap)]",s?"animate-marquee-vertical flex-col":"animate-marquee flex-row",t&&"group-hover:[animation-play-state:paused]",e&&"[animation-direction:reverse]"),children:i},c))})}const ife=WO.slice(0,WO.length/2),sfe=({img:n,name:e,username:t,body:i})=>H.jsxs("figure",{className:Xv("relative h-full w-64 cursor-pointer overflow-hidden rounded-xl border p-4 border-gray-50/[.1] bg-gradient-to-r bg-indigo to-storm hover:bg-royal hover-animation"),children:[H.jsxs("div",{className:"flex flex-row items-center gap-2",children:[H.jsx("img",{className:"rounded-full bg-white/10",width:"32",height:"32",alt:"",src:n}),H.jsxs("div",{className:"flex flex-col",children:[H.jsx("figcaption",{className:"text-sm font-medium text-white",children:e}),H.jsx("p",{className:"text-xs font-medium text-white/40",children:t})]})]}),H.jsx("blockquote",{className:"mt-2 text-sm",children:i})]});function rfe(){return H.jsxs("div",{className:"items-start mt-25 md:mt-35 c-space",children:[H.jsx("h2",{className:"text-heading",children:"Next Steps"}),H.jsxs("div",{className:"relative flex flex-col items-center justify-center w-full mt-12 overflow-hidden",children:[H.jsx(nfe,{pauseOnHover:!0,className:"[--duration:20s]",children:ife.map(n=>H.jsx(sfe,{...n},n.username))}),H.jsx("div",{className:"absolute inset-y-0 left-0 w-1/4 pointer-events-none bg-gradient-to-r from-primary"}),H.jsx("div",{className:"absolute inset-y-0 right-0 w-1/4 pointer-events-none bg-gradient-to-l from-primary"})]})]})}class Ey{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const afe=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},ur={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:afe()},n2=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},ofe=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=n2(n);ur.publicKey=t.publicKey,ur.blockHeadless=t.blockHeadless,ur.storageProvider=t.storageProvider,ur.blockList=t.blockList,ur.limitRate=t.limitRate,ur.origin=t.origin||e},QH=async(n,e,t={})=>{const i=await fetch(ur.origin+n,{method:"POST",headers:t,body:e}),s=await i.text(),r=new Ey(i.status,s);if(i.ok)return r;throw r},$H=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},lfe=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},e5=n=>n.webdriver||!n.languages||n.languages.length===0,t5=()=>new Ey(451,"Unavailable For Headless Browser"),cfe=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},ufe=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},ffe=(n,e)=>n instanceof FormData?n.get(e):n[e],n5=(n,e)=>{if(ufe(n))return!1;cfe(n.list,n.watchVariable);const t=ffe(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},i5=()=>new Ey(403,"Forbidden"),hfe=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},dfe=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},s5=async(n,e,t)=>{if(!e.throttle||!t)return!1;hfe(e.throttle,e.id);const i=e.id||n;return await dfe(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},r5=()=>new Ey(429,"Too Many Requests"),pfe=async(n,e,t,i)=>{const s=n2(i),r=s.publicKey||ur.publicKey,a=s.blockHeadless||ur.blockHeadless,l=s.storageProvider||ur.storageProvider,c={...ur.blockList,...s.blockList},f={...ur.limitRate,...s.limitRate};return a&&e5(navigator)?Promise.reject(t5()):($H(r,n,e),lfe(t),t&&n5(c,t)?Promise.reject(i5()):await s5(location.pathname,f,l)?Promise.reject(r5()):QH("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:r,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},mfe=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},gfe=n=>typeof n=="string"?document.querySelector(n):n,vfe=async(n,e,t,i)=>{const s=n2(i),r=s.publicKey||ur.publicKey,a=s.blockHeadless||ur.blockHeadless,l=ur.storageProvider||s.storageProvider,c={...ur.blockList,...s.blockList},f={...ur.limitRate,...s.limitRate};if(a&&e5(navigator))return Promise.reject(t5());const p=gfe(t);$H(r,n,e),mfe(p);const g=new FormData(p);return n5(c,g)?Promise.reject(i5()):await s5(location.pathname,f,l)?Promise.reject(r5()):(g.append("lib_version","4.4.1"),g.append("service_id",n),g.append("template_id",e),g.append("user_id",r),QH("/api/v1.0/email/send-form",g))},yfe={init:ofe,send:pfe,sendForm:vfe,EmailJSResponseStatus:Ey},xfe=({type:n,text:e})=>{const t={hidden:{opacity:0,y:50,scale:.8},visible:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.8}};return H.jsx(GV,{children:H.jsx(XP.div,{className:"fixed z-50 flex items-center justify-center bottom-5 right-5",initial:"hidden",animate:"visible",exit:"exit",variants:t,transition:{duration:.3,ease:"easeInOut"},children:H.jsxs("div",{className:`p-2 ${n==="danger"?"bg-red-800":"bg-royal"} items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex rounded-md p-5`,children:[H.jsx("p",{className:`flex rounded-full ${n==="danger"?"bg-red-500":"bg-lavender"} uppercase px-2 py-1 text-xs font-semibold mr-3`,children:n==="danger"?"Failed":"Success"}),H.jsx("p",{className:"mr-2 text-left",children:e})]})})})};class bfe extends Oi{constructor(){super({uniforms:{time:{value:0},resolution:{value:new ze},mousePosition:{value:new ze(.5,.5)},colorIntensity:{value:2}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform float time;
        uniform vec2 resolution;
        uniform vec2 mousePosition;
        uniform float colorIntensity;
        varying vec2 vUv;

        #define S(a, b, t) smoothstep(a, b, t)
        #define NUM_LAYERS 4.

        float N21(vec2 p) {
          vec3 a = fract(vec3(p.xyx) * vec3(613.897, 553.453, 80.098));
          a += dot(a, a.yzx + 88.76);
          return fract((a.x + a.y) * a.z);
        }

        vec2 GetPos(vec2 id, vec2 offs, float t) {
          float n = N21(id+offs);
          float n1 = fract(n*0.7);
          float n2 = fract(n*79.7);
          float a = t+n;
          return offs + vec2(sin(a*n1), cos(a*n2))*0.5;
        }

        float GetT(vec2 ro, vec2 rd, vec2 p) {
          return dot(p-ro, rd); 
        }

        float LineDist(vec3 a, vec3 b, vec3 p) {
          return length(cross(b-a, p-a))/length(p-a);
        }

        float df_line(in vec2 a, in vec2 b, in vec2 p) {
          vec2 pa = p - a, ba = b - a;
          float h = clamp(dot(pa,ba) / dot(ba,ba), 0., 1.);	
          return length(pa - ba * h);
        }

        float line(vec2 a, vec2 b, vec2 uv) {
          float r1 = 0.002;
          float r2 = .0001;
          
          float d = df_line(a, b, uv);
          float d2 = length(a-b);
          float fade = S(0.005, .05, d2);
          
          fade += S(.0005, .0002, abs(d2-.025));
          return S(r1, r2, d)*fade;
        }

        float NetLayer(vec2 st, float n, float t) {
          vec2 id = floor(st)+n;

          st = fract(st)-.5;
        
          vec2 p[9];
          int i=0;
          for(float y=-1.; y<=1.; y++) {
            for(float x=-1.; x<=1.; x++) {
                p[i++] = GetPos(id, vec2(x,y), t);
            }
          }
          
          float m = 0.;
          float sparkle = 0.;
          
          for(int i=0; i<9; i++) {
            m += line(p[4], p[i], st);

            float d = length(st-p[i]);

            float s = (.002/(d*d));
            s *= S(1., .1, d);
            float pulse = sin((fract(p[i].x)+fract(p[i].y)+t)*5.)*.4+.6;
            pulse = pow(pulse, 20.);

            s *= pulse;
            sparkle += s;
          }
          
          m += line(p[1], p[3], st);
          m += line(p[1], p[5], st);
          m += line(p[7], p[5], st);
          m += line(p[7], p[3], st);
          
          float sPhase = (sin(t+n)+sin(t*.1))*.25+.5;
          sPhase += pow(sin(t*.1)*.5+.5, 50.)*5.;
          m += sparkle*sPhase;
          
          return m;
        }

        void main() {
          vec2 uv = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;
          uv.x *= resolution.x / resolution.y; // Correct for aspect ratio
          
          vec2 mouse = mousePosition * 2.0 - 1.0; // Normalize mouse position
          
          float t = time * 0.5;
          
          float s = sin(t * 0.2);
          float c = cos(t * 0.2);
          mat2 rot = mat2(c, -s, s, c);
          vec2 st = uv * rot;
          mouse = mouse * rot * 0.3;
          
          float m = 0.;
          for(float i=0.; i<1.; i+=1./NUM_LAYERS) {
            float z = fract(t*0.2+i);
            float size = mix(15., 1.5, z);
            float fade = S(0., .3, z) * S(1., .7, z);
            
            m += fade * NetLayer(st*size-mouse*z, i, time * 0.5);
          }
          
          vec3 baseCol = vec3(s * 0.5 + 0.5, cos(t*0.1) * 0.5 + 0.5, -sin(t*0.14) * 0.5 + 0.5) * 0.2 + 0.1;
          baseCol = mix(baseCol, vec3(0.3, 0.4, 1.0), 0.5); // Add more blue shade for neural network feel
          
          vec3 col = baseCol * m * colorIntensity;
          
          // Add subtle glow effect
          float glow = -uv.y * 0.4;
          col += baseCol * glow;
          
          // Vignette effect
          col *= 1.0 - length(uv * vec2(0.8, 1.2)) * 0.6;
          
          gl_FragColor = vec4(col, m * 0.75 + 0.2);
        }
      `,transparent:!0,depthWrite:!1})}}Dd({NeuralNetworkMaterial:bfe});function Afe(){const n=z.useRef(),{size:e}=Ni(),[t,i]=z.useState([.5,.5]);return z.useEffect(()=>{function s(r){i([r.clientX/window.innerWidth,1-r.clientY/window.innerHeight])}return window.addEventListener("mousemove",s),()=>window.removeEventListener("mousemove",s)},[]),su(s=>{n.current&&(n.current.uniforms.time.value=s.clock.elapsedTime,n.current.uniforms.resolution.value.set(e.width,e.height),n.current.uniforms.mousePosition.value.set(t[0],t[1]))}),H.jsxs("mesh",{children:[H.jsx("planeGeometry",{args:[2,2]}),H.jsx("neuralNetworkMaterial",{ref:n})]})}const Sfe=({className:n="",...e})=>H.jsx("div",{className:Xv("pointer-events-none",n),"aria-hidden":"true",...e,style:{width:"100%",height:"100%",...e.style},children:H.jsx(jS,{camera:{position:[0,0,1]},gl:{antialias:!1,alpha:!0,powerPreference:"high-performance"},children:H.jsx(Afe,{})})}),_fe=()=>{const[n,e]=z.useState({name:"",email:"",message:""}),[t,i]=z.useState(!1),[s,r]=z.useState(!1),[a,l]=z.useState("success"),[c,f]=z.useState(""),p=x=>{e({...n,[x.target.name]:x.target.value})},g=(x,A)=>{l(x),f(A),r(!0),setTimeout(()=>{r(!1)},5e3)},v=async x=>{x.preventDefault(),i(!0);try{console.log("From submitted:",n),await yfe.send("service_o9h041e","template_597wxpj",{from_name:n.name,to_name:"Puneet Lagoo",from_email:n.email,to_email:"puneetkumarlagoo@gmail.com",message:n.message},"w1fHeEx98lFyorobK"),i(!1),e({name:"",email:"",message:""}),g("success","You message has been sent!")}catch(A){i(!1),console.log(A),g("danger","Somthing went wrong!")}};return H.jsxs("section",{id:"contact",className:"relative flex items-center c-space section-spacing",children:[H.jsx(Sfe,{className:"absolute inset-0 -z-50",quantity:100,ease:80,color:"#ffffff",refresh:!0}),s&&H.jsx(xfe,{type:a,text:c}),H.jsxs("div",{className:"flex flex-col items-center justify-center max-w-md p-5 mx-auto border border-white/10 rounded-2xl bg-primary",children:[H.jsxs("div",{className:"flex flex-col items-start w-full gap-5 mb-10",children:[H.jsx("h2",{className:"text-heading",children:"Want to Collaborate?"}),H.jsx("p",{className:"font-normal text-neutral-400",children:"Whether you're a musician, researcher or a venture capitalist, I'd love to hear from you! Feel free to reach out with any questions, ideas, or opportunities."})]}),H.jsxs("form",{className:"w-full",onSubmit:v,children:[H.jsx("div",{className:"mb-5",children:H.jsx("input",{id:"name",name:"name",type:"text",className:"field-input field-input-focus",placeholder:"Full Name",autoComplete:"name",value:n.name,onChange:p,required:!0})}),H.jsx("div",{className:"mb-5",children:H.jsx("input",{id:"email",name:"email",type:"email",className:"field-input field-input-focus",placeholder:"Email",autoComplete:"email",value:n.email,onChange:p,required:!0})}),H.jsx("div",{className:"mb-5",children:H.jsx("textarea",{id:"message",name:"message",type:"text",rows:"4",className:"field-input field-input-focus",placeholder:"Share your thoughts...",autoComplete:"message",value:n.message,onChange:p,required:!0})}),H.jsx("button",{type:"submit",className:"w-full px-1 py-3 text-lg text-center rounded-md cursor-pointer bg-radial from-lavender to-royal hover-animation",children:t?"Sending...":"Send"})]})]})]})},Mfe=()=>H.jsxs("section",{className:"flex flex-wrap items-center justify-between gap-5 pb-3 text-sm text-neutral-400 c-space",children:[H.jsx("div",{className:"mb-4 bg-gradient-to-r from-transparent via-neutral-700 to-transparent h-[1px] w-full"}),H.jsxs("div",{className:"flex gap-2",children:[H.jsx("p",{children:"Terms & Conditions"}),H.jsx("p",{children:"|"}),H.jsx("p",{children:"Privacy Policy"})]}),H.jsx("div",{className:"flex gap-3",children:$ue.map((n,e)=>H.jsx("a",{href:n.href,children:H.jsx("img",{src:n.icon,className:"w-5 h-5",alt:n.name})},e))}),H.jsx("p",{children:"© 2025 Neuroxones. All rights reserved."})]});function a5(n){const e=z.useRef(),{nodes:t,materials:i,animations:s}=ra("/models/bird_orange.glb"),{actions:r}=YR(s,e);return z.useEffect(()=>{if(n.playAnimation&&r&&Object.keys(r).length>0){const a=Object.keys(r)[0],l=r[a];if(l)return l.reset().fadeIn(.5).play(),()=>l.fadeOut(.5)}},[n.playAnimation,r]),H.jsx("group",{ref:e,...n,dispose:null,children:H.jsx("group",{name:"Sketchfab_Scene",children:H.jsx("group",{name:"Sketchfab_model",rotation:[-Math.PI/2,0,0],scale:46.683,children:H.jsx("group",{name:"bfb1ea86655f4c4ab4c6cbbb449cedf4fbx",rotation:[Math.PI/2,0,0],scale:.01,children:H.jsx("group",{name:"Object_2",children:H.jsx("group",{name:"RootNode",children:H.jsxs("group",{name:"BirdOrange_all",children:[H.jsx("group",{name:"Main",position:[-.083,0,.451],rotation:[0,-.074,0],children:H.jsxs("group",{name:"Object_6",children:[H.jsx("primitive",{object:t._rootJoint}),H.jsx("skinnedMesh",{name:"Object_51",geometry:t.Object_51.geometry,material:i.BirdOrange_LMB,skeleton:t.Object_51.skeleton}),H.jsx("group",{name:"Object_50"})]})}),H.jsx("group",{name:"Geometry",children:H.jsx("group",{name:"BirdOrange"})})]})})})})})})})}a5.propTypes={playAnimation:wt.bool,scale:wt.oneOfType([wt.number,wt.arrayOf(wt.number)]),position:wt.arrayOf(wt.number)};ra.preload("/models/bird_orange.glb");ra.preload("/models/cat.glb");ra.preload("/models/sign.glb");const o5=({activeAudioSource:n,audioRefs:e})=>{const t=z.useRef(null),i=z.useRef(null),s=z.useRef(null);return z.useEffect(()=>{if(!n||!t.current||!e){console.log("Skipping visualization:",{activeAudioSource:n,hasCanvas:!!t.current,hasAudioRefs:!!e});return}let r;const a=n.toLowerCase();if(e[a])r=e[a],console.log(`Found audio element for ${a}:`,!!r);else{console.warn(`No audio element found for source: ${a}`);return}if(!(r!=null&&r.analyzer)){console.warn("Audio element does not have an analyzer node:",n);return}console.log(`Analyzer node found for ${n}:`,!!r.analyzer),s.current=r.analyzer;const l=t.current,c=l.getContext("2d"),f=()=>{l.width=l.clientWidth,l.height=l.clientHeight};f(),window.addEventListener("resize",f);const p=()=>{if(!s.current)return;const g=s.current.frequencyBinCount,v=new Uint8Array(g);try{s.current.getByteFrequencyData(v)}catch(_){console.error("Error getting frequency data:",_);return}c.clearRect(0,0,l.width,l.height);const x=l.width/g*2.5;let A=0,M;switch(n.toLowerCase()){case"birds":M="rgba(255, 212, 59, 0.8)";break;case"cat":M="rgba(255, 107, 107, 0.8)";break;case"sign":M="rgba(77, 171, 247, 0.8)";break;default:M="rgba(255, 255, 255, 0.8)"}for(let _=0;_<g;_++){const S=v[_]/255*l.height,w=c.createLinearGradient(0,l.height,0,0);w.addColorStop(0,"rgba(0, 0, 0, 0.2)"),w.addColorStop(1,M),c.fillStyle=w,c.fillRect(A,l.height-S,x,S),A+=x+1}i.current=requestAnimationFrame(p)};return p(),()=>{window.removeEventListener("resize",f),i.current&&(cancelAnimationFrame(i.current),i.current=null)}},[n,e]),H.jsxs("div",{className:`absolute bottom-4 left-4 right-4 h-16 sm:h-20 md:h-24 bg-black bg-opacity-30 backdrop-blur-sm rounded-xl overflow-hidden transition-all duration-500 shadow-lg ${n?"opacity-100 transform translate-y-0":"opacity-0 transform translate-y-8"}`,children:[H.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:H.jsx("div",{className:`text-xs sm:text-sm font-medium text-white opacity-50 ${n?"":"hidden"}`,children:n?`Visualizing ${n}`:""})}),H.jsx("canvas",{ref:t,className:"w-full h-full"})]})};o5.propTypes={activeAudioSource:wt.string,audioRefs:wt.object};Dd(V4);const l5=z.memo(sa.forwardRef((n,e)=>{const{onPositionChange:t,onBirdHover:i,onCatHover:s,onSignHover:r}=n,a=z.useRef(null),l=z.useRef(null),c=z.useRef(null),f=z.useRef(null),p=z.useRef(null),g=z.useRef({sign:null,birds:null,cat:null,traffic:null});z.useEffect(()=>{e&&(e.current=g)},[e]);const v=z.useRef(!1),x=z.useRef(!1),A=z.useRef(!1);z.useRef(!1);const M=z.useRef(!1),_=z.useCallback(()=>{if(!p.current||p.current.state==="closed"){const B=window.AudioContext||window.webkitAudioContext;p.current=new B}else p.current.state==="suspended"&&p.current.resume();return p.current},[]),S=z.useCallback(()=>{const B=p.current;B&&(B.state==="suspended"&&B.resume(),!M.current&&g.current&&(console.log("Starting audio playback..."),Object.entries(g.current).forEach(([N,L])=>{if(L!=null&&L.source&&L.source.buffer)try{L.gainNode.gain.value=.5,L.source.start(0),console.log(`Started ${N} audio source`)}catch(F){F.message.includes("start")||console.error(`Error starting ${N} audio:`,F)}else console.warn(`Audio source or buffer not ready for ${N}`)}),M.current=!0))},[]);z.useEffect(()=>()=>{var B,N;M.current&&Object.values(g.current).forEach(L=>{if(L!=null&&L.source)try{L.source.stop(),L.source.disconnect()}catch(F){F.message.includes("stop")||console.error("Error stopping audio:",F)}L!=null&&L.analyzer&&L.analyzer.disconnect(),L!=null&&L.panner&&L.panner.disconnect(),L!=null&&L.gainNode&&L.gainNode.disconnect()}),((B=p.current)==null?void 0:B.state)!=="closed"&&((N=p.current)==null||N.close())},[]);const w=z.useCallback(()=>{const B=p.current;if(!B)return console.warn("No audio context available for analyzer creation"),null;const N=B.createAnalyser();return N.fftSize=2048,N.smoothingTimeConstant=.8,N.minDecibels=-90,N.maxDecibels=-10,N},[]);z.useEffect(()=>{p.current&&g.current&&Object.entries(g.current).forEach(([B,N])=>{if(N!=null&&N.gainNode&&!N.analyzer){const L=w();L&&(N.gainNode.connect(L),N.analyzer=L,console.log(`Created analyzer for ${B} audio source`))}})},[w]),z.useEffect(()=>{(async()=>{try{const N=_(),L=async I=>{console.log(`Loading audio from ${I}`);const X=await fetch(I);if(!X.ok)throw new Error(`Failed to fetch audio file ${I}: ${X.status} ${X.statusText}`);const re=await X.arrayBuffer(),ee=await N.decodeAudioData(re),$=N.createBufferSource(),ae=N.createPanner(),j=N.createGain();$.buffer=ee,$.loop=!0,ae.panningModel="HRTF",ae.distanceModel="inverse",ae.refDistance=1,ae.maxDistance=1e4,ae.rolloffFactor=1,ae.coneInnerAngle=360,ae.coneOuterAngle=0,ae.coneOuterGain=0,j.gain.value=.5,$.connect(ae),ae.connect(j);const Q=w();return Q?(j.connect(Q),Q.connect(N.destination)):j.connect(N.destination),{source:$,panner:ae,gainNode:j,analyzer:Q,isStarted:!1}},F={sign:"/audio/sign.mp3",birds:"/audio/birds.mp3",cat:"/audio/cat.mp3",traffic:"/audio/traffic.mp3"},P=await Promise.all(Object.entries(F).map(async([I,X])=>{try{const re=await L(X);return console.log(`Successfully loaded audio for ${I}`),[I,re]}catch(re){return console.error(`Failed to load audio for ${I}:`,re),[I,null]}}));g.current=Object.fromEntries(P.filter(([I,X])=>X!==null));const U=()=>{console.log("First user interaction detected"),S(),document.removeEventListener("click",U),document.removeEventListener("touchstart",U)};document.addEventListener("click",U),document.addEventListener("touchstart",U)}catch(N){console.error("Failed to initialize audio:",N)}})()},[_,S,w]);const C=z.useCallback(B=>{var Y;if(!a.current)return;const N=a.current.getBoundingClientRect(),L=(B.clientX-N.left)/N.width,F=(B.clientY-N.top)/N.height,P={x:.5,y:.5},U={x:.7,y:.3},I={x:.3,y:.3},X=Math.sqrt(.5),re=Math.hypot(L-P.x,F-P.y),ee=Math.hypot(L-U.x,F-U.y),$=Math.hypot(L-I.x,F-I.y),ae=Math.max(0,1-re/X),j=Math.max(0,1-ee/X),Q=Math.max(0,1-$/X),J=.1,xe=1.5;if(g.current.sign){const oe=A.current?ae*xe:ae,be=v.current?j*xe:j,_e=x.current?Q*xe:Q;g.current.sign.gainNode.gain.value=g.current.sign.gainNode.gain.value*(1-J)+oe*J,g.current.birds.gainNode.gain.value=g.current.birds.gainNode.gain.value*(1-J)+be*J,g.current.cat.gainNode.gain.value=g.current.cat.gainNode.gain.value*(1-J)+_e*J,g.current.sign.panner.setPosition((L-.5)*2,(F-.5)*2,-.5),g.current.birds.panner.setPosition((L-U.x)*2,(F-U.y)*2,-.5),g.current.cat.panner.setPosition((L-I.x)*2,(F-I.y)*2,-.5),M.current?((Y=p.current)==null?void 0:Y.state)==="suspended"&&p.current.resume().catch(ue=>{console.error("Error resuming audio context:",ue),ue.message.includes("closed")&&(_(),S())}):((!p.current||p.current.state==="closed")&&_(),S())}Object.values(g.current).forEach(oe=>{oe!=null&&oe.gainNode&&oe.gainNode.gain.value>1&&(oe.gainNode.gain.value=1)}),t==null||t({x:L*2-1,y:-(F*2-1)})},[t,S,_]);return H.jsx("div",{className:"relative h-full w-full p-2 sm:p-4 md:p-6 lg:p-8",children:H.jsx("div",{className:"w-full h-full construction-border",children:H.jsxs("div",{ref:a,className:"w-full h-full bg-gray-900 rounded-lg relative cursor-crosshair overflow-hidden shadow-inner",onMouseMove:C,onTouchMove:B=>{if(B.touches&&B.touches[0]){const N=B.touches[0],L={clientX:N.clientX,clientY:N.clientY};C(L)}},children:[H.jsx("div",{className:"absolute w-full h-px bg-gray-700 opacity-70 top-1/2 transform -translate-y-1/2"}),H.jsx("div",{className:"absolute h-full w-px bg-gray-700 opacity-70 left-1/2 transform -translate-x-1/2"}),H.jsx("img",{ref:f,src:"/icons/buzz.svg",alt:"Sign",className:"absolute top-1/2 left-1/2 w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 lg:w-12 lg:h-12 transform -translate-x-1/2 -translate-y-1/2 filter drop-shadow-[0_0_8px_rgba(77,171,247,0.5)] transition-all duration-300 hover:scale-125 hover:drop-shadow-[0_0_15px_rgba(77,171,247,0.8)] active:scale-110 z-10",title:"Sign",onMouseEnter:()=>{var B;A.current=!0,r(!0),(B=f.current)==null||B.classList.add("animate-pulse")},onMouseLeave:()=>{var B;A.current=!1,r(!1),(B=f.current)==null||B.classList.remove("animate-pulse")}}),H.jsx("img",{ref:l,src:"/icons/bird.svg",alt:"Birds",className:"absolute top-[30%] left-[70%] w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 lg:w-12 lg:h-12 filter drop-shadow-[0_0_8px_rgba(255,212,59,0.5)] transition-all duration-300 hover:scale-125 hover:drop-shadow-[0_0_15px_rgba(255,212,59,0.8)] active:scale-110 z-10",title:"Birds",onMouseEnter:()=>{var B;v.current=!0,i(!0),(B=l.current)==null||B.classList.add("animate-pulse")},onMouseLeave:()=>{var B;v.current=!1,i(!1),(B=l.current)==null||B.classList.remove("animate-pulse")}}),H.jsx("img",{ref:c,src:"/icons/cat.svg",alt:"Cat",className:"absolute top-[30%] left-[30%] w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 lg:w-12 lg:h-12 filter drop-shadow-[0_0_8px_rgba(255,107,107,0.5)] transition-all duration-300 hover:scale-125 hover:drop-shadow-[0_0_15px_rgba(255,107,107,0.8)] active:scale-110 z-10",title:"Cat",onMouseEnter:()=>{var B;x.current=!0,s(!0),(B=c.current)==null||B.classList.add("animate-pulse")},onMouseLeave:()=>{var B;x.current=!1,s(!1),(B=c.current)==null||B.classList.remove("animate-pulse")}}),H.jsx("div",{className:`absolute top-1/2 left-1/2 w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-full bg-blue-500 opacity-10 transform -translate-x-1/2 -translate-y-1/2 transition-opacity duration-300 ${A.current?"opacity-20":""}`}),H.jsx("div",{className:`absolute top-[30%] left-[70%] w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-full bg-yellow-300 opacity-10 transform -translate-x-1/2 -translate-y-1/2 transition-opacity duration-300 ${v.current?"opacity-20":""}`}),H.jsx("div",{className:`absolute top-[30%] left-[30%] w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-full bg-red-400 opacity-10 transform -translate-x-1/2 -translate-y-1/2 transition-opacity duration-300 ${x.current?"opacity-20":""}`})]})})})}));l5.propTypes={onPositionChange:wt.func,onBirdHover:wt.func,onCatHover:wt.func,onSignHover:wt.func,ref:wt.shape({current:wt.object})};const c5=z.memo(({isBirdHovered:n,isCatHovered:e,isSignHovered:t})=>{const{camera:i,gl:s}=Ni();return z.useEffect(()=>{i&&(i.position.set(10,2,10),i.fov=60,i.updateProjectionMatrix()),s&&(s.shadowMap.enabled=!0,s.shadowMap.type=ym)},[i,s]),H.jsxs(H.Fragment,{children:[H.jsx("color",{attach:"background",args:["#9fbcea"]}),H.jsx("fog",{attach:"fog",args:["#9fbcea",10,50]}),H.jsxs(z.Suspense,{fallback:null,children:[H.jsx(sle,{files:"/assets/env/anime_art_style_japan_streets_with_cherry_blossom_.jpg",background:!0,blur:0}),H.jsx("hemisphereLight",{intensity:.3,groundColor:"#ffd9b3"}),H.jsx("directionalLight",{castShadow:!0,position:[4,1,10],intensity:7,children:H.jsx("orthographicCamera",{attach:"shadow-camera",args:[-10,10,10,-10,.1,100]})}),H.jsx("spotLight",{castShadow:!0,position:[-5,8,-5],penumbra:1,intensity:400,color:"#b3d9ff","shadow-camera-far":50}),H.jsx(d5,{isBirdHovered:n,isCatHovered:e,isSignHovered:t}),H.jsxs(lle,{position:[0,-.99,0],scale:100,frames:100,temporal:!0,opacity:.8,color:"#2a2a2a",blend:.7,children:[H.jsx(wO,{amount:8,radius:6,intensity:1.2,position:[3,5,3],bias:.001}),H.jsx(wO,{amount:4,radius:4,intensity:.8,position:[-5,7,-5],color:"#b3d9ff",bias:.001})]}),H.jsx(ule,{all:!0})]}),H.jsx(MH,{enableZoom:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/4,enableDamping:!0,dampingFactor:.05})]})});c5.propTypes={isBirdHovered:wt.bool,isCatHovered:wt.bool,isSignHovered:wt.bool};const YS=z.memo(({position:n,rotation:e,scale:t,children:i})=>{const s=z.useRef();return z.useEffect(()=>{s.current&&(n&&s.current.position.set(...n),e&&s.current.rotation.set(...e),t&&(Array.isArray(t)?s.current.scale.set(...t):s.current.scale.set(t,t,t)))},[n,e,t]),H.jsx("group",{ref:s,children:i})});YS.propTypes={children:wt.node,position:wt.arrayOf(wt.number),rotation:wt.arrayOf(wt.number),scale:wt.oneOfType([wt.number,wt.arrayOf(wt.number)])};const u5=z.memo(({isBirdHovered:n})=>H.jsx(YS,{position:[5.8,-.4,7.2],rotation:[0,Math.PI/6,0],children:H.jsx(a5,{scale:.32,playAnimation:n})}));u5.propTypes={isBirdHovered:wt.bool};const f5=z.memo(({isCatHovered:n})=>{const{scene:e,animations:t}=ra("/models/cat.glb"),i=z.useRef(),{actions:s}=YR(t,i);return z.useEffect(()=>{const r=s;return r&&Object.values(r).forEach(a=>{a&&typeof a.reset=="function"&&(n?a.reset().fadeIn(.2).play():a.fadeOut(.2))}),()=>{r&&Object.values(r).forEach(a=>{if(a&&typeof a.stop=="function")try{a.stop()}catch(l){console.warn("Error stopping cat animation:",l)}})}},[n,s]),H.jsx(YS,{position:[2.8,-.9,3.2],rotation:[0,-Math.PI/2,0],scale:.08,children:H.jsx("group",{ref:i,children:H.jsx("primitive",{object:e})})})});f5.propTypes={isCatHovered:wt.bool};const h5=z.memo(({isSignHovered:n})=>{const{scene:e,animations:t}=ra("/models/sign.glb"),i=z.useRef(),{actions:s}=YR(t,i);return z.useEffect(()=>{const r=s;return r&&Object.values(r).forEach(a=>{a&&typeof a.reset=="function"&&(n?a.reset().fadeIn(.2).play():a.fadeOut(.2))}),()=>{r&&Object.values(r).forEach(a=>{if(a&&typeof a.stop=="function")try{a.stop()}catch(l){console.warn("Error stopping sign animation:",l)}})}},[n,s]),H.jsx(YS,{position:[2.9,2.8,0],rotation:[0,Math.PI/3,0],scale:.8,children:H.jsx("group",{ref:i,children:H.jsx("primitive",{object:e})})})});h5.propTypes={isSignHovered:wt.bool};const d5=z.memo(({isBirdHovered:n,isCatHovered:e,isSignHovered:t})=>H.jsxs("group",{children:[H.jsx(u5,{isBirdHovered:n}),H.jsx(f5,{isCatHovered:e}),H.jsx(h5,{isSignHovered:t})]}));d5.propTypes={isBirdHovered:wt.bool,isCatHovered:wt.bool,isSignHovered:wt.bool};const Efe=()=>H.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-900",children:H.jsxs("div",{className:"flex flex-col items-center",children:[H.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),H.jsx("h2",{className:"text-xl text-white font-light",children:"Loading Neuro Experience"}),H.jsx("p",{className:"text-gray-400 mt-2",children:"Please wait while we tune your neural interface..."})]})}),Tfe=()=>{var x;const[n,e]=z.useState({x:0,y:0}),[t,i]=z.useState(!1),[s,r]=z.useState(!1),[a,l]=z.useState(!1),[c,f]=z.useState(!0),[p,g]=z.useState(null),v=z.useCallback((A,M)=>{M?g(A):p===A&&g(null)},[p]);return z.useEffect(()=>{const A=setTimeout(()=>{f(!1)},2e3);return()=>clearTimeout(A)},[]),c?H.jsx(Efe,{}):H.jsxs("div",{className:"h-full grid grid-rows-[1fr,auto]",children:[H.jsxs("div",{className:"relative w-full h-full",children:[H.jsx(jS,{shadows:!0,dpr:[1,2],camera:{position:[10,2,10],fov:60},children:H.jsx(c5,{isBirdHovered:t,isCatHovered:s,isSignHovered:a})}),p&&H.jsxs("div",{className:"absolute top-12 right-4 bg-black bg-opacity-70 text-white px-3 py-2 rounded-full text-sm font-medium flex items-center space-x-2 animate-[fadeIn_0.5s_ease-in-out]",children:[H.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full animate-[pulse_1.5s_infinite_ease-in-out]"}),H.jsxs("span",{children:["Focusing on: ",p]})]}),"        ",H.jsx(o5,{activeAudioSource:p,audioRefs:(x=window.audioRefs)==null?void 0:x.current})]}),"      ",H.jsx("div",{className:"h-[25vh] min-h-[200px] max-h-[250px] bg-gradient-to-b from-gray-900 to-gray-800 backdrop-blur-md",children:H.jsx(l5,{ref:A=>{A&&(window.audioRefs=A)},onPositionChange:e,onBirdHover:A=>{i(A),v("birds",A)},onCatHover:A=>{r(A),v("cat",A)},onSignHover:A=>{l(A),v("sign",A)}})})]})},Cfe=({title:n,sub:e})=>H.jsxs("div",{className:"flex flex-col items-center gap-5",children:[H.jsx("div",{className:"hero-badge",children:H.jsx("p",{children:e})}),H.jsx("div",{children:H.jsx("h1",{className:"font-semibold md:text-5xl text-3xl text-center",children:n})})]}),p5=({children:n})=>{const[e,t]=z.useState(!1),[i,s]=z.useState("");z.useEffect(()=>{const a=l=>{var c;console.error("Application Error:",l),!((c=l.message)!=null&&c.includes("AudioContext"))&&(s(l.message||"An unexpected error occurred"),t(!0))};return window.addEventListener("error",a),()=>window.removeEventListener("error",a)},[]);const r=z.useCallback(()=>{if(t(!1),s(""),window.audioContext){try{window.audioContext.close()}catch(a){console.error("Error closing audio context:",a)}delete window.audioContext}},[]);return e?H.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-900",children:H.jsxs("div",{className:"text-center text-white",children:[H.jsx("h2",{className:"text-xl mb-4",children:"Something went wrong"}),H.jsx("p",{className:"text-gray-400 mb-4",children:i}),H.jsx("button",{className:"px-4 py-2 bg-blue-500 rounded hover:bg-blue-600",onClick:r,children:"Try again"})]})}):n};p5.propTypes={children:wt.node.isRequired};const wfe=()=>(z.useEffect(()=>(window.scrollTo(0,0),()=>{if(window.audioContext){try{window.audioContext.close()}catch(n){console.error("Error closing audio context:",n)}delete window.audioContext}}),[]),H.jsx(p5,{children:H.jsxs("section",{className:"h-screen overflow-hidden bg-gradient-to-b from-gray-900 to-gray-800",children:[H.jsx("div",{className:"absolute top-12 left-4 z-10",children:H.jsxs(Jv,{to:"/",className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900/50 backdrop-blur-sm rounded-lg text-white hover:bg-gray-800 transition-all",children:[H.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:H.jsx("path",{d:"M15 10H5M5 10L10 15M5 10L10 5"})}),"Home"]})}),H.jsx("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 text-center z-10",children:H.jsx(Cfe,{})}),H.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-center text-sm text-gray-400 z-10",children:"Move cursor to focus on sound of interest"}),H.jsx("div",{className:"h-full",role:"main","aria-label":"3D Audio Experience",children:H.jsx(Tfe,{})})]})})),Rfe=()=>{const[n,e]=z.useState([]),[t,i]=z.useState([]);return z.useEffect(()=>{const s=Array.from({length:3},(a,l)=>({id:l,color:l===0?"#ff5e5e":l===1?"#5e9fff":"#5eff8f",amplitude:Math.random()*.3+.7,frequency:Math.random()*2+1,phase:Math.random()*Math.PI*2}));e(s);const r=setTimeout(()=>{i(s)},1e3);return()=>clearTimeout(r)},[]),H.jsxs("div",{className:"w-full h-40 flex flex-col items-center justify-center",children:[H.jsx("div",{className:"w-full h-12 relative mb-6",children:H.jsxs("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:[H.jsx("div",{className:"text-xs text-white opacity-50 absolute left-2",children:"Mixed Audio"}),n.map(s=>H.jsx(Mn.svg,{className:"absolute top-0 left-0 w-full h-full",viewBox:"0 0 100 20",initial:{opacity:0},animate:{opacity:.7},transition:{duration:1},children:H.jsx(Mn.path,{d:qO(s.amplitude,s.frequency,s.phase),fill:"none",stroke:s.color,strokeWidth:"0.7",strokeOpacity:"0.7",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5,ease:"easeInOut"}})},s.id))]})}),H.jsxs(Mn.div,{className:"w-16 h-10 bg-gradient-to-r from-purple-700 to-indigo-900 rounded-md flex items-center justify-center mb-4 relative",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.5,duration:.5},children:["        ",H.jsx(Mn.div,{className:"text-white text-xs font-bold",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:"DEMCUS"})]}),H.jsx("div",{className:"w-full flex justify-between",children:t.map((s,r)=>H.jsxs(Mn.div,{className:"w-[30%] h-8 relative",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1+r*.2,duration:.5},children:[H.jsxs("div",{className:"text-[8px] text-white opacity-50 absolute top-3 left-1",children:["Speaker ",r+1]}),H.jsx("svg",{className:"w-full h-full",viewBox:"0 0 100 20",children:H.jsx(Mn.path,{d:qO(s.amplitude,s.frequency,s.phase,.7),fill:"none",stroke:s.color,strokeWidth:"1",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{delay:1.2+r*.2,duration:1}})})]},s.id))})]})},qO=(n=1,e=1,t=0,i=1)=>{let s="M 0 10 ";for(let a=0;a<=100;a++){const l=a,c=10+Math.sin(a*.1*e+t)*5*n*i;s+=`L ${l} ${c} `}return s},Bfe=()=>{const[n,e]=z.useState([]),[t,i]=z.useState([]),[s,r]=z.useState([]);return z.useEffect(()=>{const a=Array.from({length:10},()=>Math.random()*.8+.2);e(a);const l=Array.from({length:3},()=>Array.from({length:3},()=>Math.random()*2-1));i(l);const c=setTimeout(()=>{const f=[Array.from({length:10},()=>Math.random()*.8+.2),Array.from({length:10},()=>Math.random()*.8+.2)];r(f)},1200);return()=>clearTimeout(c)},[]),H.jsxs("div",{className:"w-full h-40 flex flex-col items-center justify-center",children:[H.jsxs("div",{className:"relative w-full h-10 mb-3",children:[H.jsx("div",{className:"text-xs text-white opacity-50 absolute left-2 top-0",children:"Input"}),H.jsx("div",{className:"w-full h-full flex items-center justify-center",children:H.jsx(Mn.svg,{className:"w-full h-full",viewBox:"0 0 100 20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:H.jsx(Mn.path,{d:`M 0 10 ${n.map((a,l)=>`L ${l*10} ${10-a*8}`).join(" ")}`,fill:"none",stroke:"#ffb74d",strokeWidth:"1.5",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,ease:"easeInOut"}})})})]}),H.jsx("div",{className:"flex space-x-3 mb-3",children:t.map((a,l)=>H.jsx(Mn.div,{className:"w-8 h-8 bg-[#1a1c2e] rounded border border-indigo-900 grid grid-rows-3 grid-cols-3",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.5+l*.2,duration:.3},children:a.map((c,f)=>H.jsx(Mn.div,{className:"flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7+l*.2+f*.05},children:H.jsx("div",{className:`w-2 h-2 rounded-full ${c>0?"bg-green-500":"bg-red-500"}`,style:{opacity:Math.abs(c)}})},f))},l))}),H.jsx(Mn.div,{className:"text-xs text-[#3a29ff] font-bold mb-3 relative",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.5},children:"ConvTasNet"}),H.jsx("div",{className:"w-full flex justify-between",children:s.map((a,l)=>H.jsxs(Mn.div,{className:"w-[48%] h-8 relative",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1.5+l*.2,duration:.5},children:[H.jsxs("div",{className:"text-[8px] text-white opacity-50 absolute top-2 left-1",children:["Stream ",l+1]}),H.jsx("svg",{className:"w-full h-full",viewBox:"0 0 100 20",children:H.jsx(Mn.path,{d:`M 0 10 ${a.map((c,f)=>`L ${f*10} ${10-c*8}`).join(" ")}`,fill:"none",stroke:l===0?"#64b5f6":"#81c784",strokeWidth:"1.5",initial:{pathLength:0},animate:{pathLength:1},transition:{delay:1.6+l*.2,duration:1}})})]},l))})]})},Dfe=()=>{const[n,e]=z.useState(null),[t,i]=z.useState([]),[s,r]=z.useState([]);return z.useEffect(()=>{const a=Array.from({length:6},()=>({id:Math.random(),frequency:Math.random()*2+1,amplitude:Math.random()*.5+.5,phase:Math.random()*Math.PI*2}));i(a),r([{id:1,color:"#ff7043",name:"Speaker 1"},{id:2,color:"#42a5f5",name:"Speaker 2"},{id:3,color:"#66bb6a",name:"Speaker 3"}]);const l=setTimeout(()=>{e(2)},1500);return()=>clearTimeout(l)},[]),H.jsxs("div",{className:"w-full h-38 mt-2 flex flex-col items-center justify-center",children:[H.jsx("div",{className:"w-full flex justify-around mb-4",children:s.map((a,l)=>H.jsxs(Mn.div,{className:"flex flex-col items-center",initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:l*.2,duration:.5},children:[H.jsx(Mn.div,{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:a.color},animate:{scale:n===l?[1,1.2,1]:1,boxShadow:n===l?`0 0 8px 2px ${a.color}40`:"none"},transition:{repeat:n===l?1/0:0,duration:1.5},children:H.jsx(Mn.div,{className:"w-2 h-4 bg-white rounded-full",animate:{height:[4,2,6,3,5,2,4],width:[2,3,2,2,3,2,2]},transition:{repeat:1/0,duration:1.5,ease:"linear"}})}),H.jsx("div",{className:"text-[8px] text-white mt-1",children:a.name}),n===l&&H.jsx(Mn.div,{className:"text-[8px] text-white mt-1 font-bold",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"FOCUSED"})]},a.id))}),H.jsxs("div",{className:"relative w-full h-16 flex items-center justify-center",children:[H.jsxs(Mn.div,{className:"absolute w-16 h-10 rounded-t-full border-2 border-gray-300 border-b-0",initial:{opacity:0,scale:.8},animate:{opacity:.5,scale:1},transition:{delay:.5,duration:.5},children:[[0,1,2,3].map(a=>H.jsx(Mn.div,{className:"absolute w-1.5 h-1.5 bg-white rounded-full",style:{left:`${20+a*20}%`,top:a%2===0?"20%":"50%"},initial:{opacity:0},animate:{opacity:1},transition:{delay:.8+a*.1}},a)),n!==null&&H.jsx(Mn.svg,{className:"absolute top-0 left-0 w-full h-full",viewBox:"0 0 100 60",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.5},children:t.map((a,l)=>H.jsx(Mn.path,{d:Nfe(a.amplitude,a.frequency,a.phase,l),fill:"none",stroke:l<3?s[n].color:"#9e9e9e",strokeWidth:l<3?1:.5,strokeOpacity:l<3?.8:.3,initial:{pathLength:0},animate:{pathLength:1},transition:{delay:1.2+l*.1,duration:1}},a.id))})]}),n!==null&&H.jsx(Mn.svg,{className:"absolute top-0 left-0 w-full h-full",viewBox:"0 0 100 100",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.8,duration:.5},children:H.jsx(Mn.path,{d:`M 50 20 Q 50 10, ${n===0?20:n===1?50:80} 0`,fill:"none",stroke:s[n].color,strokeWidth:"1",strokeDasharray:"3,2",initial:{pathLength:0},animate:{pathLength:1},transition:{delay:2,duration:.8}})})]}),H.jsx(Mn.div,{className:"text-xs text-white font-bold mt-2 relative",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},children:"Auditory Attention Detection"})]})},Nfe=(n,e,t,i)=>{let s="";const a=10+i*8;for(let l=0;l<=100;l++){const c=l,f=a+Math.sin(l*.1*e+t)*4*n;l===0?s+=`M ${c} ${f} `:s+=`L ${c} ${f} `}return s},Lfe=()=>{const[n,e]=z.useState(0),[t,i]=z.useState([]),[s,r]=z.useState([]);return z.useEffect(()=>{const a=Array.from({length:16},(p,g)=>({id:g,x:10+g%4*25,y:10+Math.floor(g/4)*25,active:!1,path:Math.floor(g/8)}));i(a);const l=setTimeout(()=>{e(1),i(g=>g.map(v=>({...v,active:v.path===0})));const p=[];for(let g=0;g<7;g++)p.push({id:`intra-${g}`,x1:a[g].x,y1:a[g].y,x2:a[g+1].x,y2:a[g+1].y,type:"intra"});r(p)},800),c=setTimeout(()=>{e(2),i(g=>g.map(v=>({...v,active:v.path===1})));const p=[];for(let g=8;g<15;g++)p.push({id:`inter-${g}`,x1:a[g].x,y1:a[g].y,x2:a[g+1].x,y2:a[g+1].y,type:"inter"});r(p)},2e3),f=setTimeout(()=>{e(3),i(g=>g.map(v=>({...v,active:!0})));const p=[];for(let g=0;g<7;g++)p.push({id:`intra-${g}`,x1:a[g].x,y1:a[g].y,x2:a[g+1].x,y2:a[g+1].y,type:"intra"});for(let g=8;g<15;g++)p.push({id:`inter-${g}`,x1:a[g].x,y1:a[g].y,x2:a[g+1].x,y2:a[g+1].y,type:"inter"});for(let g=0;g<8;g++)p.push({id:`path-${g}`,x1:a[g].x,y1:a[g].y,x2:a[g+8].x,y2:a[g+8].y,type:"path"});r(p)},3200);return()=>{clearTimeout(l),clearTimeout(c),clearTimeout(f)}},[]),H.jsxs("div",{className:"w-full h-40 flex flex-col items-center justify-center",children:[H.jsxs("div",{className:"relative w-full h-32",children:[H.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[s.map(a=>H.jsx(Mn.line,{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,stroke:a.type==="intra"?"#ff5722":a.type==="inter"?"#2196f3":"#9c27b0",strokeWidth:"0.8",strokeOpacity:"0.6",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5}},a.id)),t.map(a=>H.jsx(Mn.circle,{cx:a.x,cy:a.y,r:"2.5",fill:a.path===0?"#ff5722":"#2196f3",initial:{scale:0},animate:{scale:a.active?1:.5,fillOpacity:a.active?1:.3},transition:{duration:.3}},a.id))]}),H.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-around",children:[H.jsx(Mn.div,{className:`text-[8px] font-bold ${n===1||n===3?"text-[#ff5722]":"text-gray-400"}`,animate:{opacity:n>=1?1:.3},children:"Intra-RNN"}),H.jsx(Mn.div,{className:`text-[8px] font-bold ${n===2||n===3?"text-[#2196f3]":"text-gray-400"}`,animate:{opacity:n>=2?1:.3},children:"Inter-RNN"}),H.jsx(Mn.div,{className:`text-[8px] font-bold ${n===3?"text-[#9c27b0]":"text-gray-400"}`,animate:{opacity:n>=3?1:.3},children:"Dual-Path"})]})]}),H.jsx(Mn.div,{className:"text-xs text-white font-bold",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"DPRNN: Dual-Path RNN"}),n===3&&H.jsx(Mn.div,{className:"mt-1 px-2 py-0.5 bg-green-900 rounded-sm text-[8px] text-green-300",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:3},children:"Computational Efficiency: 60% Power Savings"})]})},KO={1:4e3,2:4500,3:5e3,4:4200},Ofe=({algorithmId:n,shouldPlay:e=!0})=>{const[t,i]=z.useState(0);z.useEffect(()=>{e&&i(r=>r+1)},[n,e]);const s=()=>{switch(n){case 1:return H.jsx(Rfe,{},t);case 2:return H.jsx(Bfe,{},t);case 3:return H.jsx(Dfe,{},t);case 4:return H.jsx(Lfe,{},t);default:return H.jsx("div",{className:"w-full h-40 flex items-center justify-center text-white text-sm",children:"Select an algorithm"})}};return H.jsx("div",{className:"w-full h-40 bg-[#030412] rounded-md overflow-hidden",children:s()})};function Ufe({to:n,from:e=0,direction:t="up",delay:i=0,duration:s=2,className:r="",startWhen:a=!0,separator:l="",onStart:c,onEnd:f}){const p=z.useRef(null),g=lS(t==="down"?n:e),v=20+40*(1/s),x=100*(1/s),A=cZ(g,{damping:v,stiffness:x}),M=hZ(p,{once:!0,margin:"0px"});return z.useEffect(()=>{p.current&&(p.current.textContent=String(t==="down"?n:e))},[e,n,t]),z.useEffect(()=>{if(M&&a){typeof c=="function"&&c();const _=setTimeout(()=>{g.set(t==="down"?e:n)},i*1e3),S=setTimeout(()=>{typeof f=="function"&&f()},i*1e3+s*1e3);return()=>{clearTimeout(_),clearTimeout(S)}}},[M,a,g,t,e,n,i,c,f,s]),z.useEffect(()=>{const _=A.on("change",S=>{if(p.current){const w={useGrouping:!!l,minimumFractionDigits:0,maximumFractionDigits:0},C=Intl.NumberFormat("en-US",w).format(S.toFixed(0));p.current.textContent=l?C.replace(/,/g,l):C}});return()=>_()},[A,l]),H.jsx("span",{className:`${r}`,ref:p})}var m5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},JO=sa.createContext&&sa.createContext(m5),Pfe=["attr","size","title"];function Ife(n,e){if(n==null)return{};var t=Ffe(n,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Ffe(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function VA(){return VA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},VA.apply(this,arguments)}function ZO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function kA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZO(Object(t),!0).forEach(function(i){zfe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZO(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function zfe(n,e,t){return e=Hfe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hfe(n){var e=Gfe(n,"string");return typeof e=="symbol"?e:e+""}function Gfe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function g5(n){return n&&n.map((e,t)=>sa.createElement(e.tag,kA({key:t},e.attr),g5(e.child)))}function WS(n){return e=>sa.createElement(Vfe,VA({attr:kA({},n.attr)},e),g5(n.child))}function Vfe(n){var e=t=>{var{attr:i,size:s,title:r}=n,a=Ife(n,Pfe),l=s||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),sa.createElement("svg",VA({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:c,style:kA(kA({color:n.color||t.color},t.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),r&&sa.createElement("title",null,r),n.children)};return JO!==void 0?sa.createElement(JO.Consumer,null,t=>e(t)):e(m5)}function kfe(n){return WS({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]}]})(n)}function jfe(n){return WS({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 18 22 12 16 6"},child:[]},{tag:"polyline",attr:{points:"8 6 2 12 8 18"},child:[]}]})(n)}function Xfe(n){return WS({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(n)}function Yfe(n){return WS({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(n)}const Wfe=[{id:1,title:"Demcus",description:"Demucs is a deep learning model for music source separation, designed to separate vocals and instruments from audio tracks.",icon:H.jsx(kfe,{})},{id:2,title:"ConvTasNet",description:"ConvTasNet is a convolutional time-domain audio separation network that uses deep learning to separate audio sources in the time domain.",icon:H.jsx(jfe,{})},{id:3,title:"AAD",description:"AAD (Audio Attention Decoder) is a neural network model that uses attention mechanisms to separate audio sources based on their characteristics.",icon:H.jsx(Xfe,{})},{id:4,title:"DPRNN",description:"DPRNN (Dual Path Recurrent Neural Network) is a model that combines recurrent neural networks with dual-path processing to enhance audio source separation.",icon:H.jsx(Yfe,{})}],qfe=0,Kfe=500,QO=16,Jfe={type:"spring",stiffness:300,damping:30};function Zfe({items:n=Wfe,baseWidth:e=300,autoplay:t=!1,autoplayDelay:i=3e3,pauseOnHover:s=!1,loop:r=!1,round:a=!1,onSlideChange:l=null}){const f=e-32,p=f+QO,g=z.useMemo(()=>r?[...n,n[0]]:n,[n,r]),[v,x]=z.useState(0),A=lS(0),[M,_]=z.useState(!1),[S,w]=z.useState(!1),[C,B]=z.useState(!1),[N,L]=z.useState(null),F=z.useRef(null),P=z.useRef(null);z.useEffect(()=>{if(s&&P.current){const ee=P.current,$=()=>_(!0),ae=()=>_(!1);return ee.addEventListener("mouseenter",$),ee.addEventListener("mouseleave",ae),()=>{ee.removeEventListener("mouseenter",$),ee.removeEventListener("mouseleave",ae)}}},[s]),z.useEffect(()=>{const ee=g[v];ee&&["Demcus","ConvTasNet","AAD","DPRNN"].includes(ee.title)?(L(ee.id),B(!0)):(L(null),B(!1))},[v,g]),z.useEffect(()=>{if(t&&(!s||!M)){F.current&&clearTimeout(F.current);let ee=i;return N&&KO[N]&&(ee=KO[N]+1e3),F.current=setTimeout(()=>{x($=>{const ae=$===n.length-1&&r?$+1:$===g.length-1?r?0:$:$+1;return l&&ae!==$&&l(ae%n.length),ae})},ee),()=>{F.current&&clearTimeout(F.current)}}},[t,i,M,r,n.length,g.length,s,l,v,N]);const U=S?{duration:0}:Jfe,I=()=>{r&&v===g.length-1&&(w(!0),A.set(0),x(0),setTimeout(()=>w(!1),50))},X=(ee,$)=>{const ae=$.offset.x,j=$.velocity.x;let Q=v;ae<-0||j<-500?r&&v===n.length-1?Q=v+1:Q=Math.min(v+1,g.length-1):(ae>qfe||j>Kfe)&&(r&&v===0?Q=n.length-1:Q=Math.max(v-1,0)),x(Q),l&&Q!==v&&l(Q%n.length)},re=r?{}:{dragConstraints:{left:-p*(g.length-1),right:0}};return H.jsxs("div",{ref:P,className:`relative overflow-hidden p-4 ${a?"rounded-full border border-white":"rounded-[24px] border border-[#1a1a2e] bg-[#030412]"}`,style:{width:`${e}px`,...a&&{height:`${e}px`}},children:[H.jsx(Mn.div,{className:"flex",drag:"x",...re,style:{width:f,gap:`${QO}px`,perspective:1e3,perspectiveOrigin:`${v*p+f/2}px 50%`,x:A},onDragEnd:X,animate:{x:-(v*p)},transition:U,onAnimationComplete:I,children:g.map((ee,$)=>{const ae=[-($+1)*p,-$*p,-($-1)*p],Q=qb(A,ae,[90,0,-90],{clamp:!1}),J=$===v;return H.jsx(Mn.div,{className:`relative shrink-0 flex flex-col ${a?"items-center justify-center text-center bg-[#060606] border-0":"items-start justify-between bg-[#030412] border border-[#1a1a2e] rounded-[12px]"} overflow-hidden cursor-grab active:cursor-grabbing shadow-lg`,style:{width:f,height:a?f:"100%",rotateY:Q,...a&&{borderRadius:"50%"}},transition:U,children:H.jsxs("div",{className:"p-5 w-full",children:[H.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[H.jsx("div",{className:"font-black text-xl text-white",children:ee.title}),H.jsxs("div",{className:"text-xl text-white",children:["⚠️",H.jsx(Ufe,{from:0,to:ee.time,separator:",",direction:"up",duration:1,className:"count-up-text"}),"s"]})]}),ee.id&&["Demcus","ConvTasNet","AAD","DPRNN"].includes(ee.title)&&H.jsx("div",{className:"mt-4",children:H.jsx(z.Suspense,{fallback:H.jsx("div",{className:"w-full h-40 flex items-center justify-center text-white",children:"Loading animation..."}),children:H.jsx(Ofe,{algorithmId:ee.id,shouldPlay:J})})}),H.jsx("div",{className:"mt-4",children:H.jsx("p",{className:"text-sm text-white text-center leading-relaxed",children:ee.description})})]})},$)})}),H.jsx("div",{className:`flex w-full justify-center ${a?"absolute z-20 bottom-12 left-1/2 -translate-x-1/2":""}`,children:H.jsx("div",{className:"mt-4 flex w-[150px] justify-between px-8",children:n.map((ee,$)=>H.jsx(Mn.div,{className:`h-2 w-2 rounded-full cursor-pointer transition-colors duration-150 ${v%n.length===$?a?"bg-white":"bg-[#3a29ff]":a?"bg-[#555]":"bg-[rgba(58,41,255,0.3)]"}`,animate:{scale:v%n.length===$?1.2:1},onClick:()=>{x($),l&&l($)},transition:{duration:.15}},$))})})]})}const Qfe=()=>{const[n,e]=z.useState(0),t=[{title:"Demcus",description:"Speech Separation algorithm that isolates individual speakers",time:"50 seconds",id:1},{title:"ConvTasNet",description:"Time-domain Audio Separation Network to separate audio streams",time:"6 seconds",id:2},{title:"AAD",description:"Auditory Attention Detection precisely tracks neural activity to track focus",time:"12 seconds",id:3},{title:"DPRNN",description:"Dual-Path Recurrent Neural Network offers unprecedented precision in audio stream separation",time:"8 seconds",id:4}],i=[{title:"Demcus: Speech Separation",description:"Demcus employs deep neural networks to separate mixed audio streams, isolating individual speakers from complex soundscapes. It allows our system to create distinct audio channels that can be selectively enhanced based on user attention.",benefits:["Isolates individual speakers in crowded environments","Reduces background noise by up to 85%","Works with multiple overlapping voices"]},{title:"ConvTasNet: Real-time Processing",description:"ConvTasNet is our core audio separation technology, using time-domain convolutional networks for ultra-low latency performance. It enables natural listening experiences by processing audio faster than human perception can detect.",benefits:["Achieves separation in milliseconds","Adapts to changing acoustic environments","Preserves natural sound quality"]},{title:"AAD: Neural Tracking",description:"Auditory Attention Detection monitors neural signals in real-time to determine which audio stream you're focusing on. This breakthrough technology bridges the gap between brain activity and sound enhancement.",benefits:["Tracks attention shifts within 300ms","Works with non-invasive EEG sensors","Continuously improves with machine learning"]},{title:"DPRNN: Computational Efficiency",description:"Dual-Path Recurrent Neural Networks provide our platform with the computational efficiency needed for mobile applications. This algorithm optimizes resource usage while maintaining exceptional audio quality.",benefits:["Reduces power consumption by 60%","Enables all-day wearable use","Scales processing based on environmental complexity"]}],s=r=>{e(r)};return H.jsx("div",{className:"c-space max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:H.jsxs("div",{className:"py-16",children:[H.jsx("h2",{className:"text-4xl font-bold text-center mt-8 text-white",children:"Core Algorithms"}),H.jsxs("div",{className:"flex flex-col md:flex-row items-start justify-center gap-8 mt-24",children:[H.jsxs("div",{className:"max-w-lg bg-[#0a0b1a] border border-[#1a1a2e] rounded-xl p-8 shadow-xl",children:[H.jsx("h3",{className:"text-2xl font-bold mt-2 text-white",children:i[n].title}),H.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed",children:i[n].description}),H.jsx("h4",{className:"text-xl font-semibold mb-3 text-white",children:"Key Benefits:"}),H.jsx("ul",{className:"space-y-2",children:i[n].benefits.map((r,a)=>H.jsxs("li",{className:"flex items-start",children:[H.jsx("span",{className:"text-[#3a29ff] mr-2",children:"•"}),H.jsx("span",{className:"text-gray-300",children:r})]},a))})]}),H.jsx("div",{style:{width:"400px",height:"400px",position:"relative"},children:H.jsx(Zfe,{items:t,baseWidth:400,autoplay:!0,autoplayDelay:5e3,pauseOnHover:!0,loop:!0,round:!1,onSlideChange:s})})]})]})})},$fe=()=>H.jsxs(H.Fragment,{children:[H.jsx(Xue,{}),H.jsx(Zue,{}),H.jsx(Qfe,{}),H.jsx(tfe,{}),H.jsx(rfe,{}),H.jsx(_fe,{})]}),ehe=()=>H.jsx(CV,{children:H.jsxs("div",{className:"container mx-auto max-w-7xl",children:[H.jsx(E7,{}),H.jsxs(iV,{children:[H.jsx(FE,{path:"/",element:H.jsx($fe,{})}),H.jsx(FE,{path:"/simulation",element:H.jsx(wfe,{})})]}),H.jsx(Mfe,{})]})});fG.createRoot(document.getElementById("root")).render(H.jsx(z.StrictMode,{children:H.jsx(ehe,{})}));
